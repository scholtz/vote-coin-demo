{"version":3,"file":"js/613.7e02554b.js","mappings":"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","sources":["webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/node_modules/eventemitter3/index.js","webpack://vote-coin-demo/./node_modules/qrcode-generator/qrcode.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/lib/hi-base32.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/lib/sha512.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/lib/encoding.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/lib/constants.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/lib/errors.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/lib/attestation.js","webpack://vote-coin-demo/./node_modules/engine.io-parser/build/esm/commons.js","webpack://vote-coin-demo/./node_modules/engine.io-parser/build/esm/encodePacket.browser.js","webpack://vote-coin-demo/./node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","webpack://vote-coin-demo/./node_modules/engine.io-parser/build/esm/decodePacket.browser.js","webpack://vote-coin-demo/./node_modules/engine.io-parser/build/esm/index.js","webpack://vote-coin-demo/./node_modules/@socket.io/component-emitter/lib/esm/index.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/globals.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/util.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/contrib/parseqs.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/transport.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/transports/polling.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/contrib/has-cors.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/transports/polling-xhr.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/transports/websocket.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/transports/webtransport.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/transports/index.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/contrib/parseuri.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/socket.js","webpack://vote-coin-demo/./node_modules/engine.io-client/build/esm/index.js","webpack://vote-coin-demo/./node_modules/socket.io-client/build/esm/url.js","webpack://vote-coin-demo/./node_modules/socket.io-parser/build/esm/is-binary.js","webpack://vote-coin-demo/./node_modules/socket.io-parser/build/esm/binary.js","webpack://vote-coin-demo/./node_modules/socket.io-parser/build/esm/index.js","webpack://vote-coin-demo/./node_modules/socket.io-client/build/esm/on.js","webpack://vote-coin-demo/./node_modules/socket.io-client/build/esm/socket.js","webpack://vote-coin-demo/./node_modules/socket.io-client/build/esm/contrib/backo2.js","webpack://vote-coin-demo/./node_modules/socket.io-client/build/esm/manager.js","webpack://vote-coin-demo/./node_modules/socket.io-client/build/esm/index.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/modes.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/tools/getMode.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/tools/merge.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/tools/downloadURI.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/tools/calculateImageSize.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/tools/toDataUrl.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/errorCorrectionPercents.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/dotTypes.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/figures/dot/QRDot.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/cornerSquareTypes.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/figures/cornerSquare/QRCornerSquare.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/cornerDotTypes.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/figures/cornerDot/QRCornerDot.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/gradientTypes.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/shapeTypes.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/core/QRSVG.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/drawTypes.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/qrTypes.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/constants/errorCorrectionLevels.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/core/QROptions.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/tools/sanitizeOptions.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/core/QRCodeStyling.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/qr-code-styling/lib/index.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/node_modules/uuid/dist/esm-browser/rng.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/node_modules/uuid/dist/esm-browser/stringify.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/node_modules/uuid/dist/esm-browser/v7.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-client/lib/signal.js","webpack://vote-coin-demo/./node_modules/cbor-x/decode.js","webpack://vote-coin-demo/./node_modules/cbor-x/encode.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/provider/dist/esm/models/request.message.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/provider/dist/esm/models/sign.transactions.params.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/provider/dist/esm/api.js","webpack://vote-coin-demo/./node_modules/@algorandfoundation/liquid-auth-use-wallet-client/lib/LiquidAuthClient.js"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","//---------------------------------------------------------------------\n//\n// QR Code Generator for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n// The word 'QR Code' is registered trademark of\n// DENSO WAVE INCORPORATED\n//  http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n\nvar qrcode = function() {\n\n  //---------------------------------------------------------------------\n  // qrcode\n  //---------------------------------------------------------------------\n\n  /**\n   * qrcode\n   * @param typeNumber 1 to 40\n   * @param errorCorrectionLevel 'L','M','Q','H'\n   */\n  var qrcode = function(typeNumber, errorCorrectionLevel) {\n\n    var PAD0 = 0xEC;\n    var PAD1 = 0x11;\n\n    var _typeNumber = typeNumber;\n    var _errorCorrectionLevel = QRErrorCorrectionLevel[errorCorrectionLevel];\n    var _modules = null;\n    var _moduleCount = 0;\n    var _dataCache = null;\n    var _dataList = [];\n\n    var _this = {};\n\n    var makeImpl = function(test, maskPattern) {\n\n      _moduleCount = _typeNumber * 4 + 17;\n      _modules = function(moduleCount) {\n        var modules = new Array(moduleCount);\n        for (var row = 0; row < moduleCount; row += 1) {\n          modules[row] = new Array(moduleCount);\n          for (var col = 0; col < moduleCount; col += 1) {\n            modules[row][col] = null;\n          }\n        }\n        return modules;\n      }(_moduleCount);\n\n      setupPositionProbePattern(0, 0);\n      setupPositionProbePattern(_moduleCount - 7, 0);\n      setupPositionProbePattern(0, _moduleCount - 7);\n      setupPositionAdjustPattern();\n      setupTimingPattern();\n      setupTypeInfo(test, maskPattern);\n\n      if (_typeNumber >= 7) {\n        setupTypeNumber(test);\n      }\n\n      if (_dataCache == null) {\n        _dataCache = createData(_typeNumber, _errorCorrectionLevel, _dataList);\n      }\n\n      mapData(_dataCache, maskPattern);\n    };\n\n    var setupPositionProbePattern = function(row, col) {\n\n      for (var r = -1; r <= 7; r += 1) {\n\n        if (row + r <= -1 || _moduleCount <= row + r) continue;\n\n        for (var c = -1; c <= 7; c += 1) {\n\n          if (col + c <= -1 || _moduleCount <= col + c) continue;\n\n          if ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n              || (0 <= c && c <= 6 && (r == 0 || r == 6) )\n              || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n            _modules[row + r][col + c] = true;\n          } else {\n            _modules[row + r][col + c] = false;\n          }\n        }\n      }\n    };\n\n    var getBestMaskPattern = function() {\n\n      var minLostPoint = 0;\n      var pattern = 0;\n\n      for (var i = 0; i < 8; i += 1) {\n\n        makeImpl(true, i);\n\n        var lostPoint = QRUtil.getLostPoint(_this);\n\n        if (i == 0 || minLostPoint > lostPoint) {\n          minLostPoint = lostPoint;\n          pattern = i;\n        }\n      }\n\n      return pattern;\n    };\n\n    var setupTimingPattern = function() {\n\n      for (var r = 8; r < _moduleCount - 8; r += 1) {\n        if (_modules[r][6] != null) {\n          continue;\n        }\n        _modules[r][6] = (r % 2 == 0);\n      }\n\n      for (var c = 8; c < _moduleCount - 8; c += 1) {\n        if (_modules[6][c] != null) {\n          continue;\n        }\n        _modules[6][c] = (c % 2 == 0);\n      }\n    };\n\n    var setupPositionAdjustPattern = function() {\n\n      var pos = QRUtil.getPatternPosition(_typeNumber);\n\n      for (var i = 0; i < pos.length; i += 1) {\n\n        for (var j = 0; j < pos.length; j += 1) {\n\n          var row = pos[i];\n          var col = pos[j];\n\n          if (_modules[row][col] != null) {\n            continue;\n          }\n\n          for (var r = -2; r <= 2; r += 1) {\n\n            for (var c = -2; c <= 2; c += 1) {\n\n              if (r == -2 || r == 2 || c == -2 || c == 2\n                  || (r == 0 && c == 0) ) {\n                _modules[row + r][col + c] = true;\n              } else {\n                _modules[row + r][col + c] = false;\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var setupTypeNumber = function(test) {\n\n      var bits = QRUtil.getBCHTypeNumber(_typeNumber);\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;\n      }\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n      }\n    };\n\n    var setupTypeInfo = function(test, maskPattern) {\n\n      var data = (_errorCorrectionLevel << 3) | maskPattern;\n      var bits = QRUtil.getBCHTypeInfo(data);\n\n      // vertical\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 6) {\n          _modules[i][8] = mod;\n        } else if (i < 8) {\n          _modules[i + 1][8] = mod;\n        } else {\n          _modules[_moduleCount - 15 + i][8] = mod;\n        }\n      }\n\n      // horizontal\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 8) {\n          _modules[8][_moduleCount - i - 1] = mod;\n        } else if (i < 9) {\n          _modules[8][15 - i - 1 + 1] = mod;\n        } else {\n          _modules[8][15 - i - 1] = mod;\n        }\n      }\n\n      // fixed module\n      _modules[_moduleCount - 8][8] = (!test);\n    };\n\n    var mapData = function(data, maskPattern) {\n\n      var inc = -1;\n      var row = _moduleCount - 1;\n      var bitIndex = 7;\n      var byteIndex = 0;\n      var maskFunc = QRUtil.getMaskFunction(maskPattern);\n\n      for (var col = _moduleCount - 1; col > 0; col -= 2) {\n\n        if (col == 6) col -= 1;\n\n        while (true) {\n\n          for (var c = 0; c < 2; c += 1) {\n\n            if (_modules[row][col - c] == null) {\n\n              var dark = false;\n\n              if (byteIndex < data.length) {\n                dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n              }\n\n              var mask = maskFunc(row, col - c);\n\n              if (mask) {\n                dark = !dark;\n              }\n\n              _modules[row][col - c] = dark;\n              bitIndex -= 1;\n\n              if (bitIndex == -1) {\n                byteIndex += 1;\n                bitIndex = 7;\n              }\n            }\n          }\n\n          row += inc;\n\n          if (row < 0 || _moduleCount <= row) {\n            row -= inc;\n            inc = -inc;\n            break;\n          }\n        }\n      }\n    };\n\n    var createBytes = function(buffer, rsBlocks) {\n\n      var offset = 0;\n\n      var maxDcCount = 0;\n      var maxEcCount = 0;\n\n      var dcdata = new Array(rsBlocks.length);\n      var ecdata = new Array(rsBlocks.length);\n\n      for (var r = 0; r < rsBlocks.length; r += 1) {\n\n        var dcCount = rsBlocks[r].dataCount;\n        var ecCount = rsBlocks[r].totalCount - dcCount;\n\n        maxDcCount = Math.max(maxDcCount, dcCount);\n        maxEcCount = Math.max(maxEcCount, ecCount);\n\n        dcdata[r] = new Array(dcCount);\n\n        for (var i = 0; i < dcdata[r].length; i += 1) {\n          dcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];\n        }\n        offset += dcCount;\n\n        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n        var rawPoly = qrPolynomial(dcdata[r], rsPoly.getLength() - 1);\n\n        var modPoly = rawPoly.mod(rsPoly);\n        ecdata[r] = new Array(rsPoly.getLength() - 1);\n        for (var i = 0; i < ecdata[r].length; i += 1) {\n          var modIndex = i + modPoly.getLength() - ecdata[r].length;\n          ecdata[r][i] = (modIndex >= 0)? modPoly.getAt(modIndex) : 0;\n        }\n      }\n\n      var totalCodeCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalCodeCount += rsBlocks[i].totalCount;\n      }\n\n      var data = new Array(totalCodeCount);\n      var index = 0;\n\n      for (var i = 0; i < maxDcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < dcdata[r].length) {\n            data[index] = dcdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      for (var i = 0; i < maxEcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < ecdata[r].length) {\n            data[index] = ecdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      return data;\n    };\n\n    var createData = function(typeNumber, errorCorrectionLevel, dataList) {\n\n      var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectionLevel);\n\n      var buffer = qrBitBuffer();\n\n      for (var i = 0; i < dataList.length; i += 1) {\n        var data = dataList[i];\n        buffer.put(data.getMode(), 4);\n        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n        data.write(buffer);\n      }\n\n      // calc num max data.\n      var totalDataCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalDataCount += rsBlocks[i].dataCount;\n      }\n\n      if (buffer.getLengthInBits() > totalDataCount * 8) {\n        throw 'code length overflow. ('\n          + buffer.getLengthInBits()\n          + '>'\n          + totalDataCount * 8\n          + ')';\n      }\n\n      // end code\n      if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n        buffer.put(0, 4);\n      }\n\n      // padding\n      while (buffer.getLengthInBits() % 8 != 0) {\n        buffer.putBit(false);\n      }\n\n      // padding\n      while (true) {\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD0, 8);\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD1, 8);\n      }\n\n      return createBytes(buffer, rsBlocks);\n    };\n\n    _this.addData = function(data, mode) {\n\n      mode = mode || 'Byte';\n\n      var newData = null;\n\n      switch(mode) {\n      case 'Numeric' :\n        newData = qrNumber(data);\n        break;\n      case 'Alphanumeric' :\n        newData = qrAlphaNum(data);\n        break;\n      case 'Byte' :\n        newData = qr8BitByte(data);\n        break;\n      case 'Kanji' :\n        newData = qrKanji(data);\n        break;\n      default :\n        throw 'mode:' + mode;\n      }\n\n      _dataList.push(newData);\n      _dataCache = null;\n    };\n\n    _this.isDark = function(row, col) {\n      if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {\n        throw row + ',' + col;\n      }\n      return _modules[row][col];\n    };\n\n    _this.getModuleCount = function() {\n      return _moduleCount;\n    };\n\n    _this.make = function() {\n      if (_typeNumber < 1) {\n        var typeNumber = 1;\n\n        for (; typeNumber < 40; typeNumber++) {\n          var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, _errorCorrectionLevel);\n          var buffer = qrBitBuffer();\n\n          for (var i = 0; i < _dataList.length; i++) {\n            var data = _dataList[i];\n            buffer.put(data.getMode(), 4);\n            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n            data.write(buffer);\n          }\n\n          var totalDataCount = 0;\n          for (var i = 0; i < rsBlocks.length; i++) {\n            totalDataCount += rsBlocks[i].dataCount;\n          }\n\n          if (buffer.getLengthInBits() <= totalDataCount * 8) {\n            break;\n          }\n        }\n\n        _typeNumber = typeNumber;\n      }\n\n      makeImpl(false, getBestMaskPattern() );\n    };\n\n    _this.createTableTag = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var qrHtml = '';\n\n      qrHtml += '<table style=\"';\n      qrHtml += ' border-width: 0px; border-style: none;';\n      qrHtml += ' border-collapse: collapse;';\n      qrHtml += ' padding: 0px; margin: ' + margin + 'px;';\n      qrHtml += '\">';\n      qrHtml += '<tbody>';\n\n      for (var r = 0; r < _this.getModuleCount(); r += 1) {\n\n        qrHtml += '<tr>';\n\n        for (var c = 0; c < _this.getModuleCount(); c += 1) {\n          qrHtml += '<td style=\"';\n          qrHtml += ' border-width: 0px; border-style: none;';\n          qrHtml += ' border-collapse: collapse;';\n          qrHtml += ' padding: 0px; margin: 0px;';\n          qrHtml += ' width: ' + cellSize + 'px;';\n          qrHtml += ' height: ' + cellSize + 'px;';\n          qrHtml += ' background-color: ';\n          qrHtml += _this.isDark(r, c)? '#000000' : '#ffffff';\n          qrHtml += ';';\n          qrHtml += '\"/>';\n        }\n\n        qrHtml += '</tr>';\n      }\n\n      qrHtml += '</tbody>';\n      qrHtml += '</table>';\n\n      return qrHtml;\n    };\n\n    _this.createSvgTag = function(cellSize, margin, alt, title) {\n\n      var opts = {};\n      if (typeof arguments[0] == 'object') {\n        // Called by options.\n        opts = arguments[0];\n        // overwrite cellSize and margin.\n        cellSize = opts.cellSize;\n        margin = opts.margin;\n        alt = opts.alt;\n        title = opts.title;\n      }\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      // Compose alt property surrogate\n      alt = (typeof alt === 'string') ? {text: alt} : alt || {};\n      alt.text = alt.text || null;\n      alt.id = (alt.text) ? alt.id || 'qrcode-description' : null;\n\n      // Compose title property surrogate\n      title = (typeof title === 'string') ? {text: title} : title || {};\n      title.text = title.text || null;\n      title.id = (title.text) ? title.id || 'qrcode-title' : null;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var c, mc, r, mr, qrSvg='', rect;\n\n      rect = 'l' + cellSize + ',0 0,' + cellSize +\n        ' -' + cellSize + ',0 0,-' + cellSize + 'z ';\n\n      qrSvg += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"';\n      qrSvg += !opts.scalable ? ' width=\"' + size + 'px\" height=\"' + size + 'px\"' : '';\n      qrSvg += ' viewBox=\"0 0 ' + size + ' ' + size + '\" ';\n      qrSvg += ' preserveAspectRatio=\"xMinYMin meet\"';\n      qrSvg += (title.text || alt.text) ? ' role=\"img\" aria-labelledby=\"' +\n          escapeXml([title.id, alt.id].join(' ').trim() ) + '\"' : '';\n      qrSvg += '>';\n      qrSvg += (title.text) ? '<title id=\"' + escapeXml(title.id) + '\">' +\n          escapeXml(title.text) + '</title>' : '';\n      qrSvg += (alt.text) ? '<description id=\"' + escapeXml(alt.id) + '\">' +\n          escapeXml(alt.text) + '</description>' : '';\n      qrSvg += '<rect width=\"100%\" height=\"100%\" fill=\"white\" cx=\"0\" cy=\"0\"/>';\n      qrSvg += '<path d=\"';\n\n      for (r = 0; r < _this.getModuleCount(); r += 1) {\n        mr = r * cellSize + margin;\n        for (c = 0; c < _this.getModuleCount(); c += 1) {\n          if (_this.isDark(r, c) ) {\n            mc = c*cellSize+margin;\n            qrSvg += 'M' + mc + ',' + mr + rect;\n          }\n        }\n      }\n\n      qrSvg += '\" stroke=\"transparent\" fill=\"black\"/>';\n      qrSvg += '</svg>';\n\n      return qrSvg;\n    };\n\n    _this.createDataURL = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      return createDataURL(size, size, function(x, y) {\n        if (min <= x && x < max && min <= y && y < max) {\n          var c = Math.floor( (x - min) / cellSize);\n          var r = Math.floor( (y - min) / cellSize);\n          return _this.isDark(r, c)? 0 : 1;\n        } else {\n          return 1;\n        }\n      } );\n    };\n\n    _this.createImgTag = function(cellSize, margin, alt) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n\n      var img = '';\n      img += '<img';\n      img += '\\u0020src=\"';\n      img += _this.createDataURL(cellSize, margin);\n      img += '\"';\n      img += '\\u0020width=\"';\n      img += size;\n      img += '\"';\n      img += '\\u0020height=\"';\n      img += size;\n      img += '\"';\n      if (alt) {\n        img += '\\u0020alt=\"';\n        img += escapeXml(alt);\n        img += '\"';\n      }\n      img += '/>';\n\n      return img;\n    };\n\n    var escapeXml = function(s) {\n      var escaped = '';\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charAt(i);\n        switch(c) {\n        case '<': escaped += '&lt;'; break;\n        case '>': escaped += '&gt;'; break;\n        case '&': escaped += '&amp;'; break;\n        case '\"': escaped += '&quot;'; break;\n        default : escaped += c; break;\n        }\n      }\n      return escaped;\n    };\n\n    var _createHalfASCII = function(margin) {\n      var cellSize = 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r1, r2, p;\n\n      var blocks = {\n        '': '',\n        ' ': '',\n        ' ': '',\n        '  ': ' '\n      };\n\n      var blocksLastLineNoMargin = {\n        '': '',\n        ' ': '',\n        ' ': ' ',\n        '  ': ' '\n      };\n\n      var ascii = '';\n      for (y = 0; y < size; y += 2) {\n        r1 = Math.floor((y - min) / cellSize);\n        r2 = Math.floor((y + 1 - min) / cellSize);\n        for (x = 0; x < size; x += 1) {\n          p = '';\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r1, Math.floor((x - min) / cellSize))) {\n            p = ' ';\n          }\n\n          if (min <= x && x < max && min <= y+1 && y+1 < max && _this.isDark(r2, Math.floor((x - min) / cellSize))) {\n            p += ' ';\n          }\n          else {\n            p += '';\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          ascii += (margin < 1 && y+1 >= max) ? blocksLastLineNoMargin[p] : blocks[p];\n        }\n\n        ascii += '\\n';\n      }\n\n      if (size % 2 && margin > 0) {\n        return ascii.substring(0, ascii.length - size - 1) + Array(size+1).join('');\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.createASCII = function(cellSize, margin) {\n      cellSize = cellSize || 1;\n\n      if (cellSize < 2) {\n        return _createHalfASCII(margin);\n      }\n\n      cellSize -= 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r, p;\n\n      var white = Array(cellSize+1).join('');\n      var black = Array(cellSize+1).join('  ');\n\n      var ascii = '';\n      var line = '';\n      for (y = 0; y < size; y += 1) {\n        r = Math.floor( (y - min) / cellSize);\n        line = '';\n        for (x = 0; x < size; x += 1) {\n          p = 1;\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r, Math.floor((x - min) / cellSize))) {\n            p = 0;\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          line += p ? white : black;\n        }\n\n        for (r = 0; r < cellSize; r += 1) {\n          ascii += line + '\\n';\n        }\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.renderTo2dContext = function(context, cellSize) {\n      cellSize = cellSize || 2;\n      var length = _this.getModuleCount();\n      for (var row = 0; row < length; row++) {\n        for (var col = 0; col < length; col++) {\n          context.fillStyle = _this.isDark(row, col) ? 'black' : 'white';\n          context.fillRect(row * cellSize, col * cellSize, cellSize, cellSize);\n        }\n      }\n    }\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrcode.stringToBytes\n  //---------------------------------------------------------------------\n\n  qrcode.stringToBytesFuncs = {\n    'default' : function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        bytes.push(c & 0xff);\n      }\n      return bytes;\n    }\n  };\n\n  qrcode.stringToBytes = qrcode.stringToBytesFuncs['default'];\n\n  //---------------------------------------------------------------------\n  // qrcode.createStringToBytes\n  //---------------------------------------------------------------------\n\n  /**\n   * @param unicodeData base64 string of byte array.\n   * [16bit Unicode],[16bit Bytes], ...\n   * @param numChars\n   */\n  qrcode.createStringToBytes = function(unicodeData, numChars) {\n\n    // create conversion map.\n\n    var unicodeMap = function() {\n\n      var bin = base64DecodeInputStream(unicodeData);\n      var read = function() {\n        var b = bin.read();\n        if (b == -1) throw 'eof';\n        return b;\n      };\n\n      var count = 0;\n      var unicodeMap = {};\n      while (true) {\n        var b0 = bin.read();\n        if (b0 == -1) break;\n        var b1 = read();\n        var b2 = read();\n        var b3 = read();\n        var k = String.fromCharCode( (b0 << 8) | b1);\n        var v = (b2 << 8) | b3;\n        unicodeMap[k] = v;\n        count += 1;\n      }\n      if (count != numChars) {\n        throw count + ' != ' + numChars;\n      }\n\n      return unicodeMap;\n    }();\n\n    var unknownChar = '?'.charCodeAt(0);\n\n    return function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        if (c < 128) {\n          bytes.push(c);\n        } else {\n          var b = unicodeMap[s.charAt(i)];\n          if (typeof b == 'number') {\n            if ( (b & 0xff) == b) {\n              // 1byte\n              bytes.push(b);\n            } else {\n              // 2bytes\n              bytes.push(b >>> 8);\n              bytes.push(b & 0xff);\n            }\n          } else {\n            bytes.push(unknownChar);\n          }\n        }\n      }\n      return bytes;\n    };\n  };\n\n  //---------------------------------------------------------------------\n  // QRMode\n  //---------------------------------------------------------------------\n\n  var QRMode = {\n    MODE_NUMBER :    1 << 0,\n    MODE_ALPHA_NUM : 1 << 1,\n    MODE_8BIT_BYTE : 1 << 2,\n    MODE_KANJI :     1 << 3\n  };\n\n  //---------------------------------------------------------------------\n  // QRErrorCorrectionLevel\n  //---------------------------------------------------------------------\n\n  var QRErrorCorrectionLevel = {\n    L : 1,\n    M : 0,\n    Q : 3,\n    H : 2\n  };\n\n  //---------------------------------------------------------------------\n  // QRMaskPattern\n  //---------------------------------------------------------------------\n\n  var QRMaskPattern = {\n    PATTERN000 : 0,\n    PATTERN001 : 1,\n    PATTERN010 : 2,\n    PATTERN011 : 3,\n    PATTERN100 : 4,\n    PATTERN101 : 5,\n    PATTERN110 : 6,\n    PATTERN111 : 7\n  };\n\n  //---------------------------------------------------------------------\n  // QRUtil\n  //---------------------------------------------------------------------\n\n  var QRUtil = function() {\n\n    var PATTERN_POSITION_TABLE = [\n      [],\n      [6, 18],\n      [6, 22],\n      [6, 26],\n      [6, 30],\n      [6, 34],\n      [6, 22, 38],\n      [6, 24, 42],\n      [6, 26, 46],\n      [6, 28, 50],\n      [6, 30, 54],\n      [6, 32, 58],\n      [6, 34, 62],\n      [6, 26, 46, 66],\n      [6, 26, 48, 70],\n      [6, 26, 50, 74],\n      [6, 30, 54, 78],\n      [6, 30, 56, 82],\n      [6, 30, 58, 86],\n      [6, 34, 62, 90],\n      [6, 28, 50, 72, 94],\n      [6, 26, 50, 74, 98],\n      [6, 30, 54, 78, 102],\n      [6, 28, 54, 80, 106],\n      [6, 32, 58, 84, 110],\n      [6, 30, 58, 86, 114],\n      [6, 34, 62, 90, 118],\n      [6, 26, 50, 74, 98, 122],\n      [6, 30, 54, 78, 102, 126],\n      [6, 26, 52, 78, 104, 130],\n      [6, 30, 56, 82, 108, 134],\n      [6, 34, 60, 86, 112, 138],\n      [6, 30, 58, 86, 114, 142],\n      [6, 34, 62, 90, 118, 146],\n      [6, 30, 54, 78, 102, 126, 150],\n      [6, 24, 50, 76, 102, 128, 154],\n      [6, 28, 54, 80, 106, 132, 158],\n      [6, 32, 58, 84, 110, 136, 162],\n      [6, 26, 54, 82, 110, 138, 166],\n      [6, 30, 58, 86, 114, 142, 170]\n    ];\n    var G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0);\n    var G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0);\n    var G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1);\n\n    var _this = {};\n\n    var getBCHDigit = function(data) {\n      var digit = 0;\n      while (data != 0) {\n        digit += 1;\n        data >>>= 1;\n      }\n      return digit;\n    };\n\n    _this.getBCHTypeInfo = function(data) {\n      var d = data << 10;\n      while (getBCHDigit(d) - getBCHDigit(G15) >= 0) {\n        d ^= (G15 << (getBCHDigit(d) - getBCHDigit(G15) ) );\n      }\n      return ( (data << 10) | d) ^ G15_MASK;\n    };\n\n    _this.getBCHTypeNumber = function(data) {\n      var d = data << 12;\n      while (getBCHDigit(d) - getBCHDigit(G18) >= 0) {\n        d ^= (G18 << (getBCHDigit(d) - getBCHDigit(G18) ) );\n      }\n      return (data << 12) | d;\n    };\n\n    _this.getPatternPosition = function(typeNumber) {\n      return PATTERN_POSITION_TABLE[typeNumber - 1];\n    };\n\n    _this.getMaskFunction = function(maskPattern) {\n\n      switch (maskPattern) {\n\n      case QRMaskPattern.PATTERN000 :\n        return function(i, j) { return (i + j) % 2 == 0; };\n      case QRMaskPattern.PATTERN001 :\n        return function(i, j) { return i % 2 == 0; };\n      case QRMaskPattern.PATTERN010 :\n        return function(i, j) { return j % 3 == 0; };\n      case QRMaskPattern.PATTERN011 :\n        return function(i, j) { return (i + j) % 3 == 0; };\n      case QRMaskPattern.PATTERN100 :\n        return function(i, j) { return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0; };\n      case QRMaskPattern.PATTERN101 :\n        return function(i, j) { return (i * j) % 2 + (i * j) % 3 == 0; };\n      case QRMaskPattern.PATTERN110 :\n        return function(i, j) { return ( (i * j) % 2 + (i * j) % 3) % 2 == 0; };\n      case QRMaskPattern.PATTERN111 :\n        return function(i, j) { return ( (i * j) % 3 + (i + j) % 2) % 2 == 0; };\n\n      default :\n        throw 'bad maskPattern:' + maskPattern;\n      }\n    };\n\n    _this.getErrorCorrectPolynomial = function(errorCorrectLength) {\n      var a = qrPolynomial([1], 0);\n      for (var i = 0; i < errorCorrectLength; i += 1) {\n        a = a.multiply(qrPolynomial([1, QRMath.gexp(i)], 0) );\n      }\n      return a;\n    };\n\n    _this.getLengthInBits = function(mode, type) {\n\n      if (1 <= type && type < 10) {\n\n        // 1 - 9\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 10;\n        case QRMode.MODE_ALPHA_NUM : return 9;\n        case QRMode.MODE_8BIT_BYTE : return 8;\n        case QRMode.MODE_KANJI     : return 8;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 27) {\n\n        // 10 - 26\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 12;\n        case QRMode.MODE_ALPHA_NUM : return 11;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 10;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 41) {\n\n        // 27 - 40\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 14;\n        case QRMode.MODE_ALPHA_NUM : return 13;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 12;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else {\n        throw 'type:' + type;\n      }\n    };\n\n    _this.getLostPoint = function(qrcode) {\n\n      var moduleCount = qrcode.getModuleCount();\n\n      var lostPoint = 0;\n\n      // LEVEL1\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount; col += 1) {\n\n          var sameCount = 0;\n          var dark = qrcode.isDark(row, col);\n\n          for (var r = -1; r <= 1; r += 1) {\n\n            if (row + r < 0 || moduleCount <= row + r) {\n              continue;\n            }\n\n            for (var c = -1; c <= 1; c += 1) {\n\n              if (col + c < 0 || moduleCount <= col + c) {\n                continue;\n              }\n\n              if (r == 0 && c == 0) {\n                continue;\n              }\n\n              if (dark == qrcode.isDark(row + r, col + c) ) {\n                sameCount += 1;\n              }\n            }\n          }\n\n          if (sameCount > 5) {\n            lostPoint += (3 + sameCount - 5);\n          }\n        }\n      };\n\n      // LEVEL2\n\n      for (var row = 0; row < moduleCount - 1; row += 1) {\n        for (var col = 0; col < moduleCount - 1; col += 1) {\n          var count = 0;\n          if (qrcode.isDark(row, col) ) count += 1;\n          if (qrcode.isDark(row + 1, col) ) count += 1;\n          if (qrcode.isDark(row, col + 1) ) count += 1;\n          if (qrcode.isDark(row + 1, col + 1) ) count += 1;\n          if (count == 0 || count == 4) {\n            lostPoint += 3;\n          }\n        }\n      }\n\n      // LEVEL3\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount - 6; col += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row, col + 1)\n              &&  qrcode.isDark(row, col + 2)\n              &&  qrcode.isDark(row, col + 3)\n              &&  qrcode.isDark(row, col + 4)\n              && !qrcode.isDark(row, col + 5)\n              &&  qrcode.isDark(row, col + 6) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount - 6; row += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row + 1, col)\n              &&  qrcode.isDark(row + 2, col)\n              &&  qrcode.isDark(row + 3, col)\n              &&  qrcode.isDark(row + 4, col)\n              && !qrcode.isDark(row + 5, col)\n              &&  qrcode.isDark(row + 6, col) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      // LEVEL4\n\n      var darkCount = 0;\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount; row += 1) {\n          if (qrcode.isDark(row, col) ) {\n            darkCount += 1;\n          }\n        }\n      }\n\n      var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n      lostPoint += ratio * 10;\n\n      return lostPoint;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // QRMath\n  //---------------------------------------------------------------------\n\n  var QRMath = function() {\n\n    var EXP_TABLE = new Array(256);\n    var LOG_TABLE = new Array(256);\n\n    // initialize tables\n    for (var i = 0; i < 8; i += 1) {\n      EXP_TABLE[i] = 1 << i;\n    }\n    for (var i = 8; i < 256; i += 1) {\n      EXP_TABLE[i] = EXP_TABLE[i - 4]\n        ^ EXP_TABLE[i - 5]\n        ^ EXP_TABLE[i - 6]\n        ^ EXP_TABLE[i - 8];\n    }\n    for (var i = 0; i < 255; i += 1) {\n      LOG_TABLE[EXP_TABLE[i] ] = i;\n    }\n\n    var _this = {};\n\n    _this.glog = function(n) {\n\n      if (n < 1) {\n        throw 'glog(' + n + ')';\n      }\n\n      return LOG_TABLE[n];\n    };\n\n    _this.gexp = function(n) {\n\n      while (n < 0) {\n        n += 255;\n      }\n\n      while (n >= 256) {\n        n -= 255;\n      }\n\n      return EXP_TABLE[n];\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrPolynomial\n  //---------------------------------------------------------------------\n\n  function qrPolynomial(num, shift) {\n\n    if (typeof num.length == 'undefined') {\n      throw num.length + '/' + shift;\n    }\n\n    var _num = function() {\n      var offset = 0;\n      while (offset < num.length && num[offset] == 0) {\n        offset += 1;\n      }\n      var _num = new Array(num.length - offset + shift);\n      for (var i = 0; i < num.length - offset; i += 1) {\n        _num[i] = num[i + offset];\n      }\n      return _num;\n    }();\n\n    var _this = {};\n\n    _this.getAt = function(index) {\n      return _num[index];\n    };\n\n    _this.getLength = function() {\n      return _num.length;\n    };\n\n    _this.multiply = function(e) {\n\n      var num = new Array(_this.getLength() + e.getLength() - 1);\n\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        for (var j = 0; j < e.getLength(); j += 1) {\n          num[i + j] ^= QRMath.gexp(QRMath.glog(_this.getAt(i) ) + QRMath.glog(e.getAt(j) ) );\n        }\n      }\n\n      return qrPolynomial(num, 0);\n    };\n\n    _this.mod = function(e) {\n\n      if (_this.getLength() - e.getLength() < 0) {\n        return _this;\n      }\n\n      var ratio = QRMath.glog(_this.getAt(0) ) - QRMath.glog(e.getAt(0) );\n\n      var num = new Array(_this.getLength() );\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        num[i] = _this.getAt(i);\n      }\n\n      for (var i = 0; i < e.getLength(); i += 1) {\n        num[i] ^= QRMath.gexp(QRMath.glog(e.getAt(i) ) + ratio);\n      }\n\n      // recursive call\n      return qrPolynomial(num, 0).mod(e);\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // QRRSBlock\n  //---------------------------------------------------------------------\n\n  var QRRSBlock = function() {\n\n    var RS_BLOCK_TABLE = [\n\n      // L\n      // M\n      // Q\n      // H\n\n      // 1\n      [1, 26, 19],\n      [1, 26, 16],\n      [1, 26, 13],\n      [1, 26, 9],\n\n      // 2\n      [1, 44, 34],\n      [1, 44, 28],\n      [1, 44, 22],\n      [1, 44, 16],\n\n      // 3\n      [1, 70, 55],\n      [1, 70, 44],\n      [2, 35, 17],\n      [2, 35, 13],\n\n      // 4\n      [1, 100, 80],\n      [2, 50, 32],\n      [2, 50, 24],\n      [4, 25, 9],\n\n      // 5\n      [1, 134, 108],\n      [2, 67, 43],\n      [2, 33, 15, 2, 34, 16],\n      [2, 33, 11, 2, 34, 12],\n\n      // 6\n      [2, 86, 68],\n      [4, 43, 27],\n      [4, 43, 19],\n      [4, 43, 15],\n\n      // 7\n      [2, 98, 78],\n      [4, 49, 31],\n      [2, 32, 14, 4, 33, 15],\n      [4, 39, 13, 1, 40, 14],\n\n      // 8\n      [2, 121, 97],\n      [2, 60, 38, 2, 61, 39],\n      [4, 40, 18, 2, 41, 19],\n      [4, 40, 14, 2, 41, 15],\n\n      // 9\n      [2, 146, 116],\n      [3, 58, 36, 2, 59, 37],\n      [4, 36, 16, 4, 37, 17],\n      [4, 36, 12, 4, 37, 13],\n\n      // 10\n      [2, 86, 68, 2, 87, 69],\n      [4, 69, 43, 1, 70, 44],\n      [6, 43, 19, 2, 44, 20],\n      [6, 43, 15, 2, 44, 16],\n\n      // 11\n      [4, 101, 81],\n      [1, 80, 50, 4, 81, 51],\n      [4, 50, 22, 4, 51, 23],\n      [3, 36, 12, 8, 37, 13],\n\n      // 12\n      [2, 116, 92, 2, 117, 93],\n      [6, 58, 36, 2, 59, 37],\n      [4, 46, 20, 6, 47, 21],\n      [7, 42, 14, 4, 43, 15],\n\n      // 13\n      [4, 133, 107],\n      [8, 59, 37, 1, 60, 38],\n      [8, 44, 20, 4, 45, 21],\n      [12, 33, 11, 4, 34, 12],\n\n      // 14\n      [3, 145, 115, 1, 146, 116],\n      [4, 64, 40, 5, 65, 41],\n      [11, 36, 16, 5, 37, 17],\n      [11, 36, 12, 5, 37, 13],\n\n      // 15\n      [5, 109, 87, 1, 110, 88],\n      [5, 65, 41, 5, 66, 42],\n      [5, 54, 24, 7, 55, 25],\n      [11, 36, 12, 7, 37, 13],\n\n      // 16\n      [5, 122, 98, 1, 123, 99],\n      [7, 73, 45, 3, 74, 46],\n      [15, 43, 19, 2, 44, 20],\n      [3, 45, 15, 13, 46, 16],\n\n      // 17\n      [1, 135, 107, 5, 136, 108],\n      [10, 74, 46, 1, 75, 47],\n      [1, 50, 22, 15, 51, 23],\n      [2, 42, 14, 17, 43, 15],\n\n      // 18\n      [5, 150, 120, 1, 151, 121],\n      [9, 69, 43, 4, 70, 44],\n      [17, 50, 22, 1, 51, 23],\n      [2, 42, 14, 19, 43, 15],\n\n      // 19\n      [3, 141, 113, 4, 142, 114],\n      [3, 70, 44, 11, 71, 45],\n      [17, 47, 21, 4, 48, 22],\n      [9, 39, 13, 16, 40, 14],\n\n      // 20\n      [3, 135, 107, 5, 136, 108],\n      [3, 67, 41, 13, 68, 42],\n      [15, 54, 24, 5, 55, 25],\n      [15, 43, 15, 10, 44, 16],\n\n      // 21\n      [4, 144, 116, 4, 145, 117],\n      [17, 68, 42],\n      [17, 50, 22, 6, 51, 23],\n      [19, 46, 16, 6, 47, 17],\n\n      // 22\n      [2, 139, 111, 7, 140, 112],\n      [17, 74, 46],\n      [7, 54, 24, 16, 55, 25],\n      [34, 37, 13],\n\n      // 23\n      [4, 151, 121, 5, 152, 122],\n      [4, 75, 47, 14, 76, 48],\n      [11, 54, 24, 14, 55, 25],\n      [16, 45, 15, 14, 46, 16],\n\n      // 24\n      [6, 147, 117, 4, 148, 118],\n      [6, 73, 45, 14, 74, 46],\n      [11, 54, 24, 16, 55, 25],\n      [30, 46, 16, 2, 47, 17],\n\n      // 25\n      [8, 132, 106, 4, 133, 107],\n      [8, 75, 47, 13, 76, 48],\n      [7, 54, 24, 22, 55, 25],\n      [22, 45, 15, 13, 46, 16],\n\n      // 26\n      [10, 142, 114, 2, 143, 115],\n      [19, 74, 46, 4, 75, 47],\n      [28, 50, 22, 6, 51, 23],\n      [33, 46, 16, 4, 47, 17],\n\n      // 27\n      [8, 152, 122, 4, 153, 123],\n      [22, 73, 45, 3, 74, 46],\n      [8, 53, 23, 26, 54, 24],\n      [12, 45, 15, 28, 46, 16],\n\n      // 28\n      [3, 147, 117, 10, 148, 118],\n      [3, 73, 45, 23, 74, 46],\n      [4, 54, 24, 31, 55, 25],\n      [11, 45, 15, 31, 46, 16],\n\n      // 29\n      [7, 146, 116, 7, 147, 117],\n      [21, 73, 45, 7, 74, 46],\n      [1, 53, 23, 37, 54, 24],\n      [19, 45, 15, 26, 46, 16],\n\n      // 30\n      [5, 145, 115, 10, 146, 116],\n      [19, 75, 47, 10, 76, 48],\n      [15, 54, 24, 25, 55, 25],\n      [23, 45, 15, 25, 46, 16],\n\n      // 31\n      [13, 145, 115, 3, 146, 116],\n      [2, 74, 46, 29, 75, 47],\n      [42, 54, 24, 1, 55, 25],\n      [23, 45, 15, 28, 46, 16],\n\n      // 32\n      [17, 145, 115],\n      [10, 74, 46, 23, 75, 47],\n      [10, 54, 24, 35, 55, 25],\n      [19, 45, 15, 35, 46, 16],\n\n      // 33\n      [17, 145, 115, 1, 146, 116],\n      [14, 74, 46, 21, 75, 47],\n      [29, 54, 24, 19, 55, 25],\n      [11, 45, 15, 46, 46, 16],\n\n      // 34\n      [13, 145, 115, 6, 146, 116],\n      [14, 74, 46, 23, 75, 47],\n      [44, 54, 24, 7, 55, 25],\n      [59, 46, 16, 1, 47, 17],\n\n      // 35\n      [12, 151, 121, 7, 152, 122],\n      [12, 75, 47, 26, 76, 48],\n      [39, 54, 24, 14, 55, 25],\n      [22, 45, 15, 41, 46, 16],\n\n      // 36\n      [6, 151, 121, 14, 152, 122],\n      [6, 75, 47, 34, 76, 48],\n      [46, 54, 24, 10, 55, 25],\n      [2, 45, 15, 64, 46, 16],\n\n      // 37\n      [17, 152, 122, 4, 153, 123],\n      [29, 74, 46, 14, 75, 47],\n      [49, 54, 24, 10, 55, 25],\n      [24, 45, 15, 46, 46, 16],\n\n      // 38\n      [4, 152, 122, 18, 153, 123],\n      [13, 74, 46, 32, 75, 47],\n      [48, 54, 24, 14, 55, 25],\n      [42, 45, 15, 32, 46, 16],\n\n      // 39\n      [20, 147, 117, 4, 148, 118],\n      [40, 75, 47, 7, 76, 48],\n      [43, 54, 24, 22, 55, 25],\n      [10, 45, 15, 67, 46, 16],\n\n      // 40\n      [19, 148, 118, 6, 149, 119],\n      [18, 75, 47, 31, 76, 48],\n      [34, 54, 24, 34, 55, 25],\n      [20, 45, 15, 61, 46, 16]\n    ];\n\n    var qrRSBlock = function(totalCount, dataCount) {\n      var _this = {};\n      _this.totalCount = totalCount;\n      _this.dataCount = dataCount;\n      return _this;\n    };\n\n    var _this = {};\n\n    var getRsBlockTable = function(typeNumber, errorCorrectionLevel) {\n\n      switch(errorCorrectionLevel) {\n      case QRErrorCorrectionLevel.L :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n      case QRErrorCorrectionLevel.M :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n      case QRErrorCorrectionLevel.Q :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n      case QRErrorCorrectionLevel.H :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n      default :\n        return undefined;\n      }\n    };\n\n    _this.getRSBlocks = function(typeNumber, errorCorrectionLevel) {\n\n      var rsBlock = getRsBlockTable(typeNumber, errorCorrectionLevel);\n\n      if (typeof rsBlock == 'undefined') {\n        throw 'bad rs block @ typeNumber:' + typeNumber +\n            '/errorCorrectionLevel:' + errorCorrectionLevel;\n      }\n\n      var length = rsBlock.length / 3;\n\n      var list = [];\n\n      for (var i = 0; i < length; i += 1) {\n\n        var count = rsBlock[i * 3 + 0];\n        var totalCount = rsBlock[i * 3 + 1];\n        var dataCount = rsBlock[i * 3 + 2];\n\n        for (var j = 0; j < count; j += 1) {\n          list.push(qrRSBlock(totalCount, dataCount) );\n        }\n      }\n\n      return list;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrBitBuffer\n  //---------------------------------------------------------------------\n\n  var qrBitBuffer = function() {\n\n    var _buffer = [];\n    var _length = 0;\n\n    var _this = {};\n\n    _this.getBuffer = function() {\n      return _buffer;\n    };\n\n    _this.getAt = function(index) {\n      var bufIndex = Math.floor(index / 8);\n      return ( (_buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n    };\n\n    _this.put = function(num, length) {\n      for (var i = 0; i < length; i += 1) {\n        _this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n      }\n    };\n\n    _this.getLengthInBits = function() {\n      return _length;\n    };\n\n    _this.putBit = function(bit) {\n\n      var bufIndex = Math.floor(_length / 8);\n      if (_buffer.length <= bufIndex) {\n        _buffer.push(0);\n      }\n\n      if (bit) {\n        _buffer[bufIndex] |= (0x80 >>> (_length % 8) );\n      }\n\n      _length += 1;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrNumber\n  //---------------------------------------------------------------------\n\n  var qrNumber = function(data) {\n\n    var _mode = QRMode.MODE_NUMBER;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _data;\n\n      var i = 0;\n\n      while (i + 2 < data.length) {\n        buffer.put(strToNum(data.substring(i, i + 3) ), 10);\n        i += 3;\n      }\n\n      if (i < data.length) {\n        if (data.length - i == 1) {\n          buffer.put(strToNum(data.substring(i, i + 1) ), 4);\n        } else if (data.length - i == 2) {\n          buffer.put(strToNum(data.substring(i, i + 2) ), 7);\n        }\n      }\n    };\n\n    var strToNum = function(s) {\n      var num = 0;\n      for (var i = 0; i < s.length; i += 1) {\n        num = num * 10 + chatToNum(s.charAt(i) );\n      }\n      return num;\n    };\n\n    var chatToNum = function(c) {\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      }\n      throw 'illegal char :' + c;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrAlphaNum\n  //---------------------------------------------------------------------\n\n  var qrAlphaNum = function(data) {\n\n    var _mode = QRMode.MODE_ALPHA_NUM;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var s = _data;\n\n      var i = 0;\n\n      while (i + 1 < s.length) {\n        buffer.put(\n          getCode(s.charAt(i) ) * 45 +\n          getCode(s.charAt(i + 1) ), 11);\n        i += 2;\n      }\n\n      if (i < s.length) {\n        buffer.put(getCode(s.charAt(i) ), 6);\n      }\n    };\n\n    var getCode = function(c) {\n\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      } else if ('A' <= c && c <= 'Z') {\n        return c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;\n      } else {\n        switch (c) {\n        case ' ' : return 36;\n        case '$' : return 37;\n        case '%' : return 38;\n        case '*' : return 39;\n        case '+' : return 40;\n        case '-' : return 41;\n        case '.' : return 42;\n        case '/' : return 43;\n        case ':' : return 44;\n        default :\n          throw 'illegal char :' + c;\n        }\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qr8BitByte\n  //---------------------------------------------------------------------\n\n  var qr8BitByte = function(data) {\n\n    var _mode = QRMode.MODE_8BIT_BYTE;\n    var _data = data;\n    var _bytes = qrcode.stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _bytes.length;\n    };\n\n    _this.write = function(buffer) {\n      for (var i = 0; i < _bytes.length; i += 1) {\n        buffer.put(_bytes[i], 8);\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrKanji\n  //---------------------------------------------------------------------\n\n  var qrKanji = function(data) {\n\n    var _mode = QRMode.MODE_KANJI;\n    var _data = data;\n\n    var stringToBytes = qrcode.stringToBytesFuncs['SJIS'];\n    if (!stringToBytes) {\n      throw 'sjis not supported.';\n    }\n    !function(c, code) {\n      // self test for sjis support.\n      var test = stringToBytes(c);\n      if (test.length != 2 || ( (test[0] << 8) | test[1]) != code) {\n        throw 'sjis not supported.';\n      }\n    }('\\u53cb', 0x9746);\n\n    var _bytes = stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return ~~(_bytes.length / 2);\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _bytes;\n\n      var i = 0;\n\n      while (i + 1 < data.length) {\n\n        var c = ( (0xff & data[i]) << 8) | (0xff & data[i + 1]);\n\n        if (0x8140 <= c && c <= 0x9FFC) {\n          c -= 0x8140;\n        } else if (0xE040 <= c && c <= 0xEBBF) {\n          c -= 0xC140;\n        } else {\n          throw 'illegal char at ' + (i + 1) + '/' + c;\n        }\n\n        c = ( (c >>> 8) & 0xff) * 0xC0 + (c & 0xff);\n\n        buffer.put(c, 13);\n\n        i += 2;\n      }\n\n      if (i < data.length) {\n        throw 'illegal char at ' + (i + 1);\n      }\n    };\n\n    return _this;\n  };\n\n  //=====================================================================\n  // GIF Support etc.\n  //\n\n  //---------------------------------------------------------------------\n  // byteArrayOutputStream\n  //---------------------------------------------------------------------\n\n  var byteArrayOutputStream = function() {\n\n    var _bytes = [];\n\n    var _this = {};\n\n    _this.writeByte = function(b) {\n      _bytes.push(b & 0xff);\n    };\n\n    _this.writeShort = function(i) {\n      _this.writeByte(i);\n      _this.writeByte(i >>> 8);\n    };\n\n    _this.writeBytes = function(b, off, len) {\n      off = off || 0;\n      len = len || b.length;\n      for (var i = 0; i < len; i += 1) {\n        _this.writeByte(b[i + off]);\n      }\n    };\n\n    _this.writeString = function(s) {\n      for (var i = 0; i < s.length; i += 1) {\n        _this.writeByte(s.charCodeAt(i) );\n      }\n    };\n\n    _this.toByteArray = function() {\n      return _bytes;\n    };\n\n    _this.toString = function() {\n      var s = '';\n      s += '[';\n      for (var i = 0; i < _bytes.length; i += 1) {\n        if (i > 0) {\n          s += ',';\n        }\n        s += _bytes[i];\n      }\n      s += ']';\n      return s;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64EncodeOutputStream\n  //---------------------------------------------------------------------\n\n  var base64EncodeOutputStream = function() {\n\n    var _buffer = 0;\n    var _buflen = 0;\n    var _length = 0;\n    var _base64 = '';\n\n    var _this = {};\n\n    var writeEncoded = function(b) {\n      _base64 += String.fromCharCode(encode(b & 0x3f) );\n    };\n\n    var encode = function(n) {\n      if (n < 0) {\n        // error.\n      } else if (n < 26) {\n        return 0x41 + n;\n      } else if (n < 52) {\n        return 0x61 + (n - 26);\n      } else if (n < 62) {\n        return 0x30 + (n - 52);\n      } else if (n == 62) {\n        return 0x2b;\n      } else if (n == 63) {\n        return 0x2f;\n      }\n      throw 'n:' + n;\n    };\n\n    _this.writeByte = function(n) {\n\n      _buffer = (_buffer << 8) | (n & 0xff);\n      _buflen += 8;\n      _length += 1;\n\n      while (_buflen >= 6) {\n        writeEncoded(_buffer >>> (_buflen - 6) );\n        _buflen -= 6;\n      }\n    };\n\n    _this.flush = function() {\n\n      if (_buflen > 0) {\n        writeEncoded(_buffer << (6 - _buflen) );\n        _buffer = 0;\n        _buflen = 0;\n      }\n\n      if (_length % 3 != 0) {\n        // padding\n        var padlen = 3 - _length % 3;\n        for (var i = 0; i < padlen; i += 1) {\n          _base64 += '=';\n        }\n      }\n    };\n\n    _this.toString = function() {\n      return _base64;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64DecodeInputStream\n  //---------------------------------------------------------------------\n\n  var base64DecodeInputStream = function(str) {\n\n    var _str = str;\n    var _pos = 0;\n    var _buffer = 0;\n    var _buflen = 0;\n\n    var _this = {};\n\n    _this.read = function() {\n\n      while (_buflen < 8) {\n\n        if (_pos >= _str.length) {\n          if (_buflen == 0) {\n            return -1;\n          }\n          throw 'unexpected end of file./' + _buflen;\n        }\n\n        var c = _str.charAt(_pos);\n        _pos += 1;\n\n        if (c == '=') {\n          _buflen = 0;\n          return -1;\n        } else if (c.match(/^\\s$/) ) {\n          // ignore if whitespace.\n          continue;\n        }\n\n        _buffer = (_buffer << 6) | decode(c.charCodeAt(0) );\n        _buflen += 6;\n      }\n\n      var n = (_buffer >>> (_buflen - 8) ) & 0xff;\n      _buflen -= 8;\n      return n;\n    };\n\n    var decode = function(c) {\n      if (0x41 <= c && c <= 0x5a) {\n        return c - 0x41;\n      } else if (0x61 <= c && c <= 0x7a) {\n        return c - 0x61 + 26;\n      } else if (0x30 <= c && c <= 0x39) {\n        return c - 0x30 + 52;\n      } else if (c == 0x2b) {\n        return 62;\n      } else if (c == 0x2f) {\n        return 63;\n      } else {\n        throw 'c:' + c;\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // gifImage (B/W)\n  //---------------------------------------------------------------------\n\n  var gifImage = function(width, height) {\n\n    var _width = width;\n    var _height = height;\n    var _data = new Array(width * height);\n\n    var _this = {};\n\n    _this.setPixel = function(x, y, pixel) {\n      _data[y * _width + x] = pixel;\n    };\n\n    _this.write = function(out) {\n\n      //---------------------------------\n      // GIF Signature\n\n      out.writeString('GIF87a');\n\n      //---------------------------------\n      // Screen Descriptor\n\n      out.writeShort(_width);\n      out.writeShort(_height);\n\n      out.writeByte(0x80); // 2bit\n      out.writeByte(0);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Global Color Map\n\n      // black\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n\n      // white\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n\n      //---------------------------------\n      // Image Descriptor\n\n      out.writeString(',');\n      out.writeShort(0);\n      out.writeShort(0);\n      out.writeShort(_width);\n      out.writeShort(_height);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Local Color Map\n\n      //---------------------------------\n      // Raster Data\n\n      var lzwMinCodeSize = 2;\n      var raster = getLZWRaster(lzwMinCodeSize);\n\n      out.writeByte(lzwMinCodeSize);\n\n      var offset = 0;\n\n      while (raster.length - offset > 255) {\n        out.writeByte(255);\n        out.writeBytes(raster, offset, 255);\n        offset += 255;\n      }\n\n      out.writeByte(raster.length - offset);\n      out.writeBytes(raster, offset, raster.length - offset);\n      out.writeByte(0x00);\n\n      //---------------------------------\n      // GIF Terminator\n      out.writeString(';');\n    };\n\n    var bitOutputStream = function(out) {\n\n      var _out = out;\n      var _bitLength = 0;\n      var _bitBuffer = 0;\n\n      var _this = {};\n\n      _this.write = function(data, length) {\n\n        if ( (data >>> length) != 0) {\n          throw 'length over';\n        }\n\n        while (_bitLength + length >= 8) {\n          _out.writeByte(0xff & ( (data << _bitLength) | _bitBuffer) );\n          length -= (8 - _bitLength);\n          data >>>= (8 - _bitLength);\n          _bitBuffer = 0;\n          _bitLength = 0;\n        }\n\n        _bitBuffer = (data << _bitLength) | _bitBuffer;\n        _bitLength = _bitLength + length;\n      };\n\n      _this.flush = function() {\n        if (_bitLength > 0) {\n          _out.writeByte(_bitBuffer);\n        }\n      };\n\n      return _this;\n    };\n\n    var getLZWRaster = function(lzwMinCodeSize) {\n\n      var clearCode = 1 << lzwMinCodeSize;\n      var endCode = (1 << lzwMinCodeSize) + 1;\n      var bitLength = lzwMinCodeSize + 1;\n\n      // Setup LZWTable\n      var table = lzwTable();\n\n      for (var i = 0; i < clearCode; i += 1) {\n        table.add(String.fromCharCode(i) );\n      }\n      table.add(String.fromCharCode(clearCode) );\n      table.add(String.fromCharCode(endCode) );\n\n      var byteOut = byteArrayOutputStream();\n      var bitOut = bitOutputStream(byteOut);\n\n      // clear code\n      bitOut.write(clearCode, bitLength);\n\n      var dataIndex = 0;\n\n      var s = String.fromCharCode(_data[dataIndex]);\n      dataIndex += 1;\n\n      while (dataIndex < _data.length) {\n\n        var c = String.fromCharCode(_data[dataIndex]);\n        dataIndex += 1;\n\n        if (table.contains(s + c) ) {\n\n          s = s + c;\n\n        } else {\n\n          bitOut.write(table.indexOf(s), bitLength);\n\n          if (table.size() < 0xfff) {\n\n            if (table.size() == (1 << bitLength) ) {\n              bitLength += 1;\n            }\n\n            table.add(s + c);\n          }\n\n          s = c;\n        }\n      }\n\n      bitOut.write(table.indexOf(s), bitLength);\n\n      // end code\n      bitOut.write(endCode, bitLength);\n\n      bitOut.flush();\n\n      return byteOut.toByteArray();\n    };\n\n    var lzwTable = function() {\n\n      var _map = {};\n      var _size = 0;\n\n      var _this = {};\n\n      _this.add = function(key) {\n        if (_this.contains(key) ) {\n          throw 'dup key:' + key;\n        }\n        _map[key] = _size;\n        _size += 1;\n      };\n\n      _this.size = function() {\n        return _size;\n      };\n\n      _this.indexOf = function(key) {\n        return _map[key];\n      };\n\n      _this.contains = function(key) {\n        return typeof _map[key] != 'undefined';\n      };\n\n      return _this;\n    };\n\n    return _this;\n  };\n\n  var createDataURL = function(width, height, getPixel) {\n    var gif = gifImage(width, height);\n    for (var y = 0; y < height; y += 1) {\n      for (var x = 0; x < width; x += 1) {\n        gif.setPixel(x, y, getPixel(x, y) );\n      }\n    }\n\n    var b = byteArrayOutputStream();\n    gif.write(b);\n\n    var base64 = base64EncodeOutputStream();\n    var bytes = b.toByteArray();\n    for (var i = 0; i < bytes.length; i += 1) {\n      base64.writeByte(bytes[i]);\n    }\n    base64.flush();\n\n    return 'data:image/gif;base64,' + base64;\n  };\n\n  //---------------------------------------------------------------------\n  // returns qrcode function.\n\n  return qrcode;\n}();\n\n// multibyte support\n!function() {\n\n  qrcode.stringToBytesFuncs['UTF-8'] = function(s) {\n    // http://stackoverflow.com/questions/18729405/how-to-convert-utf8-string-to-byte-array\n    function toUTF8Array(str) {\n      var utf8 = [];\n      for (var i=0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) utf8.push(charcode);\n        else if (charcode < 0x800) {\n          utf8.push(0xc0 | (charcode >> 6),\n              0x80 | (charcode & 0x3f));\n        }\n        else if (charcode < 0xd800 || charcode >= 0xe000) {\n          utf8.push(0xe0 | (charcode >> 12),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n        // surrogate pair\n        else {\n          i++;\n          // UTF-16 encodes 0x10000-0x10FFFF by\n          // subtracting 0x10000 and splitting the\n          // 20 bits of 0x0-0xFFFFF into two halves\n          charcode = 0x10000 + (((charcode & 0x3ff)<<10)\n            | (str.charCodeAt(i) & 0x3ff));\n          utf8.push(0xf0 | (charcode >>18),\n              0x80 | ((charcode>>12) & 0x3f),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n      }\n      return utf8;\n    }\n    return toUTF8Array(s);\n  };\n\n}();\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n      define([], factory);\n  } else if (typeof exports === 'object') {\n      module.exports = factory();\n  }\n}(function () {\n    return qrcode;\n}));\n","/*\n * [hi-base32]{@link https://github.com/emn178/hi-base32}\n *\n * @version 0.5.1\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2015-2021\n * @license MIT\n */\nconst BASE32_ENCODE_CHAR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'.split('');\nconst BASE32_DECODE_CHAR = {\n    A: 0,\n    B: 1,\n    C: 2,\n    D: 3,\n    E: 4,\n    F: 5,\n    G: 6,\n    H: 7,\n    I: 8,\n    J: 9,\n    K: 10,\n    L: 11,\n    M: 12,\n    N: 13,\n    O: 14,\n    P: 15,\n    Q: 16,\n    R: 17,\n    S: 18,\n    T: 19,\n    U: 20,\n    V: 21,\n    W: 22,\n    X: 23,\n    Y: 24,\n    Z: 25,\n    2: 26,\n    3: 27,\n    4: 28,\n    5: 29,\n    6: 30,\n    7: 31,\n};\nexport const decodeAsBytes = function (base32Str) {\n    if (base32Str === '') {\n        return [];\n    }\n    else if (!/^[A-Z2-7=]+$/.test(base32Str)) {\n        throw new Error('Invalid base32 characters');\n    }\n    base32Str = base32Str.replace(/=/g, '');\n    let v1;\n    let v2;\n    let v3;\n    let v4;\n    let v5;\n    let v6;\n    let v7;\n    let v8;\n    const bytes = [];\n    let index = 0;\n    const length = base32Str.length;\n    // 4 char to 3 bytes\n    for (var i = 0, count = (length >> 3) << 3; i < count;) {\n        v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v3 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v4 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v5 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v6 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v7 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v8 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n        bytes[index++] = ((v2 << 6) | (v3 << 1) | (v4 >>> 4)) & 255;\n        bytes[index++] = ((v4 << 4) | (v5 >>> 1)) & 255;\n        bytes[index++] = ((v5 << 7) | (v6 << 2) | (v7 >>> 3)) & 255;\n        bytes[index++] = ((v7 << 5) | v8) & 255;\n    }\n    // remain bytes\n    const remain = length - count;\n    if (remain === 2) {\n        v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n    }\n    else if (remain === 4) {\n        v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v3 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v4 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n        bytes[index++] = ((v2 << 6) | (v3 << 1) | (v4 >>> 4)) & 255;\n    }\n    else if (remain === 5) {\n        v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v3 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v4 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v5 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n        bytes[index++] = ((v2 << 6) | (v3 << 1) | (v4 >>> 4)) & 255;\n        bytes[index++] = ((v4 << 4) | (v5 >>> 1)) & 255;\n    }\n    else if (remain === 7) {\n        v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v3 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v4 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v5 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v6 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        v7 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n        bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n        bytes[index++] = ((v2 << 6) | (v3 << 1) | (v4 >>> 4)) & 255;\n        bytes[index++] = ((v4 << 4) | (v5 >>> 1)) & 255;\n        bytes[index++] = ((v5 << 7) | (v6 << 2) | (v7 >>> 3)) & 255;\n    }\n    return bytes;\n};\nexport const encodeBytes = function (bytes) {\n    let v1;\n    let v2;\n    let v3;\n    let v4;\n    let v5;\n    let base32Str = '';\n    const length = bytes.length;\n    for (var i = 0, count = parseInt((length / 5)) * 5; i < count;) {\n        v1 = bytes[i++];\n        v2 = bytes[i++];\n        v3 = bytes[i++];\n        v4 = bytes[i++];\n        v5 = bytes[i++];\n        base32Str +=\n            BASE32_ENCODE_CHAR[v1 >>> 3] +\n                BASE32_ENCODE_CHAR[((v1 << 2) | (v2 >>> 6)) & 31] +\n                BASE32_ENCODE_CHAR[(v2 >>> 1) & 31] +\n                BASE32_ENCODE_CHAR[((v2 << 4) | (v3 >>> 4)) & 31] +\n                BASE32_ENCODE_CHAR[((v3 << 1) | (v4 >>> 7)) & 31] +\n                BASE32_ENCODE_CHAR[(v4 >>> 2) & 31] +\n                BASE32_ENCODE_CHAR[((v4 << 3) | (v5 >>> 5)) & 31] +\n                BASE32_ENCODE_CHAR[v5 & 31];\n    }\n    // remain char\n    const remain = length - count;\n    if (remain === 1) {\n        v1 = bytes[i];\n        base32Str +=\n            BASE32_ENCODE_CHAR[v1 >>> 3] +\n                BASE32_ENCODE_CHAR[(v1 << 2) & 31] +\n                '======';\n    }\n    else if (remain === 2) {\n        v1 = bytes[i++];\n        v2 = bytes[i];\n        base32Str +=\n            BASE32_ENCODE_CHAR[v1 >>> 3] +\n                BASE32_ENCODE_CHAR[((v1 << 2) | (v2 >>> 6)) & 31] +\n                BASE32_ENCODE_CHAR[(v2 >>> 1) & 31] +\n                BASE32_ENCODE_CHAR[(v2 << 4) & 31] +\n                '====';\n    }\n    else if (remain === 3) {\n        v1 = bytes[i++];\n        v2 = bytes[i++];\n        v3 = bytes[i];\n        base32Str +=\n            BASE32_ENCODE_CHAR[v1 >>> 3] +\n                BASE32_ENCODE_CHAR[((v1 << 2) | (v2 >>> 6)) & 31] +\n                BASE32_ENCODE_CHAR[(v2 >>> 1) & 31] +\n                BASE32_ENCODE_CHAR[((v2 << 4) | (v3 >>> 4)) & 31] +\n                BASE32_ENCODE_CHAR[(v3 << 1) & 31] +\n                '===';\n    }\n    else if (remain === 4) {\n        v1 = bytes[i++];\n        v2 = bytes[i++];\n        v3 = bytes[i++];\n        v4 = bytes[i];\n        base32Str +=\n            BASE32_ENCODE_CHAR[v1 >>> 3] +\n                BASE32_ENCODE_CHAR[((v1 << 2) | (v2 >>> 6)) & 31] +\n                BASE32_ENCODE_CHAR[(v2 >>> 1) & 31] +\n                BASE32_ENCODE_CHAR[((v2 << 4) | (v3 >>> 4)) & 31] +\n                BASE32_ENCODE_CHAR[((v3 << 1) | (v4 >>> 7)) & 31] +\n                BASE32_ENCODE_CHAR[(v4 >>> 2) & 31] +\n                BASE32_ENCODE_CHAR[(v4 << 3) & 31] +\n                '=';\n    }\n    return base32Str;\n};\n","/*\n * [js-sha512]{@link https://github.com/emn178/js-sha512}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2024\n * @license MIT\n */\nconst INPUT_ERROR = 'input is invalid type';\nconst FINALIZE_ERROR = 'finalize already called';\nconst ARRAY_BUFFER = typeof ArrayBuffer !== 'undefined';\nconst HEX_CHARS = '0123456789abcdef'.split('');\nconst EXTRA = [-2147483648, 8388608, 32768, 128];\nconst SHIFT = [24, 16, 8, 0];\nconst K = [\n    0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd, 0xb5c0fbcf, 0xec4d3b2f,\n    0xe9b5dba5, 0x8189dbbc, 0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n    0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118, 0xd807aa98, 0xa3030242,\n    0x12835b01, 0x45706fbe, 0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n    0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1, 0x9bdc06a7, 0x25c71235,\n    0xc19bf174, 0xcf692694, 0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n    0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65, 0x2de92c6f, 0x592b0275,\n    0x4a7484aa, 0x6ea6e483, 0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n    0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210, 0xb00327c8, 0x98fb213f,\n    0xbf597fc7, 0xbeef0ee4, 0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n    0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70, 0x27b70a85, 0x46d22ffc,\n    0x2e1b2138, 0x5c26c926, 0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n    0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8, 0x81c2c92e, 0x47edaee6,\n    0x92722c85, 0x1482353b, 0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n    0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30, 0xd192e819, 0xd6ef5218,\n    0xd6990624, 0x5565a910, 0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n    0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53, 0x2748774c, 0xdf8eeb99,\n    0x34b0bcb5, 0xe19b48a8, 0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n    0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3, 0x748f82ee, 0x5defb2fc,\n    0x78a5636f, 0x43172f60, 0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n    0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9, 0xbef9a3f7, 0xb2c67915,\n    0xc67178f2, 0xe372532b, 0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n    0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178, 0x06f067aa, 0x72176fba,\n    0x0a637dc5, 0xa2c898a6, 0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n    0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493, 0x3c9ebe0a, 0x15c9bebc,\n    0x431d67c4, 0x9c100d4c, 0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n    0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817,\n];\nconst OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\nconst blocks = [];\nconst isArray = Array.isArray;\nconst isView = ArrayBuffer.isView;\n// [message: string, isString: bool]\nconst formatMessage = function (message) {\n    const type = typeof message;\n    if (type === 'string') {\n        return [message, true];\n    }\n    if (type !== 'object' || message === null) {\n        throw new Error(INPUT_ERROR);\n    }\n    if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n        return [new Uint8Array(message), false];\n    }\n    if (!isArray(message) && !isView(message)) {\n        throw new Error(INPUT_ERROR);\n    }\n    return [message, false];\n};\nconst createOutputMethod = function (outputType, bits) {\n    return function (message) {\n        return new Sha512(bits, true).update(message)[outputType]();\n    };\n};\nexport const createMethod = function (bits) {\n    const method = createOutputMethod('hex', bits);\n    //@ts-expect-error, create does exits on the prototype\n    method.create = function () {\n        return new Sha512(bits);\n    };\n    //@ts-expect-error, update does exits on the prototype\n    method.update = function (message) {\n        //@ts-expect-error, this is a valid return\n        return method.create().update(message);\n    };\n    for (let i = 0; i < OUTPUT_TYPES.length; ++i) {\n        const type = OUTPUT_TYPES[i];\n        method[type] = createOutputMethod(type, bits);\n    }\n    //@ts-expect-error, this is a valid return\n    return method;\n};\n/**\n * @class\n * @param bits\n * @param sharedMemory\n * @constructor\n */\nfunction Sha512(bits, sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] =\n            blocks[1] =\n                blocks[2] =\n                    blocks[3] =\n                        blocks[4] =\n                            blocks[5] =\n                                blocks[6] =\n                                    blocks[7] =\n                                        blocks[8] =\n                                            blocks[9] =\n                                                blocks[10] =\n                                                    blocks[11] =\n                                                        blocks[12] =\n                                                            blocks[13] =\n                                                                blocks[14] =\n                                                                    blocks[15] =\n                                                                        blocks[16] =\n                                                                            blocks[17] =\n                                                                                blocks[18] =\n                                                                                    blocks[19] =\n                                                                                        blocks[20] =\n                                                                                            blocks[21] =\n                                                                                                blocks[22] =\n                                                                                                    blocks[23] =\n                                                                                                        blocks[24] =\n                                                                                                            blocks[25] =\n                                                                                                                blocks[26] =\n                                                                                                                    blocks[27] =\n                                                                                                                        blocks[28] =\n                                                                                                                            blocks[29] =\n                                                                                                                                blocks[30] =\n                                                                                                                                    blocks[31] =\n                                                                                                                                        blocks[32] =\n                                                                                                                                            0;\n        this.blocks = blocks;\n    }\n    else {\n        this.blocks = [\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0,\n        ];\n    }\n    if (bits == 384) {\n        this.h0h = 0xcbbb9d5d;\n        this.h0l = 0xc1059ed8;\n        this.h1h = 0x629a292a;\n        this.h1l = 0x367cd507;\n        this.h2h = 0x9159015a;\n        this.h2l = 0x3070dd17;\n        this.h3h = 0x152fecd8;\n        this.h3l = 0xf70e5939;\n        this.h4h = 0x67332667;\n        this.h4l = 0xffc00b31;\n        this.h5h = 0x8eb44a87;\n        this.h5l = 0x68581511;\n        this.h6h = 0xdb0c2e0d;\n        this.h6l = 0x64f98fa7;\n        this.h7h = 0x47b5481d;\n        this.h7l = 0xbefa4fa4;\n    }\n    else if (bits == 256) {\n        this.h0h = 0x22312194;\n        this.h0l = 0xfc2bf72c;\n        this.h1h = 0x9f555fa3;\n        this.h1l = 0xc84c64c2;\n        this.h2h = 0x2393b86b;\n        this.h2l = 0x6f53b151;\n        this.h3h = 0x96387719;\n        this.h3l = 0x5940eabd;\n        this.h4h = 0x96283ee2;\n        this.h4l = 0xa88effe3;\n        this.h5h = 0xbe5e1e25;\n        this.h5l = 0x53863992;\n        this.h6h = 0x2b0199fc;\n        this.h6l = 0x2c85b8aa;\n        this.h7h = 0x0eb72ddc;\n        this.h7l = 0x81c52ca2;\n    }\n    else if (bits == 224) {\n        this.h0h = 0x8c3d37c8;\n        this.h0l = 0x19544da2;\n        this.h1h = 0x73e19966;\n        this.h1l = 0x89dcd4d6;\n        this.h2h = 0x1dfab7ae;\n        this.h2l = 0x32ff9c82;\n        this.h3h = 0x679dd514;\n        this.h3l = 0x582f9fcf;\n        this.h4h = 0x0f6d2b69;\n        this.h4l = 0x7bd44da8;\n        this.h5h = 0x77e36f73;\n        this.h5l = 0x04c48942;\n        this.h6h = 0x3f9d85a8;\n        this.h6l = 0x6a1d36c8;\n        this.h7h = 0x1112e6ad;\n        this.h7l = 0x91d692a1;\n    }\n    else {\n        // 512\n        this.h0h = 0x6a09e667;\n        this.h0l = 0xf3bcc908;\n        this.h1h = 0xbb67ae85;\n        this.h1l = 0x84caa73b;\n        this.h2h = 0x3c6ef372;\n        this.h2l = 0xfe94f82b;\n        this.h3h = 0xa54ff53a;\n        this.h3l = 0x5f1d36f1;\n        this.h4h = 0x510e527f;\n        this.h4l = 0xade682d1;\n        this.h5h = 0x9b05688c;\n        this.h5l = 0x2b3e6c1f;\n        this.h6h = 0x1f83d9ab;\n        this.h6l = 0xfb41bd6b;\n        this.h7h = 0x5be0cd19;\n        this.h7l = 0x137e2179;\n    }\n    this.bits = bits;\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n}\nSha512.prototype.update = function (message) {\n    if (this.finalized) {\n        throw new Error(FINALIZE_ERROR);\n    }\n    const result = formatMessage(message);\n    message = result[0];\n    const isString = result[1];\n    let code;\n    let index = 0;\n    let i;\n    const length = message.length;\n    const blocks = this.blocks;\n    while (index < length) {\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            this.block =\n                blocks[1] =\n                    blocks[2] =\n                        blocks[3] =\n                            blocks[4] =\n                                blocks[5] =\n                                    blocks[6] =\n                                        blocks[7] =\n                                            blocks[8] =\n                                                blocks[9] =\n                                                    blocks[10] =\n                                                        blocks[11] =\n                                                            blocks[12] =\n                                                                blocks[13] =\n                                                                    blocks[14] =\n                                                                        blocks[15] =\n                                                                            blocks[16] =\n                                                                                blocks[17] =\n                                                                                    blocks[18] =\n                                                                                        blocks[19] =\n                                                                                            blocks[20] =\n                                                                                                blocks[21] =\n                                                                                                    blocks[22] =\n                                                                                                        blocks[23] =\n                                                                                                            blocks[24] =\n                                                                                                                blocks[25] =\n                                                                                                                    blocks[26] =\n                                                                                                                        blocks[27] =\n                                                                                                                            blocks[28] =\n                                                                                                                                blocks[29] =\n                                                                                                                                    blocks[30] =\n                                                                                                                                        blocks[31] =\n                                                                                                                                            blocks[32] =\n                                                                                                                                                0;\n        }\n        if (isString) {\n            for (i = this.start; index < length && i < 128; ++index) {\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >>> 2] |= code << SHIFT[i++ & 3];\n                }\n                else if (code < 0x800) {\n                    blocks[i >>> 2] |= (0xc0 | (code >>> 6)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n                else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >>> 2] |= (0xe0 | (code >>> 12)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n                else {\n                    code =\n                        0x10000 +\n                            (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n                    blocks[i >>> 2] |= (0xf0 | (code >>> 18)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | ((code >>> 12) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        else {\n            for (i = this.start; index < length && i < 128; ++index) {\n                blocks[i >>> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 128) {\n            this.block = blocks[32];\n            this.start = i - 128;\n            this.hash();\n            this.hashed = true;\n        }\n        else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += (this.bytes / 4294967296) << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha512.prototype.finalize = function () {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    const blocks = this.blocks;\n    const i = this.lastByteIndex;\n    blocks[32] = this.block;\n    blocks[i >>> 2] |= EXTRA[i & 3];\n    this.block = blocks[32];\n    if (i >= 112) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[1] =\n            blocks[2] =\n                blocks[3] =\n                    blocks[4] =\n                        blocks[5] =\n                            blocks[6] =\n                                blocks[7] =\n                                    blocks[8] =\n                                        blocks[9] =\n                                            blocks[10] =\n                                                blocks[11] =\n                                                    blocks[12] =\n                                                        blocks[13] =\n                                                            blocks[14] =\n                                                                blocks[15] =\n                                                                    blocks[16] =\n                                                                        blocks[17] =\n                                                                            blocks[18] =\n                                                                                blocks[19] =\n                                                                                    blocks[20] =\n                                                                                        blocks[21] =\n                                                                                            blocks[22] =\n                                                                                                blocks[23] =\n                                                                                                    blocks[24] =\n                                                                                                        blocks[25] =\n                                                                                                            blocks[26] =\n                                                                                                                blocks[27] =\n                                                                                                                    blocks[28] =\n                                                                                                                        blocks[29] =\n                                                                                                                            blocks[30] =\n                                                                                                                                blocks[31] =\n                                                                                                                                    blocks[32] =\n                                                                                                                                        0;\n    }\n    blocks[30] = (this.hBytes << 3) | (this.bytes >>> 29);\n    blocks[31] = this.bytes << 3;\n    this.hash();\n};\nSha512.prototype.hash = function () {\n    const h0h = this.h0h;\n    const h0l = this.h0l;\n    const h1h = this.h1h;\n    const h1l = this.h1l;\n    const h2h = this.h2h;\n    const h2l = this.h2l;\n    const h3h = this.h3h;\n    const h3l = this.h3l;\n    const h4h = this.h4h;\n    const h4l = this.h4l;\n    const h5h = this.h5h;\n    const h5l = this.h5l;\n    const h6h = this.h6h;\n    const h6l = this.h6l;\n    const h7h = this.h7h;\n    const h7l = this.h7l;\n    const blocks = this.blocks;\n    let j;\n    let s0h;\n    let s0l;\n    let s1h;\n    let s1l;\n    let c1;\n    let c2;\n    let c3;\n    let c4;\n    let abh;\n    let abl;\n    let dah;\n    let dal;\n    let cdh;\n    let cdl;\n    let bch;\n    let bcl;\n    let majh;\n    let majl;\n    let t1h;\n    let t1l;\n    let t2h;\n    let t2l;\n    let chh;\n    let chl;\n    for (j = 32; j < 160; j += 2) {\n        t1h = blocks[j - 30];\n        t1l = blocks[j - 29];\n        s0h =\n            ((t1h >>> 1) | (t1l << 31)) ^ ((t1h >>> 8) | (t1l << 24)) ^ (t1h >>> 7);\n        s0l =\n            ((t1l >>> 1) | (t1h << 31)) ^\n                ((t1l >>> 8) | (t1h << 24)) ^\n                ((t1l >>> 7) | (t1h << 25));\n        t1h = blocks[j - 4];\n        t1l = blocks[j - 3];\n        s1h =\n            ((t1h >>> 19) | (t1l << 13)) ^ ((t1l >>> 29) | (t1h << 3)) ^ (t1h >>> 6);\n        s1l =\n            ((t1l >>> 19) | (t1h << 13)) ^\n                ((t1h >>> 29) | (t1l << 3)) ^\n                ((t1l >>> 6) | (t1h << 26));\n        t1h = blocks[j - 32];\n        t1l = blocks[j - 31];\n        t2h = blocks[j - 14];\n        t2l = blocks[j - 13];\n        c1 = (t2l & 0xffff) + (t1l & 0xffff) + (s0l & 0xffff) + (s1l & 0xffff);\n        c2 =\n            (t2l >>> 16) + (t1l >>> 16) + (s0l >>> 16) + (s1l >>> 16) + (c1 >>> 16);\n        c3 =\n            (t2h & 0xffff) +\n                (t1h & 0xffff) +\n                (s0h & 0xffff) +\n                (s1h & 0xffff) +\n                (c2 >>> 16);\n        c4 =\n            (t2h >>> 16) + (t1h >>> 16) + (s0h >>> 16) + (s1h >>> 16) + (c3 >>> 16);\n        blocks[j] = (c4 << 16) | (c3 & 0xffff);\n        blocks[j + 1] = (c2 << 16) | (c1 & 0xffff);\n    }\n    let ah = h0h;\n    let al = h0l;\n    let bh = h1h;\n    let bl = h1l;\n    let ch = h2h;\n    let cl = h2l;\n    let dh = h3h;\n    let dl = h3l;\n    let eh = h4h;\n    let el = h4l;\n    let fh = h5h;\n    let fl = h5l;\n    let gh = h6h;\n    let gl = h6l;\n    let hh = h7h;\n    let hl = h7l;\n    bch = bh & ch;\n    bcl = bl & cl;\n    for (j = 0; j < 160; j += 8) {\n        s0h =\n            ((ah >>> 28) | (al << 4)) ^\n                ((al >>> 2) | (ah << 30)) ^\n                ((al >>> 7) | (ah << 25));\n        s0l =\n            ((al >>> 28) | (ah << 4)) ^\n                ((ah >>> 2) | (al << 30)) ^\n                ((ah >>> 7) | (al << 25));\n        s1h =\n            ((eh >>> 14) | (el << 18)) ^\n                ((eh >>> 18) | (el << 14)) ^\n                ((el >>> 9) | (eh << 23));\n        s1l =\n            ((el >>> 14) | (eh << 18)) ^\n                ((el >>> 18) | (eh << 14)) ^\n                ((eh >>> 9) | (el << 23));\n        abh = ah & bh;\n        abl = al & bl;\n        majh = abh ^ (ah & ch) ^ bch;\n        majl = abl ^ (al & cl) ^ bcl;\n        chh = (eh & fh) ^ (~eh & gh);\n        chl = (el & fl) ^ (~el & gl);\n        t1h = blocks[j];\n        t1l = blocks[j + 1];\n        t2h = K[j];\n        t2l = K[j + 1];\n        c1 =\n            (t2l & 0xffff) +\n                (t1l & 0xffff) +\n                (chl & 0xffff) +\n                (s1l & 0xffff) +\n                (hl & 0xffff);\n        c2 =\n            (t2l >>> 16) +\n                (t1l >>> 16) +\n                (chl >>> 16) +\n                (s1l >>> 16) +\n                (hl >>> 16) +\n                (c1 >>> 16);\n        c3 =\n            (t2h & 0xffff) +\n                (t1h & 0xffff) +\n                (chh & 0xffff) +\n                (s1h & 0xffff) +\n                (hh & 0xffff) +\n                (c2 >>> 16);\n        c4 =\n            (t2h >>> 16) +\n                (t1h >>> 16) +\n                (chh >>> 16) +\n                (s1h >>> 16) +\n                (hh >>> 16) +\n                (c3 >>> 16);\n        t1h = (c4 << 16) | (c3 & 0xffff);\n        t1l = (c2 << 16) | (c1 & 0xffff);\n        c1 = (majl & 0xffff) + (s0l & 0xffff);\n        c2 = (majl >>> 16) + (s0l >>> 16) + (c1 >>> 16);\n        c3 = (majh & 0xffff) + (s0h & 0xffff) + (c2 >>> 16);\n        c4 = (majh >>> 16) + (s0h >>> 16) + (c3 >>> 16);\n        t2h = (c4 << 16) | (c3 & 0xffff);\n        t2l = (c2 << 16) | (c1 & 0xffff);\n        c1 = (dl & 0xffff) + (t1l & 0xffff);\n        c2 = (dl >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n        c3 = (dh & 0xffff) + (t1h & 0xffff) + (c2 >>> 16);\n        c4 = (dh >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n        hh = (c4 << 16) | (c3 & 0xffff);\n        hl = (c2 << 16) | (c1 & 0xffff);\n        c1 = (t2l & 0xffff) + (t1l & 0xffff);\n        c2 = (t2l >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n        c3 = (t2h & 0xffff) + (t1h & 0xffff) + (c2 >>> 16);\n        c4 = (t2h >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n        dh = (c4 << 16) | (c3 & 0xffff);\n        dl = (c2 << 16) | (c1 & 0xffff);\n        s0h =\n            ((dh >>> 28) | (dl << 4)) ^\n                ((dl >>> 2) | (dh << 30)) ^\n                ((dl >>> 7) | (dh << 25));\n        s0l =\n            ((dl >>> 28) | (dh << 4)) ^\n                ((dh >>> 2) | (dl << 30)) ^\n                ((dh >>> 7) | (dl << 25));\n        s1h =\n            ((hh >>> 14) | (hl << 18)) ^\n                ((hh >>> 18) | (hl << 14)) ^\n                ((hl >>> 9) | (hh << 23));\n        s1l =\n            ((hl >>> 14) | (hh << 18)) ^\n                ((hl >>> 18) | (hh << 14)) ^\n                ((hh >>> 9) | (hl << 23));\n        dah = dh & ah;\n        dal = dl & al;\n        majh = dah ^ (dh & bh) ^ abh;\n        majl = dal ^ (dl & bl) ^ abl;\n        chh = (hh & eh) ^ (~hh & fh);\n        chl = (hl & el) ^ (~hl & fl);\n        t1h = blocks[j + 2];\n        t1l = blocks[j + 3];\n        t2h = K[j + 2];\n        t2l = K[j + 3];\n        c1 =\n            (t2l & 0xffff) +\n                (t1l & 0xffff) +\n                (chl & 0xffff) +\n                (s1l & 0xffff) +\n                (gl & 0xffff);\n        c2 =\n            (t2l >>> 16) +\n                (t1l >>> 16) +\n                (chl >>> 16) +\n                (s1l >>> 16) +\n                (gl >>> 16) +\n                (c1 >>> 16);\n        c3 =\n            (t2h & 0xffff) +\n                (t1h & 0xffff) +\n                (chh & 0xffff) +\n                (s1h & 0xffff) +\n                (gh & 0xffff) +\n                (c2 >>> 16);\n        c4 =\n            (t2h >>> 16) +\n                (t1h >>> 16) +\n                (chh >>> 16) +\n                (s1h >>> 16) +\n                (gh >>> 16) +\n                (c3 >>> 16);\n        t1h = (c4 << 16) | (c3 & 0xffff);\n        t1l = (c2 << 16) | (c1 & 0xffff);\n        c1 = (majl & 0xffff) + (s0l & 0xffff);\n        c2 = (majl >>> 16) + (s0l >>> 16) + (c1 >>> 16);\n        c3 = (majh & 0xffff) + (s0h & 0xffff) + (c2 >>> 16);\n        c4 = (majh >>> 16) + (s0h >>> 16) + (c3 >>> 16);\n        t2h = (c4 << 16) | (c3 & 0xffff);\n        t2l = (c2 << 16) | (c1 & 0xffff);\n        c1 = (cl & 0xffff) + (t1l & 0xffff);\n        c2 = (cl >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n        c3 = (ch & 0xffff) + (t1h & 0xffff) + (c2 >>> 16);\n        c4 = (ch >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n        gh = (c4 << 16) | (c3 & 0xffff);\n        gl = (c2 << 16) | (c1 & 0xffff);\n        c1 = (t2l & 0xffff) + (t1l & 0xffff);\n        c2 = (t2l >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n        c3 = (t2h & 0xffff) + (t1h & 0xffff) + (c2 >>> 16);\n        c4 = (t2h >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n        ch = (c4 << 16) | (c3 & 0xffff);\n        cl = (c2 << 16) | (c1 & 0xffff);\n        s0h =\n            ((ch >>> 28) | (cl << 4)) ^\n                ((cl >>> 2) | (ch << 30)) ^\n                ((cl >>> 7) | (ch << 25));\n        s0l =\n            ((cl >>> 28) | (ch << 4)) ^\n                ((ch >>> 2) | (cl << 30)) ^\n                ((ch >>> 7) | (cl << 25));\n        s1h =\n            ((gh >>> 14) | (gl << 18)) ^\n                ((gh >>> 18) | (gl << 14)) ^\n                ((gl >>> 9) | (gh << 23));\n        s1l =\n            ((gl >>> 14) | (gh << 18)) ^\n                ((gl >>> 18) | (gh << 14)) ^\n                ((gh >>> 9) | (gl << 23));\n        cdh = ch & dh;\n        cdl = cl & dl;\n        majh = cdh ^ (ch & ah) ^ dah;\n        majl = cdl ^ (cl & al) ^ dal;\n        chh = (gh & hh) ^ (~gh & eh);\n        chl = (gl & hl) ^ (~gl & el);\n        t1h = blocks[j + 4];\n        t1l = blocks[j + 5];\n        t2h = K[j + 4];\n        t2l = K[j + 5];\n        c1 =\n            (t2l & 0xffff) +\n                (t1l & 0xffff) +\n                (chl & 0xffff) +\n                (s1l & 0xffff) +\n                (fl & 0xffff);\n        c2 =\n            (t2l >>> 16) +\n                (t1l >>> 16) +\n                (chl >>> 16) +\n                (s1l >>> 16) +\n                (fl >>> 16) +\n                (c1 >>> 16);\n        c3 =\n            (t2h & 0xffff) +\n                (t1h & 0xffff) +\n                (chh & 0xffff) +\n                (s1h & 0xffff) +\n                (fh & 0xffff) +\n                (c2 >>> 16);\n        c4 =\n            (t2h >>> 16) +\n                (t1h >>> 16) +\n                (chh >>> 16) +\n                (s1h >>> 16) +\n                (fh >>> 16) +\n                (c3 >>> 16);\n        t1h = (c4 << 16) | (c3 & 0xffff);\n        t1l = (c2 << 16) | (c1 & 0xffff);\n        c1 = (majl & 0xffff) + (s0l & 0xffff);\n        c2 = (majl >>> 16) + (s0l >>> 16) + (c1 >>> 16);\n        c3 = (majh & 0xffff) + (s0h & 0xffff) + (c2 >>> 16);\n        c4 = (majh >>> 16) + (s0h >>> 16) + (c3 >>> 16);\n        t2h = (c4 << 16) | (c3 & 0xffff);\n        t2l = (c2 << 16) | (c1 & 0xffff);\n        c1 = (bl & 0xffff) + (t1l & 0xffff);\n        c2 = (bl >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n        c3 = (bh & 0xffff) + (t1h & 0xffff) + (c2 >>> 16);\n        c4 = (bh >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n        fh = (c4 << 16) | (c3 & 0xffff);\n        fl = (c2 << 16) | (c1 & 0xffff);\n        c1 = (t2l & 0xffff) + (t1l & 0xffff);\n        c2 = (t2l >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n        c3 = (t2h & 0xffff) + (t1h & 0xffff) + (c2 >>> 16);\n        c4 = (t2h >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n        bh = (c4 << 16) | (c3 & 0xffff);\n        bl = (c2 << 16) | (c1 & 0xffff);\n        s0h =\n            ((bh >>> 28) | (bl << 4)) ^\n                ((bl >>> 2) | (bh << 30)) ^\n                ((bl >>> 7) | (bh << 25));\n        s0l =\n            ((bl >>> 28) | (bh << 4)) ^\n                ((bh >>> 2) | (bl << 30)) ^\n                ((bh >>> 7) | (bl << 25));\n        s1h =\n            ((fh >>> 14) | (fl << 18)) ^\n                ((fh >>> 18) | (fl << 14)) ^\n                ((fl >>> 9) | (fh << 23));\n        s1l =\n            ((fl >>> 14) | (fh << 18)) ^\n                ((fl >>> 18) | (fh << 14)) ^\n                ((fh >>> 9) | (fl << 23));\n        bch = bh & ch;\n        bcl = bl & cl;\n        majh = bch ^ (bh & dh) ^ cdh;\n        majl = bcl ^ (bl & dl) ^ cdl;\n        chh = (fh & gh) ^ (~fh & hh);\n        chl = (fl & gl) ^ (~fl & hl);\n        t1h = blocks[j + 6];\n        t1l = blocks[j + 7];\n        t2h = K[j + 6];\n        t2l = K[j + 7];\n        c1 =\n            (t2l & 0xffff) +\n                (t1l & 0xffff) +\n                (chl & 0xffff) +\n                (s1l & 0xffff) +\n                (el & 0xffff);\n        c2 =\n            (t2l >>> 16) +\n                (t1l >>> 16) +\n                (chl >>> 16) +\n                (s1l >>> 16) +\n                (el >>> 16) +\n                (c1 >>> 16);\n        c3 =\n            (t2h & 0xffff) +\n                (t1h & 0xffff) +\n                (chh & 0xffff) +\n                (s1h & 0xffff) +\n                (eh & 0xffff) +\n                (c2 >>> 16);\n        c4 =\n            (t2h >>> 16) +\n                (t1h >>> 16) +\n                (chh >>> 16) +\n                (s1h >>> 16) +\n                (eh >>> 16) +\n                (c3 >>> 16);\n        t1h = (c4 << 16) | (c3 & 0xffff);\n        t1l = (c2 << 16) | (c1 & 0xffff);\n        c1 = (majl & 0xffff) + (s0l & 0xffff);\n        c2 = (majl >>> 16) + (s0l >>> 16) + (c1 >>> 16);\n        c3 = (majh & 0xffff) + (s0h & 0xffff) + (c2 >>> 16);\n        c4 = (majh >>> 16) + (s0h >>> 16) + (c3 >>> 16);\n        t2h = (c4 << 16) | (c3 & 0xffff);\n        t2l = (c2 << 16) | (c1 & 0xffff);\n        c1 = (al & 0xffff) + (t1l & 0xffff);\n        c2 = (al >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n        c3 = (ah & 0xffff) + (t1h & 0xffff) + (c2 >>> 16);\n        c4 = (ah >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n        eh = (c4 << 16) | (c3 & 0xffff);\n        el = (c2 << 16) | (c1 & 0xffff);\n        c1 = (t2l & 0xffff) + (t1l & 0xffff);\n        c2 = (t2l >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n        c3 = (t2h & 0xffff) + (t1h & 0xffff) + (c2 >>> 16);\n        c4 = (t2h >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n        ah = (c4 << 16) | (c3 & 0xffff);\n        al = (c2 << 16) | (c1 & 0xffff);\n    }\n    c1 = (h0l & 0xffff) + (al & 0xffff);\n    c2 = (h0l >>> 16) + (al >>> 16) + (c1 >>> 16);\n    c3 = (h0h & 0xffff) + (ah & 0xffff) + (c2 >>> 16);\n    c4 = (h0h >>> 16) + (ah >>> 16) + (c3 >>> 16);\n    this.h0h = (c4 << 16) | (c3 & 0xffff);\n    this.h0l = (c2 << 16) | (c1 & 0xffff);\n    c1 = (h1l & 0xffff) + (bl & 0xffff);\n    c2 = (h1l >>> 16) + (bl >>> 16) + (c1 >>> 16);\n    c3 = (h1h & 0xffff) + (bh & 0xffff) + (c2 >>> 16);\n    c4 = (h1h >>> 16) + (bh >>> 16) + (c3 >>> 16);\n    this.h1h = (c4 << 16) | (c3 & 0xffff);\n    this.h1l = (c2 << 16) | (c1 & 0xffff);\n    c1 = (h2l & 0xffff) + (cl & 0xffff);\n    c2 = (h2l >>> 16) + (cl >>> 16) + (c1 >>> 16);\n    c3 = (h2h & 0xffff) + (ch & 0xffff) + (c2 >>> 16);\n    c4 = (h2h >>> 16) + (ch >>> 16) + (c3 >>> 16);\n    this.h2h = (c4 << 16) | (c3 & 0xffff);\n    this.h2l = (c2 << 16) | (c1 & 0xffff);\n    c1 = (h3l & 0xffff) + (dl & 0xffff);\n    c2 = (h3l >>> 16) + (dl >>> 16) + (c1 >>> 16);\n    c3 = (h3h & 0xffff) + (dh & 0xffff) + (c2 >>> 16);\n    c4 = (h3h >>> 16) + (dh >>> 16) + (c3 >>> 16);\n    this.h3h = (c4 << 16) | (c3 & 0xffff);\n    this.h3l = (c2 << 16) | (c1 & 0xffff);\n    c1 = (h4l & 0xffff) + (el & 0xffff);\n    c2 = (h4l >>> 16) + (el >>> 16) + (c1 >>> 16);\n    c3 = (h4h & 0xffff) + (eh & 0xffff) + (c2 >>> 16);\n    c4 = (h4h >>> 16) + (eh >>> 16) + (c3 >>> 16);\n    this.h4h = (c4 << 16) | (c3 & 0xffff);\n    this.h4l = (c2 << 16) | (c1 & 0xffff);\n    c1 = (h5l & 0xffff) + (fl & 0xffff);\n    c2 = (h5l >>> 16) + (fl >>> 16) + (c1 >>> 16);\n    c3 = (h5h & 0xffff) + (fh & 0xffff) + (c2 >>> 16);\n    c4 = (h5h >>> 16) + (fh >>> 16) + (c3 >>> 16);\n    this.h5h = (c4 << 16) | (c3 & 0xffff);\n    this.h5l = (c2 << 16) | (c1 & 0xffff);\n    c1 = (h6l & 0xffff) + (gl & 0xffff);\n    c2 = (h6l >>> 16) + (gl >>> 16) + (c1 >>> 16);\n    c3 = (h6h & 0xffff) + (gh & 0xffff) + (c2 >>> 16);\n    c4 = (h6h >>> 16) + (gh >>> 16) + (c3 >>> 16);\n    this.h6h = (c4 << 16) | (c3 & 0xffff);\n    this.h6l = (c2 << 16) | (c1 & 0xffff);\n    c1 = (h7l & 0xffff) + (hl & 0xffff);\n    c2 = (h7l >>> 16) + (hl >>> 16) + (c1 >>> 16);\n    c3 = (h7h & 0xffff) + (hh & 0xffff) + (c2 >>> 16);\n    c4 = (h7h >>> 16) + (hh >>> 16) + (c3 >>> 16);\n    this.h7h = (c4 << 16) | (c3 & 0xffff);\n    this.h7l = (c2 << 16) | (c1 & 0xffff);\n};\nSha512.prototype.hex = function () {\n    this.finalize();\n    const h0h = this.h0h;\n    const h0l = this.h0l;\n    const h1h = this.h1h;\n    const h1l = this.h1l;\n    const h2h = this.h2h;\n    const h2l = this.h2l;\n    const h3h = this.h3h;\n    const h3l = this.h3l;\n    const h4h = this.h4h;\n    const h4l = this.h4l;\n    const h5h = this.h5h;\n    const h5l = this.h5l;\n    const h6h = this.h6h;\n    const h6l = this.h6l;\n    const h7h = this.h7h;\n    const h7l = this.h7l;\n    const bits = this.bits;\n    let hex = HEX_CHARS[(h0h >>> 28) & 0x0f] +\n        HEX_CHARS[(h0h >>> 24) & 0x0f] +\n        HEX_CHARS[(h0h >>> 20) & 0x0f] +\n        HEX_CHARS[(h0h >>> 16) & 0x0f] +\n        HEX_CHARS[(h0h >>> 12) & 0x0f] +\n        HEX_CHARS[(h0h >>> 8) & 0x0f] +\n        HEX_CHARS[(h0h >>> 4) & 0x0f] +\n        HEX_CHARS[h0h & 0x0f] +\n        HEX_CHARS[(h0l >>> 28) & 0x0f] +\n        HEX_CHARS[(h0l >>> 24) & 0x0f] +\n        HEX_CHARS[(h0l >>> 20) & 0x0f] +\n        HEX_CHARS[(h0l >>> 16) & 0x0f] +\n        HEX_CHARS[(h0l >>> 12) & 0x0f] +\n        HEX_CHARS[(h0l >>> 8) & 0x0f] +\n        HEX_CHARS[(h0l >>> 4) & 0x0f] +\n        HEX_CHARS[h0l & 0x0f] +\n        HEX_CHARS[(h1h >>> 28) & 0x0f] +\n        HEX_CHARS[(h1h >>> 24) & 0x0f] +\n        HEX_CHARS[(h1h >>> 20) & 0x0f] +\n        HEX_CHARS[(h1h >>> 16) & 0x0f] +\n        HEX_CHARS[(h1h >>> 12) & 0x0f] +\n        HEX_CHARS[(h1h >>> 8) & 0x0f] +\n        HEX_CHARS[(h1h >>> 4) & 0x0f] +\n        HEX_CHARS[h1h & 0x0f] +\n        HEX_CHARS[(h1l >>> 28) & 0x0f] +\n        HEX_CHARS[(h1l >>> 24) & 0x0f] +\n        HEX_CHARS[(h1l >>> 20) & 0x0f] +\n        HEX_CHARS[(h1l >>> 16) & 0x0f] +\n        HEX_CHARS[(h1l >>> 12) & 0x0f] +\n        HEX_CHARS[(h1l >>> 8) & 0x0f] +\n        HEX_CHARS[(h1l >>> 4) & 0x0f] +\n        HEX_CHARS[h1l & 0x0f] +\n        HEX_CHARS[(h2h >>> 28) & 0x0f] +\n        HEX_CHARS[(h2h >>> 24) & 0x0f] +\n        HEX_CHARS[(h2h >>> 20) & 0x0f] +\n        HEX_CHARS[(h2h >>> 16) & 0x0f] +\n        HEX_CHARS[(h2h >>> 12) & 0x0f] +\n        HEX_CHARS[(h2h >>> 8) & 0x0f] +\n        HEX_CHARS[(h2h >>> 4) & 0x0f] +\n        HEX_CHARS[h2h & 0x0f] +\n        HEX_CHARS[(h2l >>> 28) & 0x0f] +\n        HEX_CHARS[(h2l >>> 24) & 0x0f] +\n        HEX_CHARS[(h2l >>> 20) & 0x0f] +\n        HEX_CHARS[(h2l >>> 16) & 0x0f] +\n        HEX_CHARS[(h2l >>> 12) & 0x0f] +\n        HEX_CHARS[(h2l >>> 8) & 0x0f] +\n        HEX_CHARS[(h2l >>> 4) & 0x0f] +\n        HEX_CHARS[h2l & 0x0f] +\n        HEX_CHARS[(h3h >>> 28) & 0x0f] +\n        HEX_CHARS[(h3h >>> 24) & 0x0f] +\n        HEX_CHARS[(h3h >>> 20) & 0x0f] +\n        HEX_CHARS[(h3h >>> 16) & 0x0f] +\n        HEX_CHARS[(h3h >>> 12) & 0x0f] +\n        HEX_CHARS[(h3h >>> 8) & 0x0f] +\n        HEX_CHARS[(h3h >>> 4) & 0x0f] +\n        HEX_CHARS[h3h & 0x0f];\n    if (bits >= 256) {\n        hex +=\n            HEX_CHARS[(h3l >>> 28) & 0x0f] +\n                HEX_CHARS[(h3l >>> 24) & 0x0f] +\n                HEX_CHARS[(h3l >>> 20) & 0x0f] +\n                HEX_CHARS[(h3l >>> 16) & 0x0f] +\n                HEX_CHARS[(h3l >>> 12) & 0x0f] +\n                HEX_CHARS[(h3l >>> 8) & 0x0f] +\n                HEX_CHARS[(h3l >>> 4) & 0x0f] +\n                HEX_CHARS[h3l & 0x0f];\n    }\n    if (bits >= 384) {\n        hex +=\n            HEX_CHARS[(h4h >>> 28) & 0x0f] +\n                HEX_CHARS[(h4h >>> 24) & 0x0f] +\n                HEX_CHARS[(h4h >>> 20) & 0x0f] +\n                HEX_CHARS[(h4h >>> 16) & 0x0f] +\n                HEX_CHARS[(h4h >>> 12) & 0x0f] +\n                HEX_CHARS[(h4h >>> 8) & 0x0f] +\n                HEX_CHARS[(h4h >>> 4) & 0x0f] +\n                HEX_CHARS[h4h & 0x0f] +\n                HEX_CHARS[(h4l >>> 28) & 0x0f] +\n                HEX_CHARS[(h4l >>> 24) & 0x0f] +\n                HEX_CHARS[(h4l >>> 20) & 0x0f] +\n                HEX_CHARS[(h4l >>> 16) & 0x0f] +\n                HEX_CHARS[(h4l >>> 12) & 0x0f] +\n                HEX_CHARS[(h4l >>> 8) & 0x0f] +\n                HEX_CHARS[(h4l >>> 4) & 0x0f] +\n                HEX_CHARS[h4l & 0x0f] +\n                HEX_CHARS[(h5h >>> 28) & 0x0f] +\n                HEX_CHARS[(h5h >>> 24) & 0x0f] +\n                HEX_CHARS[(h5h >>> 20) & 0x0f] +\n                HEX_CHARS[(h5h >>> 16) & 0x0f] +\n                HEX_CHARS[(h5h >>> 12) & 0x0f] +\n                HEX_CHARS[(h5h >>> 8) & 0x0f] +\n                HEX_CHARS[(h5h >>> 4) & 0x0f] +\n                HEX_CHARS[h5h & 0x0f] +\n                HEX_CHARS[(h5l >>> 28) & 0x0f] +\n                HEX_CHARS[(h5l >>> 24) & 0x0f] +\n                HEX_CHARS[(h5l >>> 20) & 0x0f] +\n                HEX_CHARS[(h5l >>> 16) & 0x0f] +\n                HEX_CHARS[(h5l >>> 12) & 0x0f] +\n                HEX_CHARS[(h5l >>> 8) & 0x0f] +\n                HEX_CHARS[(h5l >>> 4) & 0x0f] +\n                HEX_CHARS[h5l & 0x0f];\n    }\n    if (bits == 512) {\n        hex +=\n            HEX_CHARS[(h6h >>> 28) & 0x0f] +\n                HEX_CHARS[(h6h >>> 24) & 0x0f] +\n                HEX_CHARS[(h6h >>> 20) & 0x0f] +\n                HEX_CHARS[(h6h >>> 16) & 0x0f] +\n                HEX_CHARS[(h6h >>> 12) & 0x0f] +\n                HEX_CHARS[(h6h >>> 8) & 0x0f] +\n                HEX_CHARS[(h6h >>> 4) & 0x0f] +\n                HEX_CHARS[h6h & 0x0f] +\n                HEX_CHARS[(h6l >>> 28) & 0x0f] +\n                HEX_CHARS[(h6l >>> 24) & 0x0f] +\n                HEX_CHARS[(h6l >>> 20) & 0x0f] +\n                HEX_CHARS[(h6l >>> 16) & 0x0f] +\n                HEX_CHARS[(h6l >>> 12) & 0x0f] +\n                HEX_CHARS[(h6l >>> 8) & 0x0f] +\n                HEX_CHARS[(h6l >>> 4) & 0x0f] +\n                HEX_CHARS[h6l & 0x0f] +\n                HEX_CHARS[(h7h >>> 28) & 0x0f] +\n                HEX_CHARS[(h7h >>> 24) & 0x0f] +\n                HEX_CHARS[(h7h >>> 20) & 0x0f] +\n                HEX_CHARS[(h7h >>> 16) & 0x0f] +\n                HEX_CHARS[(h7h >>> 12) & 0x0f] +\n                HEX_CHARS[(h7h >>> 8) & 0x0f] +\n                HEX_CHARS[(h7h >>> 4) & 0x0f] +\n                HEX_CHARS[h7h & 0x0f] +\n                HEX_CHARS[(h7l >>> 28) & 0x0f] +\n                HEX_CHARS[(h7l >>> 24) & 0x0f] +\n                HEX_CHARS[(h7l >>> 20) & 0x0f] +\n                HEX_CHARS[(h7l >>> 16) & 0x0f] +\n                HEX_CHARS[(h7l >>> 12) & 0x0f] +\n                HEX_CHARS[(h7l >>> 8) & 0x0f] +\n                HEX_CHARS[(h7l >>> 4) & 0x0f] +\n                HEX_CHARS[h7l & 0x0f];\n    }\n    return hex;\n};\nSha512.prototype.toString = Sha512.prototype.hex;\nSha512.prototype.digest = function () {\n    this.finalize();\n    const h0h = this.h0h;\n    const h0l = this.h0l;\n    const h1h = this.h1h;\n    const h1l = this.h1l;\n    const h2h = this.h2h;\n    const h2l = this.h2l;\n    const h3h = this.h3h;\n    const h3l = this.h3l;\n    const h4h = this.h4h;\n    const h4l = this.h4l;\n    const h5h = this.h5h;\n    const h5l = this.h5l;\n    const h6h = this.h6h;\n    const h6l = this.h6l;\n    const h7h = this.h7h;\n    const h7l = this.h7l;\n    const bits = this.bits;\n    const arr = [\n        (h0h >>> 24) & 0xff,\n        (h0h >>> 16) & 0xff,\n        (h0h >>> 8) & 0xff,\n        h0h & 0xff,\n        (h0l >>> 24) & 0xff,\n        (h0l >>> 16) & 0xff,\n        (h0l >>> 8) & 0xff,\n        h0l & 0xff,\n        (h1h >>> 24) & 0xff,\n        (h1h >>> 16) & 0xff,\n        (h1h >>> 8) & 0xff,\n        h1h & 0xff,\n        (h1l >>> 24) & 0xff,\n        (h1l >>> 16) & 0xff,\n        (h1l >>> 8) & 0xff,\n        h1l & 0xff,\n        (h2h >>> 24) & 0xff,\n        (h2h >>> 16) & 0xff,\n        (h2h >>> 8) & 0xff,\n        h2h & 0xff,\n        (h2l >>> 24) & 0xff,\n        (h2l >>> 16) & 0xff,\n        (h2l >>> 8) & 0xff,\n        h2l & 0xff,\n        (h3h >>> 24) & 0xff,\n        (h3h >>> 16) & 0xff,\n        (h3h >>> 8) & 0xff,\n        h3h & 0xff,\n    ];\n    if (bits >= 256) {\n        arr.push((h3l >>> 24) & 0xff, (h3l >>> 16) & 0xff, (h3l >>> 8) & 0xff, h3l & 0xff);\n    }\n    if (bits >= 384) {\n        arr.push((h4h >>> 24) & 0xff, (h4h >>> 16) & 0xff, (h4h >>> 8) & 0xff, h4h & 0xff, (h4l >>> 24) & 0xff, (h4l >>> 16) & 0xff, (h4l >>> 8) & 0xff, h4l & 0xff, (h5h >>> 24) & 0xff, (h5h >>> 16) & 0xff, (h5h >>> 8) & 0xff, h5h & 0xff, (h5l >>> 24) & 0xff, (h5l >>> 16) & 0xff, (h5l >>> 8) & 0xff, h5l & 0xff);\n    }\n    if (bits == 512) {\n        arr.push((h6h >>> 24) & 0xff, (h6h >>> 16) & 0xff, (h6h >>> 8) & 0xff, h6h & 0xff, (h6l >>> 24) & 0xff, (h6l >>> 16) & 0xff, (h6l >>> 8) & 0xff, h6l & 0xff, (h7h >>> 24) & 0xff, (h7h >>> 16) & 0xff, (h7h >>> 8) & 0xff, h7h & 0xff, (h7l >>> 24) & 0xff, (h7l >>> 16) & 0xff, (h7l >>> 8) & 0xff, h7l & 0xff);\n    }\n    return arr;\n};\nSha512.prototype.array = Sha512.prototype.digest;\nSha512.prototype.arrayBuffer = function () {\n    this.finalize();\n    const bits = this.bits;\n    const buffer = new ArrayBuffer(bits / 8);\n    const dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0h);\n    dataView.setUint32(4, this.h0l);\n    dataView.setUint32(8, this.h1h);\n    dataView.setUint32(12, this.h1l);\n    dataView.setUint32(16, this.h2h);\n    dataView.setUint32(20, this.h2l);\n    dataView.setUint32(24, this.h3h);\n    if (bits >= 256) {\n        dataView.setUint32(28, this.h3l);\n    }\n    if (bits >= 384) {\n        dataView.setUint32(32, this.h4h);\n        dataView.setUint32(36, this.h4l);\n        dataView.setUint32(40, this.h5h);\n        dataView.setUint32(44, this.h5l);\n    }\n    if (bits == 512) {\n        dataView.setUint32(48, this.h6h);\n        dataView.setUint32(52, this.h6l);\n        dataView.setUint32(56, this.h7h);\n        dataView.setUint32(60, this.h7l);\n    }\n    return buffer;\n};\nSha512.prototype.clone = function () {\n    const hash = new Sha512(this.bits, false);\n    this.copyTo(hash);\n    return hash;\n};\nSha512.prototype.copyTo = function (hash) {\n    let i = 0;\n    const attrs = [\n        'h0h',\n        'h0l',\n        'h1h',\n        'h1l',\n        'h2h',\n        'h2l',\n        'h3h',\n        'h3l',\n        'h4h',\n        'h4l',\n        'h5h',\n        'h5l',\n        'h6h',\n        'h6l',\n        'h7h',\n        'h7l',\n        'start',\n        'bytes',\n        'hBytes',\n        'finalized',\n        'hashed',\n        'lastByteIndex',\n    ];\n    for (i = 0; i < attrs.length; ++i) {\n        hash[attrs[i]] = this[attrs[i]];\n    }\n    for (i = 0; i < this.blocks.length; ++i) {\n        hash.blocks[i] = this.blocks[i];\n    }\n};\nfunction HmacSha512(key, bits, sharedMemory) {\n    var i;\n    const result = formatMessage(key);\n    key = result[0];\n    if (result[1]) {\n        const bytes = [];\n        const length = key.length;\n        let index = 0;\n        let code;\n        for (var i = 0; i < length; ++i) {\n            code = key.charCodeAt(i);\n            if (code < 0x80) {\n                bytes[index++] = code;\n            }\n            else if (code < 0x800) {\n                bytes[index++] = 0xc0 | (code >>> 6);\n                bytes[index++] = 0x80 | (code & 0x3f);\n            }\n            else if (code < 0xd800 || code >= 0xe000) {\n                bytes[index++] = 0xe0 | (code >>> 12);\n                bytes[index++] = 0x80 | ((code >>> 6) & 0x3f);\n                bytes[index++] = 0x80 | (code & 0x3f);\n            }\n            else {\n                code =\n                    0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n                bytes[index++] = 0xf0 | (code >>> 18);\n                bytes[index++] = 0x80 | ((code >>> 12) & 0x3f);\n                bytes[index++] = 0x80 | ((code >>> 6) & 0x3f);\n                bytes[index++] = 0x80 | (code & 0x3f);\n            }\n        }\n        key = bytes;\n    }\n    if (key.length > 128) {\n        key = new Sha512(bits, true).update(key).array();\n    }\n    const oKeyPad = [];\n    const iKeyPad = [];\n    for (var i = 0; i < 128; ++i) {\n        const b = key[i] || 0;\n        oKeyPad[i] = 0x5c ^ b;\n        iKeyPad[i] = 0x36 ^ b;\n    }\n    Sha512.call(this, bits, sharedMemory);\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n}\nHmacSha512.prototype = new Sha512();\nHmacSha512.prototype.finalize = function () {\n    Sha512.prototype.finalize.call(this);\n    if (this.inner) {\n        this.inner = false;\n        const innerHash = this.array();\n        Sha512.call(this, this.bits, this.sharedMemory);\n        this.update(this.oKeyPad);\n        this.update(innerHash);\n        Sha512.prototype.finalize.call(this);\n    }\n};\nHmacSha512.prototype.clone = function () {\n    const hash = new HmacSha512([], this.bits, false);\n    this.copyTo(hash);\n    hash.inner = this.inner;\n    for (let i = 0; i < this.oKeyPad.length; ++i) {\n        hash.oKeyPad[i] = this.oKeyPad[i];\n    }\n    return hash;\n};\nexport const sha512_256 = createMethod(256);\n","import nacl from 'tweetnacl';\nimport { decodeAsBytes, encodeBytes } from './hi-base32.js';\nimport { createMethod } from './sha512.js';\nconst sha512_256 = createMethod(256);\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';\nconst ALGORAND_PUBLIC_KEY_BYTE_LENGTH = 32;\nconst ALGORAND_ADDRESS_BYTE_LENGTH = 36;\nconst ALGORAND_CHECKSUM_BYTE_LENGTH = 4;\nconst ALGORAND_ADDRESS_LENGTH = 58;\nconst HASH_BYTES_LENGTH = 32;\nexport const MALFORMED_ADDRESS_ERROR_MSG = 'Malformed address';\nexport const ALGORAND_ADDRESS_BAD_CHECKSUM_ERROR_MSG = 'Bad checksum';\nexport const INVALID_BASE64URL_INPUT = 'Invalid base64url input';\n/**\n * Bytes to Base64URL\n * @param {Uint8Array| ArrayBuffer} arr Bytes to convert to URL safe Base64\n */\nexport function toBase64URL(arr) {\n    const bytes = arr instanceof Uint8Array ? arr : new Uint8Array(arr);\n    const len = bytes.length;\n    let base64 = '';\n    for (let i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1);\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2);\n    }\n    return base64;\n}\n/**\n * Base64URL to Bytes\n * @param {string} base64url URL safe Base64 string\n */\nexport function fromBase64Url(base64url) {\n    if (typeof base64url !== 'string') {\n        throw new Error(INVALID_BASE64URL_INPUT);\n    }\n    return new Uint8Array(\n    // TODO: Cross-platform solution since atob is deprecated in Node\n    atob(base64url.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, ''))\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n}\nfunction concatArrays(...arrs) {\n    const size = arrs.reduce((sum, arr) => sum + arr.length, 0);\n    const c = new Uint8Array(size);\n    let offset = 0;\n    for (let i = 0; i < arrs.length; i++) {\n        c.set(arrs[i], offset);\n        offset += arrs[i].length;\n    }\n    return c;\n}\nexport function encodeAddress(address) {\n    // compute checksum\n    const checksum = sha512_256\n        .array(address)\n        .slice(nacl.sign.publicKeyLength - ALGORAND_CHECKSUM_BYTE_LENGTH, nacl.sign.publicKeyLength);\n    const addr = encodeBytes(concatArrays(address, checksum));\n    return addr.toString().slice(0, ALGORAND_ADDRESS_LENGTH); // removing the extra '===='\n}\n/**\n * decodeAddress takes an Algorand address in string form and decodes it into a Uint8Array.\n * @param address - an Algorand address with checksum.\n * @returns the decoded form of the address's public key and checksum\n */\nexport function decodeAddress(address) {\n    if (typeof address !== 'string' ||\n        address.length !== ALGORAND_ADDRESS_LENGTH) {\n        throw new Error(MALFORMED_ADDRESS_ERROR_MSG);\n    }\n    // try to decode\n    const decoded = decodeAsBytes(address.toString());\n    // Find publickey and checksum\n    const pk = new Uint8Array(decoded.slice(0, ALGORAND_ADDRESS_BYTE_LENGTH - ALGORAND_CHECKSUM_BYTE_LENGTH));\n    const cs = new Uint8Array(decoded.slice(ALGORAND_PUBLIC_KEY_BYTE_LENGTH, ALGORAND_ADDRESS_BYTE_LENGTH));\n    // Compute checksum\n    const checksum = sha512_256\n        .array(pk)\n        .slice(HASH_BYTES_LENGTH - ALGORAND_CHECKSUM_BYTE_LENGTH, HASH_BYTES_LENGTH);\n    // Check if the checksum and the address are equal\n    if (checksum.length !== cs.length ||\n        !Array.from(checksum).every((val, i) => val === cs[i])) {\n        throw new Error(ALGORAND_ADDRESS_BAD_CHECKSUM_ERROR_MSG);\n    }\n    return pk;\n}\n","export const DEFAULT_FETCH_OPTIONS = {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n};\n","export const INVALID_INPUT_MESSAGE = 'Invalid input';\nexport const INVALID_RESPONSE_MESSAGE = 'Invalid response';\nexport const CREDENTIAL_ACTION_FAILURE = 'Credential action failed';\nexport const UNSIGNED_MESSAGE = 'Message must be signed';\nexport class ServiceError extends Error {\n}\nexport function isValidResponse(r) {\n    return r.ok && (r.status === 200 || r.status === 201);\n}\n","/**\n * This module is only for browser and currently not used in the project.\n * However, it could be useful for extension wallets or other browser-based wallets.\n */\nimport { decodeAddress, fromBase64Url, toBase64URL } from './encoding.js';\nimport { DEFAULT_FETCH_OPTIONS } from './constants.js';\nimport { isValidResponse } from './errors.js';\nexport const DEFAULT_ATTESTATION_OPTIONS = {\n    attestationType: 'none',\n    authenticatorSelection: {\n        authenticatorAttachment: 'platform',\n        userVerification: 'required',\n        requireResidentKey: false,\n    },\n    extensions: {\n        liquid: true,\n    },\n};\n/**\n * Encode a PublicKeyCredential\n *\n * @param credential - PublicKeyCredential from navigator.credentials.create\n */\nfunction encodeAttestationCredential(credential) {\n    const response = credential.response;\n    return {\n        id: credential.id,\n        rawId: toBase64URL(credential.rawId),\n        type: credential.type,\n        response: {\n            clientDataJSON: toBase64URL(response.clientDataJSON),\n            attestationObject: toBase64URL(response.attestationObject),\n        },\n    };\n}\nfunction decodeAttestationOptions(options, liquidOptions) {\n    const attestationOptions = { ...options };\n    attestationOptions.user.id = decodeAddress(liquidOptions.address);\n    attestationOptions.user.name = liquidOptions.address;\n    attestationOptions.user.displayName = liquidOptions.address;\n    attestationOptions.challenge = fromBase64Url(options.challenge);\n    if (attestationOptions.excludeCredentials) {\n        for (const cred of attestationOptions.excludeCredentials) {\n            cred.id = fromBase64Url(cred.id);\n        }\n    }\n    return attestationOptions;\n}\n/**\n * Fetch interface for Attestation Options\n *\n * @param origin\n * @param options\n * @todo: Generate Typed JSON-RPC clients from Swagger/OpenAPI\n */\nexport async function fetchAttestationRequest(origin, options = DEFAULT_ATTESTATION_OPTIONS) {\n    return await fetch(`${origin}/attestation/request`, {\n        ...DEFAULT_FETCH_OPTIONS,\n        body: JSON.stringify(options),\n    });\n}\n/**\n * Fetch interface for Attestation Response\n *\n * @param origin\n * @param credential\n * @todo: Generate Typed JSON-RPC clients from Swagger/OpenAPI\n */\nexport async function fetchAttestationResponse(origin, credential) {\n    return await fetch(`${origin}/attestation/response`, {\n        ...DEFAULT_FETCH_OPTIONS,\n        body: JSON.stringify(credential),\n    }).then((r) => {\n        if (!isValidResponse(r))\n            throw new Error(r.statusText);\n        return r.json();\n    });\n}\n/**\n * Attestation\n *\n * The process of creating a new credential. It has two parts:\n *\n * - The server creates a challenge and sends it to the client\n * - The client creates a credential and sends it to the server\n *\n */\nexport async function attestation(origin, onChallenge, options = DEFAULT_ATTESTATION_OPTIONS) {\n    const encodedAttestationOptions = await fetchAttestationRequest(origin, options).then((r) => {\n        if (!isValidResponse(r))\n            throw new Error(r.statusText);\n        return r.json();\n    });\n    if (typeof encodedAttestationOptions.error !== 'undefined') {\n        throw new Error(encodedAttestationOptions.error);\n    }\n    const liquidOptions = await onChallenge(fromBase64Url(encodedAttestationOptions.challenge));\n    const decodedPublicKey = decodeAttestationOptions(encodedAttestationOptions, liquidOptions);\n    const credential = encodeAttestationCredential((await navigator.credentials.create({\n        publicKey: decodedPublicKey,\n    })));\n    credential.clientExtensionResults = { liquid: liquidOptions };\n    return await fetchAttestationResponse(origin, credential);\n}\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport { SocketWithoutUpgrade, SocketWithUpgrade, } from \"./socket.js\";\nexport const protocol = Socket.protocol;\nexport { Transport, TransportError } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\nexport { nextTick } from \"./globals.node.js\";\nexport { Fetch } from \"./transports/polling-fetch.js\";\nexport { XHR as NodeXHR } from \"./transports/polling-xhr.node.js\";\nexport { XHR } from \"./transports/polling-xhr.js\";\nexport { WS as NodeWebSocket } from \"./transports/websocket.node.js\";\nexport { WS as WebSocket } from \"./transports/websocket.js\";\nexport { WT as WebTransport } from \"./transports/webtransport.js\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","export default {\n    numeric: \"Numeric\",\n    alphanumeric: \"Alphanumeric\",\n    byte: \"Byte\",\n    kanji: \"Kanji\"\n};\n//# sourceMappingURL=modes.js.map","import modes from \"../constants/modes.js\";\nexport default function getMode(data) {\n    switch (true) {\n        case /^[0-9]*$/.test(data):\n            return modes.numeric;\n        case /^[0-9A-Z $%*+\\-./:]*$/.test(data):\n            return modes.alphanumeric;\n        default:\n            return modes.byte;\n    }\n}\n//# sourceMappingURL=getMode.js.map","const isObject = (obj) => !!obj && typeof obj === \"object\" && !Array.isArray(obj);\nexport default function mergeDeep(target, ...sources) {\n    if (!sources.length)\n        return target;\n    const source = sources.shift();\n    if (source === undefined || !isObject(target) || !isObject(source))\n        return target;\n    target = { ...target };\n    Object.keys(source).forEach((key) => {\n        const targetValue = target[key];\n        const sourceValue = source[key];\n        if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\n            target[key] = sourceValue;\n        }\n        else if (isObject(targetValue) && isObject(sourceValue)) {\n            target[key] = mergeDeep(Object.assign({}, targetValue), sourceValue);\n        }\n        else {\n            target[key] = sourceValue;\n        }\n    });\n    return mergeDeep(target, ...sources);\n}\n//# sourceMappingURL=merge.js.map","export default function downloadURI(uri, name) {\n    const link = document.createElement(\"a\");\n    link.download = name;\n    link.href = uri;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\n//# sourceMappingURL=downloadURI.js.map","export default function calculateImageSize({ originalHeight, originalWidth, maxHiddenDots, maxHiddenAxisDots, dotSize }) {\n    const hideDots = { x: 0, y: 0 };\n    const imageSize = { x: 0, y: 0 };\n    if (originalHeight <= 0 || originalWidth <= 0 || maxHiddenDots <= 0 || dotSize <= 0) {\n        return {\n            height: 0,\n            width: 0,\n            hideYDots: 0,\n            hideXDots: 0\n        };\n    }\n    const k = originalHeight / originalWidth;\n    //Getting the maximum possible axis hidden dots\n    hideDots.x = Math.floor(Math.sqrt(maxHiddenDots / k));\n    //The count of hidden dot's can't be less than 1\n    if (hideDots.x <= 0)\n        hideDots.x = 1;\n    //Check the limit of the maximum allowed axis hidden dots\n    if (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.x)\n        hideDots.x = maxHiddenAxisDots;\n    //The count of dots should be odd\n    if (hideDots.x % 2 === 0)\n        hideDots.x--;\n    imageSize.x = hideDots.x * dotSize;\n    //Calculate opposite axis hidden dots based on axis value.\n    //The value will be odd.\n    //We use ceil to prevent dots covering by the image.\n    hideDots.y = 1 + 2 * Math.ceil((hideDots.x * k - 1) / 2);\n    imageSize.y = Math.round(imageSize.x * k);\n    //If the result dots count is bigger than max - then decrease size and calculate again\n    if (hideDots.y * hideDots.x > maxHiddenDots || (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.y)) {\n        if (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.y) {\n            hideDots.y = maxHiddenAxisDots;\n            if (hideDots.y % 2 === 0)\n                hideDots.x--;\n        }\n        else {\n            hideDots.y -= 2;\n        }\n        imageSize.y = hideDots.y * dotSize;\n        hideDots.x = 1 + 2 * Math.ceil((hideDots.y / k - 1) / 2);\n        imageSize.x = Math.round(imageSize.y / k);\n    }\n    return {\n        height: imageSize.y,\n        width: imageSize.x,\n        hideYDots: hideDots.y,\n        hideXDots: hideDots.x\n    };\n}\n//# sourceMappingURL=calculateImageSize.js.map","export default async function toDataURL(url) {\n    return new Promise((resolve) => {\n        const xhr = new XMLHttpRequest();\n        xhr.onload = function () {\n            const reader = new FileReader();\n            reader.onloadend = function () {\n                resolve(reader.result);\n            };\n            reader.readAsDataURL(xhr.response);\n        };\n        xhr.open(\"GET\", url);\n        xhr.responseType = \"blob\";\n        xhr.send();\n    });\n}\n//# sourceMappingURL=toDataUrl.js.map","export default {\n    L: 0.07,\n    M: 0.15,\n    Q: 0.25,\n    H: 0.3\n};\n//# sourceMappingURL=errorCorrectionPercents.js.map","export default {\n    dots: \"dots\",\n    rounded: \"rounded\",\n    classy: \"classy\",\n    classyRounded: \"classy-rounded\",\n    square: \"square\",\n    extraRounded: \"extra-rounded\"\n};\n//# sourceMappingURL=dotTypes.js.map","import dotTypes from \"../../constants/dotTypes.js\";\nexport default class QRDot {\n    constructor({ svg, type }) {\n        this._svg = svg;\n        this._type = type;\n    }\n    draw(x, y, size, getNeighbor) {\n        const type = this._type;\n        let drawFunction;\n        switch (type) {\n            case dotTypes.dots:\n                drawFunction = this._drawDot;\n                break;\n            case dotTypes.classy:\n                drawFunction = this._drawClassy;\n                break;\n            case dotTypes.classyRounded:\n                drawFunction = this._drawClassyRounded;\n                break;\n            case dotTypes.rounded:\n                drawFunction = this._drawRounded;\n                break;\n            case dotTypes.extraRounded:\n                drawFunction = this._drawExtraRounded;\n                break;\n            case dotTypes.square:\n            default:\n                drawFunction = this._drawSquare;\n        }\n        drawFunction.call(this, { x, y, size, getNeighbor });\n    }\n    _rotateFigure({ x, y, size, rotation = 0, draw }) {\n        const cx = x + size / 2;\n        const cy = y + size / 2;\n        draw();\n        this._element?.setAttribute(\"transform\", `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n    }\n    _basicDot(args) {\n        const { size, x, y } = args;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n                this._element.setAttribute(\"cx\", String(x + size / 2));\n                this._element.setAttribute(\"cy\", String(y + size / 2));\n                this._element.setAttribute(\"r\", String(size / 2));\n            }\n        });\n    }\n    _basicSquare(args) {\n        const { size, x, y } = args;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n                this._element.setAttribute(\"x\", String(x));\n                this._element.setAttribute(\"y\", String(y));\n                this._element.setAttribute(\"width\", String(size));\n                this._element.setAttribute(\"height\", String(size));\n            }\n        });\n    }\n    //if rotation === 0 - right side is rounded\n    _basicSideRounded(args) {\n        const { size, x, y } = args;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                this._element.setAttribute(\"d\", `M ${x} ${y}` + //go to top left position\n                    `v ${size}` + //draw line to left bottom corner\n                    `h ${size / 2}` + //draw line to left bottom corner + half of size right\n                    `a ${size / 2} ${size / 2}, 0, 0, 0, 0 ${-size}` // draw rounded corner\n                );\n            }\n        });\n    }\n    //if rotation === 0 - top right corner is rounded\n    _basicCornerRounded(args) {\n        const { size, x, y } = args;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                this._element.setAttribute(\"d\", `M ${x} ${y}` + //go to top left position\n                    `v ${size}` + //draw line to left bottom corner\n                    `h ${size}` + //draw line to right bottom corner\n                    `v ${-size / 2}` + //draw line to right bottom corner + half of size top\n                    `a ${size / 2} ${size / 2}, 0, 0, 0, ${-size / 2} ${-size / 2}` // draw rounded corner\n                );\n            }\n        });\n    }\n    //if rotation === 0 - top right corner is rounded\n    _basicCornerExtraRounded(args) {\n        const { size, x, y } = args;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                this._element.setAttribute(\"d\", `M ${x} ${y}` + //go to top left position\n                    `v ${size}` + //draw line to left bottom corner\n                    `h ${size}` + //draw line to right bottom corner\n                    `a ${size} ${size}, 0, 0, 0, ${-size} ${-size}` // draw rounded top right corner\n                );\n            }\n        });\n    }\n    //if rotation === 0 - left bottom and right top corners are rounded\n    _basicCornersRounded(args) {\n        const { size, x, y } = args;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                this._element.setAttribute(\"d\", `M ${x} ${y}` + //go to left top position\n                    `v ${size / 2}` + //draw line to left top corner + half of size bottom\n                    `a ${size / 2} ${size / 2}, 0, 0, 0, ${size / 2} ${size / 2}` + // draw rounded left bottom corner\n                    `h ${size / 2}` + //draw line to right bottom corner\n                    `v ${-size / 2}` + //draw line to right bottom corner + half of size top\n                    `a ${size / 2} ${size / 2}, 0, 0, 0, ${-size / 2} ${-size / 2}` // draw rounded right top corner\n                );\n            }\n        });\n    }\n    _drawDot({ x, y, size }) {\n        this._basicDot({ x, y, size, rotation: 0 });\n    }\n    _drawSquare({ x, y, size }) {\n        this._basicSquare({ x, y, size, rotation: 0 });\n    }\n    _drawRounded({ x, y, size, getNeighbor }) {\n        const leftNeighbor = getNeighbor ? +getNeighbor(-1, 0) : 0;\n        const rightNeighbor = getNeighbor ? +getNeighbor(1, 0) : 0;\n        const topNeighbor = getNeighbor ? +getNeighbor(0, -1) : 0;\n        const bottomNeighbor = getNeighbor ? +getNeighbor(0, 1) : 0;\n        const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n        if (neighborsCount === 0) {\n            this._basicDot({ x, y, size, rotation: 0 });\n            return;\n        }\n        if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n            this._basicSquare({ x, y, size, rotation: 0 });\n            return;\n        }\n        if (neighborsCount === 2) {\n            let rotation = 0;\n            if (leftNeighbor && topNeighbor) {\n                rotation = Math.PI / 2;\n            }\n            else if (topNeighbor && rightNeighbor) {\n                rotation = Math.PI;\n            }\n            else if (rightNeighbor && bottomNeighbor) {\n                rotation = -Math.PI / 2;\n            }\n            this._basicCornerRounded({ x, y, size, rotation });\n            return;\n        }\n        if (neighborsCount === 1) {\n            let rotation = 0;\n            if (topNeighbor) {\n                rotation = Math.PI / 2;\n            }\n            else if (rightNeighbor) {\n                rotation = Math.PI;\n            }\n            else if (bottomNeighbor) {\n                rotation = -Math.PI / 2;\n            }\n            this._basicSideRounded({ x, y, size, rotation });\n            return;\n        }\n    }\n    _drawExtraRounded({ x, y, size, getNeighbor }) {\n        const leftNeighbor = getNeighbor ? +getNeighbor(-1, 0) : 0;\n        const rightNeighbor = getNeighbor ? +getNeighbor(1, 0) : 0;\n        const topNeighbor = getNeighbor ? +getNeighbor(0, -1) : 0;\n        const bottomNeighbor = getNeighbor ? +getNeighbor(0, 1) : 0;\n        const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n        if (neighborsCount === 0) {\n            this._basicDot({ x, y, size, rotation: 0 });\n            return;\n        }\n        if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n            this._basicSquare({ x, y, size, rotation: 0 });\n            return;\n        }\n        if (neighborsCount === 2) {\n            let rotation = 0;\n            if (leftNeighbor && topNeighbor) {\n                rotation = Math.PI / 2;\n            }\n            else if (topNeighbor && rightNeighbor) {\n                rotation = Math.PI;\n            }\n            else if (rightNeighbor && bottomNeighbor) {\n                rotation = -Math.PI / 2;\n            }\n            this._basicCornerExtraRounded({ x, y, size, rotation });\n            return;\n        }\n        if (neighborsCount === 1) {\n            let rotation = 0;\n            if (topNeighbor) {\n                rotation = Math.PI / 2;\n            }\n            else if (rightNeighbor) {\n                rotation = Math.PI;\n            }\n            else if (bottomNeighbor) {\n                rotation = -Math.PI / 2;\n            }\n            this._basicSideRounded({ x, y, size, rotation });\n            return;\n        }\n    }\n    _drawClassy({ x, y, size, getNeighbor }) {\n        const leftNeighbor = getNeighbor ? +getNeighbor(-1, 0) : 0;\n        const rightNeighbor = getNeighbor ? +getNeighbor(1, 0) : 0;\n        const topNeighbor = getNeighbor ? +getNeighbor(0, -1) : 0;\n        const bottomNeighbor = getNeighbor ? +getNeighbor(0, 1) : 0;\n        const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n        if (neighborsCount === 0) {\n            this._basicCornersRounded({ x, y, size, rotation: Math.PI / 2 });\n            return;\n        }\n        if (!leftNeighbor && !topNeighbor) {\n            this._basicCornerRounded({ x, y, size, rotation: -Math.PI / 2 });\n            return;\n        }\n        if (!rightNeighbor && !bottomNeighbor) {\n            this._basicCornerRounded({ x, y, size, rotation: Math.PI / 2 });\n            return;\n        }\n        this._basicSquare({ x, y, size, rotation: 0 });\n    }\n    _drawClassyRounded({ x, y, size, getNeighbor }) {\n        const leftNeighbor = getNeighbor ? +getNeighbor(-1, 0) : 0;\n        const rightNeighbor = getNeighbor ? +getNeighbor(1, 0) : 0;\n        const topNeighbor = getNeighbor ? +getNeighbor(0, -1) : 0;\n        const bottomNeighbor = getNeighbor ? +getNeighbor(0, 1) : 0;\n        const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n        if (neighborsCount === 0) {\n            this._basicCornersRounded({ x, y, size, rotation: Math.PI / 2 });\n            return;\n        }\n        if (!leftNeighbor && !topNeighbor) {\n            this._basicCornerExtraRounded({ x, y, size, rotation: -Math.PI / 2 });\n            return;\n        }\n        if (!rightNeighbor && !bottomNeighbor) {\n            this._basicCornerExtraRounded({ x, y, size, rotation: Math.PI / 2 });\n            return;\n        }\n        this._basicSquare({ x, y, size, rotation: 0 });\n    }\n}\n//# sourceMappingURL=QRDot.js.map","export default {\n    dot: \"dot\",\n    square: \"square\",\n    extraRounded: \"extra-rounded\"\n};\n//# sourceMappingURL=cornerSquareTypes.js.map","import cornerSquareTypes from \"../../constants/cornerSquareTypes.js\";\nexport default class QRCornerSquare {\n    constructor({ svg, type }) {\n        this._svg = svg;\n        this._type = type;\n    }\n    draw(x, y, size, rotation) {\n        const type = this._type;\n        let drawFunction;\n        switch (type) {\n            case cornerSquareTypes.square:\n                drawFunction = this._drawSquare;\n                break;\n            case cornerSquareTypes.extraRounded:\n                drawFunction = this._drawExtraRounded;\n                break;\n            case cornerSquareTypes.dot:\n            default:\n                drawFunction = this._drawDot;\n        }\n        drawFunction.call(this, { x, y, size, rotation });\n    }\n    _rotateFigure({ x, y, size, rotation = 0, draw }) {\n        const cx = x + size / 2;\n        const cy = y + size / 2;\n        draw();\n        this._element?.setAttribute(\"transform\", `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n    }\n    _basicDot(args) {\n        const { size, x, y } = args;\n        const dotSize = size / 7;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                this._element.setAttribute(\"clip-rule\", \"evenodd\");\n                this._element.setAttribute(\"d\", `M ${x + size / 2} ${y}` + // M cx, y //  Move to top of ring\n                    `a ${size / 2} ${size / 2} 0 1 0 0.1 0` + // a outerRadius, outerRadius, 0, 1, 0, 1, 0 // Draw outer arc, but don't close it\n                    `z` + // Z // Close the outer shape\n                    `m 0 ${dotSize}` + // m -1 outerRadius-innerRadius // Move to top point of inner radius\n                    `a ${size / 2 - dotSize} ${size / 2 - dotSize} 0 1 1 -0.1 0` + // a innerRadius, innerRadius, 0, 1, 1, -1, 0 // Draw inner arc, but don't close it\n                    `Z` // Z // Close the inner ring. Actually will still work without, but inner ring will have one unit missing in stroke\n                );\n            }\n        });\n    }\n    _basicSquare(args) {\n        const { size, x, y } = args;\n        const dotSize = size / 7;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                this._element.setAttribute(\"clip-rule\", \"evenodd\");\n                this._element.setAttribute(\"d\", `M ${x} ${y}` +\n                    `v ${size}` +\n                    `h ${size}` +\n                    `v ${-size}` +\n                    `z` +\n                    `M ${x + dotSize} ${y + dotSize}` +\n                    `h ${size - 2 * dotSize}` +\n                    `v ${size - 2 * dotSize}` +\n                    `h ${-size + 2 * dotSize}` +\n                    `z`);\n            }\n        });\n    }\n    _basicExtraRounded(args) {\n        const { size, x, y } = args;\n        const dotSize = size / 7;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                this._element.setAttribute(\"clip-rule\", \"evenodd\");\n                this._element.setAttribute(\"d\", `M ${x} ${y + 2.5 * dotSize}` +\n                    `v ${2 * dotSize}` +\n                    `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${dotSize * 2.5} ${dotSize * 2.5}` +\n                    `h ${2 * dotSize}` +\n                    `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${dotSize * 2.5} ${-dotSize * 2.5}` +\n                    `v ${-2 * dotSize}` +\n                    `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${-dotSize * 2.5} ${-dotSize * 2.5}` +\n                    `h ${-2 * dotSize}` +\n                    `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${-dotSize * 2.5} ${dotSize * 2.5}` +\n                    `M ${x + 2.5 * dotSize} ${y + dotSize}` +\n                    `h ${2 * dotSize}` +\n                    `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${dotSize * 1.5} ${dotSize * 1.5}` +\n                    `v ${2 * dotSize}` +\n                    `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${-dotSize * 1.5} ${dotSize * 1.5}` +\n                    `h ${-2 * dotSize}` +\n                    `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${-dotSize * 1.5} ${-dotSize * 1.5}` +\n                    `v ${-2 * dotSize}` +\n                    `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${dotSize * 1.5} ${-dotSize * 1.5}`);\n            }\n        });\n    }\n    _drawDot({ x, y, size, rotation }) {\n        this._basicDot({ x, y, size, rotation });\n    }\n    _drawSquare({ x, y, size, rotation }) {\n        this._basicSquare({ x, y, size, rotation });\n    }\n    _drawExtraRounded({ x, y, size, rotation }) {\n        this._basicExtraRounded({ x, y, size, rotation });\n    }\n}\n//# sourceMappingURL=QRCornerSquare.js.map","export default {\n    dot: \"dot\",\n    square: \"square\"\n};\n//# sourceMappingURL=cornerDotTypes.js.map","import cornerDotTypes from \"../../constants/cornerDotTypes.js\";\nexport default class QRCornerDot {\n    constructor({ svg, type }) {\n        this._svg = svg;\n        this._type = type;\n    }\n    draw(x, y, size, rotation) {\n        const type = this._type;\n        let drawFunction;\n        switch (type) {\n            case cornerDotTypes.square:\n                drawFunction = this._drawSquare;\n                break;\n            case cornerDotTypes.dot:\n            default:\n                drawFunction = this._drawDot;\n        }\n        drawFunction.call(this, { x, y, size, rotation });\n    }\n    _rotateFigure({ x, y, size, rotation = 0, draw }) {\n        const cx = x + size / 2;\n        const cy = y + size / 2;\n        draw();\n        this._element?.setAttribute(\"transform\", `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n    }\n    _basicDot(args) {\n        const { size, x, y } = args;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n                this._element.setAttribute(\"cx\", String(x + size / 2));\n                this._element.setAttribute(\"cy\", String(y + size / 2));\n                this._element.setAttribute(\"r\", String(size / 2));\n            }\n        });\n    }\n    _basicSquare(args) {\n        const { size, x, y } = args;\n        this._rotateFigure({\n            ...args,\n            draw: () => {\n                this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n                this._element.setAttribute(\"x\", String(x));\n                this._element.setAttribute(\"y\", String(y));\n                this._element.setAttribute(\"width\", String(size));\n                this._element.setAttribute(\"height\", String(size));\n            }\n        });\n    }\n    _drawDot({ x, y, size, rotation }) {\n        this._basicDot({ x, y, size, rotation });\n    }\n    _drawSquare({ x, y, size, rotation }) {\n        this._basicSquare({ x, y, size, rotation });\n    }\n}\n//# sourceMappingURL=QRCornerDot.js.map","export default {\n    radial: \"radial\",\n    linear: \"linear\"\n};\n//# sourceMappingURL=gradientTypes.js.map","export default {\n    square: \"square\",\n    circle: \"circle\"\n};\n//# sourceMappingURL=shapeTypes.js.map","import calculateImageSize from \"../tools/calculateImageSize.js\";\nimport toDataUrl from \"../tools/toDataUrl.js\";\nimport errorCorrectionPercents from \"../constants/errorCorrectionPercents.js\";\nimport QRDot from \"../figures/dot/QRDot.js\";\nimport QRCornerSquare from \"../figures/cornerSquare/QRCornerSquare.js\";\nimport QRCornerDot from \"../figures/cornerDot/QRCornerDot.js\";\nimport gradientTypes from \"../constants/gradientTypes.js\";\nimport shapeTypes from \"../constants/shapeTypes.js\";\nconst squareMask = [\n    [1, 1, 1, 1, 1, 1, 1],\n    [1, 0, 0, 0, 0, 0, 1],\n    [1, 0, 0, 0, 0, 0, 1],\n    [1, 0, 0, 0, 0, 0, 1],\n    [1, 0, 0, 0, 0, 0, 1],\n    [1, 0, 0, 0, 0, 0, 1],\n    [1, 1, 1, 1, 1, 1, 1]\n];\nconst dotMask = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0]\n];\nexport default class QRSVG {\n    //TODO don't pass all options to this class\n    constructor(options) {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n        this._element.setAttribute(\"width\", String(options.width));\n        this._element.setAttribute(\"height\", String(options.height));\n        this._defs = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n        this._element.appendChild(this._defs);\n        this._options = options;\n    }\n    get width() {\n        return this._options.width;\n    }\n    get height() {\n        return this._options.height;\n    }\n    getElement() {\n        return this._element;\n    }\n    async drawQR(qr) {\n        const count = qr.getModuleCount();\n        const minSize = Math.min(this._options.width, this._options.height) - this._options.margin * 2;\n        const realQRSize = this._options.shape === shapeTypes.circle ? minSize / Math.sqrt(2) : minSize;\n        const dotSize = Math.floor(realQRSize / count);\n        let drawImageSize = {\n            hideXDots: 0,\n            hideYDots: 0,\n            width: 0,\n            height: 0\n        };\n        this._qr = qr;\n        if (this._options.image) {\n            //We need it to get image size\n            await this.loadImage();\n            if (!this._image)\n                return;\n            const { imageOptions, qrOptions } = this._options;\n            const coverLevel = imageOptions.imageSize * errorCorrectionPercents[qrOptions.errorCorrectionLevel];\n            const maxHiddenDots = Math.floor(coverLevel * count * count);\n            drawImageSize = calculateImageSize({\n                originalWidth: this._image.width,\n                originalHeight: this._image.height,\n                maxHiddenDots,\n                maxHiddenAxisDots: count - 14,\n                dotSize\n            });\n        }\n        this.drawBackground();\n        this.drawDots((i, j) => {\n            if (this._options.imageOptions.hideBackgroundDots) {\n                if (i >= (count - drawImageSize.hideXDots) / 2 &&\n                    i < (count + drawImageSize.hideXDots) / 2 &&\n                    j >= (count - drawImageSize.hideYDots) / 2 &&\n                    j < (count + drawImageSize.hideYDots) / 2) {\n                    return false;\n                }\n            }\n            if (squareMask[i]?.[j] || squareMask[i - count + 7]?.[j] || squareMask[i]?.[j - count + 7]) {\n                return false;\n            }\n            if (dotMask[i]?.[j] || dotMask[i - count + 7]?.[j] || dotMask[i]?.[j - count + 7]) {\n                return false;\n            }\n            return true;\n        });\n        this.drawCorners();\n        if (this._options.image) {\n            await this.drawImage({ width: drawImageSize.width, height: drawImageSize.height, count, dotSize });\n        }\n    }\n    drawBackground() {\n        const element = this._element;\n        const options = this._options;\n        if (element) {\n            const gradientOptions = options.backgroundOptions?.gradient;\n            const color = options.backgroundOptions?.color;\n            if (gradientOptions || color) {\n                this._createColor({\n                    options: gradientOptions,\n                    color: color,\n                    additionalRotation: 0,\n                    x: 0,\n                    y: 0,\n                    height: options.height,\n                    width: options.width,\n                    name: \"background-color\"\n                });\n            }\n            if (options.backgroundOptions?.round) {\n                const size = Math.min(options.width, options.height);\n                const element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n                this._backgroundClipPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"clipPath\");\n                this._backgroundClipPath.setAttribute(\"id\", \"clip-path-background-color\");\n                this._defs.appendChild(this._backgroundClipPath);\n                element.setAttribute(\"x\", String((options.width - size) / 2));\n                element.setAttribute(\"y\", String((options.height - size) / 2));\n                element.setAttribute(\"width\", String(size));\n                element.setAttribute(\"height\", String(size));\n                element.setAttribute(\"rx\", String((size / 2) * options.backgroundOptions.round));\n                this._backgroundClipPath.appendChild(element);\n            }\n        }\n    }\n    drawDots(filter) {\n        if (!this._qr) {\n            throw \"QR code is not defined\";\n        }\n        const options = this._options;\n        const count = this._qr.getModuleCount();\n        if (count > options.width || count > options.height) {\n            throw \"The canvas is too small.\";\n        }\n        const minSize = Math.min(options.width, options.height) - options.margin * 2;\n        const realQRSize = options.shape === shapeTypes.circle ? minSize / Math.sqrt(2) : minSize;\n        const dotSize = Math.floor(realQRSize / count);\n        const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n        const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n        const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n        this._dotsClipPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"clipPath\");\n        this._dotsClipPath.setAttribute(\"id\", \"clip-path-dot-color\");\n        this._defs.appendChild(this._dotsClipPath);\n        this._createColor({\n            options: options.dotsOptions?.gradient,\n            color: options.dotsOptions.color,\n            additionalRotation: 0,\n            x: 0,\n            y: 0,\n            height: options.height,\n            width: options.width,\n            name: \"dot-color\"\n        });\n        for (let i = 0; i < count; i++) {\n            for (let j = 0; j < count; j++) {\n                if (filter && !filter(i, j)) {\n                    continue;\n                }\n                if (!this._qr?.isDark(i, j)) {\n                    continue;\n                }\n                dot.draw(xBeginning + i * dotSize, yBeginning + j * dotSize, dotSize, (xOffset, yOffset) => {\n                    if (i + xOffset < 0 || j + yOffset < 0 || i + xOffset >= count || j + yOffset >= count)\n                        return false;\n                    if (filter && !filter(i + xOffset, j + yOffset))\n                        return false;\n                    return !!this._qr && this._qr.isDark(i + xOffset, j + yOffset);\n                });\n                if (dot._element && this._dotsClipPath) {\n                    this._dotsClipPath.appendChild(dot._element);\n                }\n            }\n        }\n        if (options.shape === shapeTypes.circle) {\n            const additionalDots = Math.floor((minSize / dotSize - count) / 2);\n            const fakeCount = count + additionalDots * 2;\n            const xFakeBeginning = xBeginning - additionalDots * dotSize;\n            const yFakeBeginning = yBeginning - additionalDots * dotSize;\n            const fakeMatrix = [];\n            const center = Math.floor(fakeCount / 2);\n            for (let i = 0; i < fakeCount; i++) {\n                fakeMatrix[i] = [];\n                for (let j = 0; j < fakeCount; j++) {\n                    if (i >= additionalDots - 1 &&\n                        i <= fakeCount - additionalDots &&\n                        j >= additionalDots - 1 &&\n                        j <= fakeCount - additionalDots) {\n                        fakeMatrix[i][j] = 0;\n                        continue;\n                    }\n                    if (Math.sqrt((i - center) * (i - center) + (j - center) * (j - center)) > center) {\n                        fakeMatrix[i][j] = 0;\n                        continue;\n                    }\n                    //Get random dots from QR code to show it outside of QR code\n                    fakeMatrix[i][j] = this._qr.isDark(j - 2 * additionalDots < 0 ? j : j >= count ? j - 2 * additionalDots : j - additionalDots, i - 2 * additionalDots < 0 ? i : i >= count ? i - 2 * additionalDots : i - additionalDots)\n                        ? 1\n                        : 0;\n                }\n            }\n            for (let i = 0; i < fakeCount; i++) {\n                for (let j = 0; j < fakeCount; j++) {\n                    if (!fakeMatrix[i][j])\n                        continue;\n                    dot.draw(xFakeBeginning + i * dotSize, yFakeBeginning + j * dotSize, dotSize, (xOffset, yOffset) => {\n                        return !!fakeMatrix[i + xOffset]?.[j + yOffset];\n                    });\n                    if (dot._element && this._dotsClipPath) {\n                        this._dotsClipPath.appendChild(dot._element);\n                    }\n                }\n            }\n        }\n    }\n    drawCorners() {\n        if (!this._qr) {\n            throw \"QR code is not defined\";\n        }\n        const element = this._element;\n        const options = this._options;\n        if (!element) {\n            throw \"Element code is not defined\";\n        }\n        const count = this._qr.getModuleCount();\n        const minSize = Math.min(options.width, options.height) - options.margin * 2;\n        const realQRSize = options.shape === shapeTypes.circle ? minSize / Math.sqrt(2) : minSize;\n        const dotSize = Math.floor(realQRSize / count);\n        const cornersSquareSize = dotSize * 7;\n        const cornersDotSize = dotSize * 3;\n        const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n        const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n        [\n            [0, 0, 0],\n            [1, 0, Math.PI / 2],\n            [0, 1, -Math.PI / 2]\n        ].forEach(([column, row, rotation]) => {\n            const x = xBeginning + column * dotSize * (count - 7);\n            const y = yBeginning + row * dotSize * (count - 7);\n            let cornersSquareClipPath = this._dotsClipPath;\n            let cornersDotClipPath = this._dotsClipPath;\n            if (options.cornersSquareOptions?.gradient || options.cornersSquareOptions?.color) {\n                cornersSquareClipPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"clipPath\");\n                cornersSquareClipPath.setAttribute(\"id\", `clip-path-corners-square-color-${column}-${row}`);\n                this._defs.appendChild(cornersSquareClipPath);\n                this._cornersSquareClipPath = this._cornersDotClipPath = cornersDotClipPath = cornersSquareClipPath;\n                this._createColor({\n                    options: options.cornersSquareOptions?.gradient,\n                    color: options.cornersSquareOptions?.color,\n                    additionalRotation: rotation,\n                    x,\n                    y,\n                    height: cornersSquareSize,\n                    width: cornersSquareSize,\n                    name: `corners-square-color-${column}-${row}`\n                });\n            }\n            if (options.cornersSquareOptions?.type) {\n                const cornersSquare = new QRCornerSquare({ svg: this._element, type: options.cornersSquareOptions.type });\n                cornersSquare.draw(x, y, cornersSquareSize, rotation);\n                if (cornersSquare._element && cornersSquareClipPath) {\n                    cornersSquareClipPath.appendChild(cornersSquare._element);\n                }\n            }\n            else {\n                const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n                for (let i = 0; i < squareMask.length; i++) {\n                    for (let j = 0; j < squareMask[i].length; j++) {\n                        if (!squareMask[i]?.[j]) {\n                            continue;\n                        }\n                        dot.draw(x + i * dotSize, y + j * dotSize, dotSize, (xOffset, yOffset) => !!squareMask[i + xOffset]?.[j + yOffset]);\n                        if (dot._element && cornersSquareClipPath) {\n                            cornersSquareClipPath.appendChild(dot._element);\n                        }\n                    }\n                }\n            }\n            if (options.cornersDotOptions?.gradient || options.cornersDotOptions?.color) {\n                cornersDotClipPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"clipPath\");\n                cornersDotClipPath.setAttribute(\"id\", `clip-path-corners-dot-color-${column}-${row}`);\n                this._defs.appendChild(cornersDotClipPath);\n                this._cornersDotClipPath = cornersDotClipPath;\n                this._createColor({\n                    options: options.cornersDotOptions?.gradient,\n                    color: options.cornersDotOptions?.color,\n                    additionalRotation: rotation,\n                    x: x + dotSize * 2,\n                    y: y + dotSize * 2,\n                    height: cornersDotSize,\n                    width: cornersDotSize,\n                    name: `corners-dot-color-${column}-${row}`\n                });\n            }\n            if (options.cornersDotOptions?.type) {\n                const cornersDot = new QRCornerDot({ svg: this._element, type: options.cornersDotOptions.type });\n                cornersDot.draw(x + dotSize * 2, y + dotSize * 2, cornersDotSize, rotation);\n                if (cornersDot._element && cornersDotClipPath) {\n                    cornersDotClipPath.appendChild(cornersDot._element);\n                }\n            }\n            else {\n                const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n                for (let i = 0; i < dotMask.length; i++) {\n                    for (let j = 0; j < dotMask[i].length; j++) {\n                        if (!dotMask[i]?.[j]) {\n                            continue;\n                        }\n                        dot.draw(x + i * dotSize, y + j * dotSize, dotSize, (xOffset, yOffset) => !!dotMask[i + xOffset]?.[j + yOffset]);\n                        if (dot._element && cornersDotClipPath) {\n                            cornersDotClipPath.appendChild(dot._element);\n                        }\n                    }\n                }\n            }\n        });\n    }\n    loadImage() {\n        return new Promise((resolve, reject) => {\n            const options = this._options;\n            const image = new Image();\n            if (!options.image) {\n                return reject(\"Image is not defined\");\n            }\n            if (typeof options.imageOptions.crossOrigin === \"string\") {\n                image.crossOrigin = options.imageOptions.crossOrigin;\n            }\n            this._image = image;\n            image.onload = () => {\n                resolve();\n            };\n            image.src = options.image;\n        });\n    }\n    async drawImage({ width, height, count, dotSize }) {\n        const options = this._options;\n        const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n        const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n        const dx = xBeginning + options.imageOptions.margin + (count * dotSize - width) / 2;\n        const dy = yBeginning + options.imageOptions.margin + (count * dotSize - height) / 2;\n        const dw = width - options.imageOptions.margin * 2;\n        const dh = height - options.imageOptions.margin * 2;\n        const image = document.createElementNS(\"http://www.w3.org/2000/svg\", \"image\");\n        image.setAttribute(\"x\", String(dx));\n        image.setAttribute(\"y\", String(dy));\n        image.setAttribute(\"width\", `${dw}px`);\n        image.setAttribute(\"height\", `${dh}px`);\n        const imageUrl = await toDataUrl(options.image || \"\");\n        image.setAttribute(\"href\", imageUrl || \"\");\n        this._element.appendChild(image);\n    }\n    _createColor({ options, color, additionalRotation, x, y, height, width, name }) {\n        const size = width > height ? width : height;\n        const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        rect.setAttribute(\"x\", String(x));\n        rect.setAttribute(\"y\", String(y));\n        rect.setAttribute(\"height\", String(height));\n        rect.setAttribute(\"width\", String(width));\n        rect.setAttribute(\"clip-path\", `url('#clip-path-${name}')`);\n        if (options) {\n            let gradient;\n            if (options.type === gradientTypes.radial) {\n                gradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"radialGradient\");\n                gradient.setAttribute(\"id\", name);\n                gradient.setAttribute(\"gradientUnits\", \"userSpaceOnUse\");\n                gradient.setAttribute(\"fx\", String(x + width / 2));\n                gradient.setAttribute(\"fy\", String(y + height / 2));\n                gradient.setAttribute(\"cx\", String(x + width / 2));\n                gradient.setAttribute(\"cy\", String(y + height / 2));\n                gradient.setAttribute(\"r\", String(size / 2));\n            }\n            else {\n                const rotation = ((options.rotation || 0) + additionalRotation) % (2 * Math.PI);\n                const positiveRotation = (rotation + 2 * Math.PI) % (2 * Math.PI);\n                let x0 = x + width / 2;\n                let y0 = y + height / 2;\n                let x1 = x + width / 2;\n                let y1 = y + height / 2;\n                if ((positiveRotation >= 0 && positiveRotation <= 0.25 * Math.PI) ||\n                    (positiveRotation > 1.75 * Math.PI && positiveRotation <= 2 * Math.PI)) {\n                    x0 = x0 - width / 2;\n                    y0 = y0 - (height / 2) * Math.tan(rotation);\n                    x1 = x1 + width / 2;\n                    y1 = y1 + (height / 2) * Math.tan(rotation);\n                }\n                else if (positiveRotation > 0.25 * Math.PI && positiveRotation <= 0.75 * Math.PI) {\n                    y0 = y0 - height / 2;\n                    x0 = x0 - width / 2 / Math.tan(rotation);\n                    y1 = y1 + height / 2;\n                    x1 = x1 + width / 2 / Math.tan(rotation);\n                }\n                else if (positiveRotation > 0.75 * Math.PI && positiveRotation <= 1.25 * Math.PI) {\n                    x0 = x0 + width / 2;\n                    y0 = y0 + (height / 2) * Math.tan(rotation);\n                    x1 = x1 - width / 2;\n                    y1 = y1 - (height / 2) * Math.tan(rotation);\n                }\n                else if (positiveRotation > 1.25 * Math.PI && positiveRotation <= 1.75 * Math.PI) {\n                    y0 = y0 + height / 2;\n                    x0 = x0 + width / 2 / Math.tan(rotation);\n                    y1 = y1 - height / 2;\n                    x1 = x1 - width / 2 / Math.tan(rotation);\n                }\n                gradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n                gradient.setAttribute(\"id\", name);\n                gradient.setAttribute(\"gradientUnits\", \"userSpaceOnUse\");\n                gradient.setAttribute(\"x1\", String(Math.round(x0)));\n                gradient.setAttribute(\"y1\", String(Math.round(y0)));\n                gradient.setAttribute(\"x2\", String(Math.round(x1)));\n                gradient.setAttribute(\"y2\", String(Math.round(y1)));\n            }\n            options.colorStops.forEach(({ offset, color }) => {\n                const stop = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n                stop.setAttribute(\"offset\", `${100 * offset}%`);\n                stop.setAttribute(\"stop-color\", color);\n                gradient.appendChild(stop);\n            });\n            rect.setAttribute(\"fill\", `url('#${name}')`);\n            this._defs.appendChild(gradient);\n        }\n        else if (color) {\n            rect.setAttribute(\"fill\", color);\n        }\n        this._element.appendChild(rect);\n    }\n}\n//# sourceMappingURL=QRSVG.js.map","export default {\n    canvas: \"canvas\",\n    svg: \"svg\"\n};\n//# sourceMappingURL=drawTypes.js.map","const qrTypes = {};\nfor (let type = 0; type <= 40; type++) {\n    qrTypes[type] = type;\n}\n// 0 types is autodetect\n// types = {\n//     0: 0,\n//     1: 1,\n//     ...\n//     40: 40\n// }\nexport default qrTypes;\n//# sourceMappingURL=qrTypes.js.map","export default {\n    L: \"L\",\n    M: \"M\",\n    Q: \"Q\",\n    H: \"H\"\n};\n//# sourceMappingURL=errorCorrectionLevels.js.map","import qrTypes from \"../constants/qrTypes.js\";\nimport drawTypes from \"../constants/drawTypes.js\";\nimport shapeTypes from \"../constants/shapeTypes.js\";\nimport errorCorrectionLevels from \"../constants/errorCorrectionLevels.js\";\nconst defaultOptions = {\n    type: drawTypes.canvas,\n    shape: shapeTypes.square,\n    width: 300,\n    height: 300,\n    data: \"\",\n    margin: 0,\n    qrOptions: {\n        typeNumber: qrTypes[0],\n        mode: undefined,\n        errorCorrectionLevel: errorCorrectionLevels.Q\n    },\n    imageOptions: {\n        saveAsBlob: false,\n        hideBackgroundDots: true,\n        imageSize: 0.4,\n        crossOrigin: undefined,\n        margin: 0\n    },\n    dotsOptions: {\n        type: \"square\",\n        color: \"#000\"\n    },\n    backgroundOptions: {\n        round: 0,\n        color: \"#fff\"\n    }\n};\nexport default defaultOptions;\n//# sourceMappingURL=QROptions.js.map","function sanitizeGradient(gradient) {\n    const newGradient = { ...gradient };\n    if (!newGradient.colorStops || !newGradient.colorStops.length) {\n        throw \"Field 'colorStops' is required in gradient\";\n    }\n    if (newGradient.rotation) {\n        newGradient.rotation = Number(newGradient.rotation);\n    }\n    else {\n        newGradient.rotation = 0;\n    }\n    newGradient.colorStops = newGradient.colorStops.map((colorStop) => ({\n        ...colorStop,\n        offset: Number(colorStop.offset)\n    }));\n    return newGradient;\n}\nexport default function sanitizeOptions(options) {\n    const newOptions = { ...options };\n    newOptions.width = Number(newOptions.width);\n    newOptions.height = Number(newOptions.height);\n    newOptions.margin = Number(newOptions.margin);\n    newOptions.imageOptions = {\n        ...newOptions.imageOptions,\n        hideBackgroundDots: Boolean(newOptions.imageOptions.hideBackgroundDots),\n        imageSize: Number(newOptions.imageOptions.imageSize),\n        margin: Number(newOptions.imageOptions.margin)\n    };\n    if (newOptions.margin > Math.min(newOptions.width, newOptions.height)) {\n        newOptions.margin = Math.min(newOptions.width, newOptions.height);\n    }\n    newOptions.dotsOptions = {\n        ...newOptions.dotsOptions\n    };\n    if (newOptions.dotsOptions.gradient) {\n        newOptions.dotsOptions.gradient = sanitizeGradient(newOptions.dotsOptions.gradient);\n    }\n    if (newOptions.cornersSquareOptions) {\n        newOptions.cornersSquareOptions = {\n            ...newOptions.cornersSquareOptions\n        };\n        if (newOptions.cornersSquareOptions.gradient) {\n            newOptions.cornersSquareOptions.gradient = sanitizeGradient(newOptions.cornersSquareOptions.gradient);\n        }\n    }\n    if (newOptions.cornersDotOptions) {\n        newOptions.cornersDotOptions = {\n            ...newOptions.cornersDotOptions\n        };\n        if (newOptions.cornersDotOptions.gradient) {\n            newOptions.cornersDotOptions.gradient = sanitizeGradient(newOptions.cornersDotOptions.gradient);\n        }\n    }\n    if (newOptions.backgroundOptions) {\n        newOptions.backgroundOptions = {\n            ...newOptions.backgroundOptions\n        };\n        if (newOptions.backgroundOptions.gradient) {\n            newOptions.backgroundOptions.gradient = sanitizeGradient(newOptions.backgroundOptions.gradient);\n        }\n    }\n    return newOptions;\n}\n//# sourceMappingURL=sanitizeOptions.js.map","import getMode from \"../tools/getMode.js\";\nimport mergeDeep from \"../tools/merge.js\";\nimport downloadURI from \"../tools/downloadURI.js\";\nimport QRSVG from \"./QRSVG.js\";\nimport drawTypes from \"../constants/drawTypes.js\";\nimport defaultOptions from \"./QROptions.js\";\nimport sanitizeOptions from \"../tools/sanitizeOptions.js\";\nimport qrcode from \"qrcode-generator\";\nexport default class QRCodeStyling {\n    constructor(options) {\n        this._options = options ? sanitizeOptions(mergeDeep(defaultOptions, options)) : defaultOptions;\n        this.update();\n    }\n    static _clearContainer(container) {\n        if (container) {\n            container.innerHTML = \"\";\n        }\n    }\n    _setupSvg() {\n        if (!this._qr) {\n            return;\n        }\n        const qrSVG = new QRSVG(this._options);\n        this._svg = qrSVG.getElement();\n        this._svgDrawingPromise = qrSVG.drawQR(this._qr).then(() => {\n            if (!this._svg)\n                return;\n            this._extension?.(qrSVG.getElement(), this._options);\n        });\n    }\n    _setupCanvas() {\n        if (!this._qr) {\n            return;\n        }\n        this._canvas = document.createElement(\"canvas\");\n        this._canvas.width = this._options.width;\n        this._canvas.height = this._options.height;\n        this._setupSvg();\n        this._canvasDrawingPromise = this._svgDrawingPromise?.then(() => {\n            if (!this._svg)\n                return;\n            const svg = this._svg;\n            const xml = new XMLSerializer().serializeToString(svg);\n            const svg64 = btoa(xml);\n            const image64 = \"data:image/svg+xml;base64,\" + svg64;\n            const image = new Image();\n            return new Promise((resolve) => {\n                image.onload = () => {\n                    this._canvas?.getContext(\"2d\")?.drawImage(image, 0, 0);\n                    resolve();\n                };\n                image.src = image64;\n            });\n        });\n    }\n    async _getElement(extension = \"png\") {\n        if (!this._qr)\n            throw \"QR code is empty\";\n        if (extension.toLowerCase() === \"svg\") {\n            if (!this._svg || !this._svgDrawingPromise) {\n                this._setupSvg();\n            }\n            await this._svgDrawingPromise;\n            return this._svg;\n        }\n        else {\n            if (!this._canvas || !this._canvasDrawingPromise) {\n                this._setupCanvas();\n            }\n            await this._canvasDrawingPromise;\n            return this._canvas;\n        }\n    }\n    update(options) {\n        QRCodeStyling._clearContainer(this._container);\n        this._options = options ? sanitizeOptions(mergeDeep(this._options, options)) : this._options;\n        if (!this._options.data) {\n            return;\n        }\n        this._qr = qrcode(this._options.qrOptions.typeNumber, this._options.qrOptions.errorCorrectionLevel);\n        this._qr.addData(this._options.data, this._options.qrOptions.mode || getMode(this._options.data));\n        this._qr.make();\n        if (this._options.type === drawTypes.canvas) {\n            this._setupCanvas();\n        }\n        else {\n            this._setupSvg();\n        }\n        this.append(this._container);\n    }\n    append(container) {\n        if (!container) {\n            return;\n        }\n        if (typeof container.appendChild !== \"function\") {\n            throw \"Container should be a single DOM node\";\n        }\n        if (this._options.type === drawTypes.canvas) {\n            if (this._canvas) {\n                container.appendChild(this._canvas);\n            }\n        }\n        else {\n            if (this._svg) {\n                container.appendChild(this._svg);\n            }\n        }\n        this._container = container;\n    }\n    applyExtension(extension) {\n        if (!extension) {\n            throw \"Extension function should be defined.\";\n        }\n        this._extension = extension;\n        this.update();\n    }\n    deleteExtension() {\n        this._extension = undefined;\n        this.update();\n    }\n    async getRawData(extension = \"png\") {\n        if (!this._qr)\n            throw \"QR code is empty\";\n        const element = await this._getElement(extension);\n        if (!element) {\n            return null;\n        }\n        if (extension.toLowerCase() === \"svg\") {\n            const serializer = new XMLSerializer();\n            const source = serializer.serializeToString(element);\n            return new Blob(['<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source], { type: \"image/svg+xml\" });\n        }\n        else {\n            return new Promise((resolve) => element.toBlob(resolve, `image/${extension}`, 1));\n        }\n    }\n    async download(downloadOptions) {\n        if (!this._qr)\n            throw \"QR code is empty\";\n        let extension = \"png\";\n        let name = \"qr\";\n        //TODO remove deprecated code in the v2\n        if (typeof downloadOptions === \"string\") {\n            extension = downloadOptions;\n            console.warn(\"Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument\");\n        }\n        else if (typeof downloadOptions === \"object\" && downloadOptions !== null) {\n            if (downloadOptions.name) {\n                name = downloadOptions.name;\n            }\n            if (downloadOptions.extension) {\n                extension = downloadOptions.extension;\n            }\n        }\n        const element = await this._getElement(extension);\n        if (!element) {\n            return;\n        }\n        if (extension.toLowerCase() === \"svg\") {\n            const serializer = new XMLSerializer();\n            let source = serializer.serializeToString(element);\n            source = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\n            const url = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(source);\n            downloadURI(url, `${name}.svg`);\n        }\n        else {\n            const url = element.toDataURL(`image/${extension}`);\n            downloadURI(url, `${name}.${extension}`);\n        }\n    }\n}\n//# sourceMappingURL=QRCodeStyling.js.map","import QRCodeStyling from \"./core/QRCodeStyling.js\";\nimport dotTypes from \"./constants/dotTypes.js\";\nimport cornerDotTypes from \"./constants/cornerDotTypes.js\";\nimport cornerSquareTypes from \"./constants/cornerSquareTypes.js\";\nimport errorCorrectionLevels from \"./constants/errorCorrectionLevels.js\";\nimport errorCorrectionPercents from \"./constants/errorCorrectionPercents.js\";\nimport modes from \"./constants/modes.js\";\nimport qrTypes from \"./constants/qrTypes.js\";\nimport drawTypes from \"./constants/drawTypes.js\";\nimport shapeTypes from \"./constants/shapeTypes.js\";\nimport gradientTypes from \"./constants/gradientTypes.js\";\nexport * from \"./types/index.js\";\nexport { dotTypes, cornerDotTypes, cornerSquareTypes, errorCorrectionLevels, errorCorrectionPercents, modes, qrTypes, drawTypes, shapeTypes, gradientTypes };\nexport default QRCodeStyling;\n//# sourceMappingURL=index.js.map","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  var uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;","import rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\n/**\n * UUID V7 - Unix Epoch time-based UUID\n *\n * The IETF has published RFC9562, introducing 3 new UUID versions (6,7,8). This\n * implementation of V7 is based on the accepted, though not yet approved,\n * revisions.\n *\n * RFC 9562:https://www.rfc-editor.org/rfc/rfc9562.html Universally Unique\n * IDentifiers (UUIDs)\n\n *\n * Sample V7 value:\n * https://www.rfc-editor.org/rfc/rfc9562.html#name-example-of-a-uuidv7-value\n *\n * Monotonic Bit Layout: RFC rfc9562.6.2 Method 1, Dedicated Counter Bits ref:\n *     https://www.rfc-editor.org/rfc/rfc9562.html#section-6.2-5.1\n *\n *   0                   1                   2                   3 0 1 2 3 4 5 6\n *   7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |                          unix_ts_ms                           |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |          unix_ts_ms           |  ver  |        seq_hi         |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |var|               seq_low               |        rand         |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |                             rand                              |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *\n * seq is a 31 bit serialized counter; comprised of 12 bit seq_hi and 19 bit\n * seq_low, and randomly initialized upon timestamp change. 31 bit counter size\n * was selected as any bitwise operations in node are done as _signed_ 32 bit\n * ints. we exclude the sign bit.\n */\n\nvar _seqLow = null;\nvar _seqHigh = null;\nvar _msecs = 0;\nfunction v7(options, buf, offset) {\n  options = options || {};\n\n  // initialize buffer and pointer\n  var i = buf && offset || 0;\n  var b = buf || new Uint8Array(16);\n\n  // rnds is Uint8Array(16) filled with random bytes\n  var rnds = options.random || (options.rng || rng)();\n\n  // milliseconds since unix epoch, 1970-01-01 00:00\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now();\n\n  // seq is user provided 31 bit counter\n  var seq = options.seq !== undefined ? options.seq : null;\n\n  // initialize local seq high/low parts\n  var seqHigh = _seqHigh;\n  var seqLow = _seqLow;\n\n  // check if clock has advanced and user has not provided msecs\n  if (msecs > _msecs && options.msecs === undefined) {\n    _msecs = msecs;\n\n    // unless user provided seq, reset seq parts\n    if (seq !== null) {\n      seqHigh = null;\n      seqLow = null;\n    }\n  }\n\n  // if we have a user provided seq\n  if (seq !== null) {\n    // trim provided seq to 31 bits of value, avoiding overflow\n    if (seq > 0x7fffffff) {\n      seq = 0x7fffffff;\n    }\n\n    // split provided seq into high/low parts\n    seqHigh = seq >>> 19 & 0xfff;\n    seqLow = seq & 0x7ffff;\n  }\n\n  // randomly initialize seq\n  if (seqHigh === null || seqLow === null) {\n    seqHigh = rnds[6] & 0x7f;\n    seqHigh = seqHigh << 8 | rnds[7];\n    seqLow = rnds[8] & 0x3f; // pad for var\n    seqLow = seqLow << 8 | rnds[9];\n    seqLow = seqLow << 5 | rnds[10] >>> 3;\n  }\n\n  // increment seq if within msecs window\n  if (msecs + 10000 > _msecs && seq === null) {\n    if (++seqLow > 0x7ffff) {\n      seqLow = 0;\n      if (++seqHigh > 0xfff) {\n        seqHigh = 0;\n\n        // increment internal _msecs. this allows us to continue incrementing\n        // while staying monotonic. Note, once we hit 10k milliseconds beyond system\n        // clock, we will reset breaking monotonicity (after (2^31)*10000 generations)\n        _msecs++;\n      }\n    }\n  } else {\n    // resetting; we have advanced more than\n    // 10k milliseconds beyond system clock\n    _msecs = msecs;\n  }\n  _seqHigh = seqHigh;\n  _seqLow = seqLow;\n\n  // [bytes 0-5] 48 bits of local timestamp\n  b[i++] = _msecs / 0x10000000000 & 0xff;\n  b[i++] = _msecs / 0x100000000 & 0xff;\n  b[i++] = _msecs / 0x1000000 & 0xff;\n  b[i++] = _msecs / 0x10000 & 0xff;\n  b[i++] = _msecs / 0x100 & 0xff;\n  b[i++] = _msecs & 0xff;\n\n  // [byte 6] - set 4 bits of version (7) with first 4 bits seq_hi\n  b[i++] = seqHigh >>> 4 & 0x0f | 0x70;\n\n  // [byte 7] remaining 8 bits of seq_hi\n  b[i++] = seqHigh & 0xff;\n\n  // [byte 8] - variant (2 bits), first 6 bits seq_low\n  b[i++] = seqLow >>> 13 & 0x3f | 0x80;\n\n  // [byte 9] 8 bits seq_low\n  b[i++] = seqLow >>> 5 & 0xff;\n\n  // [byte 10] remaining 5 bits seq_low, 3 bits random\n  b[i++] = seqLow << 3 & 0xff | rnds[10] & 0x07;\n\n  // [bytes 11-15] always random\n  b[i++] = rnds[11];\n  b[i++] = rnds[12];\n  b[i++] = rnds[13];\n  b[i++] = rnds[14];\n  b[i++] = rnds[15];\n  return buf || unsafeStringify(b);\n}\nexport default v7;","import { io } from 'socket.io-client';\nimport QRCodeStyling from '@algorandfoundation/qr-code-styling';\nimport { EventEmitter } from 'eventemitter3';\nimport { attestation, DEFAULT_ATTESTATION_OPTIONS } from './attestation.js';\nimport { v7 as uuidv7 } from 'uuid';\nexport const REQUEST_IS_MISSING_MESSAGE = 'Request id is required';\nexport const REQUEST_IN_PROCESS_MESSAGE = 'Request in process';\nexport const UNAUTHENTICATED_MESSAGE = 'Not authenticated';\nexport const ORIGIN_IS_MISSING_MESSAGE = 'Origin is required';\nexport const DEFAULT_QR_CODE_OPTIONS = {\n    width: 500,\n    height: 500,\n    type: 'svg',\n    data: 'liquid://',\n    margin: 25,\n    imageOptions: { hideBackgroundDots: true, imageSize: 0.4, margin: 15 },\n    dotsOptions: {\n        type: 'extra-rounded',\n        gradient: {\n            type: 'radial',\n            rotation: 0,\n            colorStops: [\n                { offset: 0, color: '#9966ff' },\n                { offset: 1, color: '#332257' },\n            ],\n        },\n    },\n    backgroundOptions: { color: '#ffffff', gradient: null },\n    // TODO: Host logo publicly\n    image: 'https://algorandtechnologies.com/assets/media-kit/logos/logo-marks/png/algorand_logo_mark_black.png',\n    cornersSquareOptions: {\n        color: '#000000',\n        gradient: {\n            type: 'linear',\n            rotation: 0,\n            colorStops: [\n                { offset: 0, color: '#332257' },\n                { offset: 1, color: '#040908' },\n            ],\n        },\n    },\n    cornersDotOptions: {\n        type: 'dot',\n        color: '#000000',\n        gradient: {\n            type: 'linear',\n            rotation: 0,\n            colorStops: [\n                { offset: 0, color: '#000000' },\n                { offset: 1, color: '#000000' },\n            ],\n        },\n    },\n};\nexport async function generateQRCode({ requestId, url }, qrCodeOptions = DEFAULT_QR_CODE_OPTIONS) {\n    if (typeof requestId === 'undefined')\n        throw new Error(REQUEST_IS_MISSING_MESSAGE);\n    qrCodeOptions.data = generateDeepLink(url, requestId);\n    // @ts-expect-error, figure out call signature issue\n    const qrCode = new QRCodeStyling(qrCodeOptions);\n    return qrCode.getRawData('png').then((blob) => {\n        if (!blob)\n            throw new TypeError('Could not get qrcode blob');\n        return URL.createObjectURL(blob);\n    });\n}\n/**\n * Generate a Deep Link URI\n * @param {string} origin\n * @param requestId\n */\nexport function generateDeepLink(origin, requestId) {\n    if (typeof origin !== 'string') {\n        throw new Error(ORIGIN_IS_MISSING_MESSAGE);\n    }\n    if (typeof requestId !== 'string') {\n        throw new Error(REQUEST_IS_MISSING_MESSAGE);\n    }\n    return `liquid://${origin.replace('https://', '')}/?requestId=${requestId}`;\n}\n/**\n *\n */\nexport class SignalClient extends EventEmitter {\n    url;\n    type;\n    authenticated = false;\n    requestId;\n    peerClient;\n    qrCodeOptions = DEFAULT_QR_CODE_OPTIONS;\n    socket;\n    /**\n     *\n     * @param url\n     * @param options\n     */\n    constructor(url, options = { autoConnect: true }) {\n        super();\n        this.url = url;\n        this.socket = io(url, options);\n        globalThis.socket = this.socket;\n        this.socket.on('connect', () => {\n            this.emit('connect', this.socket.id);\n        });\n        this.socket.on('disconnect', () => {\n            this.emit('disconnect', this.socket.id);\n        });\n    }\n    static generateRequestId() {\n        return uuidv7();\n    }\n    attestation(onChallenge, options = DEFAULT_ATTESTATION_OPTIONS) {\n        return attestation(this.url, onChallenge, options)\n            .then(() => {\n            this.authenticated = true;\n        })\n            .catch((e) => {\n            this.authenticated = false;\n            throw e;\n        });\n    }\n    assertion() { }\n    /**\n     * Create QR Code\n     */\n    async qrCode() {\n        if (typeof this.requestId === 'undefined')\n            throw new Error(REQUEST_IS_MISSING_MESSAGE);\n        return generateQRCode({ requestId: this.requestId, url: this.url }, this.qrCodeOptions);\n    }\n    /**\n     * Create a Deep Link URI\n     * @param requestId\n     */\n    deepLink(requestId) {\n        if (typeof requestId !== 'string' &&\n            typeof this.requestId === 'undefined') {\n            throw new Error(REQUEST_IS_MISSING_MESSAGE);\n        }\n        return generateDeepLink(this.url, requestId || this.requestId);\n    }\n    /**\n     * # Create a peer connection\n     *\n     * Send the nonce to the server and listen to a specified type.\n     *\n     * ## Offer\n     *   - Will wait for an offer-description from the server\n     *   - Will send an answer-description to the server\n     *   - Will send candidates to the server\n     *\n     * ## Answer\n     *  - Will send an offer-description to the server\n     *  - Will wait for an answer-description from the server\n     *  - Will send candidates to the server\n     *\n     * @param requestId\n     * @param type\n     * @param config\n     */\n    async peer(requestId, type, config = {\n        iceServers: [\n            {\n                urls: [\n                    'stun:stun.l.google.com:19302',\n                    'stun:stun1.l.google.com:19302',\n                    'stun:stun2.l.google.com:19302',\n                ],\n            },\n        ],\n        iceCandidatePoolSize: 10,\n    }) {\n        if (typeof this.requestId !== 'undefined')\n            throw new Error(REQUEST_IN_PROCESS_MESSAGE);\n        return new Promise(async (resolve) => {\n            let candidatesBuffer = [];\n            // Create Peer Connection\n            this.peerClient = new RTCPeerConnection(config);\n            globalThis.peerClient = this.peerClient;\n            this.type = type === 'offer' ? 'answer' : 'offer';\n            // Wait for a link message\n            type === 'offer' && (await this.link(requestId));\n            // Listen for Local Candidates\n            this.peerClient.onicecandidate = (event) => {\n                if (event.candidate) {\n                    this.emit(`${this.type}-candidate`, event.candidate.toJSON());\n                    this.socket.emit(`${this.type}-candidate`, event.candidate.toJSON());\n                }\n            };\n            // Listen to Remote Candidates\n            this.socket.on(`${type}-candidate`, async (candidate) => {\n                if (this.peerClient.remoteDescription &&\n                    this.peerClient.remoteDescription) {\n                    this.emit(`${type}-candidate`, candidate);\n                    await this.peerClient.addIceCandidate(new RTCIceCandidate(candidate));\n                }\n                else {\n                    candidatesBuffer.push(candidate);\n                }\n            });\n            // Listen for Remote DataChannel and Resolve\n            this.peerClient.ondatachannel = (event) => {\n                globalThis.dc = event.channel;\n                this.emit('data-channel', event.channel);\n                resolve(event.channel);\n            };\n            // Handle Session Descriptions\n            if (type === 'offer') {\n                const sdp = await this.signal(type);\n                await this.peerClient.setRemoteDescription(sdp);\n                const answer = await this.peerClient.createAnswer();\n                await this.peerClient.setLocalDescription(answer);\n                if (candidatesBuffer.length > 0) {\n                    await Promise.all(candidatesBuffer.map(async (candidate) => {\n                        this.emit(`${type}-candidate`, candidate);\n                        await this.peerClient.addIceCandidate(new RTCIceCandidate(candidate));\n                    }));\n                    candidatesBuffer = [];\n                }\n                this.emit(`${this.type}-description`, answer.sdp);\n                this.socket.emit(`${this.type}-description`, answer.sdp);\n            }\n            else {\n                const dataChannel = this.peerClient.createDataChannel('liquid');\n                const localSdp = await this.peerClient.createOffer();\n                await this.peerClient.setLocalDescription(localSdp);\n                this.socket.emit(`${this.type}-description`, localSdp.sdp);\n                this.emit(`${this.type}-description`, localSdp.sdp);\n                const sdp = await this.signal(type);\n                await this.peerClient.setRemoteDescription(sdp);\n                if (candidatesBuffer.length > 0) {\n                    await Promise.all(candidatesBuffer.map(async (candidate) => {\n                        this.emit(`${type}-candidate`, candidate);\n                        await this.peerClient.addIceCandidate(new RTCIceCandidate(candidate));\n                    }));\n                    candidatesBuffer = [];\n                }\n                this.emit('data-channel', dataChannel);\n                resolve(dataChannel);\n            }\n        });\n    }\n    /**\n     * Await for a link message for a given requestId\n     * @param requestId\n     */\n    async link(requestId) {\n        if (typeof this.requestId !== 'undefined')\n            throw new Error(REQUEST_IN_PROCESS_MESSAGE);\n        this.requestId = requestId;\n        this.emit('link', { requestId });\n        return new Promise((resolve) => {\n            this.socket.emit('link', { requestId }, ({ data }) => {\n                this.authenticated = true;\n                delete this.requestId;\n                this.emit('link-message', data);\n                resolve(data);\n            });\n        });\n    }\n    /**\n     *\n     * @param type\n     */\n    async signal(type) {\n        if (!this.authenticated)\n            throw new Error(UNAUTHENTICATED_MESSAGE);\n        this.emit('signal', { type });\n        return new Promise((resolve) => {\n            this.socket.once(`${type}-description`, (sdp) => {\n                const description = { type, sdp };\n                this.emit(`${type}-description`, description);\n                resolve(description);\n            });\n        });\n    }\n    close(disconnect = false) {\n        this.socket.removeAllListeners();\n        delete this.requestId;\n        this.authenticated = false;\n        if (disconnect)\n            this.socket.disconnect();\n        this.emit('close');\n    }\n}\n","let decoder\ntry {\n\tdecoder = new TextDecoder()\n} catch(error) {}\nlet src\nlet srcEnd\nlet position = 0\nlet alreadySet\nconst EMPTY_ARRAY = []\nconst LEGACY_RECORD_INLINE_ID = 105\nconst RECORD_DEFINITIONS_ID = 0xdffe\nconst RECORD_INLINE_ID = 0xdfff // temporary first-come first-serve tag // proposed tag: 0x7265 // 're'\nconst BUNDLED_STRINGS_ID = 0xdff9\nconst PACKED_TABLE_TAG_ID = 51\nconst PACKED_REFERENCE_TAG_ID = 6\nconst STOP_CODE = {}\nlet maxArraySize = 112810000 // This is the maximum array size in V8. We would potentially detect and set it higher\n// for JSC, but this is pretty large and should be sufficient for most use cases\nlet maxMapSize = 16810000 // JavaScript has a fixed maximum map size of about 16710000, but JS itself enforces this,\n// so we don't need to\n\nlet maxObjectSize = 16710000; // This is the maximum number of keys in a Map. It takes over a minute to create this\n// many keys in an object, so also probably a reasonable choice there.\nlet strings = EMPTY_ARRAY\nlet stringPosition = 0\nlet currentDecoder = {}\nlet currentStructures\nlet srcString\nlet srcStringStart = 0\nlet srcStringEnd = 0\nlet bundledStrings\nlet referenceMap\nlet currentExtensions = []\nlet currentExtensionRanges = []\nlet packedValues\nlet dataView\nlet restoreMapsAsObject\nlet defaultOptions = {\n\tuseRecords: false,\n\tmapsAsObjects: true\n}\nlet sequentialMode = false\nlet inlineObjectReadThreshold = 2;\nvar BlockedFunction // we use search and replace to change the next call to BlockedFunction to avoid CSP issues for\n// no-eval build\ntry {\n\tnew Function('')\n} catch(error) {\n\t// if eval variants are not supported, do not create inline object readers ever\n\tinlineObjectReadThreshold = Infinity\n}\n\n\n\nexport class Decoder {\n\tconstructor(options) {\n\t\tif (options) {\n\t\t\tif ((options.keyMap || options._keyMap) && !options.useRecords) {\n\t\t\t\toptions.useRecords = false\n\t\t\t\toptions.mapsAsObjects = true\n\t\t\t}\n\t\t\tif (options.useRecords === false && options.mapsAsObjects === undefined)\n\t\t\t\toptions.mapsAsObjects = true\n\t\t\tif (options.getStructures)\n\t\t\t\toptions.getShared = options.getStructures\n\t\t\tif (options.getShared && !options.structures)\n\t\t\t\t(options.structures = []).uninitialized = true // this is what we use to denote an uninitialized structures\n\t\t\tif (options.keyMap) {\n\t\t\t\tthis.mapKey = new Map()\n\t\t\t\tfor (let [k,v] of Object.entries(options.keyMap)) this.mapKey.set(v,k)\n\t\t\t}\n\t\t}\n\t\tObject.assign(this, options)\n\t}\n\t/*\n\tdecodeKey(key) {\n\t\treturn this.keyMap\n\t\t\t? Object.keys(this.keyMap)[Object.values(this.keyMap).indexOf(key)] || key\n\t\t\t: key\n\t}\n\t*/\n\tdecodeKey(key) {\n\t\treturn this.keyMap ? this.mapKey.get(key) || key : key\n\t}\n\t\n\tencodeKey(key) {\n\t\treturn this.keyMap && this.keyMap.hasOwnProperty(key) ? this.keyMap[key] : key\n\t}\n\n\tencodeKeys(rec) {\n\t\tif (!this._keyMap) return rec\n\t\tlet map = new Map()\n\t\tfor (let [k,v] of Object.entries(rec)) map.set((this._keyMap.hasOwnProperty(k) ? this._keyMap[k] : k), v)\n\t\treturn map\n\t}\n\n\tdecodeKeys(map) {\n\t\tif (!this._keyMap || map.constructor.name != 'Map') return map\n\t\tif (!this._mapKey) {\n\t\t\tthis._mapKey = new Map()\n\t\t\tfor (let [k,v] of Object.entries(this._keyMap)) this._mapKey.set(v,k)\n\t\t}\n\t\tlet res = {}\n\t\t//map.forEach((v,k) => res[Object.keys(this._keyMap)[Object.values(this._keyMap).indexOf(k)] || k] = v)\n\t\tmap.forEach((v,k) => res[safeKey(this._mapKey.has(k) ? this._mapKey.get(k) : k)] =  v)\n\t\treturn res\n\t}\n\t\n\tmapDecode(source, end) {\n\t\n\t\tlet res = this.decode(source)\n\t\tif (this._keyMap) { \n\t\t\t//Experiemntal support for Optimised KeyMap  decoding \n\t\t\tswitch (res.constructor.name) {\n\t\t\t\tcase 'Array': return res.map(r => this.decodeKeys(r))\n\t\t\t\t//case 'Map': return this.decodeKeys(res)\n\t\t\t}\n\t\t}\n\t\treturn res\n\t}\n\n\tdecode(source, end) {\n\t\tif (src) {\n\t\t\t// re-entrant execution, save the state and restore it after we do this decode\n\t\t\treturn saveState(() => {\n\t\t\t\tclearSource()\n\t\t\t\treturn this ? this.decode(source, end) : Decoder.prototype.decode.call(defaultOptions, source, end)\n\t\t\t})\n\t\t}\n\t\tsrcEnd = end > -1 ? end : source.length\n\t\tposition = 0\n\t\tstringPosition = 0\n\t\tsrcStringEnd = 0\n\t\tsrcString = null\n\t\tstrings = EMPTY_ARRAY\n\t\tbundledStrings = null\n\t\tsrc = source\n\t\t// this provides cached access to the data view for a buffer if it is getting reused, which is a recommend\n\t\t// technique for getting data from a database where it can be copied into an existing buffer instead of creating\n\t\t// new ones\n\t\ttry {\n\t\t\tdataView = source.dataView || (source.dataView = new DataView(source.buffer, source.byteOffset, source.byteLength))\n\t\t} catch(error) {\n\t\t\t// if it doesn't have a buffer, maybe it is the wrong type of object\n\t\t\tsrc = null\n\t\t\tif (source instanceof Uint8Array)\n\t\t\t\tthrow error\n\t\t\tthrow new Error('Source must be a Uint8Array or Buffer but was a ' + ((source && typeof source == 'object') ? source.constructor.name : typeof source))\n\t\t}\n\t\tif (this instanceof Decoder) {\n\t\t\tcurrentDecoder = this\n\t\t\tpackedValues = this.sharedValues &&\n\t\t\t\t(this.pack ? new Array(this.maxPrivatePackedValues || 16).concat(this.sharedValues) :\n\t\t\t\tthis.sharedValues)\n\t\t\tif (this.structures) {\n\t\t\t\tcurrentStructures = this.structures\n\t\t\t\treturn checkedRead()\n\t\t\t} else if (!currentStructures || currentStructures.length > 0) {\n\t\t\t\tcurrentStructures = []\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentDecoder = defaultOptions\n\t\t\tif (!currentStructures || currentStructures.length > 0)\n\t\t\t\tcurrentStructures = []\n\t\t\tpackedValues = null\n\t\t}\n\t\treturn checkedRead()\n\t}\n\tdecodeMultiple(source, forEach) {\n\t\tlet values, lastPosition = 0\n\t\ttry {\n\t\t\tlet size = source.length\n\t\t\tsequentialMode = true\n\t\t\tlet value = this ? this.decode(source, size) : defaultDecoder.decode(source, size)\n\t\t\tif (forEach) {\n\t\t\t\tif (forEach(value) === false) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tif (forEach(checkedRead()) === false) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalues = [ value ]\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tvalues.push(checkedRead())\n\t\t\t\t}\n\t\t\t\treturn values\n\t\t\t}\n\t\t} catch(error) {\n\t\t\terror.lastPosition = lastPosition\n\t\t\terror.values = values\n\t\t\tthrow error\n\t\t} finally {\n\t\t\tsequentialMode = false\n\t\t\tclearSource()\n\t\t}\n\t}\n}\nexport function getPosition() {\n\treturn position\n}\nexport function checkedRead() {\n\ttry {\n\t\tlet result = read()\n\t\tif (bundledStrings) {\n\t\t\tif (position >= bundledStrings.postBundlePosition) {\n\t\t\t\tlet error = new Error('Unexpected bundle position');\n\t\t\t\terror.incomplete = true;\n\t\t\t\tthrow error\n\t\t\t}\n\t\t\t// bundled strings to skip past\n\t\t\tposition = bundledStrings.postBundlePosition;\n\t\t\tbundledStrings = null;\n\t\t}\n\n\t\tif (position == srcEnd) {\n\t\t\t// finished reading this source, cleanup references\n\t\t\tcurrentStructures = null\n\t\t\tsrc = null\n\t\t\tif (referenceMap)\n\t\t\t\treferenceMap = null\n\t\t} else if (position > srcEnd) {\n\t\t\t// over read\n\t\t\tlet error = new Error('Unexpected end of CBOR data')\n\t\t\terror.incomplete = true\n\t\t\tthrow error\n\t\t} else if (!sequentialMode) {\n\t\t\tthrow new Error('Data read, but end of buffer not reached')\n\t\t}\n\t\t// else more to read, but we are reading sequentially, so don't clear source yet\n\t\treturn result\n\t} catch(error) {\n\t\tclearSource()\n\t\tif (error instanceof RangeError || error.message.startsWith('Unexpected end of buffer')) {\n\t\t\terror.incomplete = true\n\t\t}\n\t\tthrow error\n\t}\n}\n\nexport function read() {\n\tlet token = src[position++]\n\tlet majorType = token >> 5\n\ttoken = token & 0x1f\n\tif (token > 0x17) {\n\t\tswitch (token) {\n\t\t\tcase 0x18:\n\t\t\t\ttoken = src[position++]\n\t\t\t\tbreak\n\t\t\tcase 0x19:\n\t\t\t\tif (majorType == 7) {\n\t\t\t\t\treturn getFloat16()\n\t\t\t\t}\n\t\t\t\ttoken = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tbreak\n\t\t\tcase 0x1a:\n\t\t\t\tif (majorType == 7) {\n\t\t\t\t\tlet value = dataView.getFloat32(position)\n\t\t\t\t\tif (currentDecoder.useFloat32 > 2) {\n\t\t\t\t\t\t// this does rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\tlet multiplier = mult10[((src[position] & 0x7f) << 1) | (src[position + 1] >> 7)]\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\treturn ((multiplier * value + (value > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n\t\t\t\t\t}\n\t\t\t\t\tposition += 4\n\t\t\t\t\treturn value\n\t\t\t\t}\n\t\t\t\ttoken = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tbreak\n\t\t\tcase 0x1b:\n\t\t\t\tif (majorType == 7) {\n\t\t\t\t\tlet value = dataView.getFloat64(position)\n\t\t\t\t\tposition += 8\n\t\t\t\t\treturn value\n\t\t\t\t}\n\t\t\t\tif (majorType > 1) {\n\t\t\t\t\tif (dataView.getUint32(position) > 0)\n\t\t\t\t\t\tthrow new Error('JavaScript does not support arrays, maps, or strings with length over 4294967295')\n\t\t\t\t\ttoken = dataView.getUint32(position + 4)\n\t\t\t\t} else if (currentDecoder.int64AsNumber) {\n\t\t\t\t\ttoken = dataView.getUint32(position) * 0x100000000\n\t\t\t\t\ttoken += dataView.getUint32(position + 4)\n\t\t\t\t} else\n\t\t\t\t\ttoken = dataView.getBigUint64(position)\n\t\t\t\tposition += 8\n\t\t\t\tbreak\n\t\t\tcase 0x1f: \n\t\t\t\t// indefinite length\n\t\t\t\tswitch(majorType) {\n\t\t\t\t\tcase 2: // byte string\n\t\t\t\t\tcase 3: // text string\n\t\t\t\t\t\tthrow new Error('Indefinite length not supported for byte or text strings')\n\t\t\t\t\tcase 4: // array\n\t\t\t\t\t\tlet array = []\n\t\t\t\t\t\tlet value, i = 0\n\t\t\t\t\t\twhile ((value = read()) != STOP_CODE) {\n\t\t\t\t\t\t\tif (i >= maxArraySize) throw new Error(`Array length exceeds ${maxArraySize}`)\n\t\t\t\t\t\t\tarray[i++] = value\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn majorType == 4 ? array : majorType == 3 ? array.join('') : Buffer.concat(array)\n\t\t\t\t\tcase 5: // map\n\t\t\t\t\t\tlet key\n\t\t\t\t\t\tif (currentDecoder.mapsAsObjects) {\n\t\t\t\t\t\t\tlet object = {}\n\t\t\t\t\t\t\tlet i = 0;\n\t\t\t\t\t\t\tif (currentDecoder.keyMap) {\n\t\t\t\t\t\t\t\twhile((key = read()) != STOP_CODE) {\n\t\t\t\t\t\t\t\t\tif (i++ >= maxMapSize) throw new Error(`Property count exceeds ${maxMapSize}`)\n\t\t\t\t\t\t\t\t\tobject[safeKey(currentDecoder.decodeKey(key))] = read()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\twhile ((key = read()) != STOP_CODE) {\n\t\t\t\t\t\t\t\t\tif (i++ >= maxMapSize) throw new Error(`Property count exceeds ${maxMapSize}`)\n\t\t\t\t\t\t\t\t\tobject[safeKey(key)] = read()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn object\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (restoreMapsAsObject) {\n\t\t\t\t\t\t\t\tcurrentDecoder.mapsAsObjects = true\n\t\t\t\t\t\t\t\trestoreMapsAsObject = false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet map = new Map()\n\t\t\t\t\t\t\tif (currentDecoder.keyMap) {\n\t\t\t\t\t\t\t\tlet i = 0;\n\t\t\t\t\t\t\t\twhile((key = read()) != STOP_CODE) {\n\t\t\t\t\t\t\t\t\tif (i++ >= maxMapSize) {\n\t\t\t\t\t\t\t\t\t\tthrow new Error(`Map size exceeds ${maxMapSize}`);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tmap.set(currentDecoder.decodeKey(key), read())\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tlet i = 0;\n\t\t\t\t\t\t\t\twhile ((key = read()) != STOP_CODE) {\n\t\t\t\t\t\t\t\t\tif (i++ >= maxMapSize) {\n\t\t\t\t\t\t\t\t\t\tthrow new Error(`Map size exceeds ${maxMapSize}`);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tmap.set(key, read())\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn map\n\t\t\t\t\t\t}\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\treturn STOP_CODE\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error('Invalid major type for indefinite length ' + majorType)\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unknown token ' + token)\n\t\t}\n\t}\n\tswitch (majorType) {\n\t\tcase 0: // positive int\n\t\t\treturn token\n\t\tcase 1: // negative int\n\t\t\treturn ~token\n\t\tcase 2: // buffer\n\t\t\treturn readBin(token)\n\t\tcase 3: // string\n\t\t\tif (srcStringEnd >= position) {\n\t\t\t\treturn srcString.slice(position - srcStringStart, (position += token) - srcStringStart)\n\t\t\t}\n\t\t\tif (srcStringEnd == 0 && srcEnd < 140 && token < 32) {\n\t\t\t\t// for small blocks, avoiding the overhead of the extract call is helpful\n\t\t\t\tlet string = token < 16 ? shortStringInJS(token) : longStringInJS(token)\n\t\t\t\tif (string != null)\n\t\t\t\t\treturn string\n\t\t\t}\n\t\t\treturn readFixedString(token)\n\t\tcase 4: // array\n\t\t\tif (token >= maxArraySize) throw new Error(`Array length exceeds ${maxArraySize}`)\n\t\t\tlet array = new Array(token)\n\t\t  //if (currentDecoder.keyMap) for (let i = 0; i < token; i++) array[i] = currentDecoder.decodeKey(read())\t\n\t\t\t//else \n\t\t\tfor (let i = 0; i < token; i++) array[i] = read()\n\t\t\treturn array\n\t\tcase 5: // map\n\t\t\tif (token >= maxMapSize) throw new Error(`Map size exceeds ${maxArraySize}`)\n\t\t\tif (currentDecoder.mapsAsObjects) {\n\t\t\t\tlet object = {}\n\t\t\t\tif (currentDecoder.keyMap) for (let i = 0; i < token; i++) object[safeKey(currentDecoder.decodeKey(read()))] = read()\n\t\t\t\telse for (let i = 0; i < token; i++) object[safeKey(read())] = read()\n\t\t\t\treturn object\n\t\t\t} else {\n\t\t\t\tif (restoreMapsAsObject) {\n\t\t\t\t\tcurrentDecoder.mapsAsObjects = true\n\t\t\t\t\trestoreMapsAsObject = false\n\t\t\t\t}\n\t\t\t\tlet map = new Map()\n\t\t\t\tif (currentDecoder.keyMap) for (let i = 0; i < token; i++) map.set(currentDecoder.decodeKey(read()),read())\n\t\t\t\telse for (let i = 0; i < token; i++) map.set(read(), read())\n\t\t\t\treturn map\n\t\t\t}\n\t\tcase 6: // extension\n\t\t\tif (token >= BUNDLED_STRINGS_ID) {\n\t\t\t\tlet structure = currentStructures[token & 0x1fff] // check record structures first\n\t\t\t\t// At some point we may provide an option for dynamic tag assignment with a range like token >= 8 && (token < 16 || (token > 0x80 && token < 0xc0) || (token > 0x130 && token < 0x4000))\n\t\t\t\tif (structure) {\n\t\t\t\t\tif (!structure.read) structure.read = createStructureReader(structure)\n\t\t\t\t\treturn structure.read()\n\t\t\t\t}\n\t\t\t\tif (token < 0x10000) {\n\t\t\t\t\tif (token == RECORD_INLINE_ID) { // we do a special check for this so that we can keep the\n\t\t\t\t\t\t// currentExtensions as densely stored array (v8 stores arrays densely under about 3000 elements)\n\t\t\t\t\t\tlet length = readJustLength()\n\t\t\t\t\t\tlet id = read()\n\t\t\t\t\t\tlet structure = read()\n\t\t\t\t\t\trecordDefinition(id, structure)\n\t\t\t\t\t\tlet object = {}\n\t\t\t\t\t\tif (currentDecoder.keyMap) for (let i = 2; i < length; i++) {\n\t\t\t\t\t\t\tlet key = currentDecoder.decodeKey(structure[i - 2])\n\t\t\t\t\t\t\tobject[safeKey(key)] = read()\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse for (let i = 2; i < length; i++) {\n\t\t\t\t\t\t\tlet key = structure[i - 2]\n\t\t\t\t\t\t\tobject[safeKey(key)] = read()\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn object\n\t\t\t\t\t}\n\t\t\t\t\telse if (token == RECORD_DEFINITIONS_ID) {\n\t\t\t\t\t\tlet length = readJustLength()\n\t\t\t\t\t\tlet id = read()\n\t\t\t\t\t\tfor (let i = 2; i < length; i++) {\n\t\t\t\t\t\t\trecordDefinition(id++, read())\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn read()\n\t\t\t\t\t} else if (token == BUNDLED_STRINGS_ID) {\n\t\t\t\t\t\treturn readBundleExt()\n\t\t\t\t\t}\n\t\t\t\t\tif (currentDecoder.getShared) {\n\t\t\t\t\t\tloadShared()\n\t\t\t\t\t\tstructure = currentStructures[token & 0x1fff]\n\t\t\t\t\t\tif (structure) {\n\t\t\t\t\t\t\tif (!structure.read)\n\t\t\t\t\t\t\t\tstructure.read = createStructureReader(structure)\n\t\t\t\t\t\t\treturn structure.read()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet extension = currentExtensions[token]\n\t\t\tif (extension) {\n\t\t\t\tif (extension.handlesRead)\n\t\t\t\t\treturn extension(read)\n\t\t\t\telse\n\t\t\t\t\treturn extension(read())\n\t\t\t} else {\n\t\t\t\tlet input = read()\n\t\t\t\tfor (let i = 0; i < currentExtensionRanges.length; i++) {\n\t\t\t\t\tlet value = currentExtensionRanges[i](token, input)\n\t\t\t\t\tif (value !== undefined)\n\t\t\t\t\t\treturn value\n\t\t\t\t}\n\t\t\t\treturn new Tag(input, token)\n\t\t\t}\n\t\tcase 7: // fixed value\n\t\t\tswitch (token) {\n\t\t\t\tcase 0x14: return false\n\t\t\t\tcase 0x15: return true\n\t\t\t\tcase 0x16: return null\n\t\t\t\tcase 0x17: return; // undefined\n\t\t\t\tcase 0x1f:\n\t\t\t\tdefault:\n\t\t\t\t\tlet packedValue = (packedValues || getPackedValues())[token]\n\t\t\t\t\tif (packedValue !== undefined)\n\t\t\t\t\t\treturn packedValue\n\t\t\t\t\tthrow new Error('Unknown token ' + token)\n\t\t\t}\n\t\tdefault: // negative int\n\t\t\tif (isNaN(token)) {\n\t\t\t\tlet error = new Error('Unexpected end of CBOR data')\n\t\t\t\terror.incomplete = true\n\t\t\t\tthrow error\n\t\t\t}\n\t\t\tthrow new Error('Unknown CBOR token ' + token)\n\t}\n}\nconst validName = /^[a-zA-Z_$][a-zA-Z\\d_$]*$/\nfunction createStructureReader(structure) {\n\tif (!structure) throw new Error('Structure is required in record definition');\n\tfunction readObject() {\n\t\t// get the array size from the header\n\t\tlet length = src[position++]\n\t\t//let majorType = token >> 5\n\t\tlength = length & 0x1f\n\t\tif (length > 0x17) {\n\t\t\tswitch (length) {\n\t\t\t\tcase 0x18:\n\t\t\t\t\tlength = src[position++]\n\t\t\t\t\tbreak\n\t\t\t\tcase 0x19:\n\t\t\t\t\tlength = dataView.getUint16(position)\n\t\t\t\t\tposition += 2\n\t\t\t\t\tbreak\n\t\t\t\tcase 0x1a:\n\t\t\t\t\tlength = dataView.getUint32(position)\n\t\t\t\t\tposition += 4\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Expected array header, but got ' + src[position - 1])\n\t\t\t}\n\t\t}\n\t\t// This initial function is quick to instantiate, but runs slower. After several iterations pay the cost to build the faster function\n\t\tlet compiledReader = this.compiledReader // first look to see if we have the fast compiled function\n\t\twhile(compiledReader) {\n\t\t\t// we have a fast compiled object literal reader\n\t\t\tif (compiledReader.propertyCount === length)\n\t\t\t\treturn compiledReader(read) // with the right length, so we use it\n\t\t\tcompiledReader = compiledReader.next // see if there is another reader with the right length\n\t\t}\n\t\tif (this.slowReads++ >= inlineObjectReadThreshold) { // create a fast compiled reader\n\t\t\tlet array = this.length == length ? this : this.slice(0, length)\n\t\t\tcompiledReader = currentDecoder.keyMap \n\t\t\t? new Function('r', 'return {' + array.map(k => currentDecoder.decodeKey(k)).map(k => validName.test(k) ? safeKey(k) + ':r()' : ('[' + JSON.stringify(k) + ']:r()')).join(',') + '}')\n\t\t\t: new Function('r', 'return {' + array.map(key => validName.test(key) ? safeKey(key) + ':r()' : ('[' + JSON.stringify(key) + ']:r()')).join(',') + '}')\n\t\t\tif (this.compiledReader)\n\t\t\t\tcompiledReader.next = this.compiledReader // if there is an existing one, we store multiple readers as a linked list because it is usually pretty rare to have multiple readers (of different length) for the same structure\n\t\t\tcompiledReader.propertyCount = length\n\t\t\tthis.compiledReader = compiledReader\n\t\t\treturn compiledReader(read)\n\t\t}\n\t\tlet object = {}\n\t\tif (currentDecoder.keyMap) for (let i = 0; i < length; i++) object[safeKey(currentDecoder.decodeKey(this[i]))] = read()\n\t\telse for (let i = 0; i < length; i++) {\n\t\t\tobject[safeKey(this[i])] = read();\n\t\t}\n\t\treturn object\n\t}\n\tstructure.slowReads = 0\n\treturn readObject\n}\n\nfunction safeKey(key) {\n\t// protect against prototype pollution\n\tif (typeof key === 'string') return key === '__proto__' ? '__proto_' : key\n\tif (typeof key === 'number' || typeof key === 'boolean' || typeof key === 'bigint') return key.toString();\n\tif (key == null) return key + '';\n\t// protect against expensive (DoS) string conversions\n\tthrow new Error('Invalid property name type ' + typeof key);\n}\n\nlet readFixedString = readStringJS\nlet readString8 = readStringJS\nlet readString16 = readStringJS\nlet readString32 = readStringJS\n\nexport let isNativeAccelerationEnabled = false\nexport function setExtractor(extractStrings) {\n\tisNativeAccelerationEnabled = true\n\treadFixedString = readString(1)\n\treadString8 = readString(2)\n\treadString16 = readString(3)\n\treadString32 = readString(5)\n\tfunction readString(headerLength) {\n\t\treturn function readString(length) {\n\t\t\tlet string = strings[stringPosition++]\n\t\t\tif (string == null) {\n\t\t\t\tif (bundledStrings)\n\t\t\t\t\treturn readStringJS(length)\n\t\t\t\tlet extraction = extractStrings(position, srcEnd, length, src)\n\t\t\t\tif (typeof extraction == 'string') {\n\t\t\t\t\tstring = extraction\n\t\t\t\t\tstrings = EMPTY_ARRAY\n\t\t\t\t} else {\n\t\t\t\t\tstrings = extraction\n\t\t\t\t\tstringPosition = 1\n\t\t\t\t\tsrcStringEnd = 1 // even if a utf-8 string was decoded, must indicate we are in the midst of extracted strings and can't skip strings\n\t\t\t\t\tstring = strings[0]\n\t\t\t\t\tif (string === undefined)\n\t\t\t\t\t\tthrow new Error('Unexpected end of buffer')\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet srcStringLength = string.length\n\t\t\tif (srcStringLength <= length) {\n\t\t\t\tposition += length\n\t\t\t\treturn string\n\t\t\t}\n\t\t\tsrcString = string\n\t\t\tsrcStringStart = position\n\t\t\tsrcStringEnd = position + srcStringLength\n\t\t\tposition += length\n\t\t\treturn string.slice(0, length) // we know we just want the beginning\n\t\t}\n\t}\n}\nfunction readStringJS(length) {\n\tlet result\n\tif (length < 16) {\n\t\tif (result = shortStringInJS(length))\n\t\t\treturn result\n\t}\n\tif (length > 64 && decoder)\n\t\treturn decoder.decode(src.subarray(position, position += length))\n\tconst end = position + length\n\tconst units = []\n\tresult = ''\n\twhile (position < end) {\n\t\tconst byte1 = src[position++]\n\t\tif ((byte1 & 0x80) === 0) {\n\t\t\t// 1 byte\n\t\t\tunits.push(byte1)\n\t\t} else if ((byte1 & 0xe0) === 0xc0) {\n\t\t\t// 2 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 6) | byte2)\n\t\t} else if ((byte1 & 0xf0) === 0xe0) {\n\t\t\t// 3 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3)\n\t\t} else if ((byte1 & 0xf8) === 0xf0) {\n\t\t\t// 4 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tconst byte4 = src[position++] & 0x3f\n\t\t\tlet unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4\n\t\t\tif (unit > 0xffff) {\n\t\t\t\tunit -= 0x10000\n\t\t\t\tunits.push(((unit >>> 10) & 0x3ff) | 0xd800)\n\t\t\t\tunit = 0xdc00 | (unit & 0x3ff)\n\t\t\t}\n\t\t\tunits.push(unit)\n\t\t} else {\n\t\t\tunits.push(byte1)\n\t\t}\n\n\t\tif (units.length >= 0x1000) {\n\t\t\tresult += fromCharCode.apply(String, units)\n\t\t\tunits.length = 0\n\t\t}\n\t}\n\n\tif (units.length > 0) {\n\t\tresult += fromCharCode.apply(String, units)\n\t}\n\n\treturn result\n}\nlet fromCharCode = String.fromCharCode\nfunction longStringInJS(length) {\n\tlet start = position\n\tlet bytes = new Array(length)\n\tfor (let i = 0; i < length; i++) {\n\t\tconst byte = src[position++];\n\t\tif ((byte & 0x80) > 0) {\n\t\t\tposition = start\n    \t\t\treturn\n    \t\t}\n    \t\tbytes[i] = byte\n    \t}\n    \treturn fromCharCode.apply(String, bytes)\n}\nfunction shortStringInJS(length) {\n\tif (length < 4) {\n\t\tif (length < 2) {\n\t\t\tif (length === 0)\n\t\t\t\treturn ''\n\t\t\telse {\n\t\t\t\tlet a = src[position++]\n\t\t\t\tif ((a & 0x80) > 1) {\n\t\t\t\t\tposition -= 1\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a)\n\t\t\t}\n\t\t} else {\n\t\t\tlet a = src[position++]\n\t\t\tlet b = src[position++]\n\t\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0) {\n\t\t\t\tposition -= 2\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 3)\n\t\t\t\treturn fromCharCode(a, b)\n\t\t\tlet c = src[position++]\n\t\t\tif ((c & 0x80) > 0) {\n\t\t\t\tposition -= 3\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c)\n\t\t}\n\t} else {\n\t\tlet a = src[position++]\n\t\tlet b = src[position++]\n\t\tlet c = src[position++]\n\t\tlet d = src[position++]\n\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0 || (c & 0x80) > 0 || (d & 0x80) > 0) {\n\t\t\tposition -= 4\n\t\t\treturn\n\t\t}\n\t\tif (length < 6) {\n\t\t\tif (length === 4)\n\t\t\t\treturn fromCharCode(a, b, c, d)\n\t\t\telse {\n\t\t\t\tlet e = src[position++]\n\t\t\t\tif ((e & 0x80) > 0) {\n\t\t\t\t\tposition -= 5\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e)\n\t\t\t}\n\t\t} else if (length < 8) {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0) {\n\t\t\t\tposition -= 6\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 7)\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f)\n\t\t\tlet g = src[position++]\n\t\t\tif ((g & 0x80) > 0) {\n\t\t\t\tposition -= 7\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c, d, e, f, g)\n\t\t} else {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tlet g = src[position++]\n\t\t\tlet h = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0 || (g & 0x80) > 0 || (h & 0x80) > 0) {\n\t\t\t\tposition -= 8\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 10) {\n\t\t\t\tif (length === 8)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h)\n\t\t\t\telse {\n\t\t\t\t\tlet i = src[position++]\n\t\t\t\t\tif ((i & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 9\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i)\n\t\t\t\t}\n\t\t\t} else if (length < 12) {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0) {\n\t\t\t\t\tposition -= 10\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 11)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j)\n\t\t\t\tlet k = src[position++]\n\t\t\t\tif ((k & 0x80) > 0) {\n\t\t\t\t\tposition -= 11\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k)\n\t\t\t} else {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tlet k = src[position++]\n\t\t\t\tlet l = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0 || (k & 0x80) > 0 || (l & 0x80) > 0) {\n\t\t\t\t\tposition -= 12\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 14) {\n\t\t\t\t\tif (length === 12)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l)\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\t\tif ((m & 0x80) > 0) {\n\t\t\t\t\t\t\tposition -= 13\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\tlet n = src[position++]\n\t\t\t\t\tif ((m & 0x80) > 0 || (n & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 14\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (length < 15)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n)\n\t\t\t\t\tlet o = src[position++]\n\t\t\t\t\tif ((o & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 15\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction readBin(length) {\n\treturn currentDecoder.copyBuffers ?\n\t\t// specifically use the copying slice (not the node one)\n\t\tUint8Array.prototype.slice.call(src, position, position += length) :\n\t\tsrc.subarray(position, position += length)\n}\nfunction readExt(length) {\n\tlet type = src[position++]\n\tif (currentExtensions[type]) {\n\t\treturn currentExtensions[type](src.subarray(position, position += length))\n\t}\n\telse\n\t\tthrow new Error('Unknown extension type ' + type)\n}\nlet f32Array = new Float32Array(1)\nlet u8Array = new Uint8Array(f32Array.buffer, 0, 4)\nfunction getFloat16() {\n\tlet byte0 = src[position++]\n\tlet byte1 = src[position++]\n\tlet exponent = (byte0 & 0x7f) >> 2;\n\tif (exponent === 0x1f) { // specials\n\t\tif (byte1 || (byte0 & 3))\n\t\t\treturn NaN;\n\t\treturn (byte0 & 0x80) ? -Infinity : Infinity;\n\t}\n\tif (exponent === 0) { // sub-normals\n\t\t// significand with 10 fractional bits and divided by 2^14\n\t\tlet abs = (((byte0 & 3) << 8) | byte1) / (1 << 24)\n\t\treturn (byte0 & 0x80) ? -abs : abs\n\t}\n\n\tu8Array[3] = (byte0 & 0x80) | // sign bit\n\t\t((exponent >> 1) + 56) // 4 of 5 of the exponent bits, re-offset-ed\n\tu8Array[2] = ((byte0 & 7) << 5) | // last exponent bit and first two mantissa bits\n\t\t(byte1 >> 3) // next 5 bits of mantissa\n\tu8Array[1] = byte1 << 5; // last three bits of mantissa\n\tu8Array[0] = 0;\n\treturn f32Array[0];\n}\n\nlet keyCache = new Array(4096)\nfunction readKey() {\n\tlet length = src[position++]\n\tif (length >= 0x60 && length < 0x78) {\n\t\t// fixstr, potentially use key cache\n\t\tlength = length - 0x60\n\t\tif (srcStringEnd >= position) // if it has been extracted, must use it (and faster anyway)\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\n\t\telse if (!(srcStringEnd == 0 && srcEnd < 180))\n\t\t\treturn readFixedString(length)\n\t} else { // not cacheable, go back and do a standard read\n\t\tposition--\n\t\treturn read()\n\t}\n\tlet key = ((length << 5) ^ (length > 1 ? dataView.getUint16(position) : length > 0 ? src[position] : 0)) & 0xfff\n\tlet entry = keyCache[key]\n\tlet checkPosition = position\n\tlet end = position + length - 3\n\tlet chunk\n\tlet i = 0\n\tif (entry && entry.bytes == length) {\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = dataView.getUint32(checkPosition)\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcheckPosition += 4\n\t\t}\n\t\tend += 3\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = src[checkPosition++]\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (checkPosition === end) {\n\t\t\tposition = checkPosition\n\t\t\treturn entry.string\n\t\t}\n\t\tend -= 3\n\t\tcheckPosition = position\n\t}\n\tentry = []\n\tkeyCache[key] = entry\n\tentry.bytes = length\n\twhile (checkPosition < end) {\n\t\tchunk = dataView.getUint32(checkPosition)\n\t\tentry.push(chunk)\n\t\tcheckPosition += 4\n\t}\n\tend += 3\n\twhile (checkPosition < end) {\n\t\tchunk = src[checkPosition++]\n\t\tentry.push(chunk)\n\t}\n\t// for small blocks, avoiding the overhead of the extract call is helpful\n\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length)\n\tif (string != null)\n\t\treturn entry.string = string\n\treturn entry.string = readFixedString(length)\n}\n\nexport class Tag {\n\tconstructor(value, tag) {\n\t\tthis.value = value\n\t\tthis.tag = tag\n\t}\n}\n\ncurrentExtensions[0] = (dateString) => {\n\t// string date extension\n\treturn new Date(dateString)\n}\n\ncurrentExtensions[1] = (epochSec) => {\n\t// numeric date extension\n\treturn new Date(Math.round(epochSec * 1000))\n}\n\ncurrentExtensions[2] = (buffer) => {\n\t// bigint extension\n\tlet value = BigInt(0)\n\tfor (let i = 0, l = buffer.byteLength; i < l; i++) {\n\t\tvalue = BigInt(buffer[i]) + (value << BigInt(8))\n\t}\n\treturn value\n}\n\ncurrentExtensions[3] = (buffer) => {\n\t// negative bigint extension\n\treturn BigInt(-1) - currentExtensions[2](buffer)\n}\ncurrentExtensions[4] = (fraction) => {\n\t// best to reparse to maintain accuracy\n\treturn +(fraction[1] + 'e' + fraction[0])\n}\n\ncurrentExtensions[5] = (fraction) => {\n\t// probably not sufficiently accurate\n\treturn fraction[1] * Math.exp(fraction[0] * Math.log(2))\n}\n\n// the registration of the record definition extension\nconst recordDefinition = (id, structure) => {\n\tid = id - 0xe000\n\tlet existingStructure = currentStructures[id]\n\tif (existingStructure && existingStructure.isShared) {\n\t\t(currentStructures.restoreStructures || (currentStructures.restoreStructures = []))[id] = existingStructure\n\t}\n\tcurrentStructures[id] = structure\n\n\tstructure.read = createStructureReader(structure)\n}\ncurrentExtensions[LEGACY_RECORD_INLINE_ID] = (data) => {\n\tlet length = data.length\n\tlet structure = data[1]\n\trecordDefinition(data[0], structure)\n\tlet object = {}\n\tfor (let i = 2; i < length; i++) {\n\t\tlet key = structure[i - 2]\n\t\tobject[safeKey(key)] = data[i]\n\t}\n\treturn object\n}\ncurrentExtensions[14] = (value) => {\n\tif (bundledStrings)\n\t\treturn bundledStrings[0].slice(bundledStrings.position0, bundledStrings.position0 += value)\n\treturn new Tag(value, 14)\n}\ncurrentExtensions[15] = (value) => {\n\tif (bundledStrings)\n\t\treturn bundledStrings[1].slice(bundledStrings.position1, bundledStrings.position1 += value)\n\treturn new Tag(value, 15)\n}\nlet glbl = { Error, RegExp }\ncurrentExtensions[27] = (data) => { // http://cbor.schmorp.de/generic-object\n\treturn (glbl[data[0]] || Error)(data[1], data[2])\n}\nconst packedTable = (read) => {\n\tif (src[position++] != 0x84) {\n\t\tlet error = new Error('Packed values structure must be followed by a 4 element array')\n\t\tif (src.length < position)\n\t\t\terror.incomplete = true\n\t\tthrow error\n\t}\n\tlet newPackedValues = read() // packed values\n\tif (!newPackedValues || !newPackedValues.length) {\n\t\tlet error = new Error('Packed values structure must be followed by a 4 element array')\n\t\terror.incomplete = true\n\t\tthrow error\n\t}\n\tpackedValues = packedValues ? newPackedValues.concat(packedValues.slice(newPackedValues.length)) : newPackedValues\n\tpackedValues.prefixes = read()\n\tpackedValues.suffixes = read()\n\treturn read() // read the rump\n}\npackedTable.handlesRead = true\ncurrentExtensions[51] = packedTable\n\ncurrentExtensions[PACKED_REFERENCE_TAG_ID] = (data) => { // packed reference\n\tif (!packedValues) {\n\t\tif (currentDecoder.getShared)\n\t\t\tloadShared()\n\t\telse\n\t\t\treturn new Tag(data, PACKED_REFERENCE_TAG_ID)\n\t}\n\tif (typeof data == 'number')\n\t\treturn packedValues[16 + (data >= 0 ? 2 * data : (-2 * data - 1))]\n\tlet error = new Error('No support for non-integer packed references yet')\n\tif (data === undefined)\n\t\terror.incomplete = true\n\tthrow error\n}\n\n// The following code is an incomplete implementation of http://cbor.schmorp.de/stringref\n// the real thing would need to implemennt more logic to populate the stringRefs table and\n// maintain a stack of stringRef \"namespaces\".\n//\n// currentExtensions[25] = (id) => {\n// \treturn stringRefs[id]\n// }\n// currentExtensions[256] = (read) => {\n// \tstringRefs = []\n// \ttry {\n// \t\treturn read()\n// \t} finally {\n// \t\tstringRefs = null\n// \t}\n// }\n// currentExtensions[256].handlesRead = true\n\ncurrentExtensions[28] = (read) => { \n\t// shareable http://cbor.schmorp.de/value-sharing (for structured clones)\n\tif (!referenceMap) {\n\t\treferenceMap = new Map()\n\t\treferenceMap.id = 0\n\t}\n\tlet id = referenceMap.id++\n\tlet startingPosition = position\n\tlet token = src[position]\n\tlet target\n\t// TODO: handle Maps, Sets, and other types that can cycle; this is complicated, because you potentially need to read\n\t// ahead past references to record structure definitions\n\tif ((token >> 5) == 4)\n\t\ttarget = []\n\telse\n\t\ttarget = {}\n\n\tlet refEntry = { target } // a placeholder object\n\treferenceMap.set(id, refEntry)\n\tlet targetProperties = read() // read the next value as the target object to id\n\tif (refEntry.used) {// there is a cycle, so we have to assign properties to original target\n\t\tif (Object.getPrototypeOf(target) !== Object.getPrototypeOf(targetProperties)) {\n\t\t\t// this means that the returned target does not match the targetProperties, so we need rerun the read to\n\t\t\t// have the correctly create instance be assigned as a reference, then we do the copy the properties back to the\n\t\t\t// target\n\t\t\t// reset the position so that the read can be repeated\n\t\t\tposition = startingPosition\n\t\t\t// the returned instance is our new target for references\n\t\t\ttarget = targetProperties\n\t\t\treferenceMap.set(id, { target })\n\t\t\ttargetProperties = read()\n\t\t}\n\t\treturn Object.assign(target, targetProperties)\n\t}\n\trefEntry.target = targetProperties // the placeholder wasn't used, replace with the deserialized one\n\treturn targetProperties // no cycle, can just use the returned read object\n}\ncurrentExtensions[28].handlesRead = true\n\ncurrentExtensions[29] = (id) => {\n\t// sharedref http://cbor.schmorp.de/value-sharing (for structured clones)\n\tlet refEntry = referenceMap.get(id)\n\trefEntry.used = true\n\treturn refEntry.target\n}\n\ncurrentExtensions[258] = (array) => new Set(array); // https://github.com/input-output-hk/cbor-sets-spec/blob/master/CBOR_SETS.md\n(currentExtensions[259] = (read) => {\n\t// https://github.com/shanewholloway/js-cbor-codec/blob/master/docs/CBOR-259-spec\n\t// for decoding as a standard Map\n\tif (currentDecoder.mapsAsObjects) {\n\t\tcurrentDecoder.mapsAsObjects = false\n\t\trestoreMapsAsObject = true\n\t}\n\treturn read()\n}).handlesRead = true\nfunction combine(a, b) {\n\tif (typeof a === 'string')\n\t\treturn a + b\n\tif (a instanceof Array)\n\t\treturn a.concat(b)\n\treturn Object.assign({}, a, b)\n}\nfunction getPackedValues() {\n\tif (!packedValues) {\n\t\tif (currentDecoder.getShared)\n\t\t\tloadShared()\n\t\telse\n\t\t\tthrow new Error('No packed values available')\n\t}\n\treturn packedValues\n}\nconst SHARED_DATA_TAG_ID = 0x53687264 // ascii 'Shrd'\ncurrentExtensionRanges.push((tag, input) => {\n\tif (tag >= 225 && tag <= 255)\n\t\treturn combine(getPackedValues().prefixes[tag - 224], input)\n\tif (tag >= 28704 && tag <= 32767)\n\t\treturn combine(getPackedValues().prefixes[tag - 28672], input)\n\tif (tag >= 1879052288 && tag <= 2147483647)\n\t\treturn combine(getPackedValues().prefixes[tag - 1879048192], input)\n\tif (tag >= 216 && tag <= 223)\n\t\treturn combine(input, getPackedValues().suffixes[tag - 216])\n\tif (tag >= 27647 && tag <= 28671)\n\t\treturn combine(input, getPackedValues().suffixes[tag - 27639])\n\tif (tag >= 1811940352 && tag <= 1879048191)\n\t\treturn combine(input, getPackedValues().suffixes[tag - 1811939328])\n\tif (tag == SHARED_DATA_TAG_ID) {// we do a special check for this so that we can keep the currentExtensions as densely stored array (v8 stores arrays densely under about 3000 elements)\n\t\treturn {\n\t\t\tpackedValues: packedValues,\n\t\t\tstructures: currentStructures.slice(0),\n\t\t\tversion: input,\n\t\t}\n\t}\n\tif (tag == 55799) // self-descriptive CBOR tag, just return input value\n\t\treturn input\n})\n\nconst isLittleEndianMachine = new Uint8Array(new Uint16Array([1]).buffer)[0] == 1\nexport const typedArrays = [Uint8Array, Uint8ClampedArray, Uint16Array, Uint32Array,\n\ttypeof BigUint64Array == 'undefined' ? { name:'BigUint64Array' } : BigUint64Array, Int8Array, Int16Array, Int32Array,\n\ttypeof BigInt64Array == 'undefined' ? { name:'BigInt64Array' } : BigInt64Array, Float32Array, Float64Array]\nconst typedArrayTags = [64, 68, 69, 70, 71, 72, 77, 78, 79, 85, 86]\nfor (let i = 0; i < typedArrays.length; i++) {\n\tregisterTypedArray(typedArrays[i], typedArrayTags[i])\n}\nfunction registerTypedArray(TypedArray, tag) {\n\tlet dvMethod = 'get' + TypedArray.name.slice(0, -5)\n\tlet bytesPerElement;\n\tif (typeof TypedArray === 'function')\n\t\tbytesPerElement = TypedArray.BYTES_PER_ELEMENT;\n\telse\n\t\tTypedArray = null;\n\tfor (let littleEndian = 0; littleEndian < 2; littleEndian++) {\n\t\tif (!littleEndian && bytesPerElement == 1)\n\t\t\tcontinue\n\t\tlet sizeShift = bytesPerElement == 2 ? 1 : bytesPerElement == 4 ? 2 : bytesPerElement == 8 ? 3 : 0\n\t\tcurrentExtensions[littleEndian ? tag : (tag - 4)] = (bytesPerElement == 1 || littleEndian == isLittleEndianMachine) ? (buffer) => {\n\t\t\tif (!TypedArray)\n\t\t\t\tthrow new Error('Could not find typed array for code ' + tag)\n\t\t\tif (!currentDecoder.copyBuffers) {\n\t\t\t\t// try provide a direct view, but will only work if we are byte-aligned\n\t\t\t\tif (bytesPerElement === 1 ||\n\t\t\t\t\tbytesPerElement === 2 && !(buffer.byteOffset & 1) ||\n\t\t\t\t\tbytesPerElement === 4 && !(buffer.byteOffset & 3) ||\n\t\t\t\t\tbytesPerElement === 8 && !(buffer.byteOffset & 7))\n\t\t\t\t\treturn new TypedArray(buffer.buffer, buffer.byteOffset, buffer.byteLength >> sizeShift);\n\t\t\t}\n\t\t\t// we have to slice/copy here to get a new ArrayBuffer, if we are not word/byte aligned\n\t\t\treturn new TypedArray(Uint8Array.prototype.slice.call(buffer, 0).buffer)\n\t\t} : buffer => {\n\t\t\tif (!TypedArray)\n\t\t\t\tthrow new Error('Could not find typed array for code ' + tag)\n\t\t\tlet dv = new DataView(buffer.buffer, buffer.byteOffset, buffer.byteLength)\n\t\t\tlet elements = buffer.length >> sizeShift\n\t\t\tlet ta = new TypedArray(elements)\n\t\t\tlet method = dv[dvMethod]\n\t\t\tfor (let i = 0; i < elements; i++) {\n\t\t\t\tta[i] = method.call(dv, i << sizeShift, littleEndian)\n\t\t\t}\n\t\t\treturn ta\n\t\t}\n\t}\n}\n\nfunction readBundleExt() {\n\tlet length = readJustLength()\n\tlet bundlePosition = position + read()\n\tfor (let i = 2; i < length; i++) {\n\t\t// skip past bundles that were already read\n\t\tlet bundleLength = readJustLength() // this will increment position, so must add to position afterwards\n\t\tposition += bundleLength\n\t}\n\tlet dataPosition = position\n\tposition = bundlePosition\n\tbundledStrings = [readStringJS(readJustLength()), readStringJS(readJustLength())]\n\tbundledStrings.position0 = 0\n\tbundledStrings.position1 = 0\n\tbundledStrings.postBundlePosition = position\n\tposition = dataPosition\n\treturn read()\n}\n\nfunction readJustLength() {\n\tlet token = src[position++] & 0x1f\n\tif (token > 0x17) {\n\t\tswitch (token) {\n\t\t\tcase 0x18:\n\t\t\t\ttoken = src[position++]\n\t\t\t\tbreak\n\t\t\tcase 0x19:\n\t\t\t\ttoken = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tbreak\n\t\t\tcase 0x1a:\n\t\t\t\ttoken = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tbreak\n\t\t}\n\t}\n\treturn token\n}\n\nfunction loadShared() {\n\tif (currentDecoder.getShared) {\n\t\tlet sharedData = saveState(() => {\n\t\t\t// save the state in case getShared modifies our buffer\n\t\t\tsrc = null\n\t\t\treturn currentDecoder.getShared()\n\t\t}) || {}\n\t\tlet updatedStructures = sharedData.structures || []\n\t\tcurrentDecoder.sharedVersion = sharedData.version\n\t\tpackedValues = currentDecoder.sharedValues = sharedData.packedValues\n\t\tif (currentStructures === true)\n\t\t\tcurrentDecoder.structures = currentStructures = updatedStructures\n\t\telse\n\t\t\tcurrentStructures.splice.apply(currentStructures, [0, updatedStructures.length].concat(updatedStructures))\n\t}\n}\n\nfunction saveState(callback) {\n\tlet savedSrcEnd = srcEnd\n\tlet savedPosition = position\n\tlet savedStringPosition = stringPosition\n\tlet savedSrcStringStart = srcStringStart\n\tlet savedSrcStringEnd = srcStringEnd\n\tlet savedSrcString = srcString\n\tlet savedStrings = strings\n\tlet savedReferenceMap = referenceMap\n\tlet savedBundledStrings = bundledStrings\n\n\t// TODO: We may need to revisit this if we do more external calls to user code (since it could be slow)\n\tlet savedSrc = new Uint8Array(src.slice(0, srcEnd)) // we copy the data in case it changes while external data is processed\n\tlet savedStructures = currentStructures\n\tlet savedDecoder = currentDecoder\n\tlet savedSequentialMode = sequentialMode\n\tlet value = callback()\n\tsrcEnd = savedSrcEnd\n\tposition = savedPosition\n\tstringPosition = savedStringPosition\n\tsrcStringStart = savedSrcStringStart\n\tsrcStringEnd = savedSrcStringEnd\n\tsrcString = savedSrcString\n\tstrings = savedStrings\n\treferenceMap = savedReferenceMap\n\tbundledStrings = savedBundledStrings\n\tsrc = savedSrc\n\tsequentialMode = savedSequentialMode\n\tcurrentStructures = savedStructures\n\tcurrentDecoder = savedDecoder\n\tdataView = new DataView(src.buffer, src.byteOffset, src.byteLength)\n\treturn value\n}\nexport function clearSource() {\n\tsrc = null\n\treferenceMap = null\n\tcurrentStructures = null\n}\n\nexport function addExtension(extension) {\n\tcurrentExtensions[extension.tag] = extension.decode\n}\n\nexport function setSizeLimits(limits) {\n\tif (limits.maxMapSize) maxMapSize = limits.maxMapSize;\n\tif (limits.maxArraySize) maxArraySize = limits.maxArraySize;\n\tif (limits.maxObjectSize) maxObjectSize = limits.maxObjectSize;\n}\n\nexport const mult10 = new Array(147) // this is a table matching binary exponents to the multiplier to determine significant digit rounding\nfor (let i = 0; i < 256; i++) {\n\tmult10[i] = +('1e' + Math.floor(45.15 - i * 0.30103))\n}\nlet defaultDecoder = new Decoder({ useRecords: false })\nexport const decode = defaultDecoder.decode\nexport const decodeMultiple = defaultDecoder.decodeMultiple\nexport const FLOAT32_OPTIONS = {\n\tNEVER: 0,\n\tALWAYS: 1,\n\tDECIMAL_ROUND: 3,\n\tDECIMAL_FIT: 4\n}\nexport function roundFloat32(float32Number) {\n\tf32Array[0] = float32Number\n\tlet multiplier = mult10[((u8Array[3] & 0x7f) << 1) | (u8Array[2] >> 7)]\n\treturn ((multiplier * float32Number + (float32Number > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n}\n","import { Decoder, mult10, Tag, typedArrays, addExtension as decodeAddExtension } from './decode.js'\nlet textEncoder\ntry {\n\ttextEncoder = new TextEncoder()\n} catch (error) {}\nlet extensions, extensionClasses\nconst Buffer = typeof globalThis === 'object' && globalThis.Buffer;\nconst hasNodeBuffer = typeof Buffer !== 'undefined'\nconst ByteArrayAllocate = hasNodeBuffer ? Buffer.allocUnsafeSlow : Uint8Array\nconst ByteArray = hasNodeBuffer ? Buffer : Uint8Array\nconst MAX_STRUCTURES = 0x100\nconst MAX_BUFFER_SIZE = hasNodeBuffer ? 0x100000000 : 0x7fd00000\nlet serializationId = 1\nlet throwOnIterable\nlet target\nlet targetView\nlet position = 0\nlet safeEnd\nlet bundledStrings = null\nconst MAX_BUNDLE_SIZE = 0xf000\nconst hasNonLatin = /[\\u0080-\\uFFFF]/\nconst RECORD_SYMBOL = Symbol('record-id')\nexport class Encoder extends Decoder {\n\tconstructor(options) {\n\t\tsuper(options)\n\t\tthis.offset = 0\n\t\tlet typeBuffer\n\t\tlet start\n\t\tlet sharedStructures\n\t\tlet hasSharedUpdate\n\t\tlet structures\n\t\tlet referenceMap\n\t\toptions = options || {}\n\t\tlet encodeUtf8 = ByteArray.prototype.utf8Write ? function(string, position, maxBytes) {\n\t\t\treturn target.utf8Write(string, position, maxBytes)\n\t\t} : (textEncoder && textEncoder.encodeInto) ?\n\t\t\tfunction(string, position) {\n\t\t\t\treturn textEncoder.encodeInto(string, target.subarray(position)).written\n\t\t\t} : false\n\n\t\tlet encoder = this\n\t\tlet hasSharedStructures = options.structures || options.saveStructures\n\t\tlet maxSharedStructures = options.maxSharedStructures\n\t\tif (maxSharedStructures == null)\n\t\t\tmaxSharedStructures = hasSharedStructures ? 128 : 0\n\t\tif (maxSharedStructures > 8190)\n\t\t\tthrow new Error('Maximum maxSharedStructure is 8190')\n\t\tlet isSequential = options.sequential\n\t\tif (isSequential) {\n\t\t\tmaxSharedStructures = 0\n\t\t}\n\t\tif (!this.structures)\n\t\t\tthis.structures = []\n\t\tif (this.saveStructures)\n\t\t\tthis.saveShared = this.saveStructures\n\t\tlet samplingPackedValues, packedObjectMap, sharedValues = options.sharedValues\n\t\tlet sharedPackedObjectMap\n\t\tif (sharedValues) {\n\t\t\tsharedPackedObjectMap = Object.create(null)\n\t\t\tfor (let i = 0, l = sharedValues.length; i < l; i++) {\n\t\t\t\tsharedPackedObjectMap[sharedValues[i]] = i\n\t\t\t}\n\t\t}\n\t\tlet recordIdsToRemove = []\n\t\tlet transitionsCount = 0\n\t\tlet serializationsSinceTransitionRebuild = 0\n\t\t\n\t\tthis.mapEncode = function(value, encodeOptions) {\n\t\t\t// Experimental support for premapping keys using _keyMap instad of keyMap - not optiimised yet)\n\t\t\tif (this._keyMap && !this._mapped) {\n\t\t\t\t//console.log('encoding ', value)\n\t\t\t\tswitch (value.constructor.name) {\n\t\t\t\t\tcase 'Array': \n\t\t\t\t\t\tvalue = value.map(r => this.encodeKeys(r))\n\t\t\t\t\t\tbreak\n\t\t\t\t\t//case 'Map': \n\t\t\t\t\t//\tvalue = this.encodeKeys(value)\n\t\t\t\t\t//\tbreak\n\t\t\t\t}\n\t\t\t\t//this._mapped = true\n\t\t\t}\n\t\t\treturn this.encode(value, encodeOptions)\n\t\t}\n\t\t\n\t\tthis.encode = function(value, encodeOptions)\t{\n\t\t\tif (!target) {\n\t\t\t\ttarget = new ByteArrayAllocate(8192)\n\t\t\t\ttargetView = new DataView(target.buffer, 0, 8192)\n\t\t\t\tposition = 0\n\t\t\t}\n\t\t\tsafeEnd = target.length - 10\n\t\t\tif (safeEnd - position < 0x800) {\n\t\t\t\t// don't start too close to the end, \n\t\t\t\ttarget = new ByteArrayAllocate(target.length)\n\t\t\t\ttargetView = new DataView(target.buffer, 0, target.length)\n\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\tposition = 0\n\t\t\t} else if (encodeOptions === REUSE_BUFFER_MODE)\n\t\t\t\tposition = (position + 7) & 0x7ffffff8 // Word align to make any future copying of this buffer faster\n\t\t\tstart = position\n\t\t\tif (encoder.useSelfDescribedHeader) {\n\t\t\t\ttargetView.setUint32(position, 0xd9d9f700) // tag two byte, then self-descriptive tag\n\t\t\t\tposition += 3\n\t\t\t}\n\t\t\treferenceMap = encoder.structuredClone ? new Map() : null\n\t\t\tif (encoder.bundleStrings && typeof value !== 'string') {\n\t\t\t\tbundledStrings = []\n\t\t\t\tbundledStrings.size = Infinity // force a new bundle start on first string\n\t\t\t} else\n\t\t\t\tbundledStrings = null\n\n\t\t\tsharedStructures = encoder.structures\n\t\t\tif (sharedStructures) {\n\t\t\t\tif (sharedStructures.uninitialized) {\n\t\t\t\t\tlet sharedData = encoder.getShared() || {}\n\t\t\t\t\tencoder.structures = sharedStructures = sharedData.structures || []\n\t\t\t\t\tencoder.sharedVersion = sharedData.version\n\t\t\t\t\tlet sharedValues = encoder.sharedValues = sharedData.packedValues\n\t\t\t\t\tif (sharedValues) {\n\t\t\t\t\t\tsharedPackedObjectMap = {}\n\t\t\t\t\t\tfor (let i = 0, l = sharedValues.length; i < l; i++)\n\t\t\t\t\t\t\tsharedPackedObjectMap[sharedValues[i]] = i\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet sharedStructuresLength = sharedStructures.length\n\t\t\t\tif (sharedStructuresLength > maxSharedStructures && !isSequential)\n\t\t\t\t\tsharedStructuresLength = maxSharedStructures\n\t\t\t\tif (!sharedStructures.transitions) {\n\t\t\t\t\t// rebuild our structure transitions\n\t\t\t\t\tsharedStructures.transitions = Object.create(null)\n\t\t\t\t\tfor (let i = 0; i < sharedStructuresLength; i++) {\n\t\t\t\t\t\tlet keys = sharedStructures[i]\n\t\t\t\t\t\t//console.log('shared struct keys:', keys)\n\t\t\t\t\t\tif (!keys)\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\tlet nextTransition, transition = sharedStructures.transitions\n\t\t\t\t\t\tfor (let j = 0, l = keys.length; j < l; j++) {\n\t\t\t\t\t\t\tif (transition[RECORD_SYMBOL] === undefined)\n\t\t\t\t\t\t\t\ttransition[RECORD_SYMBOL] = i\n\t\t\t\t\t\t\tlet key = keys[j]\n\t\t\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttransition[RECORD_SYMBOL] = i | 0x100000\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!isSequential)\n\t\t\t\t\tsharedStructures.nextId = sharedStructuresLength\n\t\t\t}\n\t\t\tif (hasSharedUpdate)\n\t\t\t\thasSharedUpdate = false\n\t\t\tstructures = sharedStructures || []\n\t\t\tpackedObjectMap = sharedPackedObjectMap\n\t\t\tif (options.pack) {\n\t\t\t\tlet packedValues = new Map()\n\t\t\t\tpackedValues.values = []\n\t\t\t\tpackedValues.encoder = encoder\n\t\t\t\tpackedValues.maxValues = options.maxPrivatePackedValues || (sharedPackedObjectMap ? 16 : Infinity)\n\t\t\t\tpackedValues.objectMap = sharedPackedObjectMap || false\n\t\t\t\tpackedValues.samplingPackedValues = samplingPackedValues\n\t\t\t\tfindRepetitiveStrings(value, packedValues)\n\t\t\t\tif (packedValues.values.length > 0) {\n\t\t\t\t\ttarget[position++] = 0xd8 // one-byte tag\n\t\t\t\t\ttarget[position++] = 51 // tag 51 for packed shared structures https://www.potaroo.net/ietf/ids/draft-ietf-cbor-packed-03.txt\n\t\t\t\t\twriteArrayHeader(4)\n\t\t\t\t\tlet valuesArray = packedValues.values\n\t\t\t\t\tencode(valuesArray)\n\t\t\t\t\twriteArrayHeader(0) // prefixes\n\t\t\t\t\twriteArrayHeader(0) // suffixes\n\t\t\t\t\tpackedObjectMap = Object.create(sharedPackedObjectMap || null)\n\t\t\t\t\tfor (let i = 0, l = valuesArray.length; i < l; i++) {\n\t\t\t\t\t\tpackedObjectMap[valuesArray[i]] = i\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrowOnIterable = encodeOptions & THROW_ON_ITERABLE;\n\t\t\ttry {\n\t\t\t\tif (throwOnIterable)\n\t\t\t\t\treturn;\n\t\t\t\tencode(value)\n\t\t\t\tif (bundledStrings) {\n\t\t\t\t\twriteBundles(start, encode)\n\t\t\t\t}\n\t\t\t\tencoder.offset = position // update the offset so next serialization doesn't write over our buffer, but can continue writing to same buffer sequentially\n\t\t\t\tif (referenceMap && referenceMap.idsToInsert) {\n\t\t\t\t\tposition += referenceMap.idsToInsert.length * 2\n\t\t\t\t\tif (position > safeEnd)\n\t\t\t\t\t\tmakeRoom(position)\n\t\t\t\t\tencoder.offset = position\n\t\t\t\t\tlet serialized = insertIds(target.subarray(start, position), referenceMap.idsToInsert)\n\t\t\t\t\treferenceMap = null\n\t\t\t\t\treturn serialized\n\t\t\t\t}\n\t\t\t\tif (encodeOptions & REUSE_BUFFER_MODE) {\n\t\t\t\t\ttarget.start = start\n\t\t\t\t\ttarget.end = position\n\t\t\t\t\treturn target\n\t\t\t\t}\n\t\t\t\treturn target.subarray(start, position) // position can change if we call encode again in saveShared, so we get the buffer now\n\t\t\t} finally {\n\t\t\t\tif (sharedStructures) {\n\t\t\t\t\tif (serializationsSinceTransitionRebuild < 10)\n\t\t\t\t\t\tserializationsSinceTransitionRebuild++\n\t\t\t\t\tif (sharedStructures.length > maxSharedStructures)\n\t\t\t\t\t\tsharedStructures.length = maxSharedStructures\n\t\t\t\t\tif (transitionsCount > 10000) {\n\t\t\t\t\t\t// force a rebuild occasionally after a lot of transitions so it can get cleaned up\n\t\t\t\t\t\tsharedStructures.transitions = null\n\t\t\t\t\t\tserializationsSinceTransitionRebuild = 0\n\t\t\t\t\t\ttransitionsCount = 0\n\t\t\t\t\t\tif (recordIdsToRemove.length > 0)\n\t\t\t\t\t\t\trecordIdsToRemove = []\n\t\t\t\t\t} else if (recordIdsToRemove.length > 0 && !isSequential) {\n\t\t\t\t\t\tfor (let i = 0, l = recordIdsToRemove.length; i < l; i++) {\n\t\t\t\t\t\t\trecordIdsToRemove[i][RECORD_SYMBOL] = undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\trecordIdsToRemove = []\n\t\t\t\t\t\t//sharedStructures.nextId = maxSharedStructures\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (hasSharedUpdate && encoder.saveShared) {\n\t\t\t\t\tif (encoder.structures.length > maxSharedStructures) {\n\t\t\t\t\t\tencoder.structures = encoder.structures.slice(0, maxSharedStructures)\n\t\t\t\t\t}\n\t\t\t\t\t// we can't rely on start/end with REUSE_BUFFER_MODE since they will (probably) change when we save\n\t\t\t\t\tlet returnBuffer = target.subarray(start, position)\n\t\t\t\t\tif (encoder.updateSharedData() === false)\n\t\t\t\t\t\treturn encoder.encode(value) // re-encode if it fails\n\t\t\t\t\treturn returnBuffer\n\t\t\t\t}\n\t\t\t\tif (encodeOptions & RESET_BUFFER_MODE)\n\t\t\t\t\tposition = start\n\t\t\t}\n\t\t}\n\t\tthis.findCommonStringsToPack = () => {\n\t\t\tsamplingPackedValues = new Map()\n\t\t\tif (!sharedPackedObjectMap)\n\t\t\t\tsharedPackedObjectMap = Object.create(null)\n\t\t\treturn (options) => {\n\t\t\t\tlet threshold = options && options.threshold || 4\n\t\t\t\tlet position = this.pack ? options.maxPrivatePackedValues || 16 : 0\n\t\t\t\tif (!sharedValues)\n\t\t\t\t\tsharedValues = this.sharedValues = []\n\t\t\t\tfor (let [ key, status ] of samplingPackedValues) {\n\t\t\t\t\tif (status.count > threshold) {\n\t\t\t\t\t\tsharedPackedObjectMap[key] = position++\n\t\t\t\t\t\tsharedValues.push(key)\n\t\t\t\t\t\thasSharedUpdate = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twhile (this.saveShared && this.updateSharedData() === false) {}\n\t\t\t\tsamplingPackedValues = null\n\t\t\t}\n\t\t}\n\t\tconst encode = (value) => {\n\t\t\tif (position > safeEnd)\n\t\t\t\ttarget = makeRoom(position)\n\n\t\t\tvar type = typeof value\n\t\t\tvar length\n\t\t\tif (type === 'string') {\n\t\t\t\tif (packedObjectMap) {\n\t\t\t\t\tlet packedPosition = packedObjectMap[value]\n\t\t\t\t\tif (packedPosition >= 0) {\n\t\t\t\t\t\tif (packedPosition < 16)\n\t\t\t\t\t\t\ttarget[position++] = packedPosition + 0xe0 // simple values, defined in https://www.potaroo.net/ietf/ids/draft-ietf-cbor-packed-03.txt\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ttarget[position++] = 0xc6 // tag 6 defined in https://www.potaroo.net/ietf/ids/draft-ietf-cbor-packed-03.txt\n\t\t\t\t\t\t\tif (packedPosition & 1)\n\t\t\t\t\t\t\t\tencode((15 - packedPosition) >> 1)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tencode((packedPosition - 16) >> 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn\n/*\t\t\t\t\t\t} else if (packedStatus.serializationId != serializationId) {\n\t\t\t\t\t\t\tpackedStatus.serializationId = serializationId\n\t\t\t\t\t\t\tpackedStatus.count = 1\n\t\t\t\t\t\t\tif (options.sharedPack) {\n\t\t\t\t\t\t\t\tlet sharedCount = packedStatus.sharedCount = (packedStatus.sharedCount || 0) + 1\n\t\t\t\t\t\t\t\tif (shareCount > (options.sharedPack.threshold || 5)) {\n\t\t\t\t\t\t\t\t\tlet sharedPosition = packedStatus.position = packedStatus.nextSharedPosition\n\t\t\t\t\t\t\t\t\thasSharedUpdate = true\n\t\t\t\t\t\t\t\t\tif (sharedPosition < 16)\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = sharedPosition + 0xc0\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // else any in-doc incrementation?*/\n\t\t\t\t\t} else if (samplingPackedValues && !options.pack) {\n\t\t\t\t\t\tlet status = samplingPackedValues.get(value)\n\t\t\t\t\t\tif (status)\n\t\t\t\t\t\t\tstatus.count++\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsamplingPackedValues.set(value, {\n\t\t\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet strLength = value.length\n\t\t\t\tif (bundledStrings && strLength >= 4 && strLength < 0x400) {\n\t\t\t\t\tif ((bundledStrings.size += strLength) > MAX_BUNDLE_SIZE) {\n\t\t\t\t\t\tlet extStart\n\t\t\t\t\t\tlet maxBytes = (bundledStrings[0] ? bundledStrings[0].length * 3 + bundledStrings[1].length : 0) + 10\n\t\t\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\t\t\t\t\t\ttarget[position++] = 0xd9 // tag 16-bit\n\t\t\t\t\t\ttarget[position++] = 0xdf // tag 0xdff9\n\t\t\t\t\t\ttarget[position++] = 0xf9\n\t\t\t\t\t\t// TODO: If we only have one bundle with any string data, only write one string bundle\n\t\t\t\t\t\ttarget[position++] = bundledStrings.position ? 0x84 : 0x82 // array of 4 or 2 elements depending on if we write bundles\n\t\t\t\t\t\ttarget[position++] = 0x1a // 32-bit unsigned int\n\t\t\t\t\t\textStart = position - start\n\t\t\t\t\t\tposition += 4 // reserve for writing bundle reference\n\t\t\t\t\t\tif (bundledStrings.position) {\n\t\t\t\t\t\t\twriteBundles(start, encode) // write the last bundles\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbundledStrings = ['', ''] // create new ones\n\t\t\t\t\t\tbundledStrings.size = 0\n\t\t\t\t\t\tbundledStrings.position = extStart\n\t\t\t\t\t}\n\t\t\t\t\tlet twoByte = hasNonLatin.test(value)\n\t\t\t\t\tbundledStrings[twoByte ? 0 : 1] += value\n\t\t\t\t\ttarget[position++] = twoByte ? 0xce : 0xcf\n\t\t\t\t\tencode(strLength);\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet headerSize\n\t\t\t\t// first we estimate the header size, so we can write to the correct location\n\t\t\t\tif (strLength < 0x20) {\n\t\t\t\t\theaderSize = 1\n\t\t\t\t} else if (strLength < 0x100) {\n\t\t\t\t\theaderSize = 2\n\t\t\t\t} else if (strLength < 0x10000) {\n\t\t\t\t\theaderSize = 3\n\t\t\t\t} else {\n\t\t\t\t\theaderSize = 5\n\t\t\t\t}\n\t\t\t\tlet maxBytes = strLength * 3\n\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\n\t\t\t\tif (strLength < 0x40 || !encodeUtf8) {\n\t\t\t\t\tlet i, c1, c2, strPosition = position + headerSize\n\t\t\t\t\tfor (i = 0; i < strLength; i++) {\n\t\t\t\t\t\tc1 = value.charCodeAt(i)\n\t\t\t\t\t\tif (c1 < 0x80) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1\n\t\t\t\t\t\t} else if (c1 < 0x800) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 | 0xc0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t(c1 & 0xfc00) === 0xd800 &&\n\t\t\t\t\t\t\t((c2 = value.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tc1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff)\n\t\t\t\t\t\t\ti++\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 18 | 0xf0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 | 0xe0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlength = strPosition - position - headerSize\n\t\t\t\t} else {\n\t\t\t\t\tlength = encodeUtf8(value, position + headerSize, maxBytes)\n\t\t\t\t}\n\n\t\t\t\tif (length < 0x18) {\n\t\t\t\t\ttarget[position++] = 0x60 | length\n\t\t\t\t} else if (length < 0x100) {\n\t\t\t\t\tif (headerSize < 2) {\n\t\t\t\t\t\ttarget.copyWithin(position + 2, position + 1, position + 1 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0x78\n\t\t\t\t\ttarget[position++] = length\n\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\tif (headerSize < 3) {\n\t\t\t\t\t\ttarget.copyWithin(position + 3, position + 2, position + 2 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0x79\n\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t} else {\n\t\t\t\t\tif (headerSize < 5) {\n\t\t\t\t\t\ttarget.copyWithin(position + 5, position + 3, position + 3 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0x7a\n\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\tposition += 4\n\t\t\t\t}\n\t\t\t\tposition += length\n\t\t\t} else if (type === 'number') {\n\t\t\t\tif (!this.alwaysUseFloat && value >>> 0 === value) {// positive integer, 32-bit or less\n\t\t\t\t\t// positive uint\n\t\t\t\t\tif (value < 0x18) {\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x100) {\n\t\t\t\t\t\ttarget[position++] = 0x18\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x10000) {\n\t\t\t\t\t\ttarget[position++] = 0x19\n\t\t\t\t\t\ttarget[position++] = value >> 8\n\t\t\t\t\t\ttarget[position++] = value & 0xff\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0x1a\n\t\t\t\t\t\ttargetView.setUint32(position, value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else if (!this.alwaysUseFloat && value >> 0 === value) { // negative integer\n\t\t\t\t\tif (value >= -0x18) {\n\t\t\t\t\t\ttarget[position++] = 0x1f - value\n\t\t\t\t\t} else if (value >= -0x100) {\n\t\t\t\t\t\ttarget[position++] = 0x38\n\t\t\t\t\t\ttarget[position++] = ~value\n\t\t\t\t\t} else if (value >= -0x10000) {\n\t\t\t\t\t\ttarget[position++] = 0x39\n\t\t\t\t\t\ttargetView.setUint16(position, ~value)\n\t\t\t\t\t\tposition += 2\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0x3a\n\t\t\t\t\t\ttargetView.setUint32(position, ~value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet useFloat32\n\t\t\t\t\tif ((useFloat32 = this.useFloat32) > 0 && value < 0x100000000 && value >= -0x80000000) {\n\t\t\t\t\t\ttarget[position++] = 0xfa\n\t\t\t\t\t\ttargetView.setFloat32(position, value)\n\t\t\t\t\t\tlet xShifted\n\t\t\t\t\t\tif (useFloat32 < 4 ||\n\t\t\t\t\t\t\t\t// this checks for rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\t\t\t((xShifted = value * mult10[((target[position] & 0x7f) << 1) | (target[position + 1] >> 7)]) >> 0) === xShifted) {\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tposition-- // move back into position for writing a double\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xfb\n\t\t\t\t\ttargetView.setFloat64(position, value)\n\t\t\t\t\tposition += 8\n\t\t\t\t}\n\t\t\t} else if (type === 'object') {\n\t\t\t\tif (!value)\n\t\t\t\t\ttarget[position++] = 0xf6\n\t\t\t\telse {\n\t\t\t\t\tif (referenceMap) {\n\t\t\t\t\t\tlet referee = referenceMap.get(value)\n\t\t\t\t\t\tif (referee) {\n\t\t\t\t\t\t\ttarget[position++] = 0xd8\n\t\t\t\t\t\t\ttarget[position++] = 29 // http://cbor.schmorp.de/value-sharing\n\t\t\t\t\t\t\ttarget[position++] = 0x19 // 16-bit uint\n\t\t\t\t\t\t\tif (!referee.references) {\n\t\t\t\t\t\t\t\tlet idsToInsert = referenceMap.idsToInsert || (referenceMap.idsToInsert = [])\n\t\t\t\t\t\t\t\treferee.references = []\n\t\t\t\t\t\t\t\tidsToInsert.push(referee)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treferee.references.push(position - start)\n\t\t\t\t\t\t\tposition += 2 // TODO: also support 32-bit\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else \n\t\t\t\t\t\t\treferenceMap.set(value, { offset: position - start })\n\t\t\t\t\t}\n\t\t\t\t\tlet constructor = value.constructor\n\t\t\t\t\tif (constructor === Object) {\n\t\t\t\t\t\twriteObject(value)\n\t\t\t\t\t} else if (constructor === Array) {\n\t\t\t\t\t\tlength = value.length\n\t\t\t\t\t\tif (length < 0x18) {\n\t\t\t\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twriteArrayHeader(length)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\t\tencode(value[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (constructor === Map) {\n\t\t\t\t\t\tif (this.mapsAsObjects ? this.useTag259ForMaps !== false : this.useTag259ForMaps) {\n\t\t\t\t\t\t\t// use Tag 259 (https://github.com/shanewholloway/js-cbor-codec/blob/master/docs/CBOR-259-spec--explicit-maps.md) for maps if the user wants it that way\n\t\t\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\t\t\ttarget[position++] = 1\n\t\t\t\t\t\t\ttarget[position++] = 3\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlength = value.size\n\t\t\t\t\t\tif (length < 0x18) {\n\t\t\t\t\t\t\ttarget[position++] = 0xa0 | length\n\t\t\t\t\t\t} else if (length < 0x100) {\n\t\t\t\t\t\t\ttarget[position++] = 0xb8\n\t\t\t\t\t\t\ttarget[position++] = length\n\t\t\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\t\t\ttarget[position++] = 0xb9\n\t\t\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[position++] = 0xba\n\t\t\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (encoder.keyMap) { \n\t\t\t\t\t\t\tfor (let [ key, entryValue ] of value) {\n\t\t\t\t\t\t\t\tencode(encoder.encodeKey(key))\n\t\t\t\t\t\t\t\tencode(entryValue)\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t} else { \n\t\t\t\t\t\t\tfor (let [ key, entryValue ] of value) {\n\t\t\t\t\t\t\t\tencode(key) \n\t\t\t\t\t\t\t\tencode(entryValue)\n\t\t\t\t\t\t\t} \t\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let i = 0, l = extensions.length; i < l; i++) {\n\t\t\t\t\t\t\tlet extensionClass = extensionClasses[i]\n\t\t\t\t\t\t\tif (value instanceof extensionClass) {\n\t\t\t\t\t\t\t\tlet extension = extensions[i]\n\t\t\t\t\t\t\t\tlet tag = extension.tag\n\t\t\t\t\t\t\t\tif (tag == undefined)\n\t\t\t\t\t\t\t\t\ttag = extension.getTag && extension.getTag.call(this, value)\n\t\t\t\t\t\t\t\tif (tag < 0x18) {\n\t\t\t\t\t\t\t\t\ttarget[position++] = 0xc0 | tag\n\t\t\t\t\t\t\t\t} else if (tag < 0x100) {\n\t\t\t\t\t\t\t\t\ttarget[position++] = 0xd8\n\t\t\t\t\t\t\t\t\ttarget[position++] = tag\n\t\t\t\t\t\t\t\t} else if (tag < 0x10000) {\n\t\t\t\t\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\t\t\t\t\ttarget[position++] = tag >> 8\n\t\t\t\t\t\t\t\t\ttarget[position++] = tag & 0xff\n\t\t\t\t\t\t\t\t} else if (tag > -1) {\n\t\t\t\t\t\t\t\t\ttarget[position++] = 0xda\n\t\t\t\t\t\t\t\t\ttargetView.setUint32(position, tag)\n\t\t\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\t\t} // else undefined, don't write tag\n\t\t\t\t\t\t\t\textension.encode.call(this, value, encode, makeRoom)\n\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (value[Symbol.iterator]) {\n\t\t\t\t\t\t\tif (throwOnIterable) {\n\t\t\t\t\t\t\t\tlet error = new Error('Iterable should be serialized as iterator')\n\t\t\t\t\t\t\t\terror.iteratorNotHandled = true;\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget[position++] = 0x9f // indefinite length array\n\t\t\t\t\t\t\tfor (let entry of value) {\n\t\t\t\t\t\t\t\tencode(entry)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget[position++] = 0xff // stop-code\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (value[Symbol.asyncIterator] || isBlob(value)) {\n\t\t\t\t\t\t\tlet error = new Error('Iterable/blob should be serialized as iterator')\n\t\t\t\t\t\t\terror.iteratorNotHandled = true;\n\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.useToJSON && value.toJSON) {\n\t\t\t\t\t\t\tconst json = value.toJSON()\n\t\t\t\t\t\t\t// if for some reason value.toJSON returns itself it'll loop forever\n\t\t\t\t\t\t\tif (json !== value)\n\t\t\t\t\t\t\t\treturn encode(json)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// no extension found, write as a plain object\n\t\t\t\t\t\twriteObject(value)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'boolean') {\n\t\t\t\ttarget[position++] = value ? 0xf5 : 0xf4\n\t\t\t} else if (type === 'bigint') {\n\t\t\t\tif (value < (BigInt(1)<<BigInt(64)) && value >= 0) {\n\t\t\t\t\t// use an unsigned int as long as it fits\n\t\t\t\t\ttarget[position++] = 0x1b\n\t\t\t\t\ttargetView.setBigUint64(position, value)\n\t\t\t\t} else if (value > -(BigInt(1)<<BigInt(64)) && value < 0) {\n\t\t\t\t\t// if we can fit an unsigned int, use that\n\t\t\t\t\ttarget[position++] = 0x3b\n\t\t\t\t\ttargetView.setBigUint64(position, -value - BigInt(1))\n\t\t\t\t} else {\n\t\t\t\t\t// overflow\n\t\t\t\t\tif (this.largeBigIntToFloat) {\n\t\t\t\t\t\ttarget[position++] = 0xfb\n\t\t\t\t\t\ttargetView.setFloat64(position, Number(value))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (value >= BigInt(0))\n\t\t\t\t\t\t\ttarget[position++] = 0xc2 // tag 2\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ttarget[position++] = 0xc3 // tag 2\n\t\t\t\t\t\t\tvalue = BigInt(-1) - value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet bytes = [];\n\t\t\t\t\t\twhile (value) {\n\t\t\t\t\t\t\tbytes.push(Number(value & BigInt(0xff)));\n\t\t\t\t\t\t\tvalue >>= BigInt(8);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twriteBuffer(new Uint8Array(bytes.reverse()), makeRoom);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tposition += 8\n\t\t\t} else if (type === 'undefined') {\n\t\t\t\ttarget[position++] = 0xf7\n\t\t\t} else {\n\t\t\t\tthrow new Error('Unknown type: ' + type)\n\t\t\t}\n\t\t}\n\n\t\tconst writeObject = this.useRecords === false ? this.variableMapSize ? (object) => {\n\t\t\t// this method is slightly slower, but generates \"preferred serialization\" (optimally small for smaller objects)\n\t\t\tlet keys = Object.keys(object)\n\t\t\tlet vals = Object.values(object)\n\t\t\tlet length = keys.length\n\t\t\tif (length < 0x18) {\n\t\t\t\ttarget[position++] = 0xa0 | length\n\t\t\t} else if (length < 0x100) {\n\t\t\t\ttarget[position++] = 0xb8\n\t\t\t\ttarget[position++] = length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xb9\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xba\n\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\tposition += 4\n\t\t\t}\n\t\t\tlet key\n\t\t\tif (encoder.keyMap) { \n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tencode(encoder.encodeKey(keys[i]))\n\t\t\t\t\tencode(vals[i])\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tencode(keys[i])\n\t\t\t\t\tencode(vals[i])\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\t\t(object) => {\n\t\t\ttarget[position++] = 0xb9 // always use map 16, so we can preallocate and set the length afterwards\n\t\t\tlet objectOffset = position - start\n\t\t\tposition += 2\n\t\t\tlet size = 0\n\t\t\tif (encoder.keyMap) {\n\t\t\t\tfor (let key in object) if (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\tencode(encoder.encodeKey(key))\n\t\t\t\t\tencode(object[key])\n\t\t\t\t\tsize++\n\t\t\t\t}\n\t\t\t} else { \n\t\t\t\tfor (let key in object) if (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\t\tencode(key)\n\t\t\t\t\t\tencode(object[key])\n\t\t\t\t\tsize++\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget[objectOffset++ + start] = size >> 8\n\t\t\ttarget[objectOffset + start] = size & 0xff\n\t\t} :\n\t\t(object, skipValues) => {\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null))\n\t\t\tlet newTransitions = 0\n\t\t\tlet length = 0\n\t\t\tlet parentRecordId\n\t\t\tlet keys\n\t\t\tif (this.keyMap) {\n\t\t\t\tkeys = Object.keys(object).map(k => this.encodeKey(k))\n\t\t\t\tlength = keys.length\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tlet key = keys[i]\n\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\tnewTransitions++\n\t\t\t\t\t}\n\t\t\t\t\ttransition = nextTransition\n\t\t\t\t}\t\t\t\t\n\t\t\t} else {\n\t\t\t\tfor (let key in object) if (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\tif (transition[RECORD_SYMBOL] & 0x100000) {// this indicates it is a brancheable/extendable terminal node, so we will use this record id and extend it\n\t\t\t\t\t\t\tparentRecordId = transition[RECORD_SYMBOL] & 0xffff\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\tnewTransitions++\n\t\t\t\t\t}\n\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\tlength++\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet recordId = transition[RECORD_SYMBOL]\n\t\t\tif (recordId !== undefined) {\n\t\t\t\trecordId &= 0xffff\n\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\ttarget[position++] = (recordId >> 8) | 0xe0\n\t\t\t\ttarget[position++] = recordId & 0xff\n\t\t\t} else {\n\t\t\t\tif (!keys)\n\t\t\t\t\tkeys = transition.__keys__ || (transition.__keys__ = Object.keys(object))\n\t\t\t\tif (parentRecordId === undefined) {\n\t\t\t\t\trecordId = structures.nextId++\n\t\t\t\t\tif (!recordId) {\n\t\t\t\t\t\trecordId = 0\n\t\t\t\t\t\tstructures.nextId = 1\n\t\t\t\t\t}\n\t\t\t\t\tif (recordId >= MAX_STRUCTURES) {// cycle back around\n\t\t\t\t\t\tstructures.nextId = (recordId = maxSharedStructures) + 1\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trecordId = parentRecordId\n\t\t\t\t}\n\t\t\t\tstructures[recordId] = keys\n\t\t\t\tif (recordId < maxSharedStructures) {\n\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\ttarget[position++] = (recordId >> 8) | 0xe0\n\t\t\t\t\ttarget[position++] = recordId & 0xff\n\t\t\t\t\ttransition = structures.transitions\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\tif (transition[RECORD_SYMBOL] === undefined || (transition[RECORD_SYMBOL] & 0x100000))\n\t\t\t\t\t\t\ttransition[RECORD_SYMBOL] = recordId\n\t\t\t\t\t\ttransition = transition[keys[i]]\n\t\t\t\t\t}\n\t\t\t\t\ttransition[RECORD_SYMBOL] = recordId | 0x100000 // indicates it is a extendable terminal\n\t\t\t\t\thasSharedUpdate = true\n\t\t\t\t} else {\n\t\t\t\t\ttransition[RECORD_SYMBOL] = recordId\n\t\t\t\t\ttargetView.setUint32(position, 0xd9dfff00) // tag two byte, then record definition id\n\t\t\t\t\tposition += 3\n\t\t\t\t\tif (newTransitions)\n\t\t\t\t\t\ttransitionsCount += serializationsSinceTransitionRebuild * newTransitions\n\t\t\t\t\t// record the removal of the id, we can maintain our shared structure\n\t\t\t\t\tif (recordIdsToRemove.length >= MAX_STRUCTURES - maxSharedStructures)\n\t\t\t\t\t\trecordIdsToRemove.shift()[RECORD_SYMBOL] = undefined // we are cycling back through, and have to remove old ones\n\t\t\t\t\trecordIdsToRemove.push(transition)\n\t\t\t\t\twriteArrayHeader(length + 2)\n\t\t\t\t\tencode(0xe000 + recordId)\n\t\t\t\t\tencode(keys)\n\t\t\t\t\tif (skipValues) return; // special exit for iterator\n\t\t\t\t\tfor (let key in object)\n\t\t\t\t\t\tif (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key))\n\t\t\t\t\t\t\tencode(object[key])\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (length < 0x18) { // write the array header\n\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t} else {\n\t\t\t\twriteArrayHeader(length)\n\t\t\t}\n\t\t\tif (skipValues) return; // special exit for iterator\n\t\t\tfor (let key in object)\n\t\t\t\tif (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key))\n\t\t\t\t\tencode(object[key])\n\t\t}\n\t\tconst makeRoom = (end) => {\n\t\t\tlet newSize\n\t\t\tif (end > 0x1000000) {\n\t\t\t\t// special handling for really large buffers\n\t\t\t\tif ((end - start) > MAX_BUFFER_SIZE)\n\t\t\t\t\tthrow new Error('Encoded buffer would be larger than maximum buffer size')\n\t\t\t\tnewSize = Math.min(MAX_BUFFER_SIZE,\n\t\t\t\t\tMath.round(Math.max((end - start) * (end > 0x4000000 ? 1.25 : 2), 0x400000) / 0x1000) * 0x1000)\n\t\t\t} else // faster handling for smaller buffers\n\t\t\t\tnewSize = ((Math.max((end - start) << 2, target.length - 1) >> 12) + 1) << 12\n\t\t\tlet newBuffer = new ByteArrayAllocate(newSize)\n\t\t\ttargetView = new DataView(newBuffer.buffer, 0, newSize)\n\t\t\tif (target.copy)\n\t\t\t\ttarget.copy(newBuffer, 0, start, end)\n\t\t\telse\n\t\t\t\tnewBuffer.set(target.slice(start, end))\n\t\t\tposition -= start\n\t\t\tstart = 0\n\t\t\tsafeEnd = newBuffer.length - 10\n\t\t\treturn target = newBuffer\n\t\t}\n\t\tlet chunkThreshold = 100;\n\t\tlet continuedChunkThreshold = 1000;\n\t\tthis.encodeAsIterable = function(value, options) {\n\t\t\treturn startEncoding(value, options, encodeObjectAsIterable);\n\t\t}\n\t\tthis.encodeAsAsyncIterable = function(value, options) {\n\t\t\treturn startEncoding(value, options, encodeObjectAsAsyncIterable);\n\t\t}\n\n\t\tfunction* encodeObjectAsIterable(object, iterateProperties, finalIterable) {\n\t\t\tlet constructor = object.constructor;\n\t\t\tif (constructor === Object) {\n\t\t\t\tlet useRecords = encoder.useRecords !== false;\n\t\t\t\tif (useRecords)\n\t\t\t\t\twriteObject(object, true); // write the record identifier\n\t\t\t\telse\n\t\t\t\t\twriteEntityLength(Object.keys(object).length, 0xa0);\n\t\t\t\tfor (let key in object) {\n\t\t\t\t\tlet value = object[key];\n\t\t\t\t\tif (!useRecords) encode(key);\n\t\t\t\t\tif (value && typeof value === 'object') {\n\t\t\t\t\t\tif (iterateProperties[key])\n\t\t\t\t\t\t\tyield* encodeObjectAsIterable(value, iterateProperties[key]);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tyield* tryEncode(value, iterateProperties, key);\n\t\t\t\t\t} else encode(value);\n\t\t\t\t}\n\t\t\t} else if (constructor === Array) {\n\t\t\t\tlet length = object.length;\n\t\t\t\twriteArrayHeader(length);\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tlet value = object[i];\n\t\t\t\t\tif (value && (typeof value === 'object' || position - start > chunkThreshold)) {\n\t\t\t\t\t\tif (iterateProperties.element)\n\t\t\t\t\t\t\tyield* encodeObjectAsIterable(value, iterateProperties.element);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tyield* tryEncode(value, iterateProperties, 'element');\n\t\t\t\t\t} else encode(value);\n\t\t\t\t}\n\t\t\t} else if (object[Symbol.iterator] && !object.buffer) { // iterator, but exclude typed arrays\n\t\t\t\ttarget[position++] = 0x9f; // start indefinite array\n\t\t\t\tfor (let value of object) {\n\t\t\t\t\tif (value && (typeof value === 'object' || position - start > chunkThreshold)) {\n\t\t\t\t\t\tif (iterateProperties.element)\n\t\t\t\t\t\t\tyield* encodeObjectAsIterable(value, iterateProperties.element);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tyield* tryEncode(value, iterateProperties, 'element');\n\t\t\t\t\t} else encode(value);\n\t\t\t\t}\n\t\t\t\ttarget[position++] = 0xff; // stop byte\n\t\t\t} else if (isBlob(object)){\n\t\t\t\twriteEntityLength(object.size, 0x40); // encode as binary data\n\t\t\t\tyield target.subarray(start, position);\n\t\t\t\tyield object; // directly return blobs, they have to be encoded asynchronously\n\t\t\t\trestartEncoding();\n\t\t\t} else if (object[Symbol.asyncIterator]) {\n\t\t\t\ttarget[position++] = 0x9f; // start indefinite array\n\t\t\t\tyield target.subarray(start, position);\n\t\t\t\tyield object; // directly return async iterators, they have to be encoded asynchronously\n\t\t\t\trestartEncoding();\n\t\t\t\ttarget[position++] = 0xff; // stop byte\n\t\t\t} else {\n\t\t\t\tencode(object);\n\t\t\t}\n\t\t\tif (finalIterable && position > start) yield target.subarray(start, position);\n\t\t\telse if (position - start > chunkThreshold) {\n\t\t\t\tyield target.subarray(start, position);\n\t\t\t\trestartEncoding();\n\t\t\t}\n\t\t}\n\t\tfunction* tryEncode(value, iterateProperties, key) {\n\t\t\tlet restart = position - start;\n\t\t\ttry {\n\t\t\t\tencode(value);\n\t\t\t\tif (position - start > chunkThreshold) {\n\t\t\t\t\tyield target.subarray(start, position);\n\t\t\t\t\trestartEncoding();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (error.iteratorNotHandled) {\n\t\t\t\t\titerateProperties[key] = {};\n\t\t\t\t\tposition = start + restart; // restart our position so we don't have partial data from last encode\n\t\t\t\t\tyield* encodeObjectAsIterable.call(this, value, iterateProperties[key]);\n\t\t\t\t} else throw error;\n\t\t\t}\n\t\t}\n\t\tfunction restartEncoding() {\n\t\t\tchunkThreshold = continuedChunkThreshold;\n\t\t\tencoder.encode(null, THROW_ON_ITERABLE); // restart encoding\n\t\t}\n\t\tfunction startEncoding(value, options, encodeIterable) {\n\t\t\tif (options && options.chunkThreshold) // explicitly specified chunk sizes\n\t\t\t\tchunkThreshold = continuedChunkThreshold = options.chunkThreshold;\n\t\t\telse // we start with a smaller threshold to get initial bytes sent quickly\n\t\t\t\tchunkThreshold = 100;\n\t\t\tif (value && typeof value === 'object') {\n\t\t\t\tencoder.encode(null, THROW_ON_ITERABLE); // start encoding\n\t\t\t\treturn encodeIterable(value, encoder.iterateProperties || (encoder.iterateProperties = {}), true);\n\t\t\t}\n\t\t\treturn [encoder.encode(value)];\n\t\t}\n\n\t\tasync function* encodeObjectAsAsyncIterable(value, iterateProperties) {\n\t\t\tfor (let encodedValue of encodeObjectAsIterable(value, iterateProperties, true)) {\n\t\t\t\tlet constructor = encodedValue.constructor;\n\t\t\t\tif (constructor === ByteArray || constructor === Uint8Array)\n\t\t\t\t\tyield encodedValue;\n\t\t\t\telse if (isBlob(encodedValue)) {\n\t\t\t\t\tlet reader = encodedValue.stream().getReader();\n\t\t\t\t\tlet next;\n\t\t\t\t\twhile (!(next = await reader.read()).done) {\n\t\t\t\t\t\tyield next.value;\n\t\t\t\t\t}\n\t\t\t\t} else if (encodedValue[Symbol.asyncIterator]) {\n\t\t\t\t\tfor await (let asyncValue of encodedValue) {\n\t\t\t\t\t\trestartEncoding();\n\t\t\t\t\t\tif (asyncValue)\n\t\t\t\t\t\t\tyield* encodeObjectAsAsyncIterable(asyncValue, iterateProperties.async || (iterateProperties.async = {}));\n\t\t\t\t\t\telse yield encoder.encode(asyncValue);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tyield encodedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tuseBuffer(buffer) {\n\t\t// this means we are finished using our own buffer and we can write over it safely\n\t\ttarget = buffer\n\t\ttargetView = new DataView(target.buffer, target.byteOffset, target.byteLength)\n\t\tposition = 0\n\t}\n\tclearSharedData() {\n\t\tif (this.structures)\n\t\t\tthis.structures = []\n\t\tif (this.sharedValues)\n\t\t\tthis.sharedValues = undefined\n\t}\n\tupdateSharedData() {\n\t\tlet lastVersion = this.sharedVersion || 0\n\t\tthis.sharedVersion = lastVersion + 1\n\t\tlet structuresCopy = this.structures.slice(0)\n\t\tlet sharedData = new SharedData(structuresCopy, this.sharedValues, this.sharedVersion)\n\t\tlet saveResults = this.saveShared(sharedData,\n\t\t\t\texistingShared => (existingShared && existingShared.version || 0) == lastVersion)\n\t\tif (saveResults === false) {\n\t\t\t// get updated structures and try again if the update failed\n\t\t\tsharedData = this.getShared() || {}\n\t\t\tthis.structures = sharedData.structures || []\n\t\t\tthis.sharedValues = sharedData.packedValues\n\t\t\tthis.sharedVersion = sharedData.version\n\t\t\tthis.structures.nextId = this.structures.length\n\t\t} else {\n\t\t\t// restore structures\n\t\t\tstructuresCopy.forEach((structure, i) => this.structures[i] = structure)\n\t\t}\n\t\t// saveShared may fail to write and reload, or may have reloaded to check compatibility and overwrite saved data, either way load the correct shared data\n\t\treturn saveResults\n\t}\n}\nfunction writeEntityLength(length, majorValue) {\n\tif (length < 0x18)\n\t\ttarget[position++] = majorValue | length\n\telse if (length < 0x100) {\n\t\ttarget[position++] = majorValue | 0x18\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\ttarget[position++] = majorValue | 0x19\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\ttarget[position++] = majorValue | 0x1a\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n\n}\nclass SharedData {\n\tconstructor(structures, values, version) {\n\t\tthis.structures = structures\n\t\tthis.packedValues = values\n\t\tthis.version = version\n\t}\n}\n\nfunction writeArrayHeader(length) {\n\tif (length < 0x18)\n\t\ttarget[position++] = 0x80 | length\n\telse if (length < 0x100) {\n\t\ttarget[position++] = 0x98\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\ttarget[position++] = 0x99\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\ttarget[position++] = 0x9a\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n}\n\nconst BlobConstructor = typeof Blob === 'undefined' ? function(){} : Blob;\nfunction isBlob(object) {\n\tif (object instanceof BlobConstructor)\n\t\treturn true;\n\tlet tag = object[Symbol.toStringTag];\n\treturn tag === 'Blob' || tag === 'File';\n}\nfunction findRepetitiveStrings(value, packedValues) {\n\tswitch(typeof value) {\n\t\tcase 'string':\n\t\t\tif (value.length > 3) {\n\t\t\t\tif (packedValues.objectMap[value] > -1 || packedValues.values.length >= packedValues.maxValues)\n\t\t\t\t\treturn\n\t\t\t\tlet packedStatus = packedValues.get(value)\n\t\t\t\tif (packedStatus) {\n\t\t\t\t\tif (++packedStatus.count == 2) {\n\t\t\t\t\t\tpackedValues.values.push(value)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpackedValues.set(value, {\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t})\n\t\t\t\t\tif (packedValues.samplingPackedValues) {\n\t\t\t\t\t\tlet status = packedValues.samplingPackedValues.get(value)\n\t\t\t\t\t\tif (status)\n\t\t\t\t\t\t\tstatus.count++\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tpackedValues.samplingPackedValues.set(value, {\n\t\t\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'object':\n\t\t\tif (value) {\n\t\t\t\tif (value instanceof Array) {\n\t\t\t\t\tfor (let i = 0, l = value.length; i < l; i++) {\n\t\t\t\t\t\tfindRepetitiveStrings(value[i], packedValues)\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tlet includeKeys = !packedValues.encoder.useRecords\n\t\t\t\t\tfor (var key in value) {\n\t\t\t\t\t\tif (value.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tif (includeKeys)\n\t\t\t\t\t\t\t\tfindRepetitiveStrings(key, packedValues)\n\t\t\t\t\t\t\tfindRepetitiveStrings(value[key], packedValues)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'function': console.log(value)\n\t}\n}\nconst isLittleEndianMachine = new Uint8Array(new Uint16Array([1]).buffer)[0] == 1\nextensionClasses = [ Date, Set, Error, RegExp, Tag, ArrayBuffer,\n\tUint8Array, Uint8ClampedArray, Uint16Array, Uint32Array,\n\ttypeof BigUint64Array == 'undefined' ? function() {} : BigUint64Array, Int8Array, Int16Array, Int32Array,\n\ttypeof BigInt64Array == 'undefined' ? function() {} : BigInt64Array,\n\tFloat32Array, Float64Array, SharedData ]\n\n//Object.getPrototypeOf(Uint8Array.prototype).constructor /*TypedArray*/\nextensions = [{ // Date\n\ttag: 1,\n\tencode(date, encode) {\n\t\tlet seconds = date.getTime() / 1000\n\t\tif ((this.useTimestamp32 || date.getMilliseconds() === 0) && seconds >= 0 && seconds < 0x100000000) {\n\t\t\t// Timestamp 32\n\t\t\ttarget[position++] = 0x1a\n\t\t\ttargetView.setUint32(position, seconds)\n\t\t\tposition += 4\n\t\t} else {\n\t\t\t// Timestamp float64\n\t\t\ttarget[position++] = 0xfb\n\t\t\ttargetView.setFloat64(position, seconds)\n\t\t\tposition += 8\n\t\t}\n\t}\n}, { // Set\n\ttag: 258, // https://github.com/input-output-hk/cbor-sets-spec/blob/master/CBOR_SETS.md\n\tencode(set, encode) {\n\t\tlet array = Array.from(set)\n\t\tencode(array)\n\t}\n}, { // Error\n\ttag: 27, // http://cbor.schmorp.de/generic-object\n\tencode(error, encode) {\n\t\tencode([ error.name, error.message ])\n\t}\n}, { // RegExp\n\ttag: 27, // http://cbor.schmorp.de/generic-object\n\tencode(regex, encode) {\n\t\tencode([ 'RegExp', regex.source, regex.flags ])\n\t}\n}, { // Tag\n\tgetTag(tag) {\n\t\treturn tag.tag\n\t},\n\tencode(tag, encode) {\n\t\tencode(tag.value)\n\t}\n}, { // ArrayBuffer\n\tencode(arrayBuffer, encode, makeRoom) {\n\t\twriteBuffer(arrayBuffer, makeRoom)\n\t}\n}, { // Uint8Array\n\tgetTag(typedArray) {\n\t\tif (typedArray.constructor === Uint8Array) {\n\t\t\tif (this.tagUint8Array || hasNodeBuffer && this.tagUint8Array !== false)\n\t\t\t\treturn 64;\n\t\t} // else no tag\n\t},\n\tencode(typedArray, encode, makeRoom) {\n\t\twriteBuffer(typedArray, makeRoom)\n\t}\n},\n\ttypedArrayEncoder(68, 1),\n\ttypedArrayEncoder(69, 2),\n\ttypedArrayEncoder(70, 4),\n\ttypedArrayEncoder(71, 8),\n\ttypedArrayEncoder(72, 1),\n\ttypedArrayEncoder(77, 2),\n\ttypedArrayEncoder(78, 4),\n\ttypedArrayEncoder(79, 8),\n\ttypedArrayEncoder(85, 4),\n\ttypedArrayEncoder(86, 8),\n{\n\tencode(sharedData, encode) { // write SharedData\n\t\tlet packedValues = sharedData.packedValues || []\n\t\tlet sharedStructures = sharedData.structures || []\n\t\tif (packedValues.values.length > 0) {\n\t\t\ttarget[position++] = 0xd8 // one-byte tag\n\t\t\ttarget[position++] = 51 // tag 51 for packed shared structures https://www.potaroo.net/ietf/ids/draft-ietf-cbor-packed-03.txt\n\t\t\twriteArrayHeader(4)\n\t\t\tlet valuesArray = packedValues.values\n\t\t\tencode(valuesArray)\n\t\t\twriteArrayHeader(0) // prefixes\n\t\t\twriteArrayHeader(0) // suffixes\n\t\t\tpackedObjectMap = Object.create(sharedPackedObjectMap || null)\n\t\t\tfor (let i = 0, l = valuesArray.length; i < l; i++) {\n\t\t\t\tpackedObjectMap[valuesArray[i]] = i\n\t\t\t}\n\t\t}\n\t\tif (sharedStructures) {\n\t\t\ttargetView.setUint32(position, 0xd9dffe00)\n\t\t\tposition += 3\n\t\t\tlet definitions = sharedStructures.slice(0)\n\t\t\tdefinitions.unshift(0xe000)\n\t\t\tdefinitions.push(new Tag(sharedData.version, 0x53687264))\n\t\t\tencode(definitions)\n\t\t} else\n\t\t\tencode(new Tag(sharedData.version, 0x53687264))\n\t\t}\n\t}]\nfunction typedArrayEncoder(tag, size) {\n\tif (!isLittleEndianMachine && size > 1)\n\t\ttag -= 4 // the big endian equivalents are 4 less\n\treturn {\n\t\ttag: tag,\n\t\tencode: function writeExtBuffer(typedArray, encode) {\n\t\t\tlet length = typedArray.byteLength\n\t\t\tlet offset = typedArray.byteOffset || 0\n\t\t\tlet buffer = typedArray.buffer || typedArray\n\t\t\tencode(hasNodeBuffer ? Buffer.from(buffer, offset, length) :\n\t\t\t\tnew Uint8Array(buffer, offset, length))\n\t\t}\n\t}\n}\nfunction writeBuffer(buffer, makeRoom) {\n\tlet length = buffer.byteLength\n\tif (length < 0x18) {\n\t\ttarget[position++] = 0x40 + length\n\t} else if (length < 0x100) {\n\t\ttarget[position++] = 0x58\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\ttarget[position++] = 0x59\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\ttarget[position++] = 0x5a\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n\tif (position + length >= target.length) {\n\t\tmakeRoom(position + length)\n\t}\n\t// if it is already a typed array (has an ArrayBuffer), use that, but if it is an ArrayBuffer itself,\n\t// must wrap it to set it.\n\ttarget.set(buffer.buffer ? buffer : new Uint8Array(buffer), position)\n\tposition += length\n}\n\nfunction insertIds(serialized, idsToInsert) {\n\t// insert the ids that need to be referenced for structured clones\n\tlet nextId\n\tlet distanceToMove = idsToInsert.length * 2\n\tlet lastEnd = serialized.length - distanceToMove\n\tidsToInsert.sort((a, b) => a.offset > b.offset ? 1 : -1)\n\tfor (let id = 0; id < idsToInsert.length; id++) {\n\t\tlet referee = idsToInsert[id]\n\t\treferee.id = id\n\t\tfor (let position of referee.references) {\n\t\t\tserialized[position++] = id >> 8\n\t\t\tserialized[position] = id & 0xff\n\t\t}\n\t}\n\twhile (nextId = idsToInsert.pop()) {\n\t\tlet offset = nextId.offset\n\t\tserialized.copyWithin(offset + distanceToMove, offset, lastEnd)\n\t\tdistanceToMove -= 2\n\t\tlet position = offset + distanceToMove\n\t\tserialized[position++] = 0xd8\n\t\tserialized[position++] = 28 // http://cbor.schmorp.de/value-sharing\n\t\tlastEnd = offset\n\t}\n\treturn serialized\n}\nfunction writeBundles(start, encode) {\n\ttargetView.setUint32(bundledStrings.position + start, position - bundledStrings.position - start + 1) // the offset to bundle\n\tlet writeStrings = bundledStrings\n\tbundledStrings = null\n\tencode(writeStrings[0])\n\tencode(writeStrings[1])\n}\n\nexport function addExtension(extension) {\n\tif (extension.Class) {\n\t\tif (!extension.encode)\n\t\t\tthrow new Error('Extension has no encode function')\n\t\textensionClasses.unshift(extension.Class)\n\t\textensions.unshift(extension)\n\t}\n\tdecodeAddExtension(extension)\n}\nlet defaultEncoder = new Encoder({ useRecords: false })\nexport const encode = defaultEncoder.encode\nexport const encodeAsIterable = defaultEncoder.encodeAsIterable\nexport const encodeAsAsyncIterable = defaultEncoder.encodeAsAsyncIterable\nexport { FLOAT32_OPTIONS } from './decode.js'\nimport { FLOAT32_OPTIONS } from './decode.js'\nexport const { NEVER, ALWAYS, DECIMAL_ROUND, DECIMAL_FIT } = FLOAT32_OPTIONS\nexport const REUSE_BUFFER_MODE = 512\nexport const RESET_BUFFER_MODE = 1024\nexport const THROW_ON_ITERABLE = 2048\n\n\n","import { SignTransactionsParams } from \"./sign.transactions.params.js\";\n/**\n * Represents a request message object.\n *\n * @class\n * @constructor\n * @param {string} id - The unique identifier of the request message.\n * @param {Reference} reference - The reference object associated with the request message.\n */\nexport class RequestMessage {\n    id;\n    reference;\n    params;\n    constructor(id, reference) {\n        this.id = id;\n        this.reference = reference;\n    }\n}\nexport class RequestMessageBuilder {\n    request;\n    constructor(id, reference) {\n        this.request = new RequestMessage(id, reference);\n    }\n    addParams(params) {\n        this.request.params = params;\n        return this;\n    }\n    get() {\n        return this.request;\n    }\n}\n//# sourceMappingURL=request.message.js.map","export class SignTransactionsParams {\n    providerId;\n    txns;\n}\nexport class SignTransactionsParamsBuilder {\n    params;\n    constructor() {\n        this.params = new SignTransactionsParams();\n    }\n    addProviderId(providerId) {\n        this.params.providerId = providerId;\n        return this;\n    }\n    addTxns(txns) {\n        this.params.txns = txns;\n        return this;\n    }\n    get() {\n        return this.params;\n    }\n}\n//# sourceMappingURL=sign.transactions.params.js.map","import { encode } from 'cbor-x';\nimport { RequestMessageBuilder } from \"./models/request.message.js\";\nimport { SignTransactionsParamsBuilder } from \"./models/sign.transactions.params.js\";\nimport { SignTransactionsResultBuilder } from \"./models/sign.transactions.result.js\";\nimport { ResponseMessageBuilder } from \"./models/response.message.js\";\nconst LARGE_MESSAGE_SIZE = 255_000;\nconst LARGE_MESSAGE_ERROR = `Message too large, maximum is ${LARGE_MESSAGE_SIZE} in length`;\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';\nexport const INVALID_BASE64URL_INPUT = 'Invalid base64url input';\n/**\n * Bytes to Base64URL\n * @param {Uint8Array| ArrayBuffer} arr Bytes to convert to URL safe Base64\n */\nexport function toBase64URL(arr) {\n    const bytes = arr instanceof Uint8Array ? arr : new Uint8Array(arr);\n    const len = bytes.length;\n    let base64 = '';\n    for (let i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1);\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2);\n    }\n    return base64;\n}\n/**\n * Base64URL to Bytes\n * @param {string} base64url URL safe Base64 string\n */\nexport function fromBase64Url(base64url) {\n    if (typeof base64url !== 'string') {\n        throw new Error(INVALID_BASE64URL_INPUT);\n    }\n    return new Uint8Array(\n    // TODO: Cross-platform solution since atob is deprecated in Node\n    atob(base64url.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, ''))\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n}\nexport function toSignTransactionsParamsRequestMessage(messageId, providerId, txns) {\n    const signParams = new SignTransactionsParamsBuilder()\n        .addProviderId(providerId)\n        .addTxns(txns)\n        .get();\n    const request = new RequestMessageBuilder(messageId, \"arc0027:sign_transactions:request\")\n        .addParams(signParams)\n        .get();\n    const encoded = encode(request);\n    if (encoded.length > LARGE_MESSAGE_SIZE) {\n        throw new Error(LARGE_MESSAGE_ERROR);\n    }\n    return toBase64URL(encoded);\n}\nexport function toSignTransactionsResultResponseMessage(messageId, providerId, requestId, stxns) {\n    const signResult = new SignTransactionsResultBuilder()\n        .addProviderId(providerId)\n        .addSignedTxns(stxns)\n        .get();\n    const request = new ResponseMessageBuilder(messageId, requestId, \"arc0027:sign_message:response\")\n        .addResult(signResult)\n        .get();\n    const encoded = encode(request);\n    if (encoded.length > LARGE_MESSAGE_SIZE) {\n        throw new Error(LARGE_MESSAGE_ERROR);\n    }\n    return toBase64URL(encoded);\n}\n//# sourceMappingURL=api.js.map","import { SignalClient } from '@algorandfoundation/liquid-client';\nimport { decode } from 'cbor-x';\nimport { fromBase64Url, toBase64URL, toSignTransactionsParamsRequestMessage } from '@algorandfoundation/provider';\nimport { encodeUnsignedTransaction } from 'algosdk';\nexport class LiquidAuthClient {\n    client;\n    options;\n    RTC_CONFIGURATION;\n    dataChannel;\n    linkedBool = false;\n    modalElement;\n    requestId;\n    altRequestId;\n    eventListeners = [];\n    constructor(options) {\n        this.options = options;\n        this.client = new SignalClient(window.origin);\n        this.RTC_CONFIGURATION = {\n            iceServers: [\n                {\n                    urls: [\n                        'stun:stun.l.google.com:19302',\n                        'stun:stun1.l.google.com:19302',\n                        'stun:stun2.l.google.com:19302',\n                    ],\n                },\n                {\n                    urls: [\n                        \"turn:global.turn.nodely.network:80?transport=tcp\",\n                        \"turns:global.turn.nodely.network:443?transport=tcp\",\n                        \"turn:eu.turn.nodely.io:80?transport=tcp\",\n                        \"turns:eu.turn.nodely.io:443?transport=tcp\",\n                        \"turn:us.turn.nodely.io:80?transport=tcp\",\n                        \"turns:us.turn.nodely.io:443?transport=tcp\",\n                    ],\n                    username: this.options.RTC_config_username,\n                    credential: this.options.RTC_config_credential,\n                },\n                {\n                    urls: [\n                        \"turn:global.relay.metered.ca:80\",\n                        \"turn:global.relay.metered.ca:80?transport=tcp\",\n                        \"turn:global.relay.metered.ca:443\",\n                        \"turns:global.relay.metered.ca:443?transport=tcp\"\n                    ],\n                    username: this.options.RTC_config_username,\n                    credential: this.options.RTC_config_credential,\n                },\n            ],\n            iceCandidatePoolSize: 10,\n        };\n    }\n    async connect() {\n        const requestId = SignalClient.generateRequestId();\n        const altRequestId = requestId;\n        this.showModal(requestId, altRequestId);\n        await this.waitForLinkedBool();\n    }\n    async disconnect() {\n        this.linkedBool = false;\n        this.client.close();\n        const successfulLogout = await this.logOutSession();\n        this.cleanUp();\n        if (!successfulLogout) {\n            throw new Error('Failed to disconnect');\n        }\n    }\n    setDataChannel(dc) {\n        this.dataChannel = dc;\n    }\n    async onLinkMessage(message) {\n        if (message.wallet) {\n            const data = await this.checkSession();\n            if (data?.user?.wallet === message.wallet) {\n                console.log('Session data:', data);\n                console.log('Wallet linked:', message.wallet);\n                this.linkedBool = true;\n                return;\n            }\n            throw new Error('Remote wallet address and /auth/session wallet address do not match');\n        }\n        throw new Error('Wallet field not part of link message');\n    }\n    async checkSession() {\n        try {\n            const response = await fetch(`${window.origin}/auth/session`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            if (response.ok) {\n                const data = await response.json();\n                console.log('Session data:', data);\n                return data;\n            }\n            else {\n                console.log('No session found');\n                return null;\n            }\n        }\n        catch (error) {\n            console.error('Error querying session:', error);\n            return null;\n        }\n    }\n    async logOutSession() {\n        try {\n            const response = await fetch(`${window.origin}/auth/logout`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            if (response.status === 302 || response.status === 200) {\n                const sessionStatus = await this.checkSession();\n                if (sessionStatus?.user === null) {\n                    console.log('Successfully logged.');\n                    return true;\n                }\n                else {\n                    console.error('Logout failed: User is still logged in.');\n                    return false;\n                }\n            }\n            else {\n                console.log('Failed to log out, received code: ', response.status);\n                return false;\n            }\n        }\n        catch (error) {\n            console.error('Error logging out:', error);\n            return false;\n        }\n    }\n    async signTransactions(txnGroup, activeAddress, _indexesToSign) {\n        const messageId = SignalClient.generateRequestId();\n        // TODO: Replace with an actual provider ID, though it is not necessary for the Liquid Auth flow\n        const providerId = \"02657eaf-be17-4efc-b0a4-19d654b2448e\";\n        if (!this.dataChannel) {\n            throw new Error('Data channel not set yet!');\n        }\n        const awaitResponse = () => new Promise((resolve, reject) => {\n            if (this.dataChannel) {\n                this.dataChannel.onmessage = async (evt) => {\n                    const message = decode(fromBase64Url(evt.data));\n                    if (message.reference === 'arc0027:sign_transactions:response') {\n                        if (message.requestId !== messageId) {\n                            reject(new Error('Request ID mismatch'));\n                            return;\n                        }\n                        const encodedSignatures = message.result.stxns;\n                        const transactionsToSend = txnGroup.map((txn, idx) => {\n                            return txn.attachSignature(activeAddress, fromBase64Url(encodedSignatures[idx]));\n                        });\n                        resolve(transactionsToSend);\n                    }\n                };\n            }\n        });\n        const encodedStr = toSignTransactionsParamsRequestMessage(messageId, providerId, txnGroup.map((txn) => ({ txn: toBase64URL(encodeUnsignedTransaction(txn)) })));\n        console.log(\"Sending message:\", encodedStr);\n        this.dataChannel.send(encodedStr);\n        return await awaitResponse();\n    }\n    showModal(requestId, altRequestId) {\n        this.requestId = requestId;\n        this.altRequestId = altRequestId;\n        if (!this.modalElement) {\n            this.modalElement = document.createElement('div');\n            this.modalElement.classList.add('liquid-auth-modal', 'hidden');\n            this.modalElement.innerHTML = `\n          <div class=\"modal-content\">\n            <button class=\"close-button\">x</button>\n            <div class=\"call-session\">\n              <div class=\"offer\">\n                <a id=\"qr-link\" href=\"https://github.com/algorandfoundation/liquid-auth-js\" target=\"_blank\">\n                  <img id=\"liquid-qr-code\" src=\"\" class=\"logo hidden\" alt=\"Liquid QR Code\" />\n                </a>\n                <hgroup>\n                  <h1>Offer Client</h1>\n                  <h2>Local ID: ${this.requestId}</h2>\n                </hgroup> \n                <button id=\"start\">Start</button>\n              </div>\n            </div>\n          </div>\n        `;\n            const styleSheet = document.createElement(\"style\");\n            styleSheet.textContent = `\n          .hidden {\n            display: none;\n          }\n          .liquid-auth-modal {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.5);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n          }\n          .modal-content {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            position: relative;\n            max-width: 500px;\n            width: 100%;\n            color: black;\n          }\n          .close-button {\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            background: none;\n            border: none;\n            font-size: 20px;\n            cursor: pointer;\n            color: black;\n          }\n          #liquid-qr-code {\n          width: 300px;\n          height: 300px;\n        }\n        `;\n            this.modalElement.appendChild(styleSheet);\n            document.body.appendChild(this.modalElement);\n            const closeButton = this.modalElement.querySelector('.close-button');\n            const closeListener = () => {\n                this.hideModal();\n                this.cleanUp();\n            };\n            closeButton.addEventListener('click', closeListener);\n            this.eventListeners.push({ element: closeButton, type: 'click', listener: closeListener });\n            const startButton = this.modalElement.querySelector('#start');\n            const startListener = () => this.handleOfferClient();\n            startButton.addEventListener('click', startListener);\n            this.eventListeners.push({ element: startButton, type: 'click', listener: startListener });\n        }\n        this.modalElement.querySelector('h2').textContent = `Local ID: ${this.requestId}`;\n        this.modalElement.classList.remove('hidden');\n    }\n    hideModal() {\n        if (this.modalElement) {\n            this.modalElement.classList.add('hidden');\n            this.modalElement.style.display = 'none';\n        }\n    }\n    handleDataChannel = (_dataChannel) => {\n        _dataChannel.onmessage = (e) => {\n            console.log('Received message:', e.data);\n        };\n        this.setDataChannel(_dataChannel);\n    };\n    async handleOfferClient() {\n        const qrLinkElement = this.modalElement.querySelector('#qr-link');\n        if (qrLinkElement) {\n            qrLinkElement.href = 'https://github.com/algorandfoundation/liquid-auth-js';\n            this.client.peer(this.requestId, 'offer', this.RTC_CONFIGURATION).then(this.handleDataChannel);\n            this.client.on('link-message', (message) => {\n                this.onLinkMessage(message);\n                const offerElement = this.modalElement.querySelector('.offer');\n                if (offerElement) {\n                    offerElement.classList.add('hidden');\n                }\n            });\n            const image = this.modalElement.querySelector('#liquid-qr-code');\n            if (image) {\n                image.src = await this.client.qrCode();\n                image.classList.remove('hidden');\n            }\n            const deepLink = this.modalElement.querySelector('#qr-link');\n            if (deepLink) {\n                deepLink.href = this.client.deepLink(this.requestId);\n            }\n            const startButton = this.modalElement.querySelector('#start');\n            if (startButton) {\n                startButton.classList.add('hidden');\n            }\n        }\n        else {\n            console.error('QR link element not found');\n        }\n    }\n    cleanUp() {\n        this.eventListeners.forEach(({ element, type, listener }) => {\n            element.removeEventListener(type, listener);\n        });\n        this.eventListeners = [];\n        if (this.modalElement) {\n            document.body.removeChild(this.modalElement);\n            this.modalElement = null;\n        }\n    }\n    async waitForLinkedBool() {\n        return new Promise((resolve) => {\n            const checkLinkedBool = () => {\n                if (this.linkedBool) {\n                    resolve();\n                }\n                else {\n                    setTimeout(checkLinkedBool, 100);\n                }\n            };\n            checkLinkedBool();\n        });\n    }\n}\n"],"names":["has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","module","exports","qrcode","typeNumber","errorCorrectionLevel","PAD0","PAD1","_typeNumber","_errorCorrectionLevel","QRErrorCorrectionLevel","_modules","_moduleCount","_dataCache","_dataList","_this","makeImpl","test","maskPattern","moduleCount","modules","row","col","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","getBestMaskPattern","minLostPoint","pattern","lostPoint","QRUtil","getLostPoint","pos","getPatternPosition","bits","getBCHTypeNumber","mod","Math","floor","data","getBCHTypeInfo","inc","bitIndex","byteIndex","maskFunc","getMaskFunction","dark","mask","createBytes","buffer","rsBlocks","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","dataCount","ecCount","totalCount","max","getBuffer","rsPoly","getErrorCorrectPolynomial","rawPoly","qrPolynomial","getLength","modPoly","modIndex","getAt","totalCodeCount","index","dataList","QRRSBlock","getRSBlocks","qrBitBuffer","put","getMode","getLengthInBits","write","totalDataCount","putBit","addData","mode","newData","qrNumber","qrAlphaNum","qr8BitByte","qrKanji","isDark","getModuleCount","make","createTableTag","cellSize","margin","qrHtml","createSvgTag","alt","title","opts","text","id","mc","mr","rect","size","qrSvg","scalable","escapeXml","join","trim","createDataURL","min","x","y","createImgTag","img","s","escaped","charAt","_createHalfASCII","r1","r2","p","blocks","blocksLastLineNoMargin","ascii","substring","createASCII","white","black","line","renderTo2dContext","fillStyle","fillRect","stringToBytesFuncs","bytes","charCodeAt","stringToBytes","createStringToBytes","unicodeData","numChars","unicodeMap","bin","base64DecodeInputStream","read","b","count","b0","b1","b2","b3","k","String","fromCharCode","v","unknownChar","QRMode","MODE_NUMBER","MODE_ALPHA_NUM","MODE_8BIT_BYTE","MODE_KANJI","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","d","errorCorrectLength","a","multiply","QRMath","gexp","type","sameCount","darkCount","ratio","abs","EXP_TABLE","LOG_TABLE","n","num","shift","_num","e","glog","RS_BLOCK_TABLE","qrRSBlock","getRsBlockTable","rsBlock","list","_buffer","_length","bufIndex","bit","_mode","_data","strToNum","chatToNum","getCode","_bytes","code","byteArrayOutputStream","writeByte","base64EncodeOutputStream","_buflen","_base64","writeEncoded","encode","flush","padlen","toString","str","_str","_pos","match","decode","gifImage","width","height","_width","_height","pixel","out","writeString","writeShort","lzwMinCodeSize","raster","getLZWRaster","writeBytes","bitOutputStream","_out","_bitLength","_bitBuffer","clearCode","endCode","bitLength","table","lzwTable","add","byteOut","bitOut","dataIndex","contains","indexOf","toByteArray","_map","_size","key","getPixel","gif","setPixel","base64","toUTF8Array","utf8","charcode","factory","split","BASE32_DECODE_CHAR","A","B","C","D","E","F","G","I","J","K","N","O","P","R","S","T","U","V","W","X","Y","Z","decodeAsBytes","base32Str","Error","v1","v2","v3","v4","v5","v6","v7","v8","replace","remain","INPUT_ERROR","FINALIZE_ERROR","ARRAY_BUFFER","ArrayBuffer","HEX_CHARS","EXTRA","SHIFT","OUTPUT_TYPES","isArray","isView","formatMessage","message","constructor","Uint8Array","createOutputMethod","outputType","Sha512","update","createMethod","method","sharedMemory","h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","block","start","hBytes","finalized","hashed","HmacSha512","result","array","oKeyPad","iKeyPad","inner","isString","lastByteIndex","hash","finalize","s0h","s0l","s1h","s1l","c1","c2","c3","c4","abh","abl","dah","dal","cdh","cdl","bch","bcl","majh","majl","t1h","t1l","t2h","t2l","chh","chl","ah","al","bh","bl","ch","cl","dh","dl","eh","el","fh","fl","gh","gl","hh","hl","hex","digest","arr","arrayBuffer","dataView","DataView","setUint32","clone","copyTo","attrs","innerHash","chars","ALGORAND_PUBLIC_KEY_BYTE_LENGTH","ALGORAND_ADDRESS_BYTE_LENGTH","ALGORAND_CHECKSUM_BYTE_LENGTH","ALGORAND_ADDRESS_LENGTH","HASH_BYTES_LENGTH","MALFORMED_ADDRESS_ERROR_MSG","ALGORAND_ADDRESS_BAD_CHECKSUM_ERROR_MSG","INVALID_BASE64URL_INPUT","base64url","atob","map","decodeAddress","address","decoded","pk","cs","checksum","from","every","val","headers","ok","status","DEFAULT_ATTESTATION_OPTIONS","attestationType","authenticatorSelection","authenticatorAttachment","userVerification","requireResidentKey","extensions","liquid","encodeAttestationCredential","credential","response","rawId","clientDataJSON","attestationObject","decodeAttestationOptions","options","liquidOptions","attestationOptions","user","displayName","challenge","excludeCredentials","cred","async","fetchAttestationRequest","origin","fetch","body","JSON","stringify","fetchAttestationResponse","then","statusText","json","attestation","onChallenge","encodedAttestationOptions","error","decodedPublicKey","navigator","credentials","publicKey","clientExtensionResults","PACKET_TYPES","PACKET_TYPES_REVERSE","keys","forEach","ERROR_PACKET","withNativeBlob","Blob","withNativeArrayBuffer","obj","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","readAsDataURL","toArray","byteOffset","byteLength","TEXT_ENCODER","encodePacketToBinary","packet","encoded","TextEncoder","lookup","encoded1","encoded2","encoded3","encoded4","bufferLength","arraybuffer","decodePacket","encodedPacket","binaryType","mapBinary","decodeBase64Packet","packetType","SEPARATOR","encodePayload","packets","encodedPackets","decodePayload","encodedPayload","decodedPacket","createPacketEncoderStream","TransformStream","transform","controller","payloadLength","header","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","createPacketDecoderStream","maxPayload","TextDecoder","state","expectedLength","isBinary","headerArray","getUint16","getUint32","pow","protocol","Emitter","mixin","addEventListener","_callbacks","removeEventListener","cb","callbacks","splice","emitReserved","hasListeners","nextTick","isPromiseAvailable","Promise","resolve","setTimeoutFn","globalThisShim","self","window","Function","defaultBinaryType","createCookieJar","pick","attr","NATIVE_SET_TIMEOUT","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","useNativeTimers","bind","clearTimeoutFn","BASE64_OVERHEAD","utf8Length","ceil","randomString","Date","now","random","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","TransportError","reason","description","super","Transport","writable","query","socket","forceBase64","onError","open","readyState","doOpen","close","doClose","onClose","send","onOpen","onData","onPacket","details","pause","onPause","createUri","schema","_hostname","_port","path","_query","hostname","port","secure","Number","encodedQuery","_polling","_poll","total","doPoll","doWrite","uri","timestampRequests","timestampParam","sid","b64","value","XMLHttpRequest","err","hasCORS","empty","BaseXHR","location","isSSL","xd","req","request","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_create","_a","xdomain","xhr","_xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","cookieJar","addCookies","withCredentials","requestTimeout","timeout","onreadystatechange","parseCookies","getResponseHeader","_onLoad","_onError","document","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","hasXHR2","newRequest","responseType","XHR","assign","isReactNative","product","toLowerCase","BaseWS","protocols","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","onerror","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","WS","_packet","WT","_transport","WebTransport","transportOptions","closed","catch","ready","createBidirectionalStream","stream","decoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","done","transports","websocket","webtransport","polling","re","parts","parse","src","m","exec","source","host","authority","ipv6uri","pathNames","queryKey","regx","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","Infinity","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","_open","createTransport","EIO","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","onHandshake","_sendPacket","_resetPingTimeout","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","shouldCheckPayloadSize","payloadSize","_hasPingExpired","hasExpired","msg","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","to","_filterUpgrades","upgrades","filteredUpgrades","Socket","o","filter","url","loc","ipv6","href","withNativeFile","File","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","reconstructPacket","_reconstructPacket","isIndexValid","RESERVED_EVENTS","PacketType","replacer","EVENT","ACK","encodeAsString","encodeAsBinary","BINARY_EVENT","BINARY_ACK","nsp","deconstruction","unshift","isObject","reviver","reconstructor","decodeString","isBinaryEvent","BinaryReconstructor","takeBinaryData","buf","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","connected","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","engine","isConnected","discardPacket","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","reject","arg1","arg2","tryCount","pending","responseArgs","hasError","_drainQueue","force","_sendConnectPacket","_pid","pid","_lastOffset","_clearAcks","isBuffered","some","sameNamespace","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","factor","jitter","attempts","duration","rand","deviation","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","Encoder","decoder","Decoder","autoConnect","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","cache","parsed","newConnection","forceNew","multiplex","numeric","alphanumeric","byte","kanji","modes","mergeDeep","target","sources","targetValue","sourceValue","downloadURI","link","createElement","download","appendChild","click","removeChild","calculateImageSize","originalHeight","originalWidth","maxHiddenDots","maxHiddenAxisDots","dotSize","hideDots","imageSize","hideYDots","hideXDots","sqrt","round","toDataURL","onloadend","dots","rounded","classy","classyRounded","square","extraRounded","QRDot","svg","_svg","_type","draw","getNeighbor","drawFunction","dotTypes","_drawDot","_drawClassy","_drawClassyRounded","_drawRounded","_drawExtraRounded","_drawSquare","_rotateFigure","rotation","cx","cy","_element","setAttribute","PI","_basicDot","createElementNS","_basicSquare","_basicSideRounded","_basicCornerRounded","_basicCornerExtraRounded","_basicCornersRounded","leftNeighbor","rightNeighbor","topNeighbor","bottomNeighbor","neighborsCount","dot","QRCornerSquare","cornerSquareTypes","_basicExtraRounded","QRCornerDot","cornerDotTypes","radial","linear","circle","squareMask","dotMask","QRSVG","_defs","_options","getElement","drawQR","qr","minSize","realQRSize","shape","shapeTypes","drawImageSize","_qr","image","loadImage","_image","imageOptions","qrOptions","coverLevel","errorCorrectionPercents","drawBackground","drawDots","hideBackgroundDots","drawCorners","drawImage","element","gradientOptions","backgroundOptions","gradient","color","_createColor","additionalRotation","_backgroundClipPath","xBeginning","yBeginning","dotsOptions","_dotsClipPath","xOffset","yOffset","additionalDots","fakeCount","xFakeBeginning","yFakeBeginning","fakeMatrix","center","cornersSquareSize","cornersDotSize","column","cornersSquareClipPath","cornersDotClipPath","cornersSquareOptions","_cornersSquareClipPath","_cornersDotClipPath","cornersSquare","cornersDotOptions","cornersDot","Image","crossOrigin","dx","dy","dw","imageUrl","gradientTypes","positiveRotation","x0","y0","x1","y1","tan","colorStops","stop","canvas","qrTypes","defaultOptions","drawTypes","errorCorrectionLevels","saveAsBlob","sanitizeGradient","newGradient","colorStop","sanitizeOptions","newOptions","Boolean","QRCodeStyling","_clearContainer","container","innerHTML","_setupSvg","qrSVG","_svgDrawingPromise","_extension","_setupCanvas","_canvas","_canvasDrawingPromise","xml","XMLSerializer","serializeToString","svg64","btoa","image64","getContext","_getElement","extension","_container","append","applyExtension","deleteExtension","getRawData","serializer","toBlob","downloadOptions","console","warn","getRandomValues","rnds8","rng","crypto","byteToHex","unsafeStringify","_seqLow","_seqHigh","_msecs","rnds","msecs","seq","seqHigh","seqLow","REQUEST_IS_MISSING_MESSAGE","REQUEST_IN_PROCESS_MESSAGE","UNAUTHENTICATED_MESSAGE","ORIGIN_IS_MISSING_MESSAGE","DEFAULT_QR_CODE_OPTIONS","generateQRCode","requestId","qrCodeOptions","generateDeepLink","qrCode","blob","URL","createObjectURL","SignalClient","authenticated","peerClient","globalThis","generateRequestId","assertion","deepLink","peer","config","iceServers","urls","iceCandidatePoolSize","candidatesBuffer","RTCPeerConnection","onicecandidate","candidate","remoteDescription","addIceCandidate","RTCIceCandidate","ondatachannel","dc","channel","sdp","signal","setRemoteDescription","answer","createAnswer","setLocalDescription","all","dataChannel","createDataChannel","localSdp","createOffer","srcEnd","position","EMPTY_ARRAY","LEGACY_RECORD_INLINE_ID","RECORD_DEFINITIONS_ID","RECORD_INLINE_ID","BUNDLED_STRINGS_ID","PACKED_REFERENCE_TAG_ID","STOP_CODE","currentStructures","srcString","bundledStrings","referenceMap","packedValues","restoreMapsAsObject","maxArraySize","maxMapSize","strings","stringPosition","currentDecoder","srcStringStart","srcStringEnd","currentExtensions","currentExtensionRanges","useRecords","mapsAsObjects","sequentialMode","inlineObjectReadThreshold","keyMap","_keyMap","getStructures","getShared","structures","uninitialized","mapKey","Map","entries","set","decodeKey","get","encodeKey","encodeKeys","rec","decodeKeys","_mapKey","res","safeKey","mapDecode","end","saveState","clearSource","sharedValues","maxPrivatePackedValues","checkedRead","decodeMultiple","values","lastPosition","defaultDecoder","postBundlePosition","incomplete","RangeError","startsWith","token","majorType","getFloat16","getFloat32","useFloat32","multiplier","mult10","getFloat64","int64AsNumber","getBigUint64","Buffer","object","readBin","string","shortStringInJS","longStringInJS","readFixedString","structure","createStructureReader","readJustLength","recordDefinition","readBundleExt","loadShared","handlesRead","input","Tag","packedValue","getPackedValues","isNaN","validName","readObject","compiledReader","propertyCount","slowReads","readStringJS","subarray","units","byte1","byte2","byte3","byte4","unit","f","g","h","copyBuffers","f32Array","Float32Array","u8Array","byte0","exponent","NaN","tag","dateString","epochSec","fraction","exp","log","existingStructure","isShared","restoreStructures","position0","position1","glbl","RegExp","packedTable","newPackedValues","prefixes","suffixes","combine","startingPosition","refEntry","targetProperties","used","getPrototypeOf","Set","SHARED_DATA_TAG_ID","version","isLittleEndianMachine","Uint16Array","typedArrays","Uint8ClampedArray","Uint32Array","BigUint64Array","Int8Array","Int16Array","Int32Array","BigInt64Array","Float64Array","typedArrayTags","registerTypedArray","TypedArray","bytesPerElement","dvMethod","BYTES_PER_ELEMENT","littleEndian","sizeShift","dv","elements","ta","bundlePosition","bundleLength","dataPosition","sharedData","updatedStructures","sharedVersion","savedSrcEnd","savedPosition","savedStringPosition","savedSrcStringStart","savedSrcStringEnd","savedSrcString","savedStrings","savedReferenceMap","savedBundledStrings","savedSrc","savedStructures","savedDecoder","savedSequentialMode","FLOAT32_OPTIONS","NEVER","ALWAYS","DECIMAL_ROUND","DECIMAL_FIT","textEncoder","extensionClasses","hasNodeBuffer","ByteArrayAllocate","allocUnsafeSlow","ByteArray","MAX_STRUCTURES","MAX_BUFFER_SIZE","throwOnIterable","targetView","safeEnd","MAX_BUNDLE_SIZE","hasNonLatin","RECORD_SYMBOL","Symbol","sharedStructures","hasSharedUpdate","encodeUtf8","utf8Write","maxBytes","encodeInto","written","hasSharedStructures","saveStructures","maxSharedStructures","isSequential","sequential","saveShared","samplingPackedValues","packedObjectMap","sharedPackedObjectMap","recordIdsToRemove","transitionsCount","serializationsSinceTransitionRebuild","mapEncode","encodeOptions","_mapped","REUSE_BUFFER_MODE","useSelfDescribedHeader","structuredClone","bundleStrings","sharedStructuresLength","transitions","nextTransition","transition","nextId","maxValues","objectMap","findRepetitiveStrings","writeArrayHeader","valuesArray","THROW_ON_ITERABLE","writeBundles","idsToInsert","makeRoom","serialized","insertIds","returnBuffer","updateSharedData","RESET_BUFFER_MODE","findCommonStringsToPack","packedPosition","headerSize","strLength","extStart","twoByte","strPosition","copyWithin","alwaysUseFloat","xShifted","setFloat32","setFloat64","referee","references","writeObject","useTag259ForMaps","entryValue","extensionClass","getTag","iterator","iteratorNotHandled","entry","asyncIterator","isBlob","useToJSON","largeBigIntToFloat","reverse","variableMapSize","vals","objectOffset","skipValues","parentRecordId","newTransitions","recordId","__keys__","newSize","newBuffer","copy","chunkThreshold","continuedChunkThreshold","encodeObjectAsIterable","iterateProperties","finalIterable","writeEntityLength","tryEncode","restartEncoding","restart","startEncoding","encodeIterable","encodeObjectAsAsyncIterable","encodedValue","asyncValue","encodeAsIterable","encodeAsAsyncIterable","useBuffer","clearSharedData","lastVersion","structuresCopy","SharedData","saveResults","existingShared","majorValue","BlobConstructor","toStringTag","packedStatus","includeKeys","typedArrayEncoder","typedArray","distanceToMove","lastEnd","sort","writeStrings","date","seconds","getTime","useTimestamp32","getMilliseconds","regex","tagUint8Array","definitions","defaultEncoder","RequestMessage","reference","params","RequestMessageBuilder","addParams","SignTransactionsParams","providerId","txns","SignTransactionsParamsBuilder","addProviderId","addTxns","LARGE_MESSAGE_SIZE","LARGE_MESSAGE_ERROR","toSignTransactionsParamsRequestMessage","messageId","signParams","LiquidAuthClient","client","RTC_CONFIGURATION","linkedBool","modalElement","altRequestId","eventListeners","username","RTC_config_username","RTC_config_credential","showModal","waitForLinkedBool","successfulLogout","logOutSession","cleanUp","setDataChannel","onLinkMessage","wallet","checkSession","sessionStatus","signTransactions","txnGroup","activeAddress","_indexesToSign","awaitResponse","encodedSignatures","stxns","transactionsToSend","txn","idx","attachSignature","encodedStr","encodeUnsignedTransaction","classList","styleSheet","textContent","closeButton","querySelector","closeListener","hideModal","startButton","startListener","handleOfferClient","remove","style","display","handleDataChannel","_dataChannel","qrLinkElement","offerElement","checkLinkedBool"],"sourceRoot":""}