(self["webpackChunkvote_coin_demo"]=self["webpackChunkvote_coin_demo"]||[]).push([[995],{12506:function(e,t,n){"use strict";var i=n(60401),r=n(97283),s=n(60494);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}n(10031),n(36525),n(64588),n(46880);var a=o(r),c=o(s);function d(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var l=".pera-wallet-modal-header {\n  position: absolute;\n  top: -44px;\n  right: 0px;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.pera-wallet-modal-header--mobile {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  position: static;\n}\n.pera-wallet-modal-header--mobile .pera-wallet-modal-header__close-button {\n  width: 24px;\n  height: 24px;\n  margin: 0;\n  padding: 0;\n  background: transparent;\n  border: unset;\n  box-shadow: unset;\n}\n\n.pera-wallet-modal-header__brand {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 24px;\n  letter-spacing: -0.1px;\n  color: #ffffff;\n}\n\n.pera-wallet-modal-header__brand-text {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.pera-wallet-modal-header__version-number {\n  color: #9d9dae;\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 18px;\n  letter-spacing: 0.01;\n}\n\n.pera-wallet-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: auto;\n  height: 48px;\n  padding: 14px;\n  border: none;\n  border-radius: 12px;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-size: 14px;\n}\n\n.pera-wallet-modal-header__close-button {\n  width: 32px;\n  height: 32px;\n  margin: 0;\n  padding: 0;\n  background: rgba(44, 53, 89, 0.1);\n  border-radius: 8px;\n}\n\n.pera-wallet-modal-header__close-button__close-icon {\n  width: 20px;\n  height: 20px;\n}";d(l);const h=document.createElement("template"),f=i.isMobile()?"pera-wallet-modal-header pera-wallet-modal-header--mobile":"pera-wallet-modal-header pera-wallet-modal-header--desktop";h.innerHTML=`\n  <div class="${f}">\n      ${i.isMobile()?"":"<div class=\"pera-wallet-modal-header__brand\">\n              <img src=\"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='24' height='24' rx='4.8' fill='%23FFEE55'/%3e%3cpath d='M13.0408 5.92462C13.413 7.46693 13.2872 8.8236 12.7597 8.95482C12.2322 9.08605 11.5028 7.94214 11.1306 6.39983C10.7583 4.85752 10.8842 3.50085 11.4117 3.36963C11.9391 3.2384 12.6685 4.38231 13.0408 5.92462Z' fill='black'/%3e%3cpath d='M19.1876 7.25063C18.3632 6.37689 16.7231 6.61371 15.5243 7.77959C14.3254 8.94547 14.0219 10.5989 14.8463 11.4727C15.6707 12.3464 17.3108 12.1096 18.5097 10.9437C19.7085 9.77781 20.012 8.12438 19.1876 7.25063Z' fill='black'/%3e%3cpath d='M12.6308 20.6297C13.1583 20.4985 13.2656 19.0651 12.8705 17.4281C12.4754 15.7911 11.7275 14.5705 11.2 14.7017C10.6725 14.8329 10.5652 16.2663 10.9603 17.9033C11.3554 19.5403 12.1033 20.7609 12.6308 20.6297Z' fill='black'/%3e%3cpath d='M7.25371 8.05056C8.77551 8.49933 9.8875 9.28664 9.73741 9.80906C9.58731 10.3315 8.23197 10.3912 6.71016 9.94242C5.18836 9.49364 4.07637 8.70633 4.22646 8.18391C4.37656 7.66149 5.7319 7.60178 7.25371 8.05056Z' fill='black'/%3e%3cpath d='M17.1309 13.9497C18.7461 14.4261 19.9338 15.2357 19.7837 15.7581C19.6336 16.2806 18.2025 16.3179 16.5873 15.8416C14.9721 15.3653 13.7844 14.5556 13.9345 14.0332C14.0846 13.5108 15.5157 13.4734 17.1309 13.9497Z' fill='black'/%3e%3cpath d='M8.96609 12.8536C8.5887 12.4624 7.35088 13.0318 6.20133 14.1253C5.05177 15.2188 4.42581 16.4225 4.80319 16.8137C5.18058 17.2048 6.4184 16.6355 7.56796 15.542C8.71751 14.4484 9.34347 13.2448 8.96609 12.8536Z' fill='black'/%3e%3c/svg%3e\" />\n\n              <div class=\"pera-wallet-modal-header__brand-text\">\n                <span>Pera Connect</span>\n\n                <span class=\"pera-wallet-modal-header__version-number\">v2.0.21 - BETA</span>\n              </div>\n            </div>\n            "} \n\n      <button\n        id="pera-wallet-modal-header-close-button"\n        class="pera-wallet-button pera-wallet-modal-header__close-button">\n        <img\n          class="pera-wallet-modal-header__close-button__close-icon"\n          src="${i.isMobile()?"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M18 6L12 12M12 12L6 18M12 12L18 18M12 12L6 6' stroke='%232C3559' stroke-width='2'/%3e%3c/svg%3e":"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M18 6L12 12M12 12L6 18M12 12L18 18M12 12L6 6' stroke='white' stroke-width='2'/%3e%3c/svg%3e"}"\n        />\n      </button>\n    </div>\n`;class u extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:"open"}),this.shadowRoot){const e=document.createElement("style");e.textContent=l,this.shadowRoot.append(h.content.cloneNode(!0),e),this.onClose()}}onClose(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-modal-header-close-button"),n=this.getAttribute("modal-id");t&&n===i.PERA_WALLET_REDIRECT_MODAL_ID&&t.addEventListener("click",(()=>{i.removeModalWrapperFromDOM(i.PERA_WALLET_REDIRECT_MODAL_ID)}))}}var p="data:image/svg+xml,%3csvg fill='none' height='80' width='80' xmlns='http://www.w3.org/2000/svg'%3e%3cpath clip-rule='evenodd' d='M39.9 80V68.99h-9.8V80h-.2V68.99h-3.5a6.503 6.503 0 0 1-6.247-4.7 6.514 6.514 0 0 1-4.445-4.444 6.503 6.503 0 0 1-4.695-6.246v-3.5H0v-.2h11.013v-9.8H0v-.2h11.013v-9.8H0v-.2h11.013v-3.5a6.503 6.503 0 0 1 4.694-6.246 6.513 6.513 0 0 1 4.447-4.447 6.503 6.503 0 0 1 6.246-4.696h3.5V0h.2v11.011h9.8V0h.2v11.011h9.8V0h.2v11.011h3.5a6.503 6.503 0 0 1 6.247 4.697 6.514 6.514 0 0 1 4.443 4.444 6.503 6.503 0 0 1 4.701 6.248v3.5H80v.2H68.991v9.8H80v.2H68.991v9.8H80v.2H68.991v3.5a6.503 6.503 0 0 1-4.701 6.248 6.514 6.514 0 0 1-4.443 4.442 6.503 6.503 0 0 1-6.247 4.7h-3.5V80h-.2V68.99h-9.8V80zm28.89-40.1a28.728 28.728 0 0 0-1.746-9.8h-2.5v9.8h4.247zm-4.246.2h4.247a28.729 28.729 0 0 1-1.747 9.8h-2.5zm-.2-.2v-9.8H60.1v9.8zm-4.244.2h4.244v9.8H60.1zm-.2-.2a19.807 19.807 0 0 0-2.633-9.8H50.1v9.8zm-9.8.2h9.8a19.807 19.807 0 0 1-2.633 9.8H50.1zm-.2-.2v-9.8h-9.8v9.8zm-9.8.2h9.8v9.8h-9.8zm-.2-.2v-9.8h-9.8v9.8zm-9.8.2h9.8v9.8h-9.8zm-.2-.2v-9.8h-7.167a19.807 19.807 0 0 0-2.633 9.8zm-9.8.2h9.8v9.8h-7.167a19.807 19.807 0 0 1-2.633-9.8zm-.2-.2v-9.8h-4.245v9.8zm-4.245.2H19.9v9.8h-4.245zm-.2-.2v-9.8H12.96a28.726 28.726 0 0 0-1.748 9.8h4.242zm-4.242.2h4.242v9.8H12.96a28.726 28.726 0 0 1-1.748-9.8zm0 13.5v-3.5h1.608a28.876 28.876 0 0 0 2.634 5.327v2.617c0 .543.066 1.07.192 1.575a6.303 6.303 0 0 1-4.434-6.019zm4.242 1.449a28.674 28.674 0 0 1-2.42-4.949h2.42zm.2.32V50.1H19.9v9.8h-.702a28.915 28.915 0 0 1-3.543-4.53zM20.1 59.9v-9.8h2.518a20.2 20.2 0 0 0 7.282 7.282V59.9zm0-10h2.403a19.966 19.966 0 0 1-2.403-7.053zm9.8 7.25a20 20 0 0 1-7.05-7.05h7.05zm.2.117V50.1h9.8v9.8a19.807 19.807 0 0 1-9.8-2.633zm10 2.633v-9.8h9.8v7.167a19.807 19.807 0 0 1-9.8 2.633zm10-2.75V50.1h7.05a20 20 0 0 1-7.05 7.05zm0 .232a20.2 20.2 0 0 0 7.282-7.282H59.9v9.8h-9.8zm7.397-7.482H59.9v-7.053a19.966 19.966 0 0 1-2.403 7.053zm2.603 10v-9.8h4.244v5.28a28.91 28.91 0 0 1-3.538 4.52zm4.444-4.841V50.1h2.426a28.67 28.67 0 0 1-2.426 4.959zm0 .378a28.881 28.881 0 0 0 2.64-5.337h1.607v3.5a6.303 6.303 0 0 1-4.44 6.021 6.514 6.514 0 0 0 .193-1.577zm2.713-5.537h1.534v-6.477a28.817 28.817 0 0 1-1.534 6.477zm-56.044 0h1.535a28.807 28.807 0 0 1-1.535-6.477zm57.578-20v-3.5a6.303 6.303 0 0 0-4.44-6.02c.126.504.193 1.031.193 1.575v2.608a28.877 28.877 0 0 1 2.639 5.337zm-1.534.2h1.534v6.477a28.815 28.815 0 0 0-1.534-6.477zm-.288-.2a28.673 28.673 0 0 0-2.425-4.958V29.9zm-2.625 0v-5.279a28.911 28.911 0 0 0-3.538-4.521H60.1v9.8zm-4.444 0v-9.8h-9.8v2.518a20.2 20.2 0 0 1 7.282 7.282zm-2.403.2H59.9v7.053a19.966 19.966 0 0 0-2.403-7.053zm-.347-.2a20 20 0 0 0-7.05-7.05v7.05zm-7.25 0v-7.167a19.807 19.807 0 0 0-9.8-2.633v9.8zm-10 0v-9.8a19.807 19.807 0 0 0-9.8 2.633V29.9zm-10 0v-7.05a20 20 0 0 0-7.05 7.05zm-7.282 0a20.2 20.2 0 0 1 7.282-7.282V20.1h-9.8v9.8zm-2.518.2h2.403a19.966 19.966 0 0 0-2.403 7.053zm-.2-.2v-9.8h-.701a28.915 28.915 0 0 0-3.544 4.53v5.27zm-4.445 0v-4.948a28.665 28.665 0 0 0-2.42 4.948zm-2.634 0a28.874 28.874 0 0 1 2.634-5.327v-2.618c0-.543.066-1.07.191-1.574a6.303 6.303 0 0 0-4.433 6.019v3.5zm-1.608.2h1.535a28.81 28.81 0 0 0-1.535 6.477zM36.58 68.79H30.1v-1.536c2.06.749 4.23 1.27 6.479 1.535zm3.321-.001a28.726 28.726 0 0 1-9.8-1.748v-2.497h9.8zm-10-1.822v-2.423h-4.953a28.678 28.678 0 0 0 4.953 2.423zm10-2.623h-9.8V60.1h9.8zm-10 0V60.1h-9.8v.702a28.915 28.915 0 0 0 4.526 3.542H29.9zm7.254-4.444H30.1v-2.403a19.966 19.966 0 0 0 7.053 2.403zm0-39.8a19.966 19.966 0 0 0-7.054 2.403V20.1h7.053zm2.746-.2h-9.8v-4.245h9.8zm-10 0v-4.245h-5.27a28.907 28.907 0 0 0-4.53 3.544v.701zm10-4.445h-9.8V12.96a28.729 28.729 0 0 1 9.8-1.749zm-10 0v-2.421a28.668 28.668 0 0 0-4.95 2.42h4.95zm6.679-4.244a28.81 28.81 0 0 0-6.479 1.536V11.21h6.479zm-6.679 1.61v-1.61h-3.5a6.303 6.303 0 0 0-6.02 4.436 6.514 6.514 0 0 1 1.575-.192h2.617A28.877 28.877 0 0 1 29.9 12.82zm0 55.968V67.18a28.878 28.878 0 0 1-5.331-2.636h-2.614c-.543 0-1.07-.067-1.575-.192a6.303 6.303 0 0 0 6.02 4.437zm20.2 0h3.5a6.303 6.303 0 0 0 6.02-4.438 6.513 6.513 0 0 1-1.576.193h-2.608a28.879 28.879 0 0 1-5.336 2.638zm-.2-1.534v1.534h-6.475a28.808 28.808 0 0 0 6.475-1.534zm.2-.287a28.671 28.671 0 0 0 4.957-2.424H50.1v2.424zm-.2-2.424v2.499a28.728 28.728 0 0 1-9.8 1.746v-4.245zm.2-.2h5.278a28.914 28.914 0 0 0 4.522-3.538V60.1h-9.8zm-.2-4.244v4.244h-9.8V60.1zm0-2.603V59.9h-7.053a19.966 19.966 0 0 0 7.053-2.403zm0-37.397v2.403a19.966 19.966 0 0 0-7.053-2.403H49.9zm.2-.2h9.8v-.705a28.911 28.911 0 0 0-4.526-3.54H50.1V19.9zm-.2-4.245V19.9h-9.8v-4.245h9.8zm.2-.2h4.954a28.676 28.676 0 0 0-4.954-2.423zm-.2-2.497v2.497h-9.8V11.21a28.75 28.75 0 0 1 9.8 1.747zm.2-.14a28.877 28.877 0 0 1 5.332 2.637h2.612c.543 0 1.071.066 1.576.192a6.303 6.303 0 0 0-6.02-4.436h-3.5zm-.2-1.607v1.534a28.812 28.812 0 0 0-6.475-1.534H49.9zm-34.245 44.53v2.303c0 .567.075 1.117.215 1.64a6.309 6.309 0 0 0 1.643.216h1.41a29.118 29.118 0 0 1-3.268-4.16zm3.458 4.359h-1.6a6.513 6.513 0 0 1-1.578-.193 6.315 6.315 0 0 0 4.157 4.157 6.517 6.517 0 0 1-.192-1.575v-1.602a29.35 29.35 0 0 1-.787-.787zm.787.509a29.029 29.029 0 0 1-.508-.509h.508zm.2.469v1.411c0 .567.075 1.117.215 1.64.523.14 1.073.215 1.64.215h2.3a29.118 29.118 0 0 1-4.155-3.266zm35.649 3.266h2.295c.567 0 1.117-.075 1.64-.216a6.286 6.286 0 0 0 .216-1.639v-1.407a29.116 29.116 0 0 1-4.151 3.262zm4.35-3.454v1.598a6.53 6.53 0 0 1-.192 1.574 6.314 6.314 0 0 0 4.155-4.154 6.509 6.509 0 0 1-1.572.191h-1.6a29.08 29.08 0 0 1-.791.791zm.982-.991h1.41c.565 0 1.114-.075 1.636-.215a6.31 6.31 0 0 0 .216-1.641V55.75a29.113 29.113 0 0 1-3.262 4.15zm3.262-35.65v-2.295c0-.568-.075-1.117-.216-1.64a6.307 6.307 0 0 0-1.637-.215h-1.41a29.112 29.112 0 0 1 3.263 4.15zM60.89 19.9h1.6c.542 0 1.069.066 1.573.192a6.314 6.314 0 0 0-4.156-4.157 6.51 6.51 0 0 1 .192 1.576v1.598c.269.259.532.522.79.791zm-.991-.981V17.51a6.31 6.31 0 0 0-.216-1.64 6.308 6.308 0 0 0-1.64-.216h-2.299a29.108 29.108 0 0 1 4.155 3.264zm-35.641-3.264h-2.304a6.31 6.31 0 0 0-1.639.215 6.306 6.306 0 0 0-.216 1.641v1.412a29.115 29.115 0 0 1 4.159-3.268zM19.9 19.113v-1.602c0-.543.067-1.072.193-1.577a6.315 6.315 0 0 0-4.159 4.16 6.518 6.518 0 0 1 1.58-.194h1.6c.257-.267.519-.53.786-.787zm-.508.787h.508v-.508c-.171.167-.34.337-.508.508zm-.47.2h-1.409a6.31 6.31 0 0 0-1.643.216 6.308 6.308 0 0 0-.215 1.639v2.305a29.107 29.107 0 0 1 3.268-4.16zm41.178-.712c.173.168.344.34.512.512H60.1zm.513 40.712c-.169.173-.34.344-.513.513V60.1z' fill='%2394a3b8' fill-rule='evenodd'/%3e%3crect fill='black' height='80' rx='16' width='80'/%3e%3cpath d='M43.47 19.752c1.24 5.14.821 9.663-.937 10.1-1.758.438-4.19-3.375-5.43-8.517-1.241-5.14-.822-9.663.936-10.1 1.759-.438 4.19 3.376 5.43 8.517zm20.49 4.42c-2.749-2.913-8.216-2.123-12.212 1.763s-5.008 9.398-2.26 12.31 8.215 2.123 12.211-1.763 5.008-9.398 2.26-12.31zM42.102 68.769c1.758-.438 2.116-5.216.8-10.673-1.318-5.456-3.81-9.525-5.57-9.088-1.757.438-2.115 5.216-.798 10.672 1.317 5.457 3.81 9.526 5.568 9.089zM24.18 26.838c5.073 1.496 8.78 4.12 8.28 5.862-.5 1.741-5.019 1.94-10.091.444-5.073-1.496-8.78-4.12-8.28-5.861.501-1.742 5.019-1.941 10.092-.445zm32.924 19.664c5.384 1.588 9.343 4.286 8.843 6.028-.5 1.741-5.27 1.866-10.654.278-5.385-1.588-9.343-4.286-8.843-6.028.5-1.741 5.27-1.866 10.654-.278zm-27.216-3.654c-1.258-1.304-5.384.594-9.215 4.24-3.832 3.644-5.919 7.656-4.66 8.96 1.257 1.304 5.383-.594 9.215-4.239s5.918-7.657 4.66-8.96z' fill='%23fe5'/%3e%3c/svg%3e",g=".pera-wallet-download-qr-code-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: fit-content;\n  margin: 26px auto 0;\n  padding: 10px;\n  box-shadow: 0px 20px 60px rgba(26, 35, 91, 0.15), 0px 4px 12px rgba(26, 35, 91, 0.05), 0px 1px 4px rgba(26, 35, 91, 0.06);\n  border-radius: 24px;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-download-qr-code-wrapper {\n    margin-top: 51px;\n  }\n}";d(g);const m=document.createElement("template");m.innerHTML='\n  <div id="pera-wallet-download-qr-code-wrapper" class="pera-wallet-download-qr-code-wrapper"></div>  \n';class b extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:"open"}),this.shadowRoot){const e=document.createElement("style");e.textContent=g,this.shadowRoot.append(m.content.cloneNode(!0),e)}}connectedCallback(){var e;const t=new a.default({width:205,height:205,type:"svg",data:i.PERA_DOWNLOAD_URL,image:p,dotsOptions:{color:"#000",type:"extra-rounded"},imageOptions:{crossOrigin:"anonymous",margin:10},cornersSquareOptions:{type:"extra-rounded"},cornersDotOptions:{type:"dot"}}),n=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-download-qr-code-wrapper");n&&t.append(n)}}var w="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M8.5 19L15.5 12L8.5 5' stroke='%233C3C49' stroke-width='2'/%3e%3c/svg%3e",y=".pera-wallet-connect-modal-desktop-mode {\n  display: grid;\n  grid-template-columns: 205px auto;\n  gap: 70px;\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__default-view {\n  display: block;\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-item--active .pera-wallet-accordion-item__content {\n  height: 364px;\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__default-view--web-wallet-not-avaliable .pera-wallet-accordion-item--web-wallet {\n  display: none;\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__default-view--web-wallet-not-avaliable .pera-wallet-accordion-item .pera-wallet-accordion-toggle {\n  padding: 26px 24px 12px;\n  border-radius: 24px 24px 0 0;\n  transition: all ease-in 0.2s;\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__default-view--web-wallet-not-avaliable .pera-wallet-accordion-item .pera-wallet-accordion-item__content {\n  height: 434px;\n  border-radius: 0 0 24px 24px;\n  transition: height ease-in 0.2s;\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__default-view--web-wallet-not-avaliable .pera-wallet-accordion-item .pera-wallet-accordion-icon {\n  transform: rotate(90deg);\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__default-view--web-wallet-not-avaliable .pera-wallet-connect-modal-desktop-mode__download-pera-description {\n  margin-top: 50px;\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__default-view--web-wallet-not-avaliable .pera-wallet-connect-qr-code-wrapper {\n  width: 250px;\n  height: 255px;\n}\n.pera-wallet-connect-modal-desktop-mode--default .pera-wallet-connect-modal-desktop-mode__download-view {\n  display: none;\n}\n.pera-wallet-connect-modal-desktop-mode--download .pera-wallet-connect-modal-desktop-mode__default-view {\n  display: none;\n}\n.pera-wallet-connect-modal-desktop-mode--download .pera-wallet-connect-modal-desktop-mode__download-view {\n  display: block;\n}\n.pera-wallet-connect-modal-desktop-mode--download .pera-wallet-connect-modal-desktop-mode__download-view .pera-wallet-connect-modal-download-pera-view__footer a {\n  display: flex;\n  cursor: pointer;\n}\n.pera-wallet-connect-modal-desktop-mode--compact {\n  grid-template-columns: unset;\n  gap: unset;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__web-wallet {\n  padding: 28px 40px;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__web-wallet .pera-wallet-connect-modal-desktop-mode__web-wallet__logo-wrapper {\n  box-shadow: unset;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__web-wallet .pera-wallet-connect-modal-desktop-mode__web-wallet__description {\n  margin-bottom: 16px;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__web-wallet .pera-wallet-connect-modal-desktop-mode__web-wallet__launch-button {\n  width: 172px;\n  height: 40px;\n  margin: 0 auto;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__web-wallet-iframe {\n  height: 100%;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view {\n  overflow: hidden;\n  border-radius: 24px;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-item {\n  margin-bottom: 0;\n  border-radius: 0;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-item:not(:last-child) {\n  border-bottom: 1px solid #e6e8ee;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-item #pera-wallet-iframe {\n  height: 100%;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-toggle {\n  padding: 20px;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-toggle__text, .pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-toggle__content-with-label__text {\n  color: #626268;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 24px;\n  letter-spacing: -0.09px;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-toggle__bold-color {\n  font-weight: 600;\n  color: #1a1a1a;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-accordion-item--active .pera-wallet-accordion-item__content {\n  height: 265px;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-connect-modal-desktop-mode__download-pera-container {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 14px;\n  padding: 0 20px;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-connect-modal-desktop-mode__download-pera-description,\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-connect-modal-desktop-mode__download-pera-button {\n  margin: 0;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-connect-modal-desktop-mode__download-pera-button {\n  font-weight: 500;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-connect-qr-code-wrapper {\n  margin: 4px auto 0;\n  padding: 0;\n  box-shadow: unset;\n}\n.pera-wallet-connect-modal-desktop-mode--compact .pera-wallet-connect-modal-desktop-mode__default-view .pera-wallet-connect-qr-code-wrapper svg {\n  padding: 8px;\n  box-shadow: 0px 20px 60px rgba(26, 35, 91, 0.15), 0px 4px 12px rgba(26, 35, 91, 0.05), 0px 1px 4px rgba(26, 35, 91, 0.06);\n  border-radius: 12px;\n}\n.pera-wallet-connect-modal-desktop-mode--select-account {\n  width: 100%;\n  height: 100%;\n}\n.pera-wallet-connect-modal-desktop-mode--select-account.pera-wallet-connect-modal-desktop-mode--default {\n  overflow: hidden;\n}\n.pera-wallet-connect-modal-desktop-mode--select-account .pera-wallet-connect-modal-desktop-mode__web-wallet-iframe {\n  position: unset;\n}\n.pera-wallet-connect-modal-desktop-mode--select-account .pera-wallet-accordion {\n  overflow: hidden;\n}\n.pera-wallet-connect-modal-desktop-mode--select-account #pera-wallet-iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 3;\n  width: 100%;\n  height: 100%;\n  border-radius: 16px;\n}\n\n.pera-wallet-connect-modal-desktop-mode__accordion__description,\n.pera-wallet-connect-modal-desktop-mode__connect-button-wrapper {\n  padding: 0 40px 20px 64px;\n}\n\n.pera-wallet-connect-modal-desktop-mode__web-wallet {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: calc(100% - 88px);\n  padding: 48px 52px 40px;\n  margin: 0 auto;\n}\n\n.pera-wallet-connect-modal-desktop-mode__web-wallet__logo-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 72px;\n  height: 72px;\n  margin: 0 auto 16px;\n  background: #ffffff;\n  border-radius: 50%;\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.1), 0px 10px 16px rgba(20, 37, 63, 0.06);\n}\n\n.pera-wallet-connect-modal-desktop-mode__web-wallet__description {\n  margin: 0 auto 32px;\n  font-size: 14px;\n  line-height: 24px;\n  letter-spacing: -0.1px;\n  text-align: center;\n  color: #6a6a81;\n}\n\n.pera-wallet-connect-modal-desktop-mode__web-wallet__launch-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  width: 100%;\n  padding: 14px 0;\n  color: #ffffff;\n  background-color: #6b46fe;\n  border-radius: 12px;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: -0.1;\n  border: none;\n  outline: none;\n  cursor: pointer;\n}\n\n.pera-wallet-connect-modal-desktop-mode__web-wallet-iframe {\n  position: relative;\n  width: fit-content;\n  margin: 0 auto;\n}\n\n.pera-wallet-connect-modal-desktop-mode__connect-button {\n  display: block;\n  width: 100%;\n  height: 48px;\n  border: unset;\n  border-radius: 6px;\n  background-color: #333333;\n  color: white;\n  cursor: pointer;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-size: 13px;\n}\n\n.pera-wallet-connect-qr-code-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 215px;\n  height: 215px;\n  margin: 24px auto 0;\n  padding: 10px;\n  box-shadow: 0px 20px 60px rgba(26, 35, 91, 0.15), 0px 4px 12px rgba(26, 35, 91, 0.05), 0px 1px 4px rgba(26, 35, 91, 0.06);\n  border-radius: 24px;\n}\n\n.pera-wallet-connect-modal-desktop-mode__download-pera-description {\n  color: #838aa6;\n  text-align: center;\n  margin: 32px 0 12px;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: -0.04px;\n}\n\n.pera-wallet-connect-modal-desktop-mode__download-pera-button {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin: 0 auto;\n  padding: 0;\n  color: #6b46fe;\n  background-color: transparent;\n  outline: none;\n  border: none;\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: 0.01px;\n  cursor: pointer;\n}\n\n.pera-wallet-connect-modal-download-pera-view__back-button {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 14px;\n  padding: 12px 24px;\n  color: #3c3c49;\n  background-color: #ffffff;\n  outline: none;\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\n  border: unset;\n  border-radius: 24px;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 24px;\n  letter-spacing: -0.1px;\n  cursor: pointer;\n}\n\n.pera-wallet-connect-modal-download-pera-view {\n  padding: 32px 37px 28px;\n  background-color: #ffffff;\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\n  border-radius: 24px;\n}\n\n.pera-wallet-connect-modal-download-pera-view__title {\n  margin-bottom: 8px;\n  color: #3c3c49;\n  font-weight: 600;\n  font-size: 15px;\n  line-height: 18px;\n  text-align: center;\n  letter-spacing: -0.13px;\n}\n\n.pera-wallet-connect-modal-download-pera-view__footer {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  margin-top: 53px;\n}\n\n.pera-wallet-connect-modal-download-pera-view__footer__button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 8px 16px;\n  color: #6a6a81;\n  background-color: #ffffff;\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\n  text-decoration: none;\n  border-radius: 12px;\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 200%;\n  letter-spacing: -0.04px;\n  cursor: pointer;\n}\n\n#pera-wallet-iframe {\n  width: 285px;\n  height: 376px;\n  margin: 0 auto;\n  border: none;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-connect-modal-desktop-mode {\n    grid-template-columns: 1fr;\n    gap: 24px;\n  }\n  .pera-wallet-connect-qr-code-wrapper {\n    margin-top: 16px;\n  }\n  .pera-wallet-connect-modal-download-pera-view {\n    padding: 24px;\n  }\n  .pera-wallet-download-qr-code-wrapper {\n    margin-top: 32px;\n  }\n  .pera-wallet-connect-modal-download-pera-view__footer {\n    margin-top: 40px;\n  }\n}";d(y);var v=".pera-wallet-accordion-item {\n  background-color: #ffffff;\n  border-radius: 24px;\n  box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.02), 0px 4px 12px rgba(0, 0, 0, 0.03);\n}\n.pera-wallet-accordion-item:not(:last-of-type) {\n  margin-bottom: 20px;\n}\n.pera-wallet-accordion-item:not(:last-of-type) .pera-wallet-accordion-panel {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.pera-wallet-accordion-item .pera-wallet-accordion-item__content {\n  height: 0;\n  overflow: hidden;\n  color: #69708d;\n  background-color: #ffffff;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: -0.04px;\n  transition: height ease-in 0.2s;\n}\n.pera-wallet-accordion-item--active .pera-wallet-accordion-toggle {\n  padding: 26px 24px 12px;\n  border-radius: 24px 24px 0 0;\n  transition: all ease-in 0.2s;\n}\n.pera-wallet-accordion-item--active .pera-wallet-accordion-item__content {\n  border-radius: 0 0 24px 24px;\n  transition: height ease-in 0.2s;\n}\n.pera-wallet-accordion-item--active .pera-wallet-accordion-icon {\n  transform: rotate(90deg);\n}\n\n.pera-wallet-accordion-toggle {\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 12px 24px;\n  color: #2c3559;\n  background-color: #ffffff;\n  border: none;\n  border-radius: 24px;\n  outline: none;\n  cursor: pointer;\n  font-size: 16px;\n  line-height: 18px;\n  letter-spacing: -0.1px;\n  font-weight: 600;\n  transition: all ease-in 0.2s;\n}\n.pera-wallet-accordion-toggle__text, .pera-wallet-accordion-toggle__content-with-label__text {\n  color: #626268;\n}\n\n.pera-wallet-accordion-icon {\n  transition: all ease-in 0.2s;\n}\n\n.pera-wallet-accordion-toggle__bold-color {\n  color: #1A1A1A;\n  font-weight: 600;\n}\n\n.pera-wallet-accordion-toggle__content-with-label {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.pera-wallet-accordion-toggle__label {\n  padding: 4px 9px;\n  color: #1C786C;\n  background: #E0FAEE;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n  line-height: 18px;\n  letter-spacing: 0.01px;\n}\n\n.pera-wallet-accordion-toggle__button {\n  position: absolute;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  box-shadow: none;\n  outline: none;\n  border: none;\n  cursor: pointer;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-accordion-toggle {\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 24px;\n    letter-spacing: -0.1px;\n  }\n}";d(v);const _=document.createElement("template"),A=document.createElement("style"),E=document.createElement("style");A.textContent=y,E.textContent=v,_.innerHTML="\n  <div id=\"pera-wallet-connect-modal-desktop-mode\" class=\"pera-wallet-connect-modal-desktop-mode pera-wallet-connect-modal-desktop-mode--default\">\n      <pera-wallet-connect-modal-information-section></pera-wallet-connect-modal-information-section>\n\n      <div class=\"pera-wallet-connect-modal-desktop-mode__default-view\"></div>\n       \n\n      <div class=\"pera-wallet-connect-modal-desktop-mode__download-view\">\n        <button\n          id=\"pera-wallet-connect-modal-download-pera-view-back-button\"\n          class=\"pera-wallet-connect-modal-download-pera-view__back-button\">\n          <img\n            src=\"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.7071 6.29387C11.0976 6.68439 11.0976 7.31756 10.7071 7.70808L7.41421 11.001L19 11.001C19.5523 11.001 20 11.4487 20 12.001C20 12.5533 19.5523 13.001 19 13.001L7.41421 13.001L10.7071 16.2939C11.0976 16.6844 11.0976 17.3176 10.7071 17.7081C10.3166 18.0986 9.68342 18.0986 9.29289 17.7081L4.29289 12.7081C4.10536 12.5205 4 12.2662 4 12.001C4 11.7358 4.10536 11.4814 4.29289 11.2939L9.29289 6.29387C9.68342 5.90335 10.3166 5.90335 10.7071 6.29387Z' fill='%233C3C49'/%3e%3c/svg%3e\"\n            alt=\"Back Arrow\"\n          />\n\n          Back\n        </button>\n\n        <div class=\"pera-wallet-connect-modal-download-pera-view\">\n          <h1 class=\"pera-wallet-connect-modal-download-pera-view__title\">\n            Download Pera Wallet\n          </h1>\n\n          <pera-wallet-download-qr-code></pera-wallet-download-qr-code>\n\n          <div class=\"pera-wallet-connect-modal-download-pera-view__footer\">\n            <a\n              href=\"https://apps.apple.com/us/app/algorand-wallet/id1459898525\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\">\n              <img src=\"data:image/svg+xml,%3csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='40' height='40' rx='12' fill='black'/%3e%3cpath d='M25.6308 20.3011C25.6416 19.4664 25.8633 18.6481 26.2753 17.9221C26.6873 17.1962 27.2763 16.5863 27.9873 16.1491C27.5356 15.5039 26.9397 14.973 26.2469 14.5984C25.554 14.2239 24.7834 14.016 23.9963 13.9914C22.317 13.8151 20.6891 14.9962 19.8333 14.9962C18.9611 14.9962 17.6436 14.0089 16.2249 14.0381C15.3072 14.0677 14.4128 14.3346 13.6289 14.8126C12.8451 15.2906 12.1984 15.9636 11.7519 16.7659C9.81789 20.1144 11.2605 25.0354 13.1132 27.742C14.0401 29.0674 15.1233 30.5478 16.5408 30.4953C17.9278 30.4378 18.4458 29.6108 20.1202 29.6108C21.779 29.6108 22.265 30.4953 23.7112 30.4619C25.1995 30.4378 26.1372 29.1307 27.0316 27.7928C27.6976 26.8484 28.2101 25.8047 28.55 24.7003C27.6853 24.3345 26.9474 23.7224 26.4283 22.9401C25.9092 22.1578 25.6318 21.2399 25.6308 20.3011ZM22.8993 12.2113C23.7108 11.2371 24.1106 9.98492 24.0138 8.7207C22.7739 8.85092 21.6287 9.44347 20.8062 10.3803C20.404 10.838 20.096 11.3704 19.8998 11.9472C19.7035 12.5239 19.6229 13.1337 19.6625 13.7417C20.2826 13.7481 20.8961 13.6137 21.4568 13.3486C22.0175 13.0835 22.5107 12.6946 22.8993 12.2113Z' fill='white'/%3e%3c/svg%3e\" alt=\"App Store icon\" />\n            </a>\n\n            <a\n              href=\"https://play.google.com/store/apps/details?id=com.algorand.android\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\">\n              <img src=\"data:image/svg+xml,%3csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='40' height='40' rx='12' fill='black'/%3e%3cpath d='M12.41 9.7719C12.1334 10.0219 11.9683 10.4388 11.9683 10.9922V10.8671V29.1294V29.0091C11.9683 29.5202 12.1099 29.9149 12.3497 30.169L12.4109 30.2277V30.228C12.6051 30.4035 12.854 30.4966 13.1393 30.4963C13.418 30.4963 13.7316 30.4073 14.0626 30.2194L26.0264 23.4107L30.1359 21.0717C30.6578 20.7748 30.9508 20.3917 30.9998 20.0014V19.9998C30.9508 19.6087 30.6578 19.2259 30.1359 18.9289L26.0261 16.5902L14.0627 9.78154C13.731 9.59325 13.4171 9.50391 13.1376 9.50391C12.8527 9.50391 12.6041 9.59677 12.41 9.7719H12.41Z' fill='%2300C1FF'/%3e%3cpath d='M12.411 30.2285L12.3497 30.1698C12.1099 29.9157 11.9683 29.5209 11.9683 29.0098V29.1301V10.8724V10.993C11.9683 10.4396 12.1334 10.0226 12.41 9.77268L22.622 20.0009L12.411 30.2285Z' fill='url(%23paint0_linear_173_14441)'/%3e%3cpath d='M26.0256 23.4102L22.6211 19.9996L26.0253 16.5896L30.1351 18.9283C30.657 19.2253 30.95 19.6081 30.9989 19.9993V20.0008C30.95 20.3911 30.657 20.7742 30.1351 21.0712L26.0256 23.4101' fill='url(%23paint1_linear_173_14441)'/%3e%3cpath d='M13.1374 30.4961C12.8522 30.4964 12.6033 30.4032 12.4092 30.2277V30.2275L22.6202 19.9999L26.0246 23.4104L14.0608 30.2191C13.7298 30.4071 13.4162 30.4961 13.1374 30.4961Z' fill='url(%23paint2_linear_173_14441)'/%3e%3cpath d='M22.6212 20.002L12.4092 9.7737C12.6033 9.59858 12.8519 9.50571 13.1368 9.50571C13.4163 9.50571 13.7302 9.59501 14.0618 9.78335L26.0253 16.592L22.6212 20.002' fill='url(%23paint3_linear_173_14441)'/%3e%3cpath d='M13.1394 30.6172C12.8542 30.6172 12.6049 30.524 12.4108 30.3486L12.4105 30.3489C12.4097 30.3481 12.4088 30.3473 12.4079 30.3466L12.3548 30.2947C12.3531 30.2931 12.3516 30.2912 12.3496 30.2893L12.4108 30.2279C12.6049 30.4034 12.8538 30.4966 13.1392 30.4962C13.4179 30.4962 13.7315 30.4073 14.0625 30.2193L26.0263 23.4106L26.1029 23.4874L26.0253 23.5316L14.0625 30.3398C13.7608 30.5111 13.4739 30.6004 13.2147 30.6153C13.1896 30.6165 13.1645 30.6171 13.1394 30.6172' fill='url(%23paint4_linear_173_14441)'/%3e%3cpath d='M12.3497 30.2891C12.1099 30.0349 11.9683 29.6406 11.9683 29.1292V29.0089C11.9683 29.52 12.1099 29.9146 12.3497 30.1688L12.4109 30.2275L12.3497 30.2891Z' fill='url(%23paint5_linear_173_14441)'/%3e%3cpath d='M26.1025 23.4882L26.0259 23.4114L30.1349 21.0727C30.6568 20.7758 30.9498 20.3927 30.9987 20.0025C30.9987 20.1457 30.9668 20.2889 30.9035 20.4282C30.7756 20.7091 30.5194 20.9744 30.135 21.1934L26.1025 23.4883' fill='url(%23paint6_linear_173_14441)'/%3e%3cpath d='M30.9991 20C30.9501 19.6089 30.6571 19.2261 30.1353 18.9291L26.0259 16.5907L26.1025 16.5139H26.1029L30.1353 18.8088C30.7106 19.1365 30.9987 19.5682 30.9991 20Z' fill='url(%23paint7_linear_173_14441)'/%3e%3cpath d='M11.9683 10.9922V10.8661C11.9683 10.8206 11.9695 10.7761 11.9718 10.7329V10.7309C11.9718 10.7303 11.9718 10.7297 11.972 10.729V10.7242C11.9969 10.284 12.1334 9.94066 12.3497 9.71139L12.4099 9.77198C12.1334 10.0219 11.9683 10.4388 11.9683 10.9922Z' fill='url(%23paint8_linear_173_14441)'/%3e%3cpath d='M26.026 16.5898L14.0625 9.78115C13.7308 9.59285 13.417 9.50355 13.1375 9.50355C12.8525 9.50355 12.6039 9.59642 12.4099 9.77154L12.3496 9.71091C12.3684 9.69096 12.388 9.67172 12.4082 9.65322C12.4089 9.65255 12.4099 9.65188 12.4105 9.65125C12.6031 9.47747 12.849 9.3846 13.1314 9.38293H13.1375C13.417 9.38293 13.7308 9.47227 14.0625 9.66064L26.1029 16.5128L26.1026 16.513L26.026 16.5898Z' fill='url(%23paint9_linear_173_14441)'/%3e%3cdefs%3e%3clinearGradient id='paint0_linear_173_14441' x1='18.4943' y1='10.6794' x2='9.69389' y2='19.494' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2300A0FF'/%3e%3cstop offset='0.00657' stop-color='%2300A1FF'/%3e%3cstop offset='0.2601' stop-color='%2300BEFF'/%3e%3cstop offset='0.5122' stop-color='%2300D2FF'/%3e%3cstop offset='0.7604' stop-color='%2300DFFF'/%3e%3cstop offset='1' stop-color='%2300E3FF'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear_173_14441' x1='31.6348' y1='19.9407' x2='11.691' y2='19.9407' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FFE000'/%3e%3cstop offset='0.4087' stop-color='%23FFBD00'/%3e%3cstop offset='0.7754' stop-color='orange'/%3e%3cstop offset='1' stop-color='%23FF9C00'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear_173_14441' x1='24.2172' y1='23.2425' x2='9.30414' y2='38.0705' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FF3A44'/%3e%3cstop offset='1' stop-color='%23C31162'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear_173_14441' x1='9.77725' y1='8.25731' x2='16.4237' y2='14.876' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2332A071'/%3e%3cstop offset='0.0685' stop-color='%232DA771'/%3e%3cstop offset='0.4762' stop-color='%2315CF74'/%3e%3cstop offset='0.8009' stop-color='%2306E775'/%3e%3cstop offset='1' stop-color='%2300F076'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear_173_14441' x1='24.2114' y1='25.6084' x2='12.2683' y2='37.5709' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23CC2E36'/%3e%3cstop offset='1' stop-color='%239C0E4E'/%3e%3c/linearGradient%3e%3clinearGradient id='paint5_linear_173_14441' x1='13.3285' y1='10.6804' x2='5.57625' y2='18.4453' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23008DE0'/%3e%3cstop offset='0.00657' stop-color='%23008DE0'/%3e%3cstop offset='0.2601' stop-color='%2300A7E0'/%3e%3cstop offset='0.5122' stop-color='%2300B8E0'/%3e%3cstop offset='0.7604' stop-color='%2300C4E0'/%3e%3cstop offset='1' stop-color='%2300C7E0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint6_linear_173_14441' x1='31.6346' y1='20.0018' x2='11.6929' y2='20.0018' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23E0C500'/%3e%3cstop offset='0.4087' stop-color='%23E0A600'/%3e%3cstop offset='0.7754' stop-color='%23E09100'/%3e%3cstop offset='1' stop-color='%23E08900'/%3e%3c/linearGradient%3e%3clinearGradient id='paint7_linear_173_14441' x1='31.6349' y1='20.0008' x2='11.6933' y2='20.0008' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FFE840'/%3e%3cstop offset='0.4087' stop-color='%23FFCE40'/%3e%3cstop offset='0.7754' stop-color='%23FFBC40'/%3e%3cstop offset='1' stop-color='%23FFB540'/%3e%3c/linearGradient%3e%3clinearGradient id='paint8_linear_173_14441' x1='13.3201' y1='10.6927' x2='5.8533' y2='17.8475' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2340B8FF'/%3e%3cstop offset='0.00657' stop-color='%2340B9FF'/%3e%3cstop offset='0.2601' stop-color='%2340CEFF'/%3e%3cstop offset='0.5122' stop-color='%2340DDFF'/%3e%3cstop offset='0.7604' stop-color='%2340E7FF'/%3e%3cstop offset='1' stop-color='%2340EAFF'/%3e%3c/linearGradient%3e%3clinearGradient id='paint9_linear_173_14441' x1='9.76302' y1='10.4182' x2='15.0961' y2='15.76' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2365B895'/%3e%3cstop offset='0.0685' stop-color='%2362BD95'/%3e%3cstop offset='0.4762' stop-color='%2350DB97'/%3e%3cstop offset='0.8009' stop-color='%2344ED98'/%3e%3cstop offset='1' stop-color='%2340F498'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\" alt=\"Play Store icon\" />\n            </a>\n\n            <a\n              class=\"pera-wallet-connect-modal-download-pera-view__footer__button\"\n              href=\"https://perawallet.s3-eu-west-3.amazonaws.com/android-releases/app-pera-prod-release-bitrise-signed.apk\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\">\n              <img src=\"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M3 14V20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20V14' stroke='%232C3559' stroke-width='1.5'/%3e%3cpath d='M11.9998 16V3M11.9998 16L7.47803 11.4783M11.9998 16L16.5215 11.4783' stroke='%232C3559' stroke-width='1.5'/%3e%3c/svg%3e\" alt=\"Download icon\" />\n\n              Download APK File\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  ";class x extends HTMLElement{constructor(){var e;if(super(),this.attachShadow({mode:"open"}),this.shadowRoot){if(this.shadowRoot.append(_.content.cloneNode(!0),A,E),this.shadowRoot.addEventListener("click",(e=>{this.handleAccordion(e)})),"true"===this.getAttribute("compact-mode")){const e=this.shadowRoot.getElementById("pera-wallet-connect-modal-desktop-mode");null==e||e.classList.add("pera-wallet-connect-modal-desktop-mode--compact")}const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".pera-wallet-connect-modal-desktop-mode__default-view"),n="true"===this.getAttribute("promote-mobile"),{webWalletOption:i,mobileWalletOption:r}=function(e){const t=`\n  <div id="web-wallet-option" class="pera-wallet-accordion-item ${e?"":"pera-wallet-accordion-item--active"}  pera-wallet-accordion-item--web-wallet">\n            <a class="pera-wallet-accordion-toggle">\n              <button class="pera-wallet-accordion-toggle__button"></button>\n  \n              <img src="${w}" class="pera-wallet-accordion-icon" />\n  \n              <div class="pera-wallet-accordion-toggle__content-with-label">\n                <div class="pera-wallet-accordion-toggle__content-with-label__text">\n                  Connect With\n  \n                  <span class="pera-wallet-accordion-toggle__bold-color">\n                    Pera Web\n                  </span>\n                </div>\n  \n                <span id="pera-web-new-label" class="pera-wallet-accordion-toggle__label">NEW</span>\n              </div>\n            </a>\n  \n            <div class="pera-wallet-accordion-item__content">\n              <div class="pera-wallet-connect-modal-desktop-mode__web-wallet">\n              <div>\n                <div\n                  class="pera-wallet-connect-modal-desktop-mode__web-wallet__logo-wrapper">\n                  <img src="data:image/svg+xml,%3csvg width='44' height='44' viewBox='0 0 44 44' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect x='3.5' y='7.5' width='36' height='26' rx='5.5' stroke='%236B46FE' stroke-width='3'/%3e%3cpath d='M22.4973 14.5237C22.8556 16.041 22.7344 17.3757 22.2267 17.5048C21.719 17.6339 21.0169 16.5085 20.6586 14.9912C20.3003 13.4739 20.4214 12.1392 20.9292 12.0101C21.4369 11.881 22.1389 13.0064 22.4973 14.5237Z' fill='%236B46FE'/%3e%3cpath d='M28.4139 15.8282C27.6204 14.9686 26.0417 15.2016 24.8877 16.3486C23.7338 17.4956 23.4417 19.1222 24.2352 19.9818C25.0287 20.8414 26.6074 20.6084 27.7613 19.4614C28.9153 18.3144 29.2074 16.6878 28.4139 15.8282Z' fill='%236B46FE'/%3e%3cpath d='M22.1027 28.9905C22.6104 28.8614 22.7137 27.4512 22.3334 25.8407C21.9531 24.2303 21.2332 23.0294 20.7254 23.1585C20.2177 23.2876 20.1144 24.6978 20.4947 26.3083C20.875 27.9187 21.5949 29.1196 22.1027 28.9905Z' fill='%236B46FE'/%3e%3cpath d='M16.9269 16.6152C18.3917 17.0567 19.4621 17.8312 19.3176 18.3452C19.1731 18.8591 17.8686 18.9179 16.4037 18.4764C14.9389 18.0349 13.8686 17.2603 14.0131 16.7464C14.1575 16.2324 15.4621 16.1737 16.9269 16.6152Z' fill='%236B46FE'/%3e%3cpath d='M26.4342 22.4188C27.9889 22.8874 29.1322 23.6839 28.9877 24.1979C28.8432 24.7118 27.4657 24.7486 25.911 24.28C24.3563 23.8114 23.213 23.0148 23.3575 22.5009C23.502 21.9869 24.8795 21.9502 26.4342 22.4188Z' fill='%236B46FE'/%3e%3cpath d='M18.5752 21.3404C18.2119 20.9555 17.0205 21.5157 15.914 22.5915C14.8075 23.6673 14.2049 24.8514 14.5682 25.2363C14.9314 25.6211 16.1229 25.061 17.2294 23.9852C18.3359 22.9094 18.9384 21.7253 18.5752 21.3404Z' fill='%236B46FE'/%3e%3cpath d='M16 39C21 39.0001 23.5 39.0001 28 39' stroke='%236B46FE' stroke-width='3' stroke-linecap='round'/%3e%3c/svg%3e" />\n                </div>\n    \n                <p\n                  class="pera-wallet-connect-modal-desktop-mode__web-wallet__description">\n                  Connect with Pera Web to continue\n                </p>\n              </div>\n  \n              <button\n                id="pera-wallet-connect-web-wallet-launch-button"\n                class="pera-wallet-connect-modal-desktop-mode__web-wallet__launch-button">\n                Launch Pera Web\n    \n                <img src="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M13.0892 9.41009C13.4147 9.73553 13.4147 10.2632 13.0892 10.5886L8.08924 15.5886C7.7638 15.914 7.23616 15.914 6.91072 15.5886C6.58529 15.2632 6.58529 14.7355 6.91072 14.4101L11.3215 9.99935L6.91073 5.5886C6.58529 5.26317 6.58529 4.73553 6.91073 4.41009C7.23616 4.08466 7.7638 4.08466 8.08924 4.41009L13.0892 9.41009Z' fill='white'/%3e%3c/svg%3e" />\n              </button>\n            </div>\n            </div>\n          </div>\n  `,n=`\n  <div id="mobile-wallet-option" class="pera-wallet-accordion-item ${e?"pera-wallet-accordion-item--active":""}">\n            <a class="pera-wallet-accordion-toggle">\n            <button class="pera-wallet-accordion-toggle__button"></button>\n  \n              <img src="${w}" class="pera-wallet-accordion-icon" />\n  \n              <div class="pera-wallet-accordion-toggle__text">\n                Connect with\n  \n                <span class="pera-wallet-accordion-toggle__bold-color">\n                  Pera Mobile\n                </span>\n              </div>\n            </a>\n  \n            <div class="pera-wallet-accordion-item__content">\n              <div id="pera-wallet-connect-modal-connect-qr-code" class="pera-wallet-connect-qr-code-wrapper"></div>\n  \n              <div class="pera-wallet-connect-modal-desktop-mode__download-pera-container">\n                <p\n                  class="pera-wallet-connect-modal-desktop-mode__download-pera-description">\n                    Donâ€™t have Pera Wallet app?\n                </p>\n  \n                <button\n                  id="pera-wallet-connect-modal-desktop-mode-download-pera-button"\n                  class="pera-wallet-connect-modal-desktop-mode__download-pera-button">\n                  <img src="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect x='2' y='2' width='4.66667' height='4.66667' rx='1.2' stroke='%236B46FE' stroke-width='1.5'/%3e%3crect x='2' y='9.33203' width='4.66667' height='4.66667' rx='1.2' stroke='%236B46FE' stroke-width='1.5'/%3e%3crect x='9.33325' y='2' width='4.66667' height='4.66667' rx='1.2' stroke='%236B46FE' stroke-width='1.5'/%3e%3cpath d='M8.70581 9.5293H10.9411' stroke='%236B46FE' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M13.1765 12.668L14.6667 12.668' stroke='%236B46FE' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M13.1765 14L14.6667 14' stroke='%236B46FE' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M11.686 14L13.1762 14' stroke='%236B46FE' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M12.4314 9.5293H14.6667' stroke='%236B46FE' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M8.70581 10.2754H12.4313' stroke='%236B46FE' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M10.196 11.7656H11.6862' stroke='%236B46FE' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M10.196 12.5117H11.6862' stroke='%236B46FE' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M8.70581 13.2539H10.196' stroke='%236B46FE' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M8.70581 14H10.196' stroke='%236B46FE' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M10.196 11.0195H12.4313' stroke='%236B46FE' stroke-width='1.25' stroke-linejoin='round'/%3e%3c/svg%3e" alt="QR Icon" />\n  \n                  Download Pera Wallet\n                </button>\n              </div>\n            </div>\n          </div>`;return{mobileWalletOption:document.createRange().createContextualFragment(n),webWalletOption:document.createRange().createContextualFragment(t)}}(n);n?(null==t||t.appendChild(r),null==t||t.appendChild(i)):(null==t||t.appendChild(i),null==t||t.appendChild(r))}}connectedCallback(){var e;const t=this.getAttribute("should-display-new-badge"),n=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-web-new-label");"false"===t&&(null==n||n.setAttribute("style","display:none")),this.handleChangeView()}handleChangeView(){var e,t,n;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-connect-modal-desktop-mode-download-pera-button"),r=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("pera-wallet-connect-modal-download-pera-view-back-button"),s=null===(n=this.shadowRoot)||void 0===n?void 0:n.getElementById("pera-wallet-connect-web-wallet-launch-button");i&&i.addEventListener("click",(()=>{this.onClickDownload()})),r&&r.addEventListener("click",(()=>{this.onClickBack()})),s&&s.addEventListener("click",(()=>{this.webWalletConnect()})),this.renderQRCode(),this.checkWebWalletAvaliability()}webWalletConnect(){"true"===this.getAttribute("is-web-wallet-avaliable")&&window.onWebWalletConnect()}handleAccordion(e){var t,n;if(e.target instanceof Element){if(!e.target.classList.contains("pera-wallet-accordion-toggle__button"))return;if(this.shadowRoot&&(null===(t=e.target.parentElement)||void 0===t?void 0:t.parentElement)){const t=null===(n=e.target.parentElement)||void 0===n?void 0:n.parentElement;if(!t)return;if(t.classList.contains("pera-wallet-accordion-item--active"))return;const i=this.shadowRoot.querySelectorAll(".pera-wallet-accordion-item.pera-wallet-accordion-item--active");for(let e=0;e<i.length;e++)i[e].classList.remove("pera-wallet-accordion-item--active");t.classList.toggle("pera-wallet-accordion-item--active")}}}renderQRCode(){var e;const t=this.getAttribute("is-web-wallet-avaliable"),n="true"===this.getAttribute("compact-mode"),i="true"===this.getAttribute("single-account");let r=this.getAttribute("uri");i&&(r=`${r}&singleAccount=true`);let s="false"===t?250:215;if(n&&(s=190),r){const t=new a.default({width:s,height:s,type:"svg",data:r,image:p,dotsOptions:{color:"#000",type:"extra-rounded"},imageOptions:{crossOrigin:"anonymous",margin:8},cornersSquareOptions:{type:"extra-rounded"},cornersDotOptions:{type:"dot"}}),n=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-connect-modal-connect-qr-code");n&&t.append(n)}}onClickDownload(){if(this.shadowRoot){const e=this.shadowRoot.getElementById("pera-wallet-connect-modal-desktop-mode");e&&(e.classList.remove("pera-wallet-connect-modal-desktop-mode--default"),e.classList.add("pera-wallet-connect-modal-desktop-mode--download"))}}onClickBack(){if(this.shadowRoot){const e=this.shadowRoot.getElementById("pera-wallet-connect-modal-desktop-mode");e&&(e.classList.add("pera-wallet-connect-modal-desktop-mode--default"),e.classList.remove("pera-wallet-connect-modal-desktop-mode--download"))}}checkWebWalletAvaliability(){var e;if("false"===this.getAttribute("is-web-wallet-avaliable")){const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".pera-wallet-connect-modal-desktop-mode__default-view");null==t||t.classList.add("pera-wallet-connect-modal-desktop-mode__default-view--web-wallet-not-avaliable")}}}function M(e=!0){let t=i.PERA_WALLET_APP_DEEP_LINK;const n=i.detectBrowser();return e&&n&&(t=`${t}?browser=${encodeURIComponent(n)}`),t}var I=".pera-wallet-connect-modal-touch-screen-mode {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 46px;\n  padding: 4px;\n}\n\n.pera-wallet-connect-modal-touch-screen-mode--pending-message-view {\n  gap: 56px;\n  grid-template-rows: auto 48px;\n  height: 100%;\n  padding-bottom: 70px;\n}\n\n.pera-wallet-connect-modal-touch-screen-mode__launch-pera-wallet-button,\n.pera-wallet-connect-modal-touch-screen-mode__install-pera-wallet-button {\n  display: block;\n  padding: 14px;\n  border-radius: 12px;\n  text-decoration: none;\n  text-align: center;\n  font-size: 14px;\n  line-height: 20px;\n  letter-spacing: -0.09px;\n  font-weight: 500;\n}\n\n.pera-wallet-connect-modal-touch-screen-mode__launch-pera-wallet-button {\n  margin-bottom: 32px;\n  background-color: #6b46fe;\n  color: #ffffff;\n}\n\n.pera-wallet-connect-modal-touch-screen-mode__install-pera-wallet-button {\n  margin-bottom: 20px;\n  color: #6a6a81;\n  background-color: #ffffff;\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\n}\n\n.pera-wallet-connect-modal-touch-screen-mode__new-to-pera-box {\n  position: relative;\n  margin-bottom: 32px;\n  border-top: 1px solid #e6e8ee;\n}\n\n.pera-wallet-connect-modal-touch-screen-mode__new-to-pera-box__text {\n  position: absolute;\n  top: -25px;\n  right: calc(50% - 56px);\n  width: 116px;\n  color: #69708d;\n  background-color: #ffffff;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 24px;\n  letter-spacing: -0.04px;\n  text-align: center;\n}";d(I);const S=document.createElement("template");class C extends HTMLElement{constructor(){var e;if(super(),this.attachShadow({mode:"open"}),S.innerHTML='\n  <div class="pera-wallet-connect-modal-touch-screen-mode">\n    <pera-wallet-connect-modal-information-section></pera-wallet-connect-modal-information-section>\n\n    <div>\n      <a\n        id="pera-wallet-connect-modal-touch-screen-mode-launch-pera-wallet-button"\n        class="pera-wallet-connect-modal-touch-screen-mode__launch-pera-wallet-button"\n        rel="noopener noreferrer"\n        target="_blank">\n        Launch Pera Wallet\n      </a>\n\n      <div\n        class="pera-wallet-connect-modal-touch-screen-mode__new-to-pera-box">\n        <p\n          class="pera-wallet-connect-modal-touch-screen-mode__new-to-pera-box__text"\n          >\n          New to Pera?\n        </p>\n      </div>\n\n      <a\n        href="https://perawallet.app/download/"\n        class="pera-wallet-connect-modal-touch-screen-mode__install-pera-wallet-button"\n        rel="noopener noreferrer"\n        target="_blank">\n        Install Pera Wallet\n      </a>\n    </div>\n  </div>\n',this.shadowRoot){const t=document.createElement("style");t.textContent=I,this.shadowRoot.append(S.content.cloneNode(!0),t);const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-connect-modal-touch-screen-mode-launch-pera-wallet-button"),r=this.getAttribute("uri"),s="true"===this.getAttribute("single-account"),o=this.getAttribute("selected-account")||void 0;n&&r&&(n.setAttribute("href",function(e,t){let n=M(!1);i.isIOS()&&!n.includes("-wc")&&(n=n.replace("://","-wc://"));let r=`${n}wc?uri=${encodeURIComponent(e)}`;const s=i.detectBrowser();return i.isAndroid()&&(r=e),s&&(r=`${r}&browser=${encodeURIComponent(s)}`),(null==t?void 0:t.singleAccount)&&(r=`${r}&singleAccount=true`),(null==t?void 0:t.selectedAccount)&&(r=`${r}&selectedAccount=${t.selectedAccount}`),r}(r,{singleAccount:s,selectedAccount:o})),n.addEventListener("click",(()=>{this.onClickLaunch()})))}}onClickLaunch(){if(S.innerHTML=`\n    <div class="pera-wallet-connect-modal-touch-screen-mode pera-wallet-connect-modal-touch-screen-mode--pending-message-view">\n      <pera-wallet-connect-modal-pending-message-section should-use-sound="${this.getAttribute("should-use-sound")}"></pera-wallet-connect-modal-pending-message-section>\n    </div>\n  `,this.shadowRoot){const e=document.createElement("style");e.textContent=I,this.shadowRoot.innerHTML="",this.shadowRoot.append(S.content.cloneNode(!0),e)}}}var R='@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");\n.pera-wallet-modal {\n  --pera-wallet-modal-font-family: "Inter", sans-serif;\n  --pera-wallet-modal-compact-width: 380px;\n  --pera-wallet-modal-compact-height: 396px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 999999;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.pera-wallet-modal--select-account .pera-wallet-modal__body {\n  width: 480px;\n  height: 578px;\n  background-color: #ffffff;\n}\n.pera-wallet-modal--mobile .pera-wallet-modal__body {\n  top: 40px;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  max-width: unset;\n  height: calc(100 * var(--vh));\n  padding: 20px;\n  background-color: #ffffff;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02), 0 4px 12px rgba(0, 0, 0, 0.03);\n  border-radius: 20px 20px 0px 0px;\n  animation: 0.3s PeraWalletConnectMobileSlideIn ease-out;\n  overflow-y: auto;\n  transform: unset;\n}\n.pera-wallet-modal--mobile .pera-wallet-modal__body::before {\n  background-image: unset;\n}\n.pera-wallet-modal--compact:not(.pera-wallet-modal--mobile) .pera-wallet-modal__body {\n  width: var(--pera-wallet-modal-compact-width);\n  height: var(--pera-wallet-modal-compact-height);\n  padding: 0;\n}\n.pera-wallet-modal * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-smooth: antialiased;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.pera-wallet-modal ul,\n.pera-wallet-modal ol,\n.pera-wallet-modal li {\n  list-style-type: none;\n}\n\n.pera-wallet-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: auto;\n  height: 48px;\n  padding: 14px;\n  border: none;\n  border-radius: 12px;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-size: 14px;\n}\n\n.pera-wallet-modal__logo img {\n  display: block;\n  width: 32px;\n}\n\n.pera-wallet-modal__body {\n  position: relative;\n  top: 50%;\n  left: 50%;\n  width: 700px;\n  max-width: calc(100vw - 80px);\n  padding: 28px;\n  background-color: #f3f3f7;\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.08);\n  border-radius: 24px;\n  animation: 0.3s PeraWalletConnectSlideIn ease-out;\n  transform: translate(-50%, -50%);\n}\n.pera-wallet-modal__body::before {\n  --background-line: #1e0972 0 1.2px, transparent 0 calc(100% - 1.2px), #1e0972;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: -1;\n  content: "";\n  background-image: linear-gradient(var(--background-line)), linear-gradient(90deg, var(--background-line));\n  background-size: 116px 116px;\n  mix-blend-mode: overlay;\n  border-radius: 24px;\n  opacity: 0.8;\n  pointer-events: none;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-modal--desktop .pera-wallet-modal__body {\n    width: 100%;\n    max-width: calc(100vw - 32px);\n    padding: 24px;\n  }\n}\n@keyframes PeraWalletConnectSlideIn {\n  0% {\n    opacity: 0;\n    transform: translate(-50%, calc(-50% + 24px));\n  }\n  100% {\n    opacity: 1;\n    transform: translate(-50%, -50%);\n  }\n}\n@keyframes PeraWalletConnectMobileSlideIn {\n  0% {\n    top: 30%;\n    opacity: 0;\n  }\n  100% {\n    top: 40px;\n    opacity: 1;\n  }\n}';d(R);const N=document.createElement("template");let P=i.isMobile()?`${i.PERA_WALLET_MODAL_CLASSNAME} ${i.PERA_WALLET_MODAL_CLASSNAME}--mobile`:`${i.PERA_WALLET_MODAL_CLASSNAME} ${i.PERA_WALLET_MODAL_CLASSNAME}--desktop`;class k extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:"open"}),this.shadowRoot){const e=document.createElement("style");e.textContent=R,"true"===this.getAttribute("compact-mode")&&(P=`${P} ${i.PERA_WALLET_MODAL_CLASSNAME}--compact`);const t="true"===this.getAttribute("single-account"),n=this.getAttribute("selected-account");i.isMobile()?(N.innerHTML=`\n        <div class="${P}">\n          <div class="pera-wallet-modal__body" part="body">\n            <pera-wallet-modal-header modal-id="${i.PERA_WALLET_CONNECT_MODAL_ID}"></pera-wallet-modal-header>\n      \n            <pera-wallet-modal-touch-screen-mode uri="${this.getAttribute("uri")}" should-use-sound="${this.getAttribute("should-use-sound")}" single-account="${t}" selected-account="${n}"></pera-wallet-modal-touch-screen-mode>\n          </div>\n        </div>\n      `,this.shadowRoot.append(N.content.cloneNode(!0),e)):(N.innerHTML=`\n          <div class="${P}">\n            <div class="pera-wallet-modal__body">\n              <pera-wallet-modal-header modal-id="${i.PERA_WALLET_CONNECT_MODAL_ID}"></pera-wallet-modal-header/>\n        \n              <pera-wallet-modal-desktop-mode id="pera-wallet-modal-desktop-mode" uri="${this.getAttribute("uri")}" is-web-wallet-avaliable="${this.getAttribute("is-web-wallet-avaliable")}" should-display-new-badge="${this.getAttribute("should-display-new-badge")}" compact-mode="${this.getAttribute("compact-mode")}" promote-mobile="${this.getAttribute("promote-mobile")}" single-account="${t}"></pera-wallet-modal-desktop-mode>\n            </div>\n          </div>\n        `,this.shadowRoot.append(N.content.cloneNode(!0),e))}}}var T='@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");\n.pera-wallet-modal {\n  --pera-wallet-modal-font-family: "Inter", sans-serif;\n  --pera-wallet-modal-compact-width: 380px;\n  --pera-wallet-modal-compact-height: 396px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 999999;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.pera-wallet-modal--select-account .pera-wallet-modal__body {\n  width: 480px;\n  height: 578px;\n  background-color: #ffffff;\n}\n.pera-wallet-modal--mobile .pera-wallet-modal__body {\n  top: 40px;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  max-width: unset;\n  height: calc(100 * var(--vh));\n  padding: 20px;\n  background-color: #ffffff;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02), 0 4px 12px rgba(0, 0, 0, 0.03);\n  border-radius: 20px 20px 0px 0px;\n  animation: 0.3s PeraWalletConnectMobileSlideIn ease-out;\n  overflow-y: auto;\n  transform: unset;\n}\n.pera-wallet-modal--mobile .pera-wallet-modal__body::before {\n  background-image: unset;\n}\n.pera-wallet-modal--compact:not(.pera-wallet-modal--mobile) .pera-wallet-modal__body {\n  width: var(--pera-wallet-modal-compact-width);\n  height: var(--pera-wallet-modal-compact-height);\n  padding: 0;\n}\n.pera-wallet-modal * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-smooth: antialiased;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.pera-wallet-modal ul,\n.pera-wallet-modal ol,\n.pera-wallet-modal li {\n  list-style-type: none;\n}\n\n.pera-wallet-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: auto;\n  height: 48px;\n  padding: 14px;\n  border: none;\n  border-radius: 12px;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-size: 14px;\n}\n\n.pera-wallet-modal__logo img {\n  display: block;\n  width: 32px;\n}\n\n.pera-wallet-modal__body {\n  position: relative;\n  top: 50%;\n  left: 50%;\n  width: 700px;\n  max-width: calc(100vw - 80px);\n  padding: 28px;\n  background-color: #f3f3f7;\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.08);\n  border-radius: 24px;\n  animation: 0.3s PeraWalletConnectSlideIn ease-out;\n  transform: translate(-50%, -50%);\n}\n.pera-wallet-modal__body::before {\n  --background-line: #1e0972 0 1.2px, transparent 0 calc(100% - 1.2px), #1e0972;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: -1;\n  content: "";\n  background-image: linear-gradient(var(--background-line)), linear-gradient(90deg, var(--background-line));\n  background-size: 116px 116px;\n  mix-blend-mode: overlay;\n  border-radius: 24px;\n  opacity: 0.8;\n  pointer-events: none;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-modal--desktop .pera-wallet-modal__body {\n    width: 100%;\n    max-width: calc(100vw - 32px);\n    padding: 24px;\n  }\n}\n@keyframes PeraWalletConnectSlideIn {\n  0% {\n    opacity: 0;\n    transform: translate(-50%, calc(-50% + 24px));\n  }\n  100% {\n    opacity: 1;\n    transform: translate(-50%, -50%);\n  }\n}\n@keyframes PeraWalletConnectMobileSlideIn {\n  0% {\n    top: 30%;\n    opacity: 0;\n  }\n  100% {\n    top: 40px;\n    opacity: 1;\n  }\n}\n.pera-wallet-redirect-modal {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 56px;\n  grid-template-rows: auto 48px;\n  height: 100%;\n  padding: 4px;\n  padding-bottom: 70px;\n}\n\n.pera-wallet-redirect-modal__content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.pera-wallet-redirect-modal__content__title {\n  margin: 20px 0 8px;\n  color: #3c3c49;\n  font-size: 18px;\n  font-weight: 600;\n  line-height: 22px;\n  letter-spacing: -0.26px;\n}\n\n.pera-wallet-redirect-modal__content__description,\n.pera-wallet-redirect-modal__content__install-pera-text {\n  color: #3c3c49;\n  max-width: 271px;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 24px;\n  letter-spacing: -0.09px;\n  text-align: center;\n}\n\n.pera-wallet-redirect-modal__content__description {\n  margin-bottom: 24px;\n}\n\n.pera-wallet-redirect-modal__content__install-pera-text__link {\n  color: #6b46fe;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 24px;\n  letter-spacing: -0.09px;\n  text-align: center;\n}\n\n.pera-wallet-redirect-modal__launch-pera-wallet-button {\n  display: block;\n  padding: 14px;\n  color: #ffffff;\n  background-color: #6b46fe;\n  border-radius: 12px;\n  text-decoration: none;\n  text-align: center;\n  font-size: 14px;\n  line-height: 20px;\n  letter-spacing: -0.09px;\n  font-weight: 500;\n}';d(T);const O=document.createElement("template");O.innerHTML=`\n  <div class="pera-wallet-modal pera-wallet-modal--mobile">\n    <div class="pera-wallet-modal__body">\n      <pera-wallet-modal-header modal-id="${i.PERA_WALLET_REDIRECT_MODAL_ID}"></pera-wallet-modal-header/>\n\n      <div class="pera-wallet-redirect-modal">\n        <div class="pera-wallet-redirect-modal__content">\n          <img src="data:image/svg+xml,%3csvg width='120' height='38' viewBox='0 0 120 38' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cg clip-path='url(%23clip0_38844_290434)'%3e%3cpath d='M103.739 28.6746H109.565' stroke='%236B46FE' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M112.25 37H100.75C97.5731 37 95 34.2336 95 30.8182V9.18182C95 5.76636 97.5731 3 100.75 3H112.25C115.427 3 118 5.76636 118 9.18182V30.8182C118 34.2336 115.427 37 112.25 37Z' fill='%236B46FE' fill-opacity='0.1' stroke='%236B46FE' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'/%3e%3crect y='1' width='36' height='36' rx='7.76829' fill='%236B46FE' fill-opacity='0.1'/%3e%3cpath d='M19.6057 9.47351C20.1851 11.8819 19.9967 14.0022 19.1848 14.2093C18.373 14.4164 17.2452 12.6319 16.6658 10.2235C16.0864 7.81514 16.2748 5.69486 17.0867 5.48775C17.8985 5.28063 19.0263 7.06512 19.6057 9.47351Z' fill='%236B46FE'/%3e%3cpath d='M29.0775 11.5213C27.8045 10.1593 25.2795 10.5358 23.4378 12.3621C21.5961 14.1885 21.1352 16.7732 22.4083 18.1352C23.6814 19.4972 26.2064 19.1207 28.048 17.2943C29.8897 15.4679 30.3506 12.8832 29.0775 11.5213Z' fill='%236B46FE'/%3e%3cpath d='M19.0324 32.4518C19.8443 32.2446 20.0039 30.0045 19.3889 27.4483C18.774 24.8921 17.6173 22.9877 16.8055 23.1948C15.9937 23.402 15.834 25.6421 16.449 28.1983C17.064 30.7545 18.2206 32.6589 19.0324 32.4518Z' fill='%236B46FE'/%3e%3cpath d='M10.7016 12.818C13.0471 13.5132 14.7627 14.739 14.5336 15.5559C14.3045 16.3728 12.2175 16.4714 9.87199 15.7762C7.52653 15.0809 5.81087 13.8551 6.03996 13.0383C6.26906 12.2214 8.35615 12.1228 10.7016 12.818Z' fill='%236B46FE'/%3e%3cpath d='M25.9365 21.9967C28.4259 22.7346 30.2583 23.995 30.0292 24.8119C29.8001 25.6287 27.5963 25.6927 25.1069 24.9548C22.6174 24.2169 20.7851 22.9565 21.0141 22.1397C21.2432 21.3228 23.447 21.2588 25.9365 21.9967Z' fill='%236B46FE'/%3e%3cpath d='M13.3578 20.316C12.775 19.7063 10.8709 20.6007 9.10487 22.3139C7.33879 24.0271 6.37952 25.9102 6.96226 26.5199C7.54501 27.1297 9.4491 26.2352 11.2152 24.522C12.9813 22.8089 13.9405 20.9258 13.3578 20.316Z' fill='%236B46FE'/%3e%3cpath d='M70.2098 10L75.3049 15.0945L52 15.0945' stroke='%23D0CAE7' stroke-width='3'/%3e%3cpath d='M60.7902 29.5945L55.6951 24.5L79 24.5' stroke='%23D0CAE7' stroke-width='3'/%3e%3c/g%3e%3cdefs%3e%3cclipPath id='clip0_38844_290434'%3e%3crect width='120' height='38' fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e" />\n\n          <h1 class="pera-wallet-redirect-modal__content__title">\n            Can't Launch Pera\n          </h1>\n\n          <p class="pera-wallet-redirect-modal__content__description">\n            We couldn't redirect you to Pera Wallet automatically. Please try again.\n          </p>\n\n          <p class="pera-wallet-redirect-modal__content__install-pera-text">\n            Don't have Pera Wallet installed yet?\n            <br />\n            \n            <a\n              id="pera-wallet-redirect-modal-download-pera-link"\n              class="pera-wallet-redirect-modal__content__install-pera-text__link"\n              href="https://perawallet.app/download/"\n              rel="noopener noreferrer"\n              target="_blank">\n              Tap here to install.\n            </a>\n          </p>\n        </div>\n\n        <a\n          id="pera-wallet-redirect-modal-launch-pera-link"\n          class="pera-wallet-redirect-modal__launch-pera-wallet-button"\n          rel="noopener noreferrer"\n          target="_blank">\n          Launch Pera Wallet\n        </a>\n      </div>\n    </div>\n  </div>\n`;class L extends HTMLElement{constructor(){var e,t;if(super(),this.attachShadow({mode:"open"}),this.shadowRoot){const n=document.createElement("style");n.textContent=T,this.shadowRoot.append(O.content.cloneNode(!0),n);const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-redirect-modal-download-pera-link");null==i||i.addEventListener("click",(()=>{this.onClose()}));const r=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("pera-wallet-redirect-modal-launch-pera-link");null==r||r.addEventListener("click",(()=>{this.onClose(),window.open(M(),"_blank")}))}}connectedCallback(){const e=window.open(M(),"_blank");e&&!e.closed&&this.onClose()}onClose(){i.removeModalWrapperFromDOM(i.PERA_WALLET_REDIRECT_MODAL_ID)}}var D="data:image/svg+xml,%3csvg width='32' height='35' viewBox='0 0 32 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M18.2837 5.09271C19.0234 8.12325 18.7827 10.7913 17.7463 11.0519C16.7098 11.3126 15.27 9.06712 14.5304 6.03657C13.7908 3.00603 14.0315 0.337996 15.0679 0.0773547C16.1044 -0.183287 17.5441 2.06216 18.2837 5.09271Z' fill='%233C3C49'/%3e%3cpath d='M30.376 7.66915C28.7507 5.95537 25.5271 6.42918 23.1759 8.72745C20.8247 11.0257 20.2361 14.2781 21.8614 15.9919C23.4866 17.7057 26.7102 17.2319 29.0614 14.9336C31.4127 12.6354 32.0012 9.38294 30.376 7.66915Z' fill='%233C3C49'/%3e%3cpath d='M17.5511 34.0071C18.5876 33.7465 18.7914 30.9276 18.0064 27.711C17.2214 24.4945 15.7448 22.0982 14.7084 22.3589C13.6719 22.6195 13.4681 25.4383 14.2531 28.6549C15.0381 31.8715 16.5147 34.2677 17.5511 34.0071Z' fill='%233C3C49'/%3e%3cpath d='M6.91617 9.3015C9.9105 10.1763 12.1008 11.7187 11.8083 12.7466C11.5158 13.7745 8.85126 13.8986 5.85693 13.0239C2.8626 12.1491 0.672334 10.6067 0.964835 9.57881C1.25734 8.5509 3.92184 8.42674 6.91617 9.3015Z' fill='%233C3C49'/%3e%3cpath d='M26.3656 20.8508C29.5437 21.7793 31.883 23.3652 31.5905 24.3932C31.298 25.4211 28.4845 25.5017 25.3063 24.5732C22.1282 23.6448 19.7889 22.0588 20.0814 21.0309C20.3739 20.003 23.1874 19.9224 26.3656 20.8508Z' fill='%233C3C49'/%3e%3cpath d='M10.3069 18.7365C9.56299 17.9692 7.13209 19.0948 4.87736 21.2506C2.62264 23.4064 1.39791 25.776 2.14185 26.5432C2.8858 27.3105 5.3167 26.1849 7.57143 24.0291C9.82615 21.8733 11.0509 19.5037 10.3069 18.7365Z' fill='%233C3C49'/%3e%3c/svg%3e",q=".pera-wallet-connect-modal-information-section {\n  padding: 12px;\n  padding-right: 0;\n}\n.pera-wallet-connect-modal-information-section--mobile {\n  padding: 0;\n}\n.pera-wallet-connect-modal-information-section--mobile .pera-wallet-connect-modal-information-section__pera-icon {\n  margin-bottom: 16px;\n}\n.pera-wallet-connect-modal-information-section--mobile .pera-wallet-connect-modal-information-section__connect-pera-title {\n  margin-bottom: 8px;\n  color: #3c3c49;\n  font-size: 18px;\n  font-weight: 600;\n  line-height: 22px;\n  letter-spacing: -0.2px;\n}\n.pera-wallet-connect-modal-information-section--mobile .pera-wallet-connect-modal-information-section__title {\n  margin-bottom: 24px;\n  color: #3c3c49;\n  font-size: 14px;\n  line-height: 24px;\n  letter-spacing: -0.09px;\n  font-weight: 400;\n}\n.pera-wallet-connect-modal-information-section--mobile .pera-wallet-connect-modal-information-section__features-item__icon-wrapper {\n  background-color: #f2f3f8;\n}\n.pera-wallet-connect-modal-information-section--mobile .pera-wallet-connect-modal-information-section__features-item__description {\n  color: #6a6a81;\n}\n.pera-wallet-connect-modal-information-section * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-smooth: antialiased;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.pera-wallet-connect-modal-information-section__pera-icon {\n  margin-bottom: 32px;\n}\n\n.pera-wallet-connect-modal-information-section__title {\n  margin-bottom: 148px;\n  color: #3c3c49;\n  font-size: 20px;\n  font-weight: 500;\n  line-height: 24px;\n  letter-spacing: -0.5px;\n}\n\n.pera-wallet-connect-modal-information-section__secondary-title {\n  margin-bottom: 20px;\n  color: #9d9dae;\n  font-size: 11px;\n  font-weight: 600;\n  line-height: 18px;\n  letter-spacing: 0.06px;\n  text-transform: uppercase;\n}\n\n.pera-wallet-connect-modal-information-section__features-item {\n  display: grid;\n  align-items: center;\n  grid-template-columns: 36px auto;\n  gap: 16px;\n}\n.pera-wallet-connect-modal-information-section__features-item:not(:last-of-type) {\n  margin-bottom: 24px;\n}\n\n.pera-wallet-connect-modal-information-section__features-item__icon-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  background-color: #ffffff;\n  border-radius: 50%;\n}\n\n.pera-wallet-connect-modal-information-section__features-item__description {\n  color: #6a6a81;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 18px;\n  letter-spacing: 0.01px;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-connect-modal-information-section--desktop {\n    padding: 0;\n  }\n  .pera-wallet-connect-modal-information-section--desktop .pera-wallet-connect-modal-information-section__pera-icon {\n    margin-bottom: 12px;\n  }\n  .pera-wallet-connect-modal-information-section--desktop .pera-wallet-connect-modal-information-section__title {\n    margin-bottom: 24px;\n    font-size: 16px;\n    font-weight: 500;\n    line-height: 24px;\n    letter-spacing: -0.26px;\n  }\n  .pera-wallet-connect-modal-information-section--desktop .pera-wallet-connect-modal-information-section__features-item {\n    display: none;\n  }\n  .pera-wallet-connect-modal-information-section__secondary-title {\n    display: none;\n  }\n}";d(q);const B=document.createElement("template"),z=i.isMobile()?"pera-wallet-connect-modal-information-section pera-wallet-connect-modal-information-section--mobile":"pera-wallet-connect-modal-information-section pera-wallet-connect-modal-information-section--desktop";B.innerHTML=`\n  <section class="${z}">\n    <img\n      id="pera-wallet-connect-modal-information-section-pera-icon"\n      src="${D}"\n      class="pera-wallet-connect-modal-information-section__pera-icon"\n      alt="Pera Wallet Logo"\n    />\n\n    <h1 id="pera-wallet-connect-modal-information-section-connect-pera-mobile" class="pera-wallet-connect-modal-information-section__connect-pera-title">\n        Connect to Pera Wallet\n    </h1>\n\n    <h1 class="pera-wallet-connect-modal-information-section__title">\n      Simply the best Algorand wallet.\n    </h1>\n\n    <h2 id="pera-wallet-connect-modal-information-section-secondary-title" class="pera-wallet-connect-modal-information-section__secondary-title">\n      Features\n    </h2>\n\n    <ul>\n      <li class="pera-wallet-connect-modal-information-section__features-item">\n        <div class="pera-wallet-connect-modal-information-section__features-item__icon-wrapper">\n          <img src="data:image/svg+xml,%3csvg width='20' height='21' viewBox='0 0 20 21' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M2.5 10.1378C2.5 10.8378 3.025 11.6461 3.66667 11.9294L9.325 14.4461C9.75833 14.6378 10.25 14.6378 10.675 14.4461L16.3333 11.9294C16.975 11.6461 17.5 10.8378 17.5 10.1378M2.5 14.3044C2.5 15.0794 2.95833 15.7794 3.66667 16.0961L9.325 18.6128C9.75833 18.8044 10.25 18.8044 10.675 18.6128L16.3333 16.0961C17.0417 15.7794 17.5 15.0794 17.5 14.3044M10.8417 3.4043L15.7583 5.58763C17.175 6.21263 17.175 7.24596 15.7583 7.87096L10.8417 10.0543C10.2833 10.3043 9.36668 10.3043 8.80835 10.0543L3.89168 7.87096C2.47502 7.24596 2.47502 6.21263 3.89168 5.58763L8.80835 3.4043C9.36668 3.1543 10.2833 3.1543 10.8417 3.4043Z' stroke='%239D9DAE' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e" alt="Layer Icon" />\n        </div>\n        \n        <p\n          class="pera-wallet-connect-modal-information-section__features-item__description">\n          Connect to any Algorand dApp securely\n        </p>\n      </li>\n\n      <li class="pera-wallet-connect-modal-information-section__features-item">\n        <div\n          class="pera-wallet-connect-modal-information-section__features-item__icon-wrapper">\n          <img src="data:image/svg+xml,%3csvg width='24' height='25' viewBox='0 0 24 25' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M9.58033 12.3109C9.28744 12.018 8.81257 12.018 8.51967 12.3109C8.22678 12.6038 8.22678 13.0787 8.51967 13.3716L9.58033 12.3109ZM10.66 14.4512L10.1297 14.9816C10.4226 15.2745 10.8974 15.2745 11.1903 14.9816L10.66 14.4512ZM15.4903 10.6816C15.7832 10.3887 15.7832 9.91381 15.4903 9.62092C15.1974 9.32803 14.7226 9.32803 14.4297 9.62092L15.4903 10.6816ZM19.84 8.09125C19.84 8.50546 20.1758 8.84125 20.59 8.84125C21.0042 8.84125 21.34 8.50546 21.34 8.09125H19.84ZM18.5 5.07125L18.2368 5.77355L18.2373 5.77375L18.5 5.07125ZM13.51 3.20125L13.7732 2.49894L13.7724 2.49866L13.51 3.20125ZM10.49 3.20125L10.2276 2.49865L10.2256 2.49941L10.49 3.20125ZM5.5 5.08125L5.76268 5.78375L5.76442 5.78309L5.5 5.08125ZM5.14 18.9612L4.69102 19.562L4.69135 19.5623L5.14 18.9612ZM9.44 22.1713L9.89069 21.5718L9.88866 21.5702L9.44 22.1713ZM14.58 22.1713L14.1313 21.5702L14.1293 21.5718L14.58 22.1713ZM18.88 18.9612L19.3287 19.5623L19.329 19.562L18.88 18.9612ZM21.36 8.09125C21.36 7.67704 21.0242 7.34125 20.61 7.34125C20.1958 7.34125 19.86 7.67704 19.86 8.09125H21.36ZM8.51967 13.3716L10.1297 14.9816L11.1903 13.9209L9.58033 12.3109L8.51967 13.3716ZM11.1903 14.9816L15.4903 10.6816L14.4297 9.62092L10.1297 13.9209L11.1903 14.9816ZM21.34 8.09125C21.34 7.29392 21.0398 6.50041 20.5931 5.85456C20.1463 5.20881 19.5097 4.64807 18.7627 4.36875L18.2373 5.77375C18.6403 5.92443 19.0487 6.25869 19.3595 6.70794C19.6702 7.15709 19.84 7.65858 19.84 8.09125H21.34ZM18.7632 4.36895L13.7732 2.49895L13.2468 3.90355L18.2368 5.77355L18.7632 4.36895ZM13.7724 2.49866C13.2479 2.30277 12.6051 2.21875 12 2.21875C11.3949 2.21875 10.7521 2.30277 10.2276 2.49866L10.7524 3.90384C11.0579 3.78973 11.5101 3.71875 12 3.71875C12.4899 3.71875 12.9421 3.78973 13.2476 3.90384L13.7724 2.49866ZM10.2256 2.49941L5.23558 4.37941L5.76442 5.78309L10.7544 3.90309L10.2256 2.49941ZM5.23733 4.37875C4.49043 4.65803 3.85398 5.2186 3.40741 5.86265C2.96095 6.50656 2.66 7.2978 2.66 8.09125H4.16C4.16 7.6647 4.32906 7.16594 4.64009 6.71735C4.95103 6.2689 5.35957 5.93447 5.76268 5.78375L5.23733 4.37875ZM2.66 8.09125V15.5212H4.16V8.09125H2.66ZM2.66 15.5212C2.66 16.2602 2.8989 17.059 3.24874 17.7545C3.59871 18.4503 4.09802 19.1188 4.69102 19.562L5.58899 18.3605C5.23198 18.0937 4.86629 17.6322 4.58877 17.0805C4.31111 16.5285 4.16 15.9623 4.16 15.5212H2.66ZM4.69135 19.5623L8.99135 22.7723L9.88866 21.5702L5.58866 18.3602L4.69135 19.5623ZM8.98932 22.7707C9.84721 23.4157 10.9462 23.7163 12.01 23.7163C13.0738 23.7163 14.1728 23.4157 15.0307 22.7707L14.1293 21.5718C13.5772 21.9868 12.8112 22.2163 12.01 22.2163C11.2088 22.2163 10.4428 21.9868 9.89068 21.5718L8.98932 22.7707ZM15.0287 22.7723L19.3287 19.5623L18.4313 18.3602L14.1313 21.5702L15.0287 22.7723ZM19.329 19.562C19.922 19.1188 20.4213 18.4503 20.7713 17.7545C21.1211 17.059 21.36 16.2602 21.36 15.5212H19.86C19.86 15.9623 19.7089 16.5285 19.4312 17.0805C19.1537 17.6322 18.788 18.0937 18.431 18.3605L19.329 19.562ZM21.36 15.5212V8.09125H19.86V15.5212H21.36Z' fill='%239D9DAE'/%3e%3c/svg%3e" alt="Tick Icon" />\n        </div>\n\n        <p\n          class="pera-wallet-connect-modal-information-section__features-item__description">\n          Your private keys are safely stored locally\n        </p>\n      </li>\n\n      <li class="pera-wallet-connect-modal-information-section__features-item">\n        <div\n          class="pera-wallet-connect-modal-information-section__features-item__icon-wrapper">\n          <img src="data:image/svg+xml,%3csvg width='20' height='21' viewBox='0 0 20 21' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M18.05 9.67014L17.3198 9.49894L18.05 9.67014ZM17.2333 13.1535L16.5031 12.9823L16.5029 12.9835L17.2333 13.1535ZM12.55 17.1285L12.6218 16.3818L12.6098 16.3809L12.55 17.1285ZM11.2 16.9035L11.376 16.1744L11.3737 16.1739L11.2 16.9035ZM9.8 16.5701L9.97372 15.8405L9.97324 15.8404L9.8 16.5701ZM6.06667 10.5451L6.79687 10.7163L6.79696 10.7159L6.06667 10.5451ZM6.88334 7.05347L6.15327 6.88169L6.15304 6.88267L6.88334 7.05347ZM7.5 5.22014L8.17303 5.55114L8.17523 5.54659L7.5 5.22014ZM12.9167 3.32014L12.744 4.05L12.7461 4.05049L12.9167 3.32014ZM14.3083 3.64514L14.4791 2.91485L14.4789 2.91479L14.3083 3.64514ZM10.5917 18.0285L10.359 17.3155L10.3572 17.3161L10.5917 18.0285ZM9.27501 18.4618L9.50516 19.1756L9.50947 19.1742L9.27501 18.4618ZM3.15001 15.3285L2.43654 15.5597L2.43672 15.5603L3.15001 15.3285ZM2.08334 12.0368L1.36953 12.267L1.36987 12.268L2.08334 12.0368ZM5.20834 5.91182L5.43849 6.62565L5.44281 6.62423L5.20834 5.91182ZM6.52501 5.47848L6.29831 4.76352L6.29055 4.76608L6.52501 5.47848ZM10.7177 7.35149C10.3162 7.24967 9.90818 7.49261 9.80635 7.89411C9.70453 8.29561 9.94746 8.70364 10.349 8.80546L10.7177 7.35149ZM14.3906 9.83046C14.7921 9.93229 15.2002 9.68935 15.302 9.28785C15.4038 8.88635 15.1609 8.47832 14.7594 8.37649L14.3906 9.83046ZM9.90211 10.5768C9.50076 10.4743 9.09238 10.7167 8.98996 11.118C8.88755 11.5194 9.12988 11.9278 9.53124 12.0302L9.90211 10.5768ZM11.9479 12.6469C12.3493 12.7493 12.7576 12.5069 12.8601 12.1056C12.9625 11.7042 12.7201 11.2958 12.3188 11.1934L11.9479 12.6469ZM17.3198 9.49894L16.5031 12.9823L17.9635 13.3247L18.7802 9.84133L17.3198 9.49894ZM16.5029 12.9835C16.168 14.4224 15.6979 15.2955 15.1165 15.793C14.5605 16.2688 13.7912 16.4944 12.6218 16.3819L12.4782 17.875C13.9088 18.0126 15.1312 17.7548 16.0918 16.9327C17.0271 16.1323 17.5986 14.8928 17.9638 13.3234L16.5029 12.9835ZM12.6098 16.3809C12.2388 16.3512 11.8281 16.2835 11.376 16.1744L11.024 17.6325C11.5386 17.7567 12.0279 17.8391 12.4902 17.8761L12.6098 16.3809ZM11.3737 16.1739L9.97372 15.8405L9.62629 17.2997L11.0263 17.6331L11.3737 16.1739ZM9.97324 15.8404C8.30732 15.4449 7.40652 14.876 6.96107 14.1588C6.51616 13.4425 6.40566 12.385 6.79687 10.7163L5.33647 10.3739C4.91101 12.1887 4.92968 13.7311 5.68685 14.9502C6.44349 16.1685 7.81769 16.8704 9.62676 17.2999L9.97324 15.8404ZM6.79696 10.7159L7.61363 7.22428L6.15304 6.88267L5.33638 10.3743L6.79696 10.7159ZM7.6134 7.22525C7.77277 6.54795 7.95691 5.99053 8.17301 5.55113L6.82699 4.88915C6.54309 5.46641 6.32724 6.14234 6.15327 6.88169L7.6134 7.22525ZM8.17523 5.54659C8.59604 4.67619 9.11898 4.20234 9.77488 3.97598C10.4657 3.73759 11.4133 3.73525 12.744 4.05L13.0893 2.59028C11.6367 2.2467 10.3635 2.18603 9.28554 2.55805C8.17269 2.94211 7.37896 3.74743 6.82478 4.89369L8.17523 5.54659ZM12.7461 4.05049L14.1378 4.37549L14.4789 2.91479L13.0872 2.58979L12.7461 4.05049ZM14.1375 4.37543C15.8111 4.76687 16.7126 5.33603 17.1575 6.05304C17.6023 6.77006 17.7112 7.82942 17.3198 9.49894L18.7802 9.84133C19.2054 8.02753 19.1893 6.48272 18.4321 5.26224C17.6749 4.04175 16.2972 3.34008 14.4791 2.91485L14.1375 4.37543ZM12.1294 16.5075C11.6911 16.8045 11.1123 17.0697 10.359 17.3155L10.8243 18.7415C11.6544 18.4706 12.3756 18.1525 12.9706 17.7494L12.1294 16.5075ZM10.3572 17.3161L9.04055 17.7494L9.50947 19.1742L10.8261 18.7409L10.3572 17.3161ZM9.04486 17.748C7.46037 18.2589 6.43607 18.2362 5.71663 17.8681C4.99693 17.4999 4.37829 16.6816 3.8633 15.0967L2.43672 15.5603C2.99673 17.2837 3.78642 18.5654 5.03339 19.2035C6.28062 19.8416 7.78131 19.7314 9.50516 19.1756L9.04486 17.748ZM3.86348 15.0973L2.79682 11.8056L1.36987 12.268L2.43654 15.5597L3.86348 15.0973ZM2.79716 11.8067C2.28607 10.2215 2.3068 9.19457 2.67362 8.4739C3.03983 7.75443 3.85506 7.13616 5.43849 6.62563L4.9782 5.198C3.25329 5.75414 1.97269 6.54421 1.33682 7.79348C0.701551 9.04157 0.813948 10.5438 1.36953 12.267L2.79716 11.8067ZM5.44281 6.62423L6.75947 6.19089L6.29055 4.76608L4.97388 5.19941L5.44281 6.62423ZM6.75169 6.19341C7.08205 6.08866 7.37424 6.00724 7.63942 5.95707L7.36058 4.48321C7.00909 4.54971 6.6513 4.65164 6.29833 4.76356L6.75169 6.19341ZM10.349 8.80546L14.3906 9.83046L14.7594 8.37649L10.7177 7.35149L10.349 8.80546ZM9.53124 12.0302L11.9479 12.6469L12.3188 11.1934L9.90211 10.5768L9.53124 12.0302Z' fill='%239D9DAE'/%3e%3c/svg%3e" alt="Note Icon" />\n        </div>\n\n        <p\n          class="pera-wallet-connect-modal-information-section__features-item__description">\n          View NFTs, buy and swap crypto and more\n        </p>\n      </li>\n    </ul>\n  </section>\n`;class U extends HTMLElement{constructor(){var e,t,n,r;super(),this.attachShadow({mode:"open"});const s="true"===(null===(e=document.querySelector("pera-wallet-connect-modal"))||void 0===e?void 0:e.getAttribute("compact-mode"));if(this.shadowRoot&&(!s&&!i.isMobile()||i.isMobile())){const e=document.createElement("style");e.textContent=q,this.shadowRoot.append(B.content.cloneNode(!0),e),i.isMobile()?null===(t=this.shadowRoot.getElementById("pera-wallet-connect-modal-information-section-title"))||void 0===t||t.setAttribute("style","display: none;"):(null===(n=this.shadowRoot.getElementById("pera-wallet-connect-modal-information-section-pera-icon"))||void 0===n||n.setAttribute("src","data:image/svg+xml,%3csvg width='84' height='38' viewBox='0 0 84 38' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M19.806 8.62773C20.4416 11.2609 20.2268 13.5772 19.3262 13.8012C18.4256 14.0253 17.1803 12.0723 16.5448 9.43906C15.9092 6.80585 16.1241 4.48959 17.0246 4.26555C17.9252 4.04151 19.1705 5.99452 19.806 8.62773Z' fill='%233C3C49'/%3e%3cpath d='M30.3007 10.8917C28.8932 9.3999 26.0929 9.80424 24.0461 11.7948C21.9994 13.7853 21.4812 16.6082 22.8887 18.1C24.2962 19.5917 27.0964 19.1874 29.1432 17.1969C31.1899 15.2064 31.7082 12.3834 30.3007 10.8917Z' fill='%233C3C49'/%3e%3cpath d='M19.1061 33.734C20.0067 33.5099 20.1899 31.0627 19.5153 28.2678C18.8408 25.473 17.5639 23.3889 16.6633 23.613C15.7627 23.837 15.5795 26.2843 16.2541 29.0791C16.9286 31.874 18.2056 33.958 19.1061 33.734Z' fill='%233C3C49'/%3e%3cpath d='M9.92571 12.2574C12.5239 13.0236 14.4224 14.3678 14.1662 15.2597C13.9099 16.1517 11.5959 16.2536 8.99771 15.4874C6.3995 14.7212 4.50098 13.377 4.75724 12.4851C5.0135 11.5931 7.3275 11.4912 9.92571 12.2574Z' fill='%233C3C49'/%3e%3cpath d='M26.7892 22.3292C29.5469 23.1424 31.5747 24.5247 31.3184 25.4167C31.0621 26.3086 28.6189 26.3724 25.8612 25.5592C23.1035 24.7459 21.0757 23.3636 21.3319 22.4717C21.5882 21.5797 24.0315 21.5159 26.7892 22.3292Z' fill='%233C3C49'/%3e%3cpath d='M12.8493 20.4577C12.205 19.7898 10.0916 20.7619 8.12896 22.6289C6.16631 24.4959 5.09759 26.5509 5.7419 27.2188C6.38622 27.8867 8.49958 26.9146 10.4622 25.0476C12.4249 23.1806 13.4936 21.1256 12.8493 20.4577Z' fill='%233C3C49'/%3e%3cpath d='M41.691 12.5347V11.9635H39.3366V27.1957H41.691V23.0915C41.691 22.6472 41.691 22.2876 41.6482 21.801H41.691C42.5471 23.1973 44.0026 23.9377 45.7148 23.9377C48.6043 23.9377 51.1299 21.7587 51.1299 17.7179C51.1299 13.7617 48.6043 11.625 45.7148 11.625C44.0668 11.625 42.6113 12.3443 41.691 13.7617H41.6482C41.691 13.2963 41.691 12.9578 41.691 12.5347ZM45.1155 21.9279C42.9324 21.9068 41.6696 20.0662 41.6696 17.6967C41.6696 15.4542 42.9324 13.656 45.1155 13.6348C47.2559 13.6137 48.6685 15.2638 48.6685 17.7179C48.6685 20.2354 47.2559 21.9491 45.1155 21.9279Z' fill='%233C3C49'/%3e%3cpath d='M63.4932 16.7236C63.4932 13.8041 61.1388 11.625 57.9283 11.625C54.5037 11.625 52.1279 13.931 52.1279 17.7814C52.1279 21.4836 54.4609 23.9377 57.9283 23.9377C60.7749 23.9377 62.8939 22.2876 63.3862 20.0239H60.8177C60.4111 21.1663 59.2981 21.9279 57.9283 21.9279C56.1732 21.9279 54.889 20.6797 54.6107 18.6064H63.4932V16.7236ZM57.9283 13.6348C59.662 13.6348 60.8606 14.8195 61.1174 16.5332H54.6321C54.9318 14.883 56.1518 13.6348 57.9283 13.6348Z' fill='%233C3C49'/%3e%3cpath d='M65.224 23.5992H67.5784V17.0409C67.5784 14.7984 68.8198 13.6348 70.7462 13.6348H72.009V11.625H71.003C69.2693 11.625 68.1991 12.7674 67.5784 13.7617H67.5356V11.9635H65.224V23.5992Z' fill='%233C3C49'/%3e%3cpath d='M83.0154 21.5683C82.6944 21.5683 82.5445 21.3779 82.5445 20.9971V15.8773C82.5445 13.4233 81.3459 11.625 77.8144 11.625C74.3898 11.625 72.8273 13.3175 72.6561 15.7292H75.0105C75.1603 14.4176 76.2091 13.6348 77.8144 13.6348C79.1842 13.6348 80.1259 14.2272 80.1259 15.158C80.1259 15.9196 79.5909 16.3851 77.8358 16.3851H76.894C74.0901 16.3851 72.2066 17.5063 72.2066 20.0662C72.2066 22.753 74.1972 23.98 76.5301 23.98C78.2638 23.98 79.7407 23.2184 80.3186 21.5894C80.3828 22.7742 81.1747 23.5992 82.673 23.5992H84V21.5683H83.0154ZM80.1902 18.1833C80.1902 20.8067 78.7561 21.9491 76.9154 21.9491C75.3101 21.9491 74.668 21.0182 74.668 20.0662C74.668 19.1565 75.2245 18.416 76.9368 18.416H77.2793C78.9273 18.416 79.9547 17.8448 80.1688 16.8505H80.1902V18.1833Z' fill='%233C3C49'/%3e%3c/svg%3e"),null===(r=this.shadowRoot.getElementById("pera-wallet-connect-modal-information-section-connect-pera-mobile"))||void 0===r||r.setAttribute("style","display: none;"))}}}var F='@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");\n.pera-wallet-modal {\n  --pera-wallet-modal-font-family: "Inter", sans-serif;\n  --pera-wallet-modal-compact-width: 380px;\n  --pera-wallet-modal-compact-height: 396px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 999999;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.pera-wallet-modal--select-account .pera-wallet-modal__body {\n  width: 480px;\n  height: 578px;\n  background-color: #ffffff;\n}\n.pera-wallet-modal--mobile .pera-wallet-modal__body {\n  top: 40px;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  max-width: unset;\n  height: calc(100 * var(--vh));\n  padding: 20px;\n  background-color: #ffffff;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02), 0 4px 12px rgba(0, 0, 0, 0.03);\n  border-radius: 20px 20px 0px 0px;\n  animation: 0.3s PeraWalletConnectMobileSlideIn ease-out;\n  overflow-y: auto;\n  transform: unset;\n}\n.pera-wallet-modal--mobile .pera-wallet-modal__body::before {\n  background-image: unset;\n}\n.pera-wallet-modal--compact:not(.pera-wallet-modal--mobile) .pera-wallet-modal__body {\n  width: var(--pera-wallet-modal-compact-width);\n  height: var(--pera-wallet-modal-compact-height);\n  padding: 0;\n}\n.pera-wallet-modal * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-smooth: antialiased;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.pera-wallet-modal ul,\n.pera-wallet-modal ol,\n.pera-wallet-modal li {\n  list-style-type: none;\n}\n\n.pera-wallet-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: auto;\n  height: 48px;\n  padding: 14px;\n  border: none;\n  border-radius: 12px;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-size: 14px;\n}\n\n.pera-wallet-modal__logo img {\n  display: block;\n  width: 32px;\n}\n\n.pera-wallet-modal__body {\n  position: relative;\n  top: 50%;\n  left: 50%;\n  width: 700px;\n  max-width: calc(100vw - 80px);\n  padding: 28px;\n  background-color: #f3f3f7;\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.08);\n  border-radius: 24px;\n  animation: 0.3s PeraWalletConnectSlideIn ease-out;\n  transform: translate(-50%, -50%);\n}\n.pera-wallet-modal__body::before {\n  --background-line: #1e0972 0 1.2px, transparent 0 calc(100% - 1.2px), #1e0972;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: -1;\n  content: "";\n  background-image: linear-gradient(var(--background-line)), linear-gradient(90deg, var(--background-line));\n  background-size: 116px 116px;\n  mix-blend-mode: overlay;\n  border-radius: 24px;\n  opacity: 0.8;\n  pointer-events: none;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-modal--desktop .pera-wallet-modal__body {\n    width: 100%;\n    max-width: calc(100vw - 32px);\n    padding: 24px;\n  }\n}\n@keyframes PeraWalletConnectSlideIn {\n  0% {\n    opacity: 0;\n    transform: translate(-50%, calc(-50% + 24px));\n  }\n  100% {\n    opacity: 1;\n    transform: translate(-50%, -50%);\n  }\n}\n@keyframes PeraWalletConnectMobileSlideIn {\n  0% {\n    top: 30%;\n    opacity: 0;\n  }\n  100% {\n    top: 40px;\n    opacity: 1;\n  }\n}\n.pera-wallet-connect-modal-pending-message-section {\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: auto 48px;\n  gap: 56px;\n  height: 100%;\n  padding: 4px;\n  padding-bottom: 70px;\n}\n\n.pera-wallet-connect-modal-pending-message {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  text-align: center;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view {\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  height: 100%;\n  margin-top: 10px;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view__title {\n  margin: 16px 0 12px;\n  color: #3c3c49;\n  font-size: 18px;\n  font-weight: 500;\n  line-height: 24px;\n  letter-spacing: -0.26px;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view__description {\n  color: #6a6a81;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 24px;\n  letter-spacing: -0.01px;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view__button {\n  display: block;\n  width: 100%;\n  padding: 14px;\n  border-radius: 12px;\n  text-decoration: none;\n  text-align: center;\n  font-size: 14px;\n  line-height: 20px;\n  letter-spacing: -0.09px;\n  font-weight: 500;\n  color: #ffffff;\n  background-color: #6b46fe;\n  border: none;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 20px;\n  padding: 16px;\n  background: #ffffff;\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\n  border-radius: 12px;\n  text-decoration: none;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__image {\n  width: 24px;\n  height: 24px;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__title-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 4px;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__title {\n  margin: 0;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: -0.1px;\n  color: #3c3c49;\n}\n.pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__description {\n  /* stylelint-disable value-no-vendor-prefix */\n  /* stylelint-disable  property-no-vendor-prefix */\n  display: -webkit-box;\n  max-width: 100%;\n  -webkit-line-clamp: 2;\n  /* autoprefixer: ignore next */\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  /* stylelint-enable value-no-vendor-prefix */\n  /* stylelint-enable property-no-vendor-prefix */\n  margin: 0;\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 18px;\n  letter-spacing: 0.01px;\n  color: #9d9dae;\n}\n\n.pera-wallet-connect-modal-pending-message__animation-wrapper {\n  width: 56px;\n  height: 56px;\n  background-color: #6b46fe;\n  border-radius: 50%;\n}\n\n.pera-wallet-connect-modal-pending-message__text {\n  max-width: 271px;\n  margin-top: 24px;\n  color: #3c3c49;\n  font-size: 18px;\n  font-weight: 500;\n  line-height: 28px;\n  letter-spacing: -0.26px;\n}\n\n.pera-wallet-connect-modal-pending-message__cancel-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  padding: 14px;\n  color: #6a6a81;\n  background-color: #ffffff;\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\n  border-radius: 12px;\n  text-decoration: none;\n  text-align: center;\n  font-size: 14px;\n  line-height: 20px;\n  letter-spacing: -0.09px;\n  font-weight: 500;\n  border: none;\n}';d(F);const j=document.createElement("template");j.innerHTML='\n  <div class="pera-wallet-connect-modal-pending-message-section">\n    <div class="pera-wallet-connect-modal-pending-message">\n      <div id="pera-wallet-connect-modal-pending-message-animation-wrapper" class="pera-wallet-connect-modal-pending-message__animation-wrapper"></div>\n\n      <div class="pera-wallet-connect-modal-pending-message__text">\n        Please wait while we connect you to Pera Wallet\n      </div>\n    </div>\n\n    <button\n      id="pera-wallet-connect-modal-pending-message-cancel-button"\n      class="pera-wallet-button pera-wallet-connect-modal-pending-message__cancel-button">\n        Cancel\n    </button>\n  </div>\n\n  <div id="pera-wallet-connect-modal-pending-message-audio-wrapper"></div>\n';const V=`\n  <div class="pera-wallet-connect-modal-pending-message--try-again-view">\n    <div>\n      <img src="${D}" alt="Pera Wallet Logo" />\n\n      <h1 class="pera-wallet-connect-modal-pending-message--try-again-view__title">\n        Couldnâ€™t establish connection\n      </h1>\n\n      <p class="pera-wallet-connect-modal-pending-message--try-again-view__description">\n        Having issues? Before trying again, make sure to read the support article below and apply the possible solutions.\n      </p>\n    </div>\n\n    <div>\n      <a\n        href="https://support.perawallet.app/en/article/resolving-walletconnect-issues-1tolptm/"\n        target="_blank"\n        rel="noopener noreferrer"\n        class="pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor">\n        <img\n          class="pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__image"\n          src="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M8 22.3199C7.72 22.3199 7.42998 22.2499 7.16998 22.1099C6.59998 21.8099 6.25 21.2099 6.25 20.5699V19.15C3.23 18.84 1.25 16.6199 1.25 13.4399V7.43994C1.25 3.99994 3.56 1.68994 7 1.68994H17C20.44 1.68994 22.75 3.99994 22.75 7.43994V13.4399C22.75 16.8799 20.44 19.1899 17 19.1899H13.23L8.96997 22.03C8.67997 22.22 8.34 22.3199 8 22.3199ZM7 3.17993C4.42 3.17993 2.75 4.84993 2.75 7.42993V13.43C2.75 16.01 4.42 17.68 7 17.68C7.41 17.68 7.75 18.02 7.75 18.43V20.56C7.75 20.69 7.83 20.75 7.88 20.78C7.93001 20.81 8.03001 20.84 8.14001 20.77L12.59 17.81C12.71 17.73 12.86 17.68 13.01 17.68H17.01C19.59 17.68 21.26 16.01 21.26 13.43V7.42993C21.26 4.84993 19.59 3.17993 17.01 3.17993H7ZM11.9998 12.11C11.5898 12.11 11.2498 11.77 11.2498 11.36V11.15C11.2498 10.0038 12.0798 9.4336 12.4082 9.20798L12.4198 9.20001C12.7898 8.95001 12.9098 8.78002 12.9098 8.52002C12.9098 8.02002 12.4998 7.60999 11.9998 7.60999C11.4998 7.60999 11.0898 8.02002 11.0898 8.52002C11.0898 8.93002 10.7498 9.27002 10.3398 9.27002C9.92984 9.27002 9.58984 8.93002 9.58984 8.52002C9.58984 7.19002 10.6698 6.10999 11.9998 6.10999C13.3298 6.10999 14.4098 7.19002 14.4098 8.52002C14.4098 9.66002 13.5698 10.23 13.2598 10.44C12.8698 10.7 12.7498 10.87 12.7498 11.15V11.36C12.7498 11.78 12.4098 12.11 11.9998 12.11ZM11.25 13.85C11.25 14.26 11.58 14.6 12 14.6C12.42 14.6 12.75 14.26 12.75 13.85C12.75 13.44 12.41 13.1 12 13.1C11.59 13.1 11.25 13.44 11.25 13.85Z' fill='%236B46FE'/%3e%3c/svg%3e"\n          alt="Help Icon"\n        />\n\n        <div>\n          <div\n            class="pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__title-wrapper">\n            <h1\n              class="pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__title">\n                Resolving WalletConnect issues\n            </h1>\n\n            <img src="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.3287 10.0983C10.9574 10.0983 10.6564 9.79734 10.6564 9.42604L10.6564 6.29525L5.14866 11.803C4.88611 12.0655 4.46044 12.0655 4.19789 11.803C3.93534 11.5404 3.93534 11.1147 4.19789 10.8522L9.70561 5.34447L6.57482 5.34447C6.20352 5.34447 5.90252 5.04347 5.90252 4.67218C5.90252 4.30088 6.20352 3.99988 6.57482 3.99988L11.3287 3.99988C11.507 3.99988 11.678 4.07071 11.8041 4.19679C11.9301 4.32287 12.001 4.49387 12.001 4.67218L12.001 9.42604C12.001 9.79734 11.7 10.0983 11.3287 10.0983Z' fill='%239D9DAE'/%3e%3c/svg%3e" alt="Send Icon"/>\n          </div>\n\n          <p\n            class="pera-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__description">\n            Unfortunately there are several known issues related to WalletConnect that our team is working on. Some of these issues are related to the WalletConnect JavaScript implementation on the dApp ...\n          </p>\n        </div>\n      </a>\n\n      <button id="pera-wallet-connect-modal-pending-message-try-again-button" class="pera-wallet-connect-button pera-wallet-connect-modal-pending-message--try-again-view__button">\n        Close & Try Again\n      </button>\n    </div>\n  </div>\n  `;class K extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:"open"}),this.shadowRoot){const e=document.createElement("style");e.textContent=F,this.shadowRoot.append(j.content.cloneNode(!0),e)}}connectedCallback(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-connect-modal-pending-message-cancel-button");null==t||t.addEventListener("click",(()=>{this.onClose()})),this.addAudioForConnection(),this.renderLottieAnimation(),setTimeout((()=>{var e;if(j.innerHTML=V,this.shadowRoot){const t=document.createElement("style");t.textContent=F,this.shadowRoot.innerHTML="",this.shadowRoot.append(j.content.cloneNode(!0),t);const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-connect-modal-pending-message-try-again-button");null==n||n.addEventListener("click",(()=>{this.onClose()}))}}),3e4)}onClose(){i.removeModalWrapperFromDOM(i.PERA_WALLET_CONNECT_MODAL_ID)}addAudioForConnection(){var e;if("true"===this.getAttribute("should-use-sound")&&i.isIOS()){const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-connect-modal-pending-message-audio-wrapper"),n=document.createElement("audio");n.src="https://s3.amazonaws.com/wc.perawallet.app/audio.mp3",n.autoplay=!0,n.loop=!0,null==t||t.appendChild(n)}}renderLottieAnimation(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-connect-modal-pending-message-animation-wrapper");t&&c.default.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,path:"https://s3.amazonaws.com/wc.perawallet.app/static/pera-loader-animation.json"})}}var H='.pera-wallet-sign-txn-toast {\n  --pera-wallet-sign-txn-toast-width: 422px;\n  --pera-wallet-sign-txn-toast-height: 134px;\n  --pera-wallet-sign-txn-toast-font-family: "Inter", sans-serif;\n  position: fixed;\n  bottom: 28px;\n  right: 35px;\n  z-index: 11;\n  overflow: hidden;\n  width: var(--pera-wallet-sign-txn-toast-width);\n  height: var(--pera-wallet-sign-txn-toast-height);\n  background: #edeffb;\n  border-radius: 8px;\n  animation: 0.2s PeraWalletSignTxnToastSlideIn ease-out;\n}\n.pera-wallet-sign-txn-toast * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  font-family: var(--pera-wallet-sign-txn-toast-font-family);\n  font-smooth: antialiased;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.pera-wallet-sign-txn-toast ul,\n.pera-wallet-sign-txn-toast ol,\n.pera-wallet-sign-txn-toast li {\n  list-style-type: none;\n}\n\n.pera-wallet-sign-txn-toast__header__close-button {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  width: 20px;\n  height: 20px;\n  margin: 0;\n  padding: 0;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n}\n\n.pera-wallet-sign-txn-toast__content__lottie-animation {\n  position: absolute;\n  top: -75px;\n  left: -100px;\n  width: 368px;\n  height: 368px;\n}\n\n.pera-wallet-sign-txn-toast__content__description {\n  position: absolute;\n  top: 40px;\n  right: 48px;\n  max-width: 197px;\n  color: #3c3c49;\n  font-size: 14px;\n  line-height: 22px;\n  letter-spacing: -0.1px;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-sign-txn-toast {\n    display: none;\n  }\n}\n@keyframes PeraWalletSignTxnToastSlideIn {\n  0% {\n    bottom: 12px;\n    opacity: 0;\n  }\n  100% {\n    bottom: 26px;\n    opacity: 1;\n  }\n}';d(H);const W=document.createElement("template");W.innerHTML='\n  <div class="pera-wallet-sign-txn-toast">\n    <div class="pera-wallet-sign-txn-toast__header">\n      <button\n        id="pera-wallet-sign-txn-toast-close-button"\n        class="pera-wallet-sign-txn-toast__header__close-button">\n        <img src="data:image/svg+xml,%3csvg width=\'20\' height=\'20\' viewBox=\'0 0 20 20\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3e%3cpath d=\'M14.4107 4.41074L9.41074 9.41074L10.5893 10.5893L15.5893 5.58926L14.4107 4.41074ZM9.41074 9.41074L4.41074 14.4107L5.58926 15.5893L10.5893 10.5893L9.41074 9.41074ZM15.5893 14.4107L10.5893 9.41074L9.41074 10.5893L14.4107 15.5893L15.5893 14.4107ZM10.5893 9.41074L5.58926 4.41074L4.41074 5.58926L9.41074 10.5893L10.5893 9.41074Z\' fill=\'%239099BD\'/%3e%3c/svg%3e" />\n      </button>\n    </div>\n    <div class="pera-wallet-sign-txn-toast__content">\n      <div id="pera-wallet-sign-txn-toast-lottie-animation" style="width:368;height:368" class="pera-wallet-sign-txn-toast__content__lottie-animation"></div>\n      <p class="pera-wallet-sign-txn-toast__content__description">\n        Please launch <b>Pera Wallet</b> on your iOS or Android device to sign this transaction.\n      </p>\n    </div>\n  </div>\n';class G extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:"open"}),this.shadowRoot){const e=document.createElement("style");e.textContent=H,this.shadowRoot.append(W.content.cloneNode(!0),e);const t=this.shadowRoot.getElementById("pera-wallet-sign-txn-toast-close-button");null==t||t.addEventListener("click",(()=>{i.removeModalWrapperFromDOM(i.PERA_WALLET_SIGN_TXN_TOAST_ID)})),this.renderLottieAnimation()}}renderLottieAnimation(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("pera-wallet-sign-txn-toast-lottie-animation");t&&c.default.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,path:"https://s3.amazonaws.com/wc.perawallet.app/static/sign-toast-animation.json"})}}var J='@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");\n.pera-wallet-modal {\n  --pera-wallet-modal-font-family: "Inter", sans-serif;\n  --pera-wallet-modal-compact-width: 380px;\n  --pera-wallet-modal-compact-height: 396px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 999999;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.pera-wallet-modal--select-account .pera-wallet-modal__body {\n  width: 480px;\n  height: 578px;\n  background-color: #ffffff;\n}\n.pera-wallet-modal--mobile .pera-wallet-modal__body {\n  top: 40px;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  max-width: unset;\n  height: calc(100 * var(--vh));\n  padding: 20px;\n  background-color: #ffffff;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02), 0 4px 12px rgba(0, 0, 0, 0.03);\n  border-radius: 20px 20px 0px 0px;\n  animation: 0.3s PeraWalletConnectMobileSlideIn ease-out;\n  overflow-y: auto;\n  transform: unset;\n}\n.pera-wallet-modal--mobile .pera-wallet-modal__body::before {\n  background-image: unset;\n}\n.pera-wallet-modal--compact:not(.pera-wallet-modal--mobile) .pera-wallet-modal__body {\n  width: var(--pera-wallet-modal-compact-width);\n  height: var(--pera-wallet-modal-compact-height);\n  padding: 0;\n}\n.pera-wallet-modal * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-smooth: antialiased;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.pera-wallet-modal ul,\n.pera-wallet-modal ol,\n.pera-wallet-modal li {\n  list-style-type: none;\n}\n\n.pera-wallet-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: auto;\n  height: 48px;\n  padding: 14px;\n  border: none;\n  border-radius: 12px;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--pera-wallet-modal-font-family);\n  font-size: 14px;\n}\n\n.pera-wallet-modal__logo img {\n  display: block;\n  width: 32px;\n}\n\n.pera-wallet-modal__body {\n  position: relative;\n  top: 50%;\n  left: 50%;\n  width: 700px;\n  max-width: calc(100vw - 80px);\n  padding: 28px;\n  background-color: #f3f3f7;\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.08);\n  border-radius: 24px;\n  animation: 0.3s PeraWalletConnectSlideIn ease-out;\n  transform: translate(-50%, -50%);\n}\n.pera-wallet-modal__body::before {\n  --background-line: #1e0972 0 1.2px, transparent 0 calc(100% - 1.2px), #1e0972;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: -1;\n  content: "";\n  background-image: linear-gradient(var(--background-line)), linear-gradient(90deg, var(--background-line));\n  background-size: 116px 116px;\n  mix-blend-mode: overlay;\n  border-radius: 24px;\n  opacity: 0.8;\n  pointer-events: none;\n}\n\n@media (max-width: 767px) {\n  .pera-wallet-modal--desktop .pera-wallet-modal__body {\n    width: 100%;\n    max-width: calc(100vw - 32px);\n    padding: 24px;\n  }\n}\n@keyframes PeraWalletConnectSlideIn {\n  0% {\n    opacity: 0;\n    transform: translate(-50%, calc(-50% + 24px));\n  }\n  100% {\n    opacity: 1;\n    transform: translate(-50%, -50%);\n  }\n}\n@keyframes PeraWalletConnectMobileSlideIn {\n  0% {\n    top: 30%;\n    opacity: 0;\n  }\n  100% {\n    top: 40px;\n    opacity: 1;\n  }\n}\n.pera-wallet-sign-txn-modal.pera-wallet-modal .pera-wallet-modal__body {\n  width: 480px;\n  height: 578px;\n  background-color: #ffffff;\n  background-image: unset;\n  padding: 0;\n}\n.pera-wallet-sign-txn-modal.pera-wallet-modal .pera-wallet-modal__body .pera-wallet-sign-txn-modal__body__content {\n  width: 100%;\n  height: 100%;\n}\n.pera-wallet-sign-txn-modal.pera-wallet-modal .pera-wallet-modal__body #pera-wallet-iframe {\n  width: 100%;\n  height: 100%;\n  border-radius: 16px;\n  margin: 0 auto;\n  border: none;\n}\n\n.pera-wallet-sign-txn-modal--compact.pera-wallet-modal .pera-wallet-modal__body {\n  width: var(--pera-wallet-modal-compact-width);\n  height: var(--pera-wallet-modal-compact-height);\n}';d(J);const Z=document.createElement("template");Z.innerHTML=`\n  <div id="pera-wallet-sign-txn-modal" class="${i.PERA_WALLET_MODAL_CLASSNAME} pera-wallet-sign-txn-modal">\n    <div class="pera-wallet-modal__body">\n      <pera-wallet-modal-header modal-id="${i.PERA_WALLET_SIGN_TXN_MODAL_ID}"></pera-wallet-modal-header/>\n\n      <div class="pera-wallet-sign-txn-modal__body__content" />\n    </div>\n  </div>\n`;class $ extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:"open"}),this.shadowRoot){const e=document.createElement("style");if(e.textContent=J,this.shadowRoot.append(Z.content.cloneNode(!0),e),"true"===this.getAttribute("compact-mode")){const e=this.shadowRoot.getElementById("pera-wallet-sign-txn-modal");null==e||e.classList.add("pera-wallet-sign-txn-modal--compact")}}}}function Q(){document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px")}function Y(e,t){window.customElements.get(e)||window.customElements.define(e,t)}window.addEventListener("DOMContentLoaded",(()=>{Q()})),window.addEventListener("resize",(()=>{Q()})),Y("pera-wallet-connect-modal",k),Y("pera-wallet-modal-desktop-mode",x),Y("pera-wallet-modal-header",u),Y("pera-wallet-modal-touch-screen-mode",C),Y("pera-wallet-redirect-modal",L),Y("pera-wallet-connect-modal-information-section",U),Y("pera-wallet-connect-modal-pending-message-section",K),Y("pera-wallet-sign-txn-toast",G),Y("pera-wallet-sign-txn-modal",$),Y("pera-wallet-download-qr-code",b)},60401:function(e,t,n){"use strict";var i=n(10031),r=n(36525),s=n(64588),o=n(46880);function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=a(i),d=a(s),l=a(o);function h(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;class f extends Error{constructor(e,t,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,f),this.name="PeraWalletConnectError",this.data=e,this.message=t}}const u=new class{constructor(e){this.listener=void 0,this.channel=e.channel}setupListener({onReceiveMessage:e}){this.close(),this.listener=t=>{if("object"==typeof t.data)try{t.data.channel===this.channel&&e(t)}catch(e){console.error(e)}},window.addEventListener("message",this.listener)}sendMessage({message:e,targetWindow:t,origin:n,timeout:i=1e3}){setTimeout((()=>{const i={channel:this.channel,message:e};t.postMessage(i,{targetOrigin:n||"*"})}),i)}close(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=void 0)}}({channel:"pera-web-wallet"}),p=700,g=50;function m(){const e=document.querySelector('meta[name="name"]'),t=document.querySelector('meta[name="description"]');let{title:n}=document,i="";return e instanceof HTMLMetaElement&&(n=e.content),t instanceof HTMLMetaElement&&(i=t.content),{title:n,description:i,url:window.location.origin,favicon:b()[0]}}function b(){const e=document.getElementsByTagName("link"),t=[];for(let n=0;n<e.length;n++){const i=e[n],r=i.getAttribute("rel");if(r&&r.toLowerCase().indexOf("icon")>-1){const e=i.getAttribute("href");if(e&&-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let n=`${window.location.protocol}//${window.location.host}`;if(0===e.indexOf("/"))n+=e;else{const t=window.location.pathname.split("/");t.pop(),n+=`${t.join("/")}/${e}`}t.push(n)}else if(0===(null==e?void 0:e.indexOf("//"))){const n=window.location.protocol+e;t.push(n)}else e&&t.push(e)}}return t}function w(e){return new Promise(((t,n)=>{try{const i=window.open(e,"_blank");let r=0;const s=setInterval((()=>{if(r+=1,r===g)return clearInterval(s),void n(new f({type:"MESSAGE_NOT_RECEIVED"},"Couldn't open Pera Wallet, please try again."));i&&(!0===i.closed&&(clearInterval(s),n(new f({type:"OPERATION_CANCELLED"},"Operation cancelled by user"))),u.sendMessage({message:{type:"TAB_OPEN"},origin:e,targetWindow:i}))}),p);u.setupListener({onReceiveMessage:e=>{"TAB_OPEN_RECEIVED"===e.data.message.type&&(clearInterval(s),t(i))}})}catch(e){n(e)}}))}const y="pera-wallet-connect-modal-wrapper",v="pera-wallet-redirect-modal-wrapper",_="pera-wallet-sign-txn-toast-wrapper",A="pera-wallet-modal";function E(e){const t=document.createElement("div");return t.setAttribute("id",e),document.body.appendChild(t),t}function x(){E(v).innerHTML="<pera-wallet-redirect-modal></pera-wallet-redirect-modal>"}function M(){E(_).innerHTML="<pera-wallet-sign-txn-toast></pera-wallet-sign-txn-toast>"}function I(e){const t=document.getElementById(e);t&&t.remove()}const S={WALLET:"PeraWallet.Wallet",NETWORK:"PeraWallet.Network",WALLETCONNECT:"walletconnect"};function C(){return"undefined"==typeof localStorage?void 0:localStorage}function R(e,t,n){var i;null===(i=C())||void 0===i||i.setItem(S.WALLET,JSON.stringify({type:t||"pera-wallet",accounts:e,selectedAccount:e[0],chainId:n,version:"2.0"}))}function N(){var e;const t=null===(e=C())||void 0===e?void 0:e.getItem(S.WALLET);return t?JSON.parse(t):null}function P(){return new Promise(((e,t)=>{var n,i;try{null===(n=C())||void 0===n||n.removeItem(S.WALLET),null===(i=C())||void 0===i||i.removeItem(S.NETWORK),e(void 0)}catch(e){t(e)}}))}function k(e){const t=e.slice();for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t}const T="https://wc.perawallet.app/config-staging.json";function O(){return function(e,t={}){return fetch(e,t).then((e=>e.json())).then((e=>e))}(T,{cache:"no-store"})}function L(){return h(this,void 0,void 0,(function*(){let e={bridgeURL:"",webWalletURL:"",isWebWalletAvailable:!1,shouldDisplayNewBadge:!1,shouldUseSound:!0,silent:!1,promoteMobile:!1};try{const t=yield O();void 0!==t.web_wallet&&t.web_wallet_url&&(e.isWebWalletAvailable=t.web_wallet),void 0!==t.display_new_badge&&(e.shouldDisplayNewBadge=t.display_new_badge),void 0!==t.use_sound&&(e.shouldUseSound=t.use_sound),void 0!==t.silent&&(e.silent=t.silent),void 0!==t.promote_mobile&&(e.promoteMobile=t.promote_mobile),e=Object.assign(Object.assign({},e),{bridgeURL:k(t.servers||[])[0]||"",webWalletURL:t.web_wallet_url||""})}catch(e){console.log(e)}return e}))}function D(e){return Uint8Array.from(window.atob(e),(e=>e.charCodeAt(0)))}function q(e,t){return{id:Date.now()*Math.pow(10,3)+Math.floor(Math.random()*Math.pow(10,3)),jsonrpc:"2.0",method:e,params:t}}function B(){return"undefined"!=typeof navigator}function z(){return B()&&/Android/i.test(navigator.userAgent)}function U(){return B()&&/iPhone|iPod|Android/i.test(navigator.userAgent)}const F=z()?"algorand://":"perawallet-wc://";var j,V;function K(e){const t="https://web.perawallet.app/";return{ROOT:t,CONNECT:`${t}connect`,TRANSACTION_SIGN:`${t}transaction/sign`}}function H({method:e,signTxnRequestParams:t,signer:n,chainId:i,webWalletURL:r,resolve:s,reject:o}){const a=K();!function(){h(this,void 0,void 0,(function*(){try{const r=yield w(a.TRANSACTION_SIGN);if(r){let s;"SIGN_TXN"===e?s={type:"SIGN_TXN",txn:t}:"SIGN_DATA"===e&&n&&i&&(s={type:"SIGN_DATA",data:t,signer:n,chainId:i}),s&&u.sendMessage({message:s,origin:a.TRANSACTION_SIGN,targetWindow:r})}const c=setInterval((()=>{!0===(null==r?void 0:r.closed)&&(o(new f({type:`${e}_CANCELLED`},"Transaction signing is cancelled by user.")),clearInterval(c))}),2e3);u.setupListener({onReceiveMessage:t=>function({event:e,newPeraWalletTab:t,method:n,resolve:i,reject:r}){switch(e.data.message.type){case"SIGN_TXN_CALLBACK":null==t||t.close(),i(e.data.message.signedTxns.map((e=>D(e.signedTxn))));break;case"SIGN_DATA_CALLBACK":null==t||t.close(),i(e.data.message.signedData.map((e=>D(e.signedData))));break;case"SIGN_TXN_NETWORK_MISMATCH":r(new f({type:`${n}_NETWORK_MISMATCH`,detail:e.data.message.error},e.data.message.error||"Network mismatch"));break;case"SIGN_TXN_CALLBACK_ERROR":null==t||t.close(),r(new f({type:`${n}_CANCELLED`},e.data.message.error));break;case"SESSION_DISCONNECTED":null==t||t.close(),P(),r(new f({type:"SESSION_DISCONNECTED",detail:e.data.message.error},e.data.message.error))}}({event:t,newPeraWalletTab:r,method:e,resolve:s,reject:o})})}catch(e){o(e)}}))}()}function W(e){const{namespaces:t}=e,n=Object.values(t).map((e=>e.accounts)).flat(),[i,r,s]=n[0].split(":"),o=n.map((e=>{const[t,n,i]=e.split(":");return i}));return{reference:r,namespace:i,accounts:[...new Set(o)].sort()}}!function(e){e.Mainnet="algorand:wGHE2Pwdvd7S12BL5FaOP20EGYesN73k",e.Testnet="algorand:SGO1GKSzyE7IEPItTxCByw9x8FmnrCDe"}(j||(j={})),function(e){e.SignTransaction="algo_signTxn",e.SignData="algo_signData"}(V||(V={})),"undefined"!=typeof window&&(window.global=window,window.Buffer=window.Buffer||n(48287).hp,Promise.resolve().then((function(){return n(12506)}))),t.PERA_DOWNLOAD_URL="https://perawallet.app/download/",t.PERA_WALLET_APP_DEEP_LINK=F,t.PERA_WALLET_CONNECT_MODAL_ID=y,t.PERA_WALLET_MODAL_CLASSNAME=A,t.PERA_WALLET_REDIRECT_MODAL_ID=v,t.PERA_WALLET_SIGN_TXN_MODAL_ID="pera-wallet-sign-txn-modal-wrapper",t.PERA_WALLET_SIGN_TXN_TOAST_ID=_,t.PeraWalletConnect=class{constructor(e){var t;this.network=function(){var e;return(null===(e=C())||void 0===e?void 0:e.getItem(S.NETWORK))||"mainnet"}(),this.projectId=e.projectId,this.singleAccount=e.singleAccount,this.debugger=e.debugger,(null==e?void 0:e.network)&&(this.network=e.network),null===(t=C())||void 0===t||t.setItem(S.NETWORK,(null==e?void 0:e.network)||"mainnet"),this.shouldShowSignTxnToast=void 0===(null==e?void 0:e.shouldShowSignTxnToast)||e.shouldShowSignTxnToast,this.chainId=null==e?void 0:e.chainId,this.compactMode=(null==e?void 0:e.compactMode)||!1,window.addEventListener("DOMContentLoaded",(()=>h(this,void 0,void 0,(function*(){this.client=yield this.createClient()}))))}get platform(){return function(){const e=N();let t=null;return"pera-wallet"===(null==e?void 0:e.type)?t="mobile":"pera-wallet-web"===(null==e?void 0:e.type)&&(t="web"),t}()}get isPeraDiscoverBrowser(){return this.checkIsPeraDiscoverBrowser()}get isConnected(){var e;return("mobile"===this.platform||"web"===this.platform)&&!!(null===(e=N())||void 0===e?void 0:e.accounts.length)}get accounts(){var e;return null===(e=N())||void 0===e?void 0:e.accounts}checkIsPeraDiscoverBrowser(){return window.navigator.userAgent.includes("pera")}connect({network:e,selectedAccount:t}={}){return new Promise(((n,i)=>h(this,void 0,void 0,(function*(){var r,s,o,a,c;try{e&&(null===(r=C())||void 0===r||r.setItem(S.NETWORK,e));const{isWebWalletAvailable:d,webWalletURL:l,shouldDisplayNewBadge:h,shouldUseSound:u,promoteMobile:p}=yield L(),g=this.connectWithWebWallet(n,i,l,this.chainId);d&&(window.onWebWalletConnect=g),this.client||(this.client=yield this.createClient());const{uri:m,approval:b}=yield this.client.connect({requiredNamespaces:{algorand:{chains:[j.Mainnet,j.Testnet],methods:[V.SignTransaction,V.SignData],events:[]}}});if(m){!function(e){if(!document.getElementById(y)){const t=E(y),{uri:n,isWebWalletAvailable:i,shouldDisplayNewBadge:r,shouldUseSound:s,compactMode:o,promoteMobile:a,singleAccount:c,selectedAccount:d}=e;t.innerHTML=`<pera-wallet-connect-modal uri="${n}" is-web-wallet-avaliable="${i}" should-display-new-badge="${r}" should-use-sound="${s}" compact-mode="${o}" promote-mobile="${a}" single-account="${c}" selected-account="${d||""}"></pera-wallet-connect-modal>`}}({uri:m,isWebWalletAvailable:d,shouldDisplayNewBadge:h,shouldUseSound:u,compactMode:this.compactMode,promoteMobile:p,singleAccount:this.singleAccount,selectedAccount:t});const e=document.getElementById(y),n=null===(o=null===(s=null==e?void 0:e.querySelector("pera-wallet-connect-modal"))||void 0===s?void 0:s.shadowRoot)||void 0===o?void 0:o.querySelector(`.${A}`),r=null===(c=null===(a=null==n?void 0:n.querySelector("pera-wallet-modal-header"))||void 0===a?void 0:a.shadowRoot)||void 0===c?void 0:c.getElementById("pera-wallet-modal-header-close-button");null==r||r.addEventListener("click",(()=>{i(new f({type:"CONNECT_MODAL_CLOSED"},"Connect modal is closed by user")),I(y)}))}const w=yield b(),{namespace:v,reference:_,accounts:x}=W(w);R(x||[],"pera-wallet",`${v}:${_}`),this.session=w,n(x)}catch(e){i(new f({type:"SESSION_CONNECT",detail:e},e.message||"There was an error while connecting to Pera Wallet"))}finally{I(y)}}))))}reconnectSession(){return new Promise(((e,t)=>h(this,void 0,void 0,(function*(){try{yield this.checkPersistedState();const n=N();if(!n)return void e([]);if((null==n?void 0:n.version)||(yield P(),t(new f({type:"SESSION_RECONNECT",detail:"Failed to reconnect session. Wallet Connect version mismatch."},"Failed to reconnect session. Please try to connect again."))),"pera-wallet-web"===(null==n?void 0:n.type)){const{isWebWalletAvailable:e}=yield L();e||t(new f({type:"SESSION_RECONNECT",detail:"Pera Web is not available"},"Pera Web is not available"))}this.session?e(n.accounts):e([])}catch(e){yield this.disconnect(),t(new f({type:"SESSION_RECONNECT",detail:e},e.message||"There was an error while reconnecting to Pera Wallet"))}}))))}connectWithWebWallet(e,t,n,i){const r=K();function s(){I(y)}return function(){w(r.CONNECT).then((n=>{n&&n.opener&&u.sendMessage({message:{type:"CONNECT",data:Object.assign(Object.assign({},m()),{chainId:i})},origin:r.CONNECT,targetWindow:n,timeout:5e3});const o=setInterval((()=>{!0===(null==n?void 0:n.closed)&&(t(new f({type:"CONNECT_CANCELLED"},"Connect is cancelled by user")),clearInterval(o),s())}),2e3);u.setupListener({onReceiveMessage:i=>{if(e&&"CONNECT_CALLBACK"===i.data.message.type){const t=i.data.message.data.addresses;R(t,"pera-wallet-web"),e(t),s(),null==n||n.close()}else"CONNECT_NETWORK_MISMATCH"===i.data.message.type&&(t(new f({type:"CONNECT_NETWORK_MISMATCH",detail:i.data.message.error},i.data.message.error||"Your wallet is connected to a different network to this dApp. Update your wallet to the correct network (MainNet or TestNet) to continue.")),s(),null==n||n.close())}})}))}}createClient(){return h(this,void 0,void 0,(function*(){try{const e=yield c.default.init({relayUrl:"wss://relay.walletconnect.com",projectId:this.projectId,metadata:r.getAppMetadata()});return e.on("session_delete",(()=>{P()})),e.on("session_update",(({topic:t,params:n})=>{const{namespaces:i}=n,r=e.session.get(t),s=Object.assign(Object.assign({},r),{namespaces:i});this.session=s})),e}catch(i){throw new f({type:"CLIENT_INIT_FAILED",detail:i},i.message||"Wallet Connect client could not initialized")}}))}checkPersistedState(){return h(this,void 0,void 0,(function*(){if(this.client||(this.client=yield this.createClient()),this.client.session.length){const e=this.client.session.keys.length-1,t=this.client.session.get(this.client.session.keys[e]);this.session=t;const{namespace:n,reference:i,accounts:r}=W(this.session);R(r||[],"pera-wallet",`${n}:${i}`)}}))}disconnect(){return new Promise(((e,t)=>h(this,void 0,void 0,(function*(){if("mobile"===this.platform)try{this.session&&this.client&&(yield this.client.disconnect({topic:this.session.topic,reason:r.getSdkError("USER_DISCONNECTED")}),this.client=null,this.session=null)}catch(e){t(e)}yield P(),e(null)}))))}signTransactionWithMobile(e){var t;return h(this,void 0,void 0,(function*(){const n=q(V.SignTransaction,[e]);try{yield this.checkPersistedState();const e=N();if(!(null===(t=this.session)||void 0===t?void 0:t.topic)||!e||!e.chainId)return yield Promise.reject(new f({type:"SESSION_RECONNECT",detail:"Failed to reconnect session."},"Failed to reconnect session. Please try to connect again."));const i=(yield this.client.request({topic:this.session.topic,request:n,chainId:e.chainId})).filter(Boolean);return"string"==typeof i[0]?i.map(D):i.map((e=>Uint8Array.from(e)))}catch(e){return yield Promise.reject(new f({type:"SIGN_TRANSACTIONS",detail:e},e.message||"Failed to sign transaction"))}finally{I(v),I(_)}}))}signTransactionWithWeb(e,t){return new Promise(((n,i)=>H({signTxnRequestParams:e,webWalletURL:t,method:"SIGN_TXN",resolve:n,reject:i})))}signDataWithMobile({data:e,signer:t,chainId:n}){return h(this,void 0,void 0,(function*(){const i=q(V.SignData,e.map((e=>Object.assign(Object.assign({},e),{signer:t,chainID:n}))));try{try{const e=N(),t=(yield this.client.request({topic:this.session.topic,request:i,chainId:(null==e?void 0:e.chainId)||"4610"})).filter(Boolean);return"string"==typeof t[0]?t.map(D):t.map((e=>Uint8Array.from(e)))}catch(e){return yield Promise.reject(new f({type:"SIGN_TRANSACTIONS",detail:e},e.message||"Failed to sign transaction"))}}finally{I(v),I(_)}}))}signTransaction(e,t){return h(this,void 0,void 0,(function*(){if("mobile"===this.platform&&(U()?x():!U()&&this.shouldShowSignTxnToast&&M(),!this.client))throw new Error("PeraWalletConnect was not initialized correctly while signing transaction.");const n=e.flatMap((e=>e.map((e=>function(e,t){let n;t&&!(e.signers||[]).includes(t)&&(n=[]);const i={txn:(r=e.txn,Buffer.from(d.default.encodeUnsignedTransaction(r)).toString("base64"))};var r;return Array.isArray(n)&&(i.signers=n),e.authAddr&&(i.authAddr=e.authAddr),e.message&&(i.message=e.message),e.msig&&(i.msig=e.msig),i}(e,t)))));if("web"===this.platform){const{webWalletURL:e}=yield L();return this.signTransactionWithWeb(n,e)}return this.signTransactionWithMobile(n)}))}signData(e,t){const n=this.chainId||4160;if("mobile"===this.platform&&(U()?x():!U()&&this.shouldShowSignTxnToast&&M(),!this.client))throw new Error("PeraWalletConnect was not initialized correctly.");const i=e.map((e=>Object.assign(Object.assign({},e),{data:Buffer.from(e.data).toString("base64")})));return this.signDataWithMobile({data:i,signer:t,chainId:n})}},t.closePeraWalletSignTxnToast=function(){I(_)},t.detectBrowser=function(){if(!B())return null;const{userAgent:e}=navigator;let t;return t=e.match(/DuckDuckGo/i)?"DuckDuckGo":e.match(/OPX/i)?"Opera GX":navigator.brave?"Brave":l.default.getParser(navigator.userAgent).getBrowserName(),t},t.isAndroid=z,t.isIOS=function(){return B()&&/iPhone|iPad|iPod/i.test(navigator.userAgent)},t.isMobile=U,t.removeModalWrapperFromDOM=I},80995:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(60401);n(10031),n(36525),n(64588),n(46880),t.PeraWalletConnect=i.PeraWalletConnect,t.closePeraWalletSignTxnToast=i.closePeraWalletSignTxnToast},10031:function(e,t,n){"use strict";n.r(t),n.d(t,{AUTH_CONTEXT:function(){return cr},AUTH_KEYS_CONTEXT:function(){return dr},AUTH_PAIRING_TOPIC_CONTEXT:function(){return lr},AUTH_PROTOCOL:function(){return or},AUTH_PUBLIC_KEY_NAME:function(){return ur},AUTH_REQUEST_CONTEXT:function(){return hr},AUTH_STORAGE_PREFIX:function(){return fr},AUTH_VERSION:function(){return ar},ENGINE_CONTEXT:function(){return er},ENGINE_QUEUE_STATES:function(){return ir},ENGINE_RPC_OPTS:function(){return tr},HISTORY_CONTEXT:function(){return Gi},HISTORY_EVENTS:function(){return Wi},HISTORY_STORAGE_VERSION:function(){return Ji},METHODS_TO_VERIFY:function(){return sr},PROPOSAL_CONTEXT:function(){return Zi},PROPOSAL_EXPIRY:function(){return $i},PROPOSAL_EXPIRY_MESSAGE:function(){return Qi},REQUEST_CONTEXT:function(){return rr},SESSION_CONTEXT:function(){return Yi},SESSION_EXPIRY:function(){return Xi},SESSION_REQUEST_EXPIRY_BOUNDARIES:function(){return nr},SIGN_CLIENT_CONTEXT:function(){return Ui},SIGN_CLIENT_DEFAULT:function(){return ji},SIGN_CLIENT_EVENTS:function(){return Vi},SIGN_CLIENT_PROTOCOL:function(){return Bi},SIGN_CLIENT_STORAGE_OPTIONS:function(){return Ki},SIGN_CLIENT_STORAGE_PREFIX:function(){return Fi},SIGN_CLIENT_VERSION:function(){return zi},SessionStore:function(){return kr},SignClient:function(){return Tr},WALLETCONNECT_DEEPLINK_CHOICE:function(){return Hi},default:function(){return Pr}});var i=n(37007),r=n.n(i),s=n(93532),o=n(33709),a=n(29838),c=n(4556);class d extends c.H{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class l extends c.H{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class h{constructor(e,t){this.logger=e,this.core=t}}class f extends c.H{constructor(e,t){super(),this.relayer=e,this.logger=t}}class u extends c.H{constructor(e){super()}}class p{constructor(e,t,n,i){this.core=e,this.logger=t,this.name=n}}class g extends c.H{constructor(e,t){super(),this.relayer=e,this.logger=t}}class m extends c.H{constructor(e,t){super(),this.core=e,this.logger=t}}class b{constructor(e,t,n){this.core=e,this.logger=t,this.store=n}}class w{constructor(e,t){this.projectId=e,this.logger=t}}class y{constructor(e,t,n){this.core=e,this.logger=t,this.telemetryEnabled=n}}r();class v{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}i.EventEmitter;class _{constructor(e){this.client=e}}var A=n(88900),E=n(13554),x=n(37802),M=n(36525),I=n(53155),S=n(27907),C=n(39031),R=n(84365),N=n(8142),P=n.n(N);const k="wc",T=2,O="core",L=`${k}@2:${O}:`,D={name:O,logger:"error"},q={database:":memory:"},B="crypto",z="client_ed25519_seed",U=A.ONE_DAY,F="keychain",j="0.3",V="messages",K="0.3",H=A.SIX_HOURS,W="publisher",G="irn",J="error",Z="wss://relay.walletconnect.org",$="relayer",Q={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Y="_subscription",X={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},ee=.1,te="2.17.0",ne={link_mode:"link_mode",relay:"relay"},ie="0.3",re="WALLETCONNECT_CLIENT_ID",se="WALLETCONNECT_LINK_MODE_APPS",oe={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ae="subscription",ce="0.3",de=1e3*A.FIVE_SECONDS,le="pairing",he="0.3",fe={wc_pairingDelete:{req:{ttl:A.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:A.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:A.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:A.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:A.ONE_DAY,prompt:!1,tag:0},res:{ttl:A.ONE_DAY,prompt:!1,tag:0}}},ue={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},pe={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},ge="history",me="0.3",be="expirer",we={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ye="0.3",ve="verify-api",_e="https://verify.walletconnect.com",Ae="https://verify.walletconnect.org",Ee=Ae,xe=`${Ee}/v3`,Me=[_e,Ae],Ie="echo",Se="https://echo.walletconnect.com",Ce={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Re={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ne={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Pe={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},ke={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Te={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Oe=.1,Le="event-client",De=86400,qe="https://pulse.walletconnect.org/batch";function Be(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var r=0;r<e.length;r++){var s=e.charAt(r),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=r}var a=e.length,c=e.charAt(0),d=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,i=0,r=0,s=t.length;r!==s&&0===t[r];)r++,n++;for(var o=(s-r)*l+1>>>0,d=new Uint8Array(o);r!==s;){for(var h=t[r],f=0,u=o-1;(0!==h||f<i)&&-1!==u;u--,f++)h+=256*d[u]>>>0,d[u]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");i=f,r++}for(var p=o-i;p!==o&&0===d[p];)p++;for(var g=c.repeat(n);p<o;++p)g+=e.charAt(d[p]);return g}function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var i=0,r=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*d+1>>>0,o=new Uint8Array(s);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=s-1;(0!==l||h<r)&&-1!==f;f--,h++)l+=a*o[f]>>>0,o[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");r=h,t++}if(" "!==e[t]){for(var u=s-r;u!==s&&0===o[u];)u++;for(var p=new Uint8Array(i+(s-u)),g=i;u!==s;)p[g++]=o[u++];return p}}}function u(e){var n=f(e);if(n)return n;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:f,decode:u}}var ze=Be,Ue=ze;const Fe=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},je=e=>(new TextEncoder).encode(e),Ve=e=>(new TextDecoder).decode(e);class Ke{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class He{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Ge(this,e)}}class We{constructor(e){this.decoders=e}or(e){return Ge(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ge=(e,t)=>new We({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Je{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ke(e,t,n),this.decoder=new He(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ze=({name:e,prefix:t,encode:n,decode:i})=>new Je(e,t,n,i),$e=({prefix:e,name:t,alphabet:n})=>{const{encode:i,decode:r}=Ue(n,t);return Ze({prefix:e,name:t,encode:i,decode:e=>Fe(r(e))})},Qe=(e,t,n,i)=>{const r={};for(let l=0;l<t.length;++l)r[t[l]]=l;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,d=0;for(let l=0;l<s;++l){const t=r[e[l]];if(void 0===t)throw new SyntaxError(`Non-${i} character`);c=c<<n|t,a+=n,a>=8&&(a-=8,o[d++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ye=(e,t,n)=>{const i="="===t[t.length-1],r=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,s+=t[r&a>>o];if(o&&(s+=t[r&a<<n-o]),i)for(;s.length*n&7;)s+="=";return s},Xe=({name:e,prefix:t,bitsPerChar:n,alphabet:i})=>Ze({prefix:t,name:e,encode(e){return Ye(e,i,n)},decode(t){return Qe(t,i,n,e)}}),et=Ze({prefix:"\0",name:"identity",encode:e=>Ve(e),decode:e=>je(e)});var tt=Object.freeze({__proto__:null,identity:et});const nt=Xe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var it=Object.freeze({__proto__:null,base2:nt});const rt=Xe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var st=Object.freeze({__proto__:null,base8:rt});const ot=$e({prefix:"9",name:"base10",alphabet:"0123456789"});var at=Object.freeze({__proto__:null,base10:ot});const ct=Xe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dt=Xe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var lt=Object.freeze({__proto__:null,base16:ct,base16upper:dt});const ht=Xe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ft=Xe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ut=Xe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pt=Xe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gt=Xe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mt=Xe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bt=Xe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wt=Xe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yt=Xe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var vt=Object.freeze({__proto__:null,base32:ht,base32upper:ft,base32pad:ut,base32padupper:pt,base32hex:gt,base32hexupper:mt,base32hexpad:bt,base32hexpadupper:wt,base32z:yt});const _t=$e({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),At=$e({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Et=Object.freeze({__proto__:null,base36:_t,base36upper:At});const xt=$e({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Mt=$e({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var It=Object.freeze({__proto__:null,base58btc:xt,base58flickr:Mt});const St=Xe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ct=Xe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Rt=Xe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Nt=Xe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Pt=Object.freeze({__proto__:null,base64:St,base64pad:Ct,base64url:Rt,base64urlpad:Nt});const kt=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Tt=kt.reduce(((e,t,n)=>(e[n]=t,e)),[]),Ot=kt.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);function Lt(e){return e.reduce(((e,t)=>(e+=Tt[t],e)),"")}function Dt(e){const t=[];for(const n of e){const e=Ot[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}const qt=Ze({prefix:"ðŸš€",name:"base256emoji",encode:Lt,decode:Dt});var Bt=Object.freeze({__proto__:null,base256emoji:qt}),zt=Kt,Ut=128,Ft=127,jt=~Ft,Vt=Math.pow(2,31);function Kt(e,t,n){t=t||[],n=n||0;for(var i=n;e>=Vt;)t[n++]=255&e|Ut,e/=128;for(;e&jt;)t[n++]=255&e|Ut,e>>>=7;return t[n]=0|e,Kt.bytes=n-i+1,t}var Ht=Jt,Wt=128,Gt=127;function Jt(e,t){var n,i=0,r=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw Jt.bytes=0,new RangeError("Could not decode varint");n=e[s++],i+=r<28?(n&Gt)<<r:(n&Gt)*Math.pow(2,r),r+=7}while(n>=Wt);return Jt.bytes=s-t,i}var Zt=Math.pow(2,7),$t=Math.pow(2,14),Qt=Math.pow(2,21),Yt=Math.pow(2,28),Xt=Math.pow(2,35),en=Math.pow(2,42),tn=Math.pow(2,49),nn=Math.pow(2,56),rn=Math.pow(2,63),sn=function(e){return e<Zt?1:e<$t?2:e<Qt?3:e<Yt?4:e<Xt?5:e<en?6:e<tn?7:e<nn?8:e<rn?9:10},on={encode:zt,decode:Ht,encodingLength:sn},an=on;const cn=(e,t,n=0)=>(an.encode(e,t,n),t),dn=e=>an.encodingLength(e),ln=(e,t)=>{const n=t.byteLength,i=dn(e),r=i+dn(n),s=new Uint8Array(r+n);return cn(e,s,0),cn(n,s,i),s.set(t,r),new hn(e,n,t,s)};class hn{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const fn=({name:e,code:t,encode:n})=>new un(e,t,n);class un{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ln(this.code,t):t.then((e=>ln(this.code,e)))}throw Error("Unknown type, must be binary type")}}const pn=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),gn=fn({name:"sha2-256",code:18,encode:pn("SHA-256")}),mn=fn({name:"sha2-512",code:19,encode:pn("SHA-512")});Object.freeze({__proto__:null,sha256:gn,sha512:mn});const bn=0,wn="identity",yn=Fe,vn=e=>ln(bn,yn(e)),_n={code:bn,name:wn,encode:yn,digest:vn};Object.freeze({__proto__:null,identity:_n});new TextEncoder,new TextDecoder;const An={...tt,...it,...st,...at,...lt,...vt,...Et,...It,...Pt,...Bt};function En(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function xn(e,t,n,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:i}}}const Mn=xn("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),In=xn("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{e=e.substring(1);const t=En(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Sn={utf8:Mn,"utf-8":Mn,hex:An.base16,latin1:In,ascii:In,binary:In,...An};function Cn(e,t="utf8"){const n=Sn[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}class Rn{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=F,this.version=j,this.initialized=!1,this.storagePrefix=L,this.init=async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=(0,a.U5)(t,this.name)}get context(){return(0,a.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,(0,M.mapToObj)(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,M.objToMap)(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Nn{constructor(e,t,n){this.core=e,this.logger=t,this.name=B,this.randomSessionIdentifier=(0,M.generateRandomBytes32)(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>{this.isInitialized();const e=await this.getClientSeed(),t=x.generateKeyPair(e);return x.encodeIss(t.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const e=(0,M.generateKeyPair)();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();const t=await this.getClientSeed(),n=x.generateKeyPair(t),i=this.randomSessionIdentifier,r=U;return await x.signJWT(i,e,r,n)},this.generateSharedKey=(e,t,n)=>{this.isInitialized();const i=this.getPrivateKey(e),r=(0,M.deriveSymKey)(i,t);return this.setSymKey(r,n)},this.setSymKey=async(e,t)=>{this.isInitialized();const n=t||(0,M.hashKey)(e);return await this.keychain.set(n,e),n},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,n)=>{this.isInitialized();const i=(0,M.validateEncoding)(n),r=(0,E.h)(t);if((0,M.isTypeTwoEnvelope)(i))return(0,M.encodeTypeTwoEnvelope)(r,n?.encoding);if((0,M.isTypeOneEnvelope)(i)){const t=i.senderPublicKey,n=i.receiverPublicKey;e=await this.generateSharedKey(t,n)}const s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return(0,M.encrypt)({type:o,symKey:s,message:r,senderPublicKey:a,encoding:n?.encoding})},this.decode=async(e,t,n)=>{this.isInitialized();const i=(0,M.validateDecoding)(t,n);if((0,M.isTypeTwoEnvelope)(i)){const e=(0,M.decodeTypeTwoEnvelope)(t,n?.encoding);return(0,E.j)(e)}if((0,M.isTypeOneEnvelope)(i)){const t=i.receiverPublicKey,n=i.senderPublicKey;e=await this.generateSharedKey(t,n)}try{const i=this.getSymKey(e),r=(0,M.decrypt)({symKey:i,encoded:t,encoding:n?.encoding});return(0,E.j)(r)}catch(r){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(r)}},this.getPayloadType=(e,t=M.BASE64)=>{const n=(0,M.deserialize)({encoded:e,encoding:t});return(0,M.decodeTypeByte)(n.type)},this.getPayloadSenderPublicKey=(e,t=M.BASE64)=>{const n=(0,M.deserialize)({encoded:e,encoding:t});return n.senderPublicKey?(0,I.dI)(n.senderPublicKey,M.BASE16):void 0},this.core=e,this.logger=(0,a.U5)(t,this.name),this.keychain=n||new Rn(this.core,this.logger)}get context(){return(0,a.oI)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(z)}catch{e=(0,M.generateRandomBytes32)(),await this.keychain.set(z,e)}return Cn(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Pn extends h{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=V,this.version=K,this.initialized=!1,this.storagePrefix=L,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();const n=(0,M.hashMessage)(t);let i=this.messages.get(e);return typeof i>"u"&&(i={}),typeof i[n]<"u"||(i[n]=t,this.messages.set(e,i),await this.persist()),n},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>{this.isInitialized();const n=this.get(e),i=(0,M.hashMessage)(t);return typeof n[i]<"u"},this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=(0,a.U5)(e,this.name),this.core=t}get context(){return(0,a.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,(0,M.mapToObj)(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,M.objToMap)(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class kn extends f{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new i.EventEmitter,this.name=W,this.queue=new Map,this.publishTimeout=(0,A.toMiliseconds)(A.ONE_MINUTE),this.failedPublishTimeout=(0,A.toMiliseconds)(A.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(e,t,n)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:n}});const r=n?.ttl||H,s=(0,M.getRelayProtocolName)(n),o=n?.prompt||!1,a=n?.tag||0,c=n?.id||(0,C.getBigIntRpcId)().toString(),d={topic:e,message:t,opts:{ttl:r,relay:s,prompt:o,tag:a,id:c,attestation:n?.attestation}},l=`Failed to publish payload, please try again. id:${c} tag:${a}`,h=Date.now();let f,u=1;try{for(;void 0===f;){if(Date.now()-h>this.publishTimeout)throw new Error(l);this.logger.trace({id:c,attempts:u},`publisher.publish - attempt ${u}`),f=await await(0,M.createExpiringPromise)(this.rpcPublish(e,t,r,s,o,a,c,n?.attestation).catch((e=>this.logger.warn(e))),this.publishTimeout,l),u++,f||await new Promise((e=>setTimeout(e,this.failedPublishTimeout)))}this.relayer.events.emit(Q.publish,d),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:n}})}catch(Ar){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(Ar),null!=(i=n?.internal)&&i.throwOnFailedPublish)throw Ar;this.queue.set(c,d)}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=(0,a.U5)(t,this.name),this.registerEventListeners()}get context(){return(0,a.oI)(this.logger)}rpcPublish(e,t,n,i,r,s,o,a){var c,d,l,h;const f={method:(0,M.getRelayProtocolApi)(i.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:r,tag:s,attestation:a},id:o};return(0,M.isUndefined)(null==(c=f.params)?void 0:c.prompt)&&(null==(d=f.params)||delete d.prompt),(0,M.isUndefined)(null==(l=f.params)?void 0:l.tag)&&(null==(h=f.params)||delete h.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f}),this.relayer.request(f)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async e=>{const{topic:t,message:n,opts:i}=e;await this.publish(t,n,i)}))}registerEventListeners(){this.relayer.core.heartbeat.on(s.li.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Q.connection_stalled);this.checkQueue()})),this.relayer.on(Q.message_ack,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}class Tn{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const i=n.filter((e=>e!==t));i.length?this.map.set(e,i):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var On=Object.defineProperty,Ln=Object.defineProperties,Dn=Object.getOwnPropertyDescriptors,qn=Object.getOwnPropertySymbols,Bn=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable,Un=(e,t,n)=>t in e?On(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fn=(e,t)=>{for(var n in t||(t={}))Bn.call(t,n)&&Un(e,n,t[n]);if(qn)for(var n of qn(t))zn.call(t,n)&&Un(e,n,t[n]);return e},jn=(e,t)=>Ln(e,Dn(t));class Vn extends g{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Tn,this.events=new i.EventEmitter,this.name=ae,this.version=ce,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=L,this.subscribeTimeout=(0,A.toMiliseconds)(A.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const n=(0,M.getRelayProtocolName)(t),i={topic:e,relay:n,transportType:t?.transportType};this.pending.set(e,i);const r=await this.rpcSubscribe(e,n,t?.transportType);return"string"==typeof r&&(this.onSubscribe(r,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),r}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>{if(this.topics.includes(e))return!0;const t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise(((n,i)=>{const r=new A.Watch;r.start(t);const s=setInterval((()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(s),r.stop(t),n(!0)),r.elapsed(t)>=de&&(clearInterval(s),r.stop(t),i(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1))},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,a.U5)(t,this.name),this.clientId=""}get context(){return(0,a.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const n=this.topicMap.get(e);await Promise.all(n.map((async n=>await this.unsubscribeById(e,n,t))))}async unsubscribeById(e,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const i=(0,M.getRelayProtocolName)(n);await this.rpcUnsubscribe(e,t,i);const r=(0,M.getSdkError)("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,r),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,t,n=ne.relay){n===ne.relay&&await this.restartToComplete();const i={method:(0,M.getRelayProtocolApi)(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{const t=(0,M.hashMessage)(e+this.clientId);return n===ne.link_mode?(setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch((e=>this.logger.warn(e)))}),(0,A.toMiliseconds)(A.ONE_SECOND)),t):await await(0,M.createExpiringPromise)(this.relayer.request(i).catch((e=>this.logger.warn(e))),this.subscribeTimeout)?t:null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Q.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,n={method:(0,M.getRelayProtocolApi)(t.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await(0,M.createExpiringPromise)(this.relayer.request(n).catch((e=>this.logger.warn(e))),this.subscribeTimeout)}catch{this.relayer.events.emit(Q.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,n={method:(0,M.getRelayProtocolApi)(t.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let i;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{i=await await(0,M.createExpiringPromise)(this.relayer.request(n).catch((e=>this.logger.warn(e))),this.subscribeTimeout)}catch{this.relayer.events.emit(Q.connection_stalled)}return i}rpcUnsubscribe(e,t,n){const i={method:(0,M.getRelayProtocolApi)(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,jn(Fn({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,Fn({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Fn({},t)),this.topicMap.set(t.topic,e),this.events.emit(oe.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(oe.deleted,jn(Fn({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(oe.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(e),await this.batchSubscribe(e)}}this.events.emit(oe.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=(0,M.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);(0,M.isValidArray)(t)&&this.onBatchSubscribe(t.map(((t,n)=>jn(Fn({},e[n]),{id:t}))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(s.li.pulse,(async()=>{await this.checkPending()})),this.events.on(oe.created,(async e=>{const t=oe.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(oe.deleted,(async e=>{const t=oe.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.restartInProgress||(clearInterval(t),e())}),this.pollingInterval)}))}}var Kn=Object.defineProperty,Hn=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Gn=Object.prototype.propertyIsEnumerable,Jn=(e,t,n)=>t in e?Kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zn=(e,t)=>{for(var n in t||(t={}))Wn.call(t,n)&&Jn(e,n,t[n]);if(Hn)for(var n of Hn(t))Gn.call(t,n)&&Jn(e,n,t[n]);return e};class $n extends u{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new i.EventEmitter,this.name=$,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=(0,A.toMiliseconds)(A.THIRTY_SECONDS+A.ONE_SECOND),this.request=async e=>{var t,n;this.logger.debug("Publishing Request Payload");const i=e.id||(0,C.getBigIntRpcId)().toString();await this.toEstablishConnection();try{const r=this.provider.request(e);this.requestsInFlight.set(i,{promise:r,request:e}),this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - attempt to publish...");const s=await new Promise((async(e,t)=>{const n=()=>{t(new Error(`relayer.request - publish interrupted, id: ${i}`))};this.provider.on(X.disconnect,n);const s=await r;this.provider.off(X.disconnect,n),e(s)}));return this.logger.trace({id:i,method:e.method,topic:null==(n=e.params)?void 0:n.topic},"relayer.request - published"),s}catch(d){throw this.logger.debug(`Failed to Publish Request: ${i}`),d}finally{this.requestsInFlight.delete(i)}},this.resetPingTimeout=()=>{if((0,M.isNode)())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,n;null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)||n.terminate()}),this.heartBeatTimeout)}catch(e){this.logger.warn(e)}},this.onPayloadHandler=e=>{this.onProviderPayload(e),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(Q.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit(Q.error,e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(X.payload,this.onPayloadHandler),this.provider.on(X.connect,this.onConnectHandler),this.provider.on(X.disconnect,this.onDisconnectHandler),this.provider.on(X.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,a.U5)(e.logger,this.name):(0,a.h6)((0,a.iP)({level:e.logger||J})),this.messages=new Pn(this.logger,e.core),this.subscriber=new Vn(this,this.logger),this.publisher=new kn(this,this.logger),this.relayUrl=e?.relayUrl||Z,this.projectId=e.projectId,this.bundleId=(0,M.getBundleId)(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return(0,a.oI)(this.logger)}get connected(){var e,t,n;return 1===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)}get connecting(){var e,t,n;return 0===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)}async publish(e,t,n){this.isInitialized(),await this.publisher.publish(e,t,n),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:ne.relay})}async subscribe(e,t){var n;this.isInitialized(),"relay"===t?.transportType&&await this.toEstablishConnection();let i,r=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"";const s=t=>{t.topic===e&&(this.subscriber.off(oe.created,s),i())};return await Promise.all([new Promise((e=>{i=e,this.subscriber.on(oe.created,s)})),new Promise((async n=>{r=await this.subscriber.subscribe(e,t)||r,n()}))]),r}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map((e=>e.promise)))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await(0,M.createExpiringPromise)(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise((async(e,t)=>{const n=()=>{this.provider.off(X.disconnect,n),t(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(X.disconnect,n),await(0,M.createExpiringPromise)(this.provider.connect(),(0,A.toMiliseconds)(A.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0})),this.subscriber.start().catch((e=>{this.logger.error(e),this.onDisconnectHandler()})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(t){this.logger.error(t);const e=t;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(e.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await(0,M.isOnline)())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.trace(`Batch of ${t.length} message events sorted`);for(const i of t)try{await this.onMessageEvent(i)}catch(n){this.logger.warn(n)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:n}=e;if(!t.sessionExists){const e=(0,M.calcExpiry)(A.FIVE_MINUTES),t={topic:n,expiry:e,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,t)}this.events.emit(Q.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,t,n,i,r;if((0,M.isNode)())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(r=null==(i=null==(n=this.provider)?void 0:n.connection)?void 0:i.socket)||r.once("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(d){this.logger.warn(d)}}isConnectionStalled(e){return this.staleConnectionErrors.some((t=>e.includes(t)))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new S.F(new R.A((0,M.formatRelayRpcUrl)({sdkVersion:te,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:n}=e;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(e){const{topic:t,message:n}=e;if(!n||0===n.length)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const i=this.messages.has(t,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,C.isJsonRpcRequest)(e)){if(!e.method.endsWith(Y))return;const t=e.params,{topic:n,message:i,publishedAt:r,attestation:s}=t.data,o={topic:n,message:i,publishedAt:r,transportType:ne.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Zn({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else(0,C.isJsonRpcResponse)(e)&&this.events.emit(Q.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Q.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=(0,C.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(X.payload,this.onPayloadHandler),this.provider.off(X.connect,this.onConnectHandler),this.provider.off(X.disconnect,this.onDisconnectHandler),this.provider.off(X.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await(0,M.isOnline)();(0,M.subscribeToNetworkChange)((async t=>{e!==t&&(e=t,t?await this.restartTransport().catch((e=>this.logger.error(e))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Q.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e)))}),(0,A.toMiliseconds)(ee))))}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.connected&&(clearInterval(t),e())}),this.connectionStatusPollingInterval)})),await this.transportOpen())}}var Qn=Object.defineProperty,Yn=Object.getOwnPropertySymbols,Xn=Object.prototype.hasOwnProperty,ei=Object.prototype.propertyIsEnumerable,ti=(e,t,n)=>t in e?Qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ni=(e,t)=>{for(var n in t||(t={}))Xn.call(t,n)&&ti(e,n,t[n]);if(Yn)for(var n of Yn(t))ei.call(t,n)&&ti(e,n,t[n]);return e};class ii extends p{constructor(e,t,n,i=L,r=void 0){super(e,t,n,i),this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version=ie,this.cached=[],this.initialized=!1,this.storagePrefix=L,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!(0,M.isUndefined)(e)?this.map.set(this.getKey(e),e):(0,M.isProposalStruct)(e)?this.map.set(e.id,e):(0,M.isSessionStruct)(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((n=>P()(t[n],e[n]))))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const n=ni(ni({},this.getData(e)),t);this.map.set(e,n),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())},this.logger=(0,a.U5)(t,this.name),this.storagePrefix=i,this.getKey=r}get context(){return(0,a.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=(0,M.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ri{constructor(e,t){this.core=e,this.logger=t,this.name=le,this.version=he,this.events=new(r()),this.initialized=!1,this.storagePrefix=L,this.ignoredPayloadTypes=[M.TYPE_1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async e=>{this.isInitialized();const t=(0,M.generateRandomBytes32)(),n=await this.core.crypto.setSymKey(t),i=(0,M.calcExpiry)(A.FIVE_MINUTES),r={protocol:G},s={topic:n,expiry:i,relay:r,active:!1,methods:e?.methods},o=(0,M.formatUri)({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:t,relay:r,expiryTimestamp:i,methods:e?.methods});return this.events.emit(ue.create,s),this.core.expirer.set(n,i),await this.pairings.set(n,s),await this.core.relayer.subscribe(n,{transportType:e?.transportType}),{topic:n,uri:o}},this.pair=async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[Ce.pairing_started]}});this.isValidPair(e,t);const{topic:n,symKey:i,relay:r,expiryTimestamp:s,methods:o}=(0,M.parseUri)(e.uri);let a;if(t.props.properties.topic=n,t.addTrace(Ce.pairing_uri_validation_success),t.addTrace(Ce.pairing_uri_not_expired),this.pairings.keys.includes(n)){if(a=this.pairings.get(n),t.addTrace(Ce.existing_pairing),a.active)throw t.setError(Re.active_pairing_already_exists),new Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);t.addTrace(Ce.pairing_not_expired)}const c=s||(0,M.calcExpiry)(A.FIVE_MINUTES),d={topic:n,relay:r,expiry:c,active:!1,methods:o};this.core.expirer.set(n,c),await this.pairings.set(n,d),t.addTrace(Ce.store_new_pairing),e.activatePairing&&await this.activate({topic:n}),this.events.emit(ue.create,d),t.addTrace(Ce.emit_inactive_pairing),this.core.crypto.keychain.has(n)||await this.core.crypto.setSymKey(i,n),t.addTrace(Ce.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError(Re.no_internet_connection)}try{await this.core.relayer.subscribe(n,{relay:r})}catch(l){throw t.setError(Re.subscribe_pairing_topic_failure),l}return t.addTrace(Ce.subscribe_pairing_topic_success),d},this.activate=async({topic:e})=>{this.isInitialized();const t=(0,M.calcExpiry)(A.THIRTY_DAYS);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:n,resolve:i,reject:r}=(0,M.createDelayedPromise)();this.events.once((0,M.engineEvent)("pairing_ping",e),(({error:e})=>{e?r(e):i()})),await n()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",(0,M.getSdkError)("USER_DISCONNECTED")),await this.deletePairing(t))},this.formatUriFromPairing=e=>{this.isInitialized();const{topic:t,relay:n,expiry:i,methods:r}=e,s=this.core.crypto.keychain.get(t);return(0,M.formatUri)({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:n,expiryTimestamp:i,methods:r})},this.sendRequest=async(e,t,n)=>{const i=(0,C.formatJsonRpcRequest)(t,n),r=await this.core.crypto.encode(e,i),s=fe[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,r,s),i.id},this.sendResult=async(e,t,n)=>{const i=(0,C.formatJsonRpcResult)(e,n),r=await this.core.crypto.encode(t,i),s=await this.core.history.get(t,e),o=fe[s.request.method].res;await this.core.relayer.publish(t,r,o),await this.core.history.resolve(i)},this.sendError=async(e,t,n)=>{const i=(0,C.formatJsonRpcError)(e,n),r=await this.core.crypto.encode(t,i),s=await this.core.history.get(t,e),o=fe[s.request.method]?fe[s.request.method].res:fe.unregistered_method.res;await this.core.relayer.publish(t,r,o),await this.core.history.resolve(i)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,(0,M.getSdkError)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{const e=this.pairings.getAll().filter((e=>(0,M.isExpired)(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))},this.onRelayEventRequest=e=>{const{topic:t,payload:n}=e;switch(n.method){case"wc_pairingPing":return this.onPairingPingRequest(t,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,n);default:return this.onUnknownRpcMethodRequest(t,n)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:n}=e,i=(await this.core.history.get(t,n.id)).request.method;switch(i){case"wc_pairingPing":return this.onPairingPingResponse(t,n);default:return this.onUnknownRpcMethodResponse(i)}},this.onPairingPingRequest=async(e,t)=>{const{id:n}=t;try{this.isValidPing({topic:e}),await this.sendResult(n,e,!0),this.events.emit(ue.ping,{id:n,topic:e})}catch(d){await this.sendError(n,e,d),this.logger.error(d)}},this.onPairingPingResponse=(e,t)=>{const{id:n}=t;setTimeout((()=>{(0,C.isJsonRpcResult)(t)?this.events.emit((0,M.engineEvent)("pairing_ping",n),{}):(0,C.isJsonRpcError)(t)&&this.events.emit((0,M.engineEvent)("pairing_ping",n),{error:t.error})}),500)},this.onPairingDeleteRequest=async(e,t)=>{const{id:n}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(ue.delete,{id:n,topic:e})}catch(d){await this.sendError(n,e,d),this.logger.error(d)}},this.onUnknownRpcMethodRequest=async(e,t)=>{const{id:n,method:i}=t;try{if(this.registeredMethods.includes(i))return;const t=(0,M.getSdkError)("WC_METHOD_UNSUPPORTED",i);await this.sendError(n,e,t),this.logger.error(t)}catch(h){await this.sendError(n,e,h),this.logger.error(h)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error((0,M.getSdkError)("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=(e,t)=>{var n;if(!(0,M.isValidParams)(e)){const{message:n}=(0,M.getInternalError)("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(Re.malformed_pairing_uri),new Error(n)}if(!(0,M.isValidUrl)(e.uri)){const{message:n}=(0,M.getInternalError)("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(Re.malformed_pairing_uri),new Error(n)}const i=(0,M.parseUri)(e?.uri);if(null==(n=i?.relay)||!n.protocol){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(Re.malformed_pairing_uri),new Error(e)}if(null==i||!i.symKey){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(Re.malformed_pairing_uri),new Error(e)}if(null!=i&&i.expiryTimestamp&&(0,A.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError(Re.pairing_expired);const{message:e}=(0,M.getInternalError)("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}},this.isValidPing=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!(0,M.isValidString)(e,!1)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if((0,M.isExpired)(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=(0,M.getInternalError)("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}},this.core=e,this.logger=(0,a.U5)(t,this.name),this.pairings=new ii(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,a.oI)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Q.message,(async e=>{const{topic:t,message:n,transportType:i}=e;if(!this.pairings.keys.includes(t)||i===ne.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const r=await this.core.crypto.decode(t,n);try{(0,C.isJsonRpcRequest)(r)?(this.core.history.set(t,r),this.onRelayEventRequest({topic:t,payload:r})):(0,C.isJsonRpcResponse)(r)&&(await this.core.history.resolve(r),await this.onRelayEventResponse({topic:t,payload:r}),this.core.history.delete(t,r.id))}catch(d){this.logger.error(d)}}))}registerExpirerEvents(){this.core.expirer.on(we.expired,(async e=>{const{topic:t}=(0,M.parseExpirerTarget)(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(ue.expire,{topic:t}))}))}}class si extends l{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new i.EventEmitter,this.name=ge,this.version=me,this.cached=[],this.initialized=!1,this.storagePrefix=L,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:n}),this.records.has(t.id))return;const i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:n,expiry:(0,M.calcExpiry)(A.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(pe.created,i)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,C.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(pe.updated,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((n=>{if(n.topic===e){if(typeof t<"u"&&n.id!==t)return;this.records.delete(n.id),this.events.emit(pe.deleted,n)}})),this.persist()},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,a.U5)(t,this.name)}get context(){return(0,a.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:(0,C.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(pe.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=(0,M.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(pe.created,(e=>{const t=pe.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(pe.updated,(e=>{const t=pe.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(pe.deleted,(e=>{const t=pe.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(s.li.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,A.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(pe.deleted,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class oi extends m{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new i.EventEmitter,this.name=be,this.version=ye,this.cached=[],this.initialized=!1,this.storagePrefix=L,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}},this.set=(e,t)=>{this.isInitialized();const n=this.formatTarget(e),i={target:n,expiry:t};this.expirations.set(n,i),this.checkExpiry(n,i),this.events.emit(we.created,{target:n,expiration:i})},this.get=e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),n=this.getExpiration(t);this.expirations.delete(t),this.events.emit(we.deleted,{target:t,expiration:n})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,a.U5)(t,this.name)}get context(){return(0,a.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return(0,M.formatTopicTarget)(e);if("number"==typeof e)return(0,M.formatIdTarget)(e);const{message:t}=(0,M.getInternalError)("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(we.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=(0,M.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:n}=t;(0,A.toMiliseconds)(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(we.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(s.li.pulse,(()=>this.checkExpirations())),this.events.on(we.created,(e=>{const t=we.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(we.expired,(e=>{const t=we.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(we.deleted,(e=>{const t=we.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ai={};function ci(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}function di(e){const t=ci(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}function li(){return di("document")}function hi(){return ci("document")}Object.defineProperty(ai,"__esModule",{value:!0}),ai.getLocalStorage=ai.getLocalStorageOrThrow=ai.getCrypto=ai.getCryptoOrThrow=ai.getLocation=ai.getLocationOrThrow=ai.getNavigator=ai.getNavigatorOrThrow=fi=ai.getDocument=ai.getDocumentOrThrow=ai.getFromWindowOrThrow=ai.getFromWindow=void 0,ai.getFromWindow=ci,ai.getFromWindowOrThrow=di,ai.getDocumentOrThrow=li;var fi=ai.getDocument=hi;function ui(){return di("navigator")}function pi(){return ci("navigator")}function gi(){return di("location")}function mi(){return ci("location")}function bi(){return di("crypto")}function wi(){return ci("crypto")}function yi(){return di("localStorage")}function vi(){return ci("localStorage")}ai.getNavigatorOrThrow=ui,ai.getNavigator=pi,ai.getLocationOrThrow=gi,ai.getLocation=mi,ai.getCryptoOrThrow=bi,ai.getCrypto=wi,ai.getLocalStorageOrThrow=yi,ai.getLocalStorage=vi;class _i extends b{constructor(e,t,n){super(e,t,n),this.core=e,this.logger=t,this.store=n,this.name=ve,this.verifyUrlV3=xe,this.storagePrefix=L,this.version=T,this.init=async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,A.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async e=>{if(!(0,M.isBrowser)()||this.isDevEnv)return;const t=window.location.origin,{id:n,decryptedId:i}=e,r=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${n}&decryptedId=${i}`;try{const e=fi(),t=this.startAbortTimer(5*A.ONE_SECOND),i=await new Promise(((i,s)=>{const o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);const a=e.createElement("iframe");a.src=r,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});const c=r=>{if(r.data&&"string"==typeof r.data)try{const s=JSON.parse(r.data);if("verify_attestation"===s.type){if((0,x.decodeJWT)(s.attestation).payload.id!==n)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),i(null===s.attestation?"":s.attestation)}}catch(s){this.logger.warn(s)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",i),i}catch(l){this.logger.warn(l)}return""},this.resolve=async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:n,encryptedId:i}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if((0,x.decodeJWT)(t).payload.id!==i)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!n)return;const r=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(n,r)},this.fetchAttestation=async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const n=this.startAbortTimer(5*A.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(n),200===i.status?await i.json():void 0},this.getVerifyUrl=e=>{let t=e||Ee;return Me.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${Ee}`),t=Ee),t},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(A.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}},this.persistPublicKey=async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(h){this.logger.error(h),this.logger.warn("error validating attestation")}const n=await this.fetchAndPersistPublicKey();try{if(n)return this.validateAttestation(e,n)}catch(h){this.logger.error(h),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e},this.validateAttestation=(e,t)=>{const n=(0,M.verifyP256Jwt)(e,t.publicKey),i={hasExpired:(0,A.toMiliseconds)(n.exp)<Date.now(),payload:n};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}},this.logger=(0,a.U5)(t,this.name),this.abortController=new AbortController,this.isDevEnv=(0,M.isTestRun)(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,a.oI)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,A.toMiliseconds)(e))}}class Ai extends w{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=Ie,this.registerDeviceToken=async e=>{const{clientId:t,token:n,notificationType:i,enableEncrypted:r=!1}=e,s=`${Se}/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:n,always_raw:r})})},this.logger=(0,a.U5)(t,this.context)}}var Ei=Object.defineProperty,xi=Object.getOwnPropertySymbols,Mi=Object.prototype.hasOwnProperty,Ii=Object.prototype.propertyIsEnumerable,Si=(e,t,n)=>t in e?Ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ci=(e,t)=>{for(var n in t||(t={}))Mi.call(t,n)&&Si(e,n,t[n]);if(xi)for(var n of xi(t))Ii.call(t,n)&&Si(e,n,t[n]);return e};class Ri extends y{constructor(e,t,n=!0){super(e,t,n),this.core=e,this.logger=t,this.context=Le,this.storagePrefix=L,this.storageVersion=Oe,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!(0,M.isTestRun)())try{const e={eventId:(0,M.uuidv4)(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:(0,M.formatUA)(this.core.relayer.protocol,this.core.relayer.version,te)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}},this.createEvent=e=>{const{event:t="ERROR",type:n="",properties:{topic:i,trace:r}}=e,s=(0,M.uuidv4)(),o=this.core.projectId||"",a=Date.now(),c=Ci({eventId:s,timestamp:a,props:{event:t,type:n,properties:{topic:i,trace:r}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,c),this.shouldPersist=!0),c},this.getEvent=e=>{const{eventId:t,topic:n}=e;if(t)return this.events.get(t);const i=Array.from(this.events.values()).find((e=>e.props.properties.topic===n));return i?Ci(Ci({},i),this.setMethods(i.eventId)):void 0},this.deleteEvent=e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(s.li.pulse,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,A.fromMiliseconds)(Date.now())-(0,A.fromMiliseconds)(e.timestamp)>De&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))},this.setMethods=e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}),this.addTrace=(e,t)=>{const n=this.events.get(e);n&&(n.props.properties.trace.push(t),this.events.set(e,n),this.shouldPersist=!0)},this.setError=(e,t)=>{const n=this.events.get(e);n&&(n.props.type=t,n.timestamp=Date.now(),this.events.set(e,n),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,Ci(Ci({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}},this.submit=async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[n,i]of this.events)i.props.type&&e.push(i);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(t){this.logger.warn(t)}},this.sendEvent=async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${qe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${te}${t}`,{method:"POST",body:JSON.stringify(e)})},this.getAppDomain=()=>(0,M.getAppMetadata)().url,this.logger=(0,a.U5)(t,this.context),this.telemetryEnabled=n,n?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Ni=Object.defineProperty,Pi=Object.getOwnPropertySymbols,ki=Object.prototype.hasOwnProperty,Ti=Object.prototype.propertyIsEnumerable,Oi=(e,t,n)=>t in e?Ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Li=(e,t)=>{for(var n in t||(t={}))ki.call(t,n)&&Oi(e,n,t[n]);if(Pi)for(var n of Pi(t))Ti.call(t,n)&&Oi(e,n,t[n]);return e};class Di extends d{constructor(e){var t;super(e),this.protocol=k,this.version=T,this.name=O,this.events=new i.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.dispatchEnvelope=({topic:e,message:t,sessionExists:n})=>{if(!e||!t)return;const i={topic:e,message:t,publishedAt:Date.now(),transportType:ne.link_mode};this.relayer.onLinkMessageEvent(i,{sessionExists:n})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Z,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=(0,a.iP)({level:"string"==typeof e?.logger&&e.logger?e.logger:D.logger}),{logger:r,chunkLoggerController:c}=(0,a.D5)({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=c,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,a.U5)(r,this.name),this.heartbeat=new s.VH,this.crypto=new Nn(this,this.logger,e?.keychain),this.history=new si(this,this.logger),this.expirer=new oi(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new o.A(Li(Li({},q),e?.storageOptions)),this.relayer=new $n({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new ri(this,this.logger),this.verify=new _i(this,this.logger,this.storage),this.echoClient=new Ai(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Ri(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new Di(e);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem(re,n),t}get context(){return(0,a.oI)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(se,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(se)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const qi=Di,Bi="wc",zi=2,Ui="client",Fi=`${Bi}@${zi}:${Ui}:`,ji={name:Ui,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},Vi={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire",session_authenticate:"session_authenticate",session_request_expire:"session_request_expire"},Ki={database:":memory:"},Hi="WALLETCONNECT_DEEPLINK_CHOICE",Wi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Gi="history",Ji="0.3",Zi="proposal",$i=A.THIRTY_DAYS,Qi="Proposal expired",Yi="session",Xi=A.SEVEN_DAYS,er="engine",tr={wc_sessionPropose:{req:{ttl:A.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:A.ONE_DAY,prompt:!1,tag:1104},res:{ttl:A.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:A.ONE_DAY,prompt:!1,tag:1106},res:{ttl:A.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:A.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:A.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:A.ONE_DAY,prompt:!1,tag:1112},res:{ttl:A.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:A.ONE_DAY,prompt:!1,tag:1114},res:{ttl:A.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:A.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:A.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:A.FIVE_MINUTES,prompt:!1,tag:1119}}},nr={min:A.FIVE_MINUTES,max:A.SEVEN_DAYS},ir={idle:"IDLE",active:"ACTIVE"},rr="request",sr=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],or="wc",ar=1.5,cr="auth",dr="authKeys",lr="pairingTopics",hr="requests",fr=`${or}@1.5:${cr}:`,ur=`${fr}:PUB_KEY`;var pr=Object.defineProperty,gr=Object.defineProperties,mr=Object.getOwnPropertyDescriptors,br=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable,vr=(e,t,n)=>t in e?pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_r=(e,t)=>{for(var n in t||(t={}))wr.call(t,n)&&vr(e,n,t[n]);if(br)for(var n of br(t))yr.call(t,n)&&vr(e,n,t[n]);return e},Ar=(e,t)=>gr(e,mr(t));class Er extends _{constructor(e){super(e),this.name=er,this.events=new(r()),this.initialized=!1,this.requestQueue={state:ir.idle,queue:[]},this.sessionRequestQueue={state:ir.idle,queue:[]},this.requestQueueDelay=A.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(tr)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,A.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=Ar(_r({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:s,relays:o}=t;let a,c=n,d=!1;try{c&&(d=this.client.core.pairing.pairings.get(c).active)}catch(w){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),w}if(!c||!d){const{topic:e,uri:t}=await this.client.core.pairing.create();c=e,a=t}if(!c){const{message:e}=(0,M.getInternalError)("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(e)}const l=await this.client.core.crypto.generateKeyPair(),h=tr.wc_sessionPropose.req.ttl||A.FIVE_MINUTES,f=(0,M.calcExpiry)(h),u=_r({requiredNamespaces:i,optionalNamespaces:r,relays:o??[{protocol:G}],proposer:{publicKey:l,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:c},s&&{sessionProperties:s}),{reject:p,resolve:g,done:m}=(0,M.createDelayedPromise)(h,Qi);this.events.once((0,M.engineEvent)("session_connect"),(async({error:e,session:t})=>{if(e)p(e);else if(t){t.self.publicKey=l;const e=Ar(_r({},t),{pairingTopic:u.pairingTopic,requiredNamespaces:u.requiredNamespaces,optionalNamespaces:u.optionalNamespaces,transportType:ne.relay});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:t.peer.metadata}),this.cleanupDuplicatePairings(e),g(e)}}));const b=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:u,throwOnFailedPublish:!0});return await this.setProposal(b,_r({id:b},u)),{uri:a,approval:m}},this.pair=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(t){throw this.client.logger.error("pair() failed"),t}},this.approve=async e=>{var t,n,i;const r=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[Ne.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(A){throw r.setError(Pe.no_internet_connection),A}try{await this.isValidProposalId(e?.id)}catch(A){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),r.setError(Pe.proposal_not_found),A}try{await this.isValidApprove(e)}catch(A){throw this.client.logger.error("approve() -> isValidApprove() failed"),r.setError(Pe.session_approve_namespace_validation_failure),A}const{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,sessionConfig:d}=e,l=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:r.eventId});const{pairingTopic:h,proposer:f,requiredNamespaces:u,optionalNamespaces:p}=l;let g=null==(n=this.client.core.eventClient)?void 0:n.getEvent({topic:h});g||(g=null==(i=this.client.core.eventClient)?void 0:i.createEvent({type:Ne.session_approve_started,properties:{topic:h,trace:[Ne.session_approve_started,Ne.session_namespaces_validation_success]}}));const m=await this.client.core.crypto.generateKeyPair(),b=f.publicKey,w=await this.client.core.crypto.generateSharedKey(m,b),y=_r(_r({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:m,metadata:this.client.metadata},expiry:(0,M.calcExpiry)(Xi)},c&&{sessionProperties:c}),d&&{sessionConfig:d}),v=ne.relay;g.addTrace(Ne.subscribing_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:v})}catch(A){throw g.setError(Pe.subscribe_session_topic_failure),A}g.addTrace(Ne.subscribe_session_topic_success);const _=Ar(_r({},y),{topic:w,requiredNamespaces:u,optionalNamespaces:p,pairingTopic:h,acknowledged:!1,self:y.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:m,transportType:ne.relay});await this.client.session.set(w,_),g.addTrace(Ne.store_session);try{g.addTrace(Ne.publishing_session_settle),await this.sendRequest({topic:w,method:"wc_sessionSettle",params:y,throwOnFailedPublish:!0}).catch((e=>{throw g?.setError(Pe.session_settle_publish_failure),e})),g.addTrace(Ne.session_settle_publish_success),g.addTrace(Ne.publishing_session_approve),await this.sendResult({id:s,topic:h,result:{relay:{protocol:o??"irn"},responderPublicKey:m},throwOnFailedPublish:!0}).catch((e=>{throw g?.setError(Pe.session_approve_publish_failure),e})),g.addTrace(Ne.session_approve_publish_success)}catch(A){throw this.client.logger.error(A),this.client.session.delete(w,(0,M.getSdkError)("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(w),A}return this.client.core.eventClient.deleteEvent({eventId:g.eventId}),await this.client.core.pairing.updateMetadata({topic:h,metadata:f.metadata}),await this.client.proposal.delete(s,(0,M.getSdkError)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:h}),await this.setExpiry(w,(0,M.calcExpiry)(Xi)),{topic:w,acknowledged:()=>Promise.resolve(this.client.session.get(w))}},this.reject=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(r){throw this.client.logger.error("reject() -> isValidReject() failed"),r}const{id:t,reason:n}=e;let i;try{i=this.client.proposal.get(t).pairingTopic}catch(r){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),r}i&&(await this.sendError({id:t,topic:i,error:n,rpcOpts:tr.wc_sessionPropose.reject}),await this.client.proposal.delete(t,(0,M.getSdkError)("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(p){throw this.client.logger.error("update() -> isValidUpdate() failed"),p}const{topic:t,namespaces:n}=e,{done:i,resolve:r,reject:s}=(0,M.createDelayedPromise)(),o=(0,C.payloadId)(),a=(0,C.getBigIntRpcId)().toString(),c=this.client.session.get(t).namespaces;return this.events.once((0,M.engineEvent)("session_update",o),(({error:e})=>{e?s(e):r()})),await this.client.session.update(t,{namespaces:n}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)})),{acknowledged:i}},this.extend=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(h){throw this.client.logger.error("extend() -> isValidExtend() failed"),h}const{topic:t}=e,n=(0,C.payloadId)(),{done:i,resolve:r,reject:s}=(0,M.createDelayedPromise)();return this.events.once((0,M.engineEvent)("session_extend",n),(({error:e})=>{e?s(e):r()})),await this.setExpiry(t,(0,M.calcExpiry)(Xi)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch((e=>{s(e)})),{acknowledged:i}},this.request=async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(f){throw this.client.logger.error("request() -> isValidRequest() failed"),f}const{chainId:t,request:n,topic:i,expiry:r=tr.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===ne.relay&&await this.confirmOnlineStateOrThrow();const o=(0,C.payloadId)(),a=(0,C.getBigIntRpcId)().toString(),{done:c,resolve:d,reject:l}=(0,M.createDelayedPromise)(r,"Request expired. Please try again.");this.events.once((0,M.engineEvent)("session_request",o),(({error:e,result:t})=>{e?l(e):d(t)}));const h=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);return h?(await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:"wc_sessionRequest",params:{request:Ar(_r({},n),{expiryTimestamp:(0,M.calcExpiry)(r)}),chainId:t},expiry:r,throwOnFailedPublish:!0,appLink:h}).catch((e=>l(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:o}),await c()):await Promise.all([new Promise((async e=>{await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:"wc_sessionRequest",params:{request:Ar(_r({},n),{expiryTimestamp:(0,M.calcExpiry)(r)}),chainId:t},expiry:r,throwOnFailedPublish:!0}).catch((e=>l(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:o}),e()})),new Promise((async e=>{var t;if(null==(t=s.sessionConfig)||!t.disableDeepLink){const e=await(0,M.getDeepLink)(this.client.core.storage,Hi);await(0,M.handleDeeplinkRedirect)({id:o,topic:i,wcDeepLink:e})}e()})),c()]).then((e=>e[2]))},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:n}=e,{id:i}=n,r=this.client.session.get(t);r.transportType===ne.relay&&await this.confirmOnlineStateOrThrow();const s=this.getAppLinkIfEnabled(r.peer.metadata,r.transportType);(0,C.isJsonRpcResult)(n)?await this.sendResult({id:i,topic:t,result:n.result,throwOnFailedPublish:!0,appLink:s}):(0,C.isJsonRpcError)(n)&&await this.sendError({id:i,topic:t,error:n.error,appLink:s}),this.cleanupAfterResponse(e)},this.ping=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=(0,C.payloadId)(),n=(0,C.getBigIntRpcId)().toString(),{done:i,resolve:r,reject:s}=(0,M.createDelayedPromise)();this.events.once((0,M.engineEvent)("session_ping",e),(({error:e})=>{e?s(e):r()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:n}),i()])}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:n,chainId:i}=e,r=(0,C.getBigIntRpcId)().toString();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:n,chainId:i},throwOnFailedPublish:!0,relayRpcId:r})},this.disconnect=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:(0,M.getSdkError)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=(0,M.getInternalError)("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter((t=>(0,M.isSessionCompatible)(t,e)))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(e,t)=>{var n;this.isInitialized(),this.isValidAuthenticate(e);const i=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(n=this.client.metadata.redirect)?void 0:n.linkMode),r=i?ne.link_mode:ne.relay;r===ne.relay&&await this.confirmOnlineStateOrThrow();const{chains:s,statement:o="",uri:a,domain:c,nonce:d,type:l,exp:h,nbf:f,methods:u=[],expiry:p}=e,g=[...e.resources||[]],{topic:m,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:r});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:b}});const w=await this.client.core.crypto.generateKeyPair(),y=(0,M.hashKey)(w);if(await Promise.all([this.client.auth.authKeys.set(ur,{responseTopic:y,publicKey:w}),this.client.auth.pairingTopics.set(y,{topic:y,pairingTopic:m})]),await this.client.core.relayer.subscribe(y,{transportType:r}),this.client.logger.info(`sending request to new pairing topic: ${m}`),u.length>0){const{namespace:e}=(0,M.parseChainId)(s[0]);let t=(0,M.createEncodedRecap)(e,"request",u);(0,M.getRecapFromResources)(g)&&(t=(0,M.mergeEncodedRecaps)(t,g.pop())),g.push(t)}const v=p&&p>tr.wc_sessionAuthenticate.req.ttl?p:tr.wc_sessionAuthenticate.req.ttl,_={authPayload:{type:l??"caip122",chains:s,statement:o,aud:a,domain:c,version:"1",nonce:d,iat:(new Date).toISOString(),exp:h,nbf:f,resources:g},requester:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:(0,M.calcExpiry)(v)},A={eip155:{chains:s,methods:[...new Set(["personal_sign",...u])],events:["chainChanged","accountsChanged"]}},E={requiredNamespaces:{},optionalNamespaces:A,relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:(0,M.calcExpiry)(tr.wc_sessionPropose.req.ttl)},{done:x,resolve:I,reject:S}=(0,M.createDelayedPromise)(v,"Request expired"),R=async({error:e,session:t})=>{if(this.events.off((0,M.engineEvent)("session_request",P),N),e)S(e);else if(t){t.self.publicKey=w,await this.client.session.set(t.topic,t),await this.setExpiry(t.topic,t.expiry),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:t.peer.metadata});const e=this.client.session.get(t.topic);await this.deleteProposal(k),I({session:e})}},N=async e=>{var n,i,s;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),e.error){const t=(0,M.getSdkError)("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off((0,M.engineEvent)("session_connect"),R),S(e.error.message))}await this.deleteProposal(k),this.events.off((0,M.engineEvent)("session_connect"),R);const{cacaos:o,responder:a}=e.result,c=[],d=[];for(const t of o){await(0,M.validateSignedCacao)({cacao:t,projectId:this.client.core.projectId})||(this.client.logger.error(t,"Signature verification failed"),S((0,M.getSdkError)("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:e}=t,n=(0,M.getRecapFromResources)(e.resources),i=[(0,M.getNamespacedDidChainId)(e.iss)],r=(0,M.getDidAddress)(e.iss);if(n){const e=(0,M.getMethodsFromRecap)(n),t=(0,M.getChainsFromRecap)(n);c.push(...e),i.push(...t)}for(const t of i)d.push(`${t}:${r}`)}const l=await this.client.core.crypto.generateSharedKey(w,a.publicKey);let h;c.length>0&&(h={topic:l,acknowledged:!0,self:{publicKey:w,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:(0,M.calcExpiry)(Xi),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:(0,M.buildNamespacesFromAuth)([...new Set(c)],[...new Set(d)]),transportType:r},await this.client.core.relayer.subscribe(l,{transportType:r}),await this.client.session.set(l,h),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:a.metadata}),h=this.client.session.get(l)),null!=(n=this.client.metadata.redirect)&&n.linkMode&&null!=(i=a.metadata.redirect)&&i.linkMode&&null!=(s=a.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(l,{transportType:ne.link_mode})),I({auths:o,session:h})},P=(0,C.payloadId)(),k=(0,C.payloadId)();let T;this.events.once((0,M.engineEvent)("session_connect"),R),this.events.once((0,M.engineEvent)("session_request",P),N);try{if(i){const e=(0,C.formatJsonRpcRequest)("wc_sessionAuthenticate",_,P);this.client.core.history.set(m,e);const n=await this.client.core.crypto.encode("",e,{type:M.TYPE_2,encoding:M.BASE64URL});T=(0,M.getLinkModeURL)(t,m,n)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:_,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:E,expiry:tr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:k})])}catch(L){throw this.events.off((0,M.engineEvent)("session_connect"),R),this.events.off((0,M.engineEvent)("session_request",P),N),L}return await this.setProposal(k,_r({id:k},E)),await this.setAuthRequest(P,{request:Ar(_r({},_),{verifyContext:{}}),pairingTopic:m,transportType:r}),{uri:T??b,response:x}},this.approveSessionAuthenticate=async e=>{const{id:t,auths:n}=e,i=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:[ke.authenticated_session_approve_started]}});try{this.isInitialized()}catch(b){throw i.setError(Te.no_internet_connection),b}const r=this.getPendingAuthRequest(t);if(!r)throw i.setError(Te.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${t}`);const s=r.transportType||ne.relay;s===ne.relay&&await this.confirmOnlineStateOrThrow();const o=r.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=(0,M.hashKey)(o),d={type:M.TYPE_1,receiverPublicKey:o,senderPublicKey:a},l=[],h=[];for(const p of n){if(!await(0,M.validateSignedCacao)({cacao:p,projectId:this.client.core.projectId})){i.setError(Te.invalid_cacao);const e=(0,M.getSdkError)("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:d}),new Error(e.message)}i.addTrace(ke.cacaos_verified);const{p:e}=p,n=(0,M.getRecapFromResources)(e.resources),r=[(0,M.getNamespacedDidChainId)(e.iss)],s=(0,M.getDidAddress)(e.iss);if(n){const e=(0,M.getMethodsFromRecap)(n),t=(0,M.getChainsFromRecap)(n);l.push(...e),r.push(...t)}for(const t of r)h.push(`${t}:${s}`)}const f=await this.client.core.crypto.generateSharedKey(a,o);let u;if(i.addTrace(ke.create_authenticated_session_topic),l?.length>0){u={topic:f,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:r.requester.metadata},controller:o,expiry:(0,M.calcExpiry)(Xi),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:r.pairingTopic,namespaces:(0,M.buildNamespacesFromAuth)([...new Set(l)],[...new Set(h)]),transportType:s},i.addTrace(ke.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:s})}catch(b){throw i.setError(Te.subscribe_authenticated_session_topic_failure),b}i.addTrace(ke.subscribe_authenticated_session_topic_success),await this.client.session.set(f,u),i.addTrace(ke.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:r.pairingTopic,metadata:r.requester.metadata})}i.addTrace(ke.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:t,result:{cacaos:n,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(r.requester.metadata,s)})}catch(b){throw i.setError(Te.authenticated_session_approve_publish_failure),b}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:r.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:u}},this.rejectSessionAuthenticate=async e=>{this.isInitialized();const{id:t,reason:n}=e,i=this.getPendingAuthRequest(t);if(!i)throw new Error(`Could not find pending auth request with id ${t}`);i.transportType===ne.relay&&await this.confirmOnlineStateOrThrow();const r=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=(0,M.hashKey)(r),a={type:M.TYPE_1,receiverPublicKey:r,senderPublicKey:s};await this.sendError({id:t,topic:o,error:n,encodeOpts:a,rpcOpts:tr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,(0,M.getSdkError)("USER_DISCONNECTED"))},this.formatAuthMessage=e=>{this.isInitialized();const{request:t,iss:n}=e;return(0,M.formatMessage)(t,n)},this.processRelayMessageCache=()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)},this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter((n=>{var i,r;return(null==(i=n.peerMetadata)?void 0:i.url)&&(null==(r=n.peerMetadata)?void 0:r.url)===e.peer.metadata.url&&n.topic&&n.topic!==t.topic}));if(0===n.length)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async e=>{var t;const{topic:n,expirerHasDeleted:i=!1,emitEvent:r=!0,id:s=0}=e,{self:o}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,(0,M.getSdkError)("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),i||this.client.core.expirer.del(n),this.client.core.storage.removeItem(Hi).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===n&&this.deletePendingSessionRequest(e.id,(0,M.getSdkError)("USER_DISCONNECTED"))})),n===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=ir.idle),r&&this.client.events.emit("session_delete",{id:s,topic:n})},this.deleteProposal=async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),n=this.client.core.eventClient.getEvent({topic:t.pairingTopic});n?.setError(Pe.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,(0,M.getSdkError)("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")},this.deletePendingSessionRequest=async(e,t,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),n?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),n&&(this.sessionRequestQueue.state=ir.idle,this.client.events.emit("session_request_expire",{id:e}))},this.deletePendingAuthRequest=async(e,t,n=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),n?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))},this.setProposal=async(e,t)=>{this.client.core.expirer.set(e,(0,M.calcExpiry)(tr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)},this.setAuthRequest=async(e,t)=>{const{request:n,pairingTopic:i,transportType:r=ne.relay}=t;this.client.core.expirer.set(e,n.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:e,pairingTopic:i,verifyContext:n.verifyContext,transportType:r})},this.setPendingSessionRequest=async e=>{const{id:t,topic:n,params:i,verifyContext:r}=e,s=i.request.expiryTimestamp||(0,M.calcExpiry)(tr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:n,params:i,verifyContext:r})},this.sendRequest=async e=>{const{topic:t,method:i,params:r,expiry:s,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:d}=e,l=(0,C.formatJsonRpcRequest)(i,r,a);let h;const f=!!d;try{const e=f?M.BASE64URL:M.BASE64;h=await this.client.core.crypto.encode(t,l,{encoding:e})}catch(b){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),b}let u;if(sr.includes(i)){const e=(0,M.hashMessage)(JSON.stringify(l)),t=(0,M.hashMessage)(h);u=await this.client.core.verify.register({id:t,decryptedId:e})}const p=tr[i].req;if(p.attestation=u,s&&(p.ttl=s),o&&(p.id=o),this.client.core.history.set(t,l),f){const e=(0,M.getLinkModeURL)(d,t,h);await n.g.Linking.openURL(e,this.client.name)}else{const e=tr[i].req;s&&(e.ttl=s),o&&(e.id=o),c?(e.internal=Ar(_r({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,h,e)):this.client.core.relayer.publish(t,h,e).catch((e=>this.client.logger.error(e)))}return l.id},this.sendResult=async e=>{const{id:t,topic:i,result:r,throwOnFailedPublish:s,encodeOpts:o,appLink:a}=e,c=(0,C.formatJsonRpcResult)(t,r);let d;const l=a&&typeof(null==n.g?void 0:n.g.Linking)<"u";try{const e=l?M.BASE64URL:M.BASE64;d=await this.client.core.crypto.encode(i,c,Ar(_r({},o||{}),{encoding:e}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),f}let h;try{h=await this.client.core.history.get(i,t)}catch(f){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${t}) failed`),f}if(l){const e=(0,M.getLinkModeURL)(a,i,d);await n.g.Linking.openURL(e,this.client.name)}else{const e=tr[h.request.method].res;s?(e.internal=Ar(_r({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,d,e)):this.client.core.relayer.publish(i,d,e).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)},this.sendError=async e=>{const{id:t,topic:i,error:r,encodeOpts:s,rpcOpts:o,appLink:a}=e,c=(0,C.formatJsonRpcError)(t,r);let d;const l=a&&typeof(null==n.g?void 0:n.g.Linking)<"u";try{const e=l?M.BASE64URL:M.BASE64;d=await this.client.core.crypto.encode(i,c,Ar(_r({},s||{}),{encoding:e}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),f}let h;try{h=await this.client.core.history.get(i,t)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${i}, ${t}) failed`),f}if(l){const e=(0,M.getLinkModeURL)(a,i,d);await n.g.Linking.openURL(e,this.client.name)}else{const e=o||tr[h.request.method].res;this.client.core.relayer.publish(i,d,e)}await this.client.core.history.resolve(c)},this.cleanup=async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let n=!1;(0,M.isExpired)(t.expiry)&&(n=!0),this.client.core.crypto.keychain.has(t.topic)||(n=!0),n&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{(0,M.isExpired)(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state!==ir.active){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ir.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=ir.idle}else this.client.logger.info("Request queue already active, skipping...")},this.processRequest=async e=>{const{topic:t,payload:n,attestation:i,transportType:r,encryptedId:s}=e,o=n.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:n,attestation:i,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,n);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,n);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,n);case"wc_sessionPing":return await this.onSessionPingRequest(t,n);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,n);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:n,attestation:i,encryptedId:s,transportType:r});case"wc_sessionEvent":return await this.onSessionEventRequest(t,n);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:n,attestation:i,encryptedId:s,transportType:r});default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:n,transportType:i}=e,r=(await this.client.core.history.get(t,n.id)).request.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeResponse(t,n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,n);case"wc_sessionExtend":return this.onSessionExtendResponse(t,n);case"wc_sessionPing":return this.onSessionPingResponse(t,n);case"wc_sessionRequest":return this.onSessionRequestResponse(t,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,n);default:return this.client.logger.info(`Unsupported response method ${r}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:t}=e,{message:n}=(0,M.getInternalError)("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=e=>{const{topic:t,requestMethod:n}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(n))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async e=>{const{topic:t,payload:n,attestation:i,encryptedId:r}=e,{params:s,id:o}=n;try{const e=this.client.core.eventClient.getEvent({topic:t});this.isValidConnect(_r({},n.params));const a=s.expiryTimestamp||(0,M.calcExpiry)(tr.wc_sessionPropose.req.ttl),c=_r({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);const d=await this.getVerifyContext({attestationId:i,hash:(0,M.hashMessage)(JSON.stringify(n)),encryptedId:r,metadata:c.proposer.metadata});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(Re.proposal_listener_not_found)),e?.addTrace(Ce.emit_session_proposal),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:d})}catch(a){await this.sendError({id:o,topic:t,error:a,rpcOpts:tr.wc_sessionPropose.autoReject}),this.client.logger.error(a)}},this.onSessionProposeResponse=async(e,t,n)=>{const{id:i}=t;if((0,C.isJsonRpcResult)(t)){const{result:r}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:r});const s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=r.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:c});const d=await this.client.core.relayer.subscribe(c,{transportType:n});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:e})}else if((0,C.isJsonRpcError)(t)){await this.client.proposal.delete(i,(0,M.getSdkError)("USER_DISCONNECTED"));const e=(0,M.engineEvent)("session_connect");if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit((0,M.engineEvent)("session_connect"),{error:t.error})}},this.onSessionSettleRequest=async(e,t)=>{const{id:n,params:i}=t;try{this.isValidSessionSettleRequest(i);const{relay:n,controller:r,expiry:s,namespaces:o,sessionProperties:a,sessionConfig:c}=t.params,d=Ar(_r(_r({topic:e,relay:n,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:r.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:r.publicKey,metadata:r.metadata}},a&&{sessionProperties:a}),c&&{sessionConfig:c}),{transportType:ne.relay}),l=(0,M.engineEvent)("session_connect");if(0===this.events.listenerCount(l))throw new Error(`emitting ${l} without any listeners 997`);this.events.emit((0,M.engineEvent)("session_connect"),{session:d}),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(r){await this.sendError({id:n,topic:e,error:r}),this.client.logger.error(r)}},this.onSessionSettleResponse=async(e,t)=>{const{id:n}=t;(0,C.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit((0,M.engineEvent)("session_approve",n),{})):(0,C.isJsonRpcError)(t)&&(await this.client.session.delete(e,(0,M.getSdkError)("USER_DISCONNECTED")),this.events.emit((0,M.engineEvent)("session_approve",n),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{const{params:n,id:i}=t;try{const t=`${e}_session_update`,r=M.MemoryStore.get(t);if(r&&this.isRequestOutOfSync(r,i))return this.client.logger.info(`Discarding out of sync request - ${i}`),void this.sendError({id:i,topic:e,error:(0,M.getSdkError)("INVALID_UPDATE_REQUEST")});this.isValidUpdate(_r({topic:e},n));try{M.MemoryStore.set(t,i),await this.client.session.update(e,{namespaces:n.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(h){throw M.MemoryStore.delete(t),h}this.client.events.emit("session_update",{id:i,topic:e,params:n})}catch(r){await this.sendError({id:i,topic:e,error:r}),this.client.logger.error(r)}},this.isRequestOutOfSync=(e,t)=>parseInt(t.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,t)=>{const{id:n}=t,i=(0,M.engineEvent)("session_update",n);if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners`);(0,C.isJsonRpcResult)(t)?this.events.emit((0,M.engineEvent)("session_update",n),{}):(0,C.isJsonRpcError)(t)&&this.events.emit((0,M.engineEvent)("session_update",n),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{const{id:n}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,(0,M.calcExpiry)(Xi)),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:e})}catch(i){await this.sendError({id:n,topic:e,error:i}),this.client.logger.error(i)}},this.onSessionExtendResponse=(e,t)=>{const{id:n}=t,i=(0,M.engineEvent)("session_extend",n);if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners`);(0,C.isJsonRpcResult)(t)?this.events.emit((0,M.engineEvent)("session_extend",n),{}):(0,C.isJsonRpcError)(t)&&this.events.emit((0,M.engineEvent)("session_extend",n),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{const{id:n}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:e})}catch(i){await this.sendError({id:n,topic:e,error:i}),this.client.logger.error(i)}},this.onSessionPingResponse=(e,t)=>{const{id:n}=t,i=(0,M.engineEvent)("session_ping",n);if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners`);setTimeout((()=>{(0,C.isJsonRpcResult)(t)?this.events.emit((0,M.engineEvent)("session_ping",n),{}):(0,C.isJsonRpcError)(t)&&this.events.emit((0,M.engineEvent)("session_ping",n),{error:t.error})}),500)},this.onSessionDeleteRequest=async(e,t)=>{const{id:n}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(Q.publish,(async()=>{t(await this.deleteSession({topic:e,id:n}))}))})),this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:(0,M.getSdkError)("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async e=>{var t,n,i;const{topic:r,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:d,params:l}=s;try{await this.isValidRequest(_r({topic:r},l));const e=this.client.session.get(r),s=await this.getVerifyContext({attestationId:o,hash:(0,M.hashMessage)(JSON.stringify((0,C.formatJsonRpcRequest)("wc_sessionRequest",l,d))),encryptedId:a,metadata:e.peer.metadata,transportType:c}),h={id:d,topic:r,params:l,verifyContext:s};await this.setPendingSessionRequest(h),c===ne.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(n=e.peer.metadata.redirect)?void 0:n.universal),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:r,error:h}),this.client.logger.error(h)}},this.onSessionRequestResponse=(e,t)=>{const{id:n}=t,i=(0,M.engineEvent)("session_request",n);if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners`);(0,C.isJsonRpcResult)(t)?this.events.emit((0,M.engineEvent)("session_request",n),{result:t.result}):(0,C.isJsonRpcError)(t)&&this.events.emit((0,M.engineEvent)("session_request",n),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{const{id:n,params:i}=t;try{const t=`${e}_session_event_${i.event.name}`,r=M.MemoryStore.get(t);if(r&&this.isRequestOutOfSync(r,n))return void this.client.logger.info(`Discarding out of sync request - ${n}`);this.isValidEmit(_r({topic:e},i)),this.client.events.emit("session_event",{id:n,topic:e,params:i}),M.MemoryStore.set(t,n)}catch(r){await this.sendError({id:n,topic:e,error:r}),this.client.logger.error(r)}},this.onSessionAuthenticateResponse=(e,t)=>{const{id:n}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,C.isJsonRpcResult)(t)?this.events.emit((0,M.engineEvent)("session_request",n),{result:t.result}):(0,C.isJsonRpcError)(t)&&this.events.emit((0,M.engineEvent)("session_request",n),{error:t.error})},this.onSessionAuthenticateRequest=async e=>{var t;const{topic:n,payload:i,attestation:r,encryptedId:s,transportType:o}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=i.params,d=await this.getVerifyContext({attestationId:r,hash:(0,M.hashMessage)(JSON.stringify(i)),encryptedId:s,metadata:e.metadata,transportType:o}),l={requester:e,pairingTopic:n,id:i.id,authPayload:a,verifyContext:d,expiryTimestamp:c};await this.setAuthRequest(i.id,{request:l,pairingTopic:n,transportType:o}),o===ne.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:n,params:i.params,id:i.id,verifyContext:d})}catch(a){this.client.logger.error(a);const e=i.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),r=this.getAppLinkIfEnabled(i.params.requester.metadata,o),s={type:M.TYPE_1,receiverPublicKey:e,senderPublicKey:t};await this.sendError({id:i.id,topic:n,error:a,encodeOpts:s,rpcOpts:tr.wc_sessionAuthenticate.autoReject,appLink:r})}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=ir.idle,this.processSessionRequestQueue()}),(0,A.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:t})=>{const n=this.client.core.history.pending;n.length>0&&n.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const n=e.request.id,i=(0,M.engineEvent)("session_request",n);if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners`);this.events.emit((0,M.engineEvent)("session_request",e.request.id),{error:t})}))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ir.active)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=ir.active,this.emitSessionRequest(e)}catch(t){this.client.logger.error(t)}else this.client.logger.info("session request queue is empty.")},this.emitSessionRequest=e=>{this.client.events.emit("session_request",e)},this.onPairingCreated=e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,C.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id)})},this.isValidConnect=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:r,relays:s}=e;if((0,M.isUndefined)(t)||await this.isValidPairingTopic(t),!(0,M.isValidRelays)(s,!0)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(e)}!(0,M.isUndefined)(n)&&0!==(0,M.isValidObject)(n)&&this.validateNamespaces(n,"requiredNamespaces"),!(0,M.isUndefined)(i)&&0!==(0,M.isValidObject)(i)&&this.validateNamespaces(i,"optionalNamespaces"),(0,M.isUndefined)(r)||this.validateSessionProps(r,"sessionProperties")},this.validateNamespaces=(e,t)=>{const n=(0,M.isValidRequiredNamespaces)(e,"connect()",t);if(n)throw new Error(n.message)},this.isValidApprove=async e=>{if(!(0,M.isValidParams)(e))throw new Error((0,M.getInternalError)("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:n,relayProtocol:i,sessionProperties:r}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const s=this.client.proposal.get(t),o=(0,M.isValidNamespaces)(n,"approve()");if(o)throw new Error(o.message);const a=(0,M.isConformingNamespaces)(s.requiredNamespaces,n,"approve()");if(a)throw new Error(a.message);if(!(0,M.isValidString)(i,!0)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(e)}(0,M.isUndefined)(r)||this.validateSessionProps(r,"sessionProperties")},this.isValidReject=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:n}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!(0,M.isValidErrorReason)(n)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(e)}},this.isValidSessionSettleRequest=e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:n,namespaces:i,expiry:r}=e;if(!(0,M.isValidRelay)(t)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=(0,M.isValidController)(n,"onSessionSettleRequest()");if(s)throw new Error(s.message);const o=(0,M.isValidNamespaces)(i,"onSessionSettleRequest()");if(o)throw new Error(o.message);if((0,M.isExpired)(r)){const{message:e}=(0,M.getInternalError)("EXPIRED","onSessionSettleRequest()");throw new Error(e)}},this.isValidUpdate=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:n}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const i=this.client.session.get(t),r=(0,M.isValidNamespaces)(n,"update()");if(r)throw new Error(r.message);const s=(0,M.isConformingNamespaces)(i.requiredNamespaces,n,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:n,chainId:i,expiry:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!(0,M.isValidNamespacesChainId)(s,i)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(e)}if(!(0,M.isValidRequest)(n)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(e)}if(!(0,M.isValidNamespacesRequest)(s,i,n.method)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(e)}if(r&&!(0,M.isValidRequestExpiry)(r,nr)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`request() expiry: ${r}. Expiry must be a number (in seconds) between ${nr.min} and ${nr.max}`);throw new Error(e)}},this.isValidRespond=async e=>{var t;if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:n,response:i}=e;try{await this.isValidSessionTopic(n)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(!(0,M.isValidResponse)(i)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(e)}},this.isValidPing=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:n,chainId:i}=e;await this.isValidSessionTopic(t);const{namespaces:r}=this.client.session.get(t);if(!(0,M.isValidNamespacesChainId)(r,i)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(e)}if(!(0,M.isValidEvent)(n)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(e)}if(!(0,M.isValidNamespacesEvent)(r,i,n.name)){const{message:e}=(0,M.getInternalError)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(e)}},this.isValidDisconnect=async e=>{if(!(0,M.isValidParams)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidAuthenticate=e=>{const{chains:t,uri:n,domain:i,nonce:r}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!(0,M.isValidString)(n,!1))throw new Error("uri is required parameter");if(!(0,M.isValidString)(i,!1))throw new Error("domain is required parameter");if(!(0,M.isValidString)(r,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>(0,M.parseChainId)(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=(0,M.parseChainId)(t[0]);if("eip155"!==s)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async e=>{const{attestationId:t,hash:n,encryptedId:i,metadata:r,transportType:s}=e,o={verified:{verifyUrl:r.verifyUrl||Ee,validation:"UNKNOWN",origin:r.url||""}};try{if(s===ne.link_mode){const e=this.getAppLinkIfEnabled(r,s);return o.verified.validation=e&&new URL(e).origin===new URL(r.url).origin?"VALID":"INVALID",o}const e=await this.client.core.verify.resolve({attestationId:t,hash:n,encryptedId:i,verifyUrl:r.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(r.url).origin?"VALID":"INVALID")}catch(a){this.client.logger.warn(a)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(e,t)=>{Object.values(e).forEach((e=>{if(!(0,M.isValidString)(e,!1)){const{message:n}=(0,M.getInternalError)("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw new Error(n)}}))},this.getPendingAuthRequest=e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0},this.addToRecentlyDeleted=(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const n of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(n)}}},this.checkRecentlyDeleted=e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:n}=(0,M.getInternalError)("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(n)}},this.isLinkModeEnabled=(e,t)=>{var i,r,s,o,a,c,d,l,h;return!(!e||t!==ne.link_mode)&&(!0===(null==(r=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:r.linkMode)&&void 0!==(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(d=e?.redirect)?void 0:d.universal)&&""!==(null==(l=e?.redirect)?void 0:l.universal)&&!0===(null==(h=e?.redirect)?void 0:h.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==n.g?void 0:n.g.Linking)<"u")},this.getAppLinkIfEnabled=(e,t)=>{var n;return this.isLinkModeEnabled(e,t)?null==(n=e?.redirect)?void 0:n.universal:void 0},this.handleLinkModeMessage=({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=(0,M.getSearchParamFromURL)(e,"topic")||"",n=decodeURIComponent((0,M.getSearchParamFromURL)(e,"wc_ev")||""),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:ne.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:n,sessionExists:i})},this.registerLinkModeListeners=async()=>{var e;if((0,M.isTestRun)()||(0,M.isReactNative)()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==n.g?void 0:n.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}}}isInitialized(){if(!this.initialized){const{message:e}=(0,M.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Q.message,(e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)}))}async onRelayMessage(e){const{topic:t,message:n,attestation:i,transportType:r}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(ur)?this.client.auth.authKeys.get(ur):{responseTopic:void 0,publicKey:void 0},o=await this.client.core.crypto.decode(t,n,{receiverPublicKey:s,encoding:r===ne.link_mode?M.BASE64URL:M.BASE64});try{(0,C.isJsonRpcRequest)(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o,attestation:i,transportType:r,encryptedId:(0,M.hashMessage)(n)})):(0,C.isJsonRpcResponse)(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o,transportType:r}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o,transportType:r})}catch(h){this.client.logger.error(h)}}registerExpirerEvents(){this.client.core.expirer.on(we.expired,(async e=>{const{topic:t,id:n}=(0,M.parseExpirerTarget)(e.target);return n&&this.client.pendingRequest.keys.includes(n)?await this.deletePendingSessionRequest(n,(0,M.getInternalError)("EXPIRED"),!0):n&&this.client.auth.requests.keys.includes(n)?await this.deletePendingAuthRequest(n,(0,M.getInternalError)("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n})))}))}registerPairingEvents(){this.client.core.pairing.events.on(ue.create,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(ue.delete,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!(0,M.isValidString)(e,!1)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if((0,M.isExpired)(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=(0,M.getInternalError)("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!(0,M.isValidString)(e,!1)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if((0,M.isExpired)(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=(0,M.getInternalError)("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if((0,M.isValidString)(e,!1)){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!(0,M.isValidId)(e)){const{message:t}=(0,M.getInternalError)("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=(0,M.getInternalError)("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if((0,M.isExpired)(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=(0,M.getInternalError)("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class xr extends ii{constructor(e,t){super(e,t,Zi,Fi),this.core=e,this.logger=t}}class Mr extends ii{constructor(e,t){super(e,t,Yi,Fi),this.core=e,this.logger=t}}class Ir extends ii{constructor(e,t){super(e,t,rr,Fi,(e=>e.id)),this.core=e,this.logger=t}}class Sr extends ii{constructor(e,t){super(e,t,dr,fr,(()=>ur)),this.core=e,this.logger=t}}class Cr extends ii{constructor(e,t){super(e,t,lr,fr),this.core=e,this.logger=t}}class Rr extends ii{constructor(e,t){super(e,t,hr,fr,(e=>e.id)),this.core=e,this.logger=t}}class Nr{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new Sr(this.core,this.logger),this.pairingTopics=new Cr(this.core,this.logger),this.requests=new Rr(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class Pr extends v{constructor(e){super(e),this.protocol=Bi,this.version=zi,this.name=ji.name,this.events=new i.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(t){throw this.logger.error(t.message),t}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(t){throw this.logger.error(t.message),t}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(t){throw this.logger.error(t.message),t}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(t){throw this.logger.error(t.message),t}},this.update=async e=>{try{return await this.engine.update(e)}catch(t){throw this.logger.error(t.message),t}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(t){throw this.logger.error(t.message),t}},this.request=async e=>{try{return await this.engine.request(e)}catch(t){throw this.logger.error(t.message),t}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(t){throw this.logger.error(t.message),t}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(t){throw this.logger.error(t.message),t}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(t){throw this.logger.error(t.message),t}},this.find=e=>{try{return this.engine.find(e)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.authenticate=async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(n){throw this.logger.error(n.message),n}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(t){throw this.logger.error(t.message),t}},this.approveSessionAuthenticate=async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(t){throw this.logger.error(t.message),t}},this.rejectSessionAuthenticate=async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(t){throw this.logger.error(t.message),t}},this.name=e?.name||ji.name,this.metadata=e?.metadata||(0,M.getAppMetadata)(),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,a.h6)((0,a.iP)({level:e?.logger||ji.logger}));this.core=e?.core||new qi(e),this.logger=(0,a.U5)(t,this.name),this.session=new Mr(this.core,this.logger),this.proposal=new xr(this.core,this.logger),this.pendingRequest=new Ir(this.core,this.logger),this.engine=new Er(this),this.auth=new Nr(this.core,this.logger)}static async init(e){const t=new Pr(e);return await t.initialize(),t}get context(){return(0,a.oI)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const kr=Mr,Tr=Pr},36525:function(e,t,n){"use strict";n.r(t),n.d(t,{BASE10:function(){return ia},BASE16:function(){return ra},BASE64:function(){return sa},BASE64URL:function(){return oa},COLON:function(){return F},DEFAULT_DEPTH:function(){return V},EMPTY_SPACE:function(){return U},ENV_MAP:function(){return z},INTERNAL_ERRORS:function(){return _c},MemoryStore:function(){return gd},ONE_THOUSAND:function(){return K},REACT_NATIVE_PRODUCT:function(){return B},RELAYER_DEFAULT_PROTOCOL:function(){return Da},SDK_ERRORS:function(){return vc},SDK_TYPE:function(){return H},SLASH:function(){return j},TYPE_0:function(){return ca},TYPE_1:function(){return da},TYPE_2:function(){return la},UTF8:function(){return aa},addResourceToRecap:function(){return Ko},appendToQueryString:function(){return Q},assertType:function(){return se},assignAbilityToActions:function(){return Ho},base64Decode:function(){return Fo},base64Encode:function(){return Uo},buildApprovedNamespaces:function(){return pc},buildAuthObject:function(){return To},buildNamespacesFromAuth:function(){return yc},buildRecapStatement:function(){return ta},calcExpiry:function(){return Ae},capitalize:function(){return ge},capitalizeWord:function(){return pe},createDelayedPromise:function(){return me},createEncodedRecap:function(){return Jo},createExpiringPromise:function(){return be},createRecap:function(){return Vo},decodeRecap:function(){return Go},decodeTypeByte:function(){return _a},decodeTypeTwoEnvelope:function(){return Ma},decrypt:function(){return xa},deriveSymKey:function(){return ba},deserialize:function(){return Sa},encodeRecap:function(){return Wo},encodeTypeByte:function(){return va},encodeTypeTwoEnvelope:function(){return Ea},encrypt:function(){return Aa},engineEvent:function(){return xe},enumify:function(){return ue},formatAccountId:function(){return _},formatAccountWithChain:function(){return M},formatChainId:function(){return y},formatDeeplinkUrl:function(){return Se},formatExpirerTarget:function(){return we},formatIdTarget:function(){return ve},formatMessage:function(){return ko},formatMessageContext:function(){return ae},formatRelayParams:function(){return Qa},formatRelayRpcUrl:function(){return ie},formatStatementFromRecap:function(){return Yo},formatTopicTarget:function(){return ye},formatUA:function(){return ne},formatUri:function(){return Ya},fromBase64:function(){return Le},generateKeyPair:function(){return ga},generateRandomBytes32:function(){return ma},getAccountsChains:function(){return dc},getAccountsFromNamespaces:function(){return C},getAddressFromAccount:function(){return E},getAddressesFromAccounts:function(){return I},getAppMetadata:function(){return Y},getBrowserOnlineStatus:function(){return cd},getBundleId:function(){return $},getChainFromAccount:function(){return x},getChainsFromAccounts:function(){return S},getChainsFromNamespace:function(){return P},getChainsFromNamespaces:function(){return R},getChainsFromRecap:function(){return ea},getChainsFromRequiredNamespaces:function(){return N},getCommonValuesInArrays:function(){return Re},getCryptoKeyFromKeyData:function(){return ka},getDecodedRecapFromResources:function(){return Lo},getDeepLink:function(){return Ce},getDidAddress:function(){return No},getDidAddressSegments:function(){return So},getDidChainId:function(){return Co},getEnvironment:function(){return Z},getHttpUrl:function(){return re},getInternalError:function(){return Ac},getJavascriptID:function(){return te},getJavascriptOS:function(){return ee},getLastItems:function(){return de},getLinkModeURL:function(){return Xa},getMethodsFromRecap:function(){return Xo},getNamespacedDidChainId:function(){return Ro},getNamespacesChains:function(){return lc},getNamespacesEventsForChainId:function(){return fc},getNamespacesFromAccounts:function(){return wc},getNamespacesMethodsForChainId:function(){return hc},getNodeOnlineStatus:function(){return ld},getReCapActions:function(){return zo},getReactNativeOnlineStatus:function(){return dd},getRecapAbilitiesFromResource:function(){return Bo},getRecapFromResources:function(){return na},getRecapResource:function(){return qo},getRelayClientMetadata:function(){return X},getRelayProtocolApi:function(){return Ba},getRelayProtocolName:function(){return qa},getRequiredNamespacesFromNamespaces:function(){return uc},getSdkError:function(){return Ec},getSearchParamFromURL:function(){return Ne},getUniqueValues:function(){return A},handleDeeplinkRedirect:function(){return Ie},hasOverlap:function(){return ce},hashKey:function(){return wa},hashMessage:function(){return ya},isBrowser:function(){return J},isCaipNamespace:function(){return gc},isConformingNamespaces:function(){return nd},isExpired:function(){return Ee},isNode:function(){return W},isOnline:function(){return ad},isProposalStruct:function(){return Tc},isReactNative:function(){return G},isRecap:function(){return Zo},isSessionCompatible:function(){return Rc},isSessionStruct:function(){return Oc},isTelegram:function(){return Te},isTestRun:function(){return ke},isTypeOneEnvelope:function(){return Na},isTypeTwoEnvelope:function(){return Pa},isUndefined:function(){return Ic},isValidAccountId:function(){return Pc},isValidAccounts:function(){return zc},isValidActions:function(){return Fc},isValidArray:function(){return xc},isValidChainId:function(){return Nc},isValidChains:function(){return qc},isValidController:function(){return Lc},isValidEip1271Signature:function(){return go},isValidEip191Signature:function(){return po},isValidErrorReason:function(){return Zc},isValidEvent:function(){return Yc},isValidId:function(){return Gc},isValidNamespaceAccounts:function(){return Uc},isValidNamespaceActions:function(){return jc},isValidNamespaceChains:function(){return Bc},isValidNamespaceMethodsOrEvents:function(){return Dc},isValidNamespaces:function(){return Kc},isValidNamespacesChainId:function(){return Xc},isValidNamespacesEvent:function(){return td},isValidNamespacesRequest:function(){return ed},isValidNumber:function(){return Cc},isValidObject:function(){return Mc},isValidParams:function(){return Jc},isValidRecap:function(){return jo},isValidRelay:function(){return Hc},isValidRelays:function(){return Wc},isValidRequest:function(){return $c},isValidRequestExpiry:function(){return od},isValidRequiredNamespaces:function(){return Vc},isValidResponse:function(){return Qc},isValidString:function(){return Sc},isValidUrl:function(){return kc},mapEntries:function(){return fe},mapToObj:function(){return le},mergeArrays:function(){return Me},mergeEncodedRecaps:function(){return $o},mergeRecaps:function(){return Qo},normalizeNamespaces:function(){return bc},objToMap:function(){return he},parseAccountId:function(){return v},parseChainId:function(){return w},parseContextNames:function(){return oe},parseExpirerTarget:function(){return _e},parseNamespaceKey:function(){return mc},parseRelayParams:function(){return Ja},parseTopic:function(){return $a},parseUri:function(){return Za},populateAuthPayload:function(){return Oo},recapHasResource:function(){return Do},serialize:function(){return Ia},subscribeToBrowserNetworkChange:function(){return fd},subscribeToNetworkChange:function(){return hd},subscribeToReactNativeNetworkChange:function(){return ud},toBase64:function(){return Oe},uuidv4:function(){return Pe},validateDecoding:function(){return Ca},validateEncoding:function(){return Ra},validateSignedCacao:function(){return Po},verifyP256Jwt:function(){return La},verifySignature:function(){return uo}});var i=n(48468),r=n(88900),s=n(38196),o=n(42063),a=n(86663),c=n(51612),d=n(16804),l=n(37052),h=n(50204),f=n(774),u=n(53155),p=n(86729),g=n(37802),m=n(43228);const b=":";function w(e){const[t,n]=e.split(b);return{namespace:t,reference:n}}function y(e){const{namespace:t,reference:n}=e;return[t,n].join(b)}function v(e){const[t,n,i]=e.split(b);return{namespace:t,reference:n,address:i}}function _(e){const{namespace:t,reference:n,address:i}=e;return[t,n,i].join(b)}function A(e,t){const n=[];return e.forEach((e=>{const i=t(e);n.includes(i)||n.push(i)})),n}function E(e){const{address:t}=v(e);return t}function x(e){const{namespace:t,reference:n}=v(e);return y({namespace:t,reference:n})}function M(e,t){const{namespace:n,reference:i}=w(t);return _({namespace:n,reference:i,address:e})}function I(e){return A(e,E)}function S(e){return A(e,x)}function C(e,t=[]){const n=[];return Object.keys(e).forEach((i=>{if(t.length&&!t.includes(i))return;const r=e[i];n.push(...r.accounts)})),n}function R(e,t=[]){const n=[];return Object.keys(e).forEach((i=>{if(t.length&&!t.includes(i))return;const r=e[i];n.push(...S(r.accounts))})),n}function N(e,t=[]){const n=[];return Object.keys(e).forEach((i=>{if(t.length&&!t.includes(i))return;const r=e[i];n.push(...P(i,r))})),n}function P(e,t){return e.includes(":")?[e]:t.chains||[]}var k=Object.defineProperty,T=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,D=(e,t,n)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))O.call(t,n)&&D(e,n,t[n]);if(T)for(var n of T(t))L.call(t,n)&&D(e,n,t[n]);return e};const B="ReactNative",z={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},U=" ",F=":",j="/",V=2,K=1e3,H="js";function W(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function G(){return!(0,s.getDocument)()&&!!(0,s.getNavigator)()&&navigator.product===B}function J(){return!W()&&!!(0,s.getNavigator)()&&!!(0,s.getDocument)()}function Z(){return G()?z.reactNative:W()?z.node:J()?z.browser:z.unknown}function $(){var e;try{return G()&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Application)<"u"?null==(e=n.g.Application)?void 0:e.applicationId:void 0}catch{return}}function Q(e,t){let n=a.parse(e);return n=q(q({},n),t),e=a.stringify(n),e}function Y(){return(0,o.g)()||{name:"",description:"",url:"",icons:[""]}}function X(e,t){var n;const i=Z(),r={protocol:e,version:t,env:i};return"browser"===i&&(r.host=(null==(n=(0,s.getLocation)())?void 0:n.host)||"unknown"),r}function ee(){if(Z()===z.reactNative&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"){const{OS:e,Version:t}=n.g.Platform;return[e,t].join("-")}const e=(0,i.o0)();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function te(){var e;const t=Z();return t===z.browser?[t,(null==(e=(0,s.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}function ne(e,t,n){const i=ee(),r=te();return[[e,t].join("-"),[H,n].join("-"),i,r].join("/")}function ie({protocol:e,version:t,relayUrl:n,sdkVersion:i,auth:r,projectId:s,useOnCloseEvent:o,bundleId:a}){const c=n.split("?"),d=ne(e,t,i),l={auth:r,ua:d,projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},h=Q(c[1]||"",l);return c[0]+"?"+h}function re(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t="wss"===t?"https":"http",[t,n].join("://")}function se(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function oe(e,t=V){return de(e.split(j),t)}function ae(e){return oe(e).join(U)}function ce(e,t){return e.filter((e=>t.includes(e))).length===e.length}function de(e,t=V){return e.slice(Math.max(e.length-t,0))}function le(e){return Object.fromEntries(e.entries())}function he(e){return new Map(Object.entries(e))}function fe(e,t){const n={};return Object.keys(e).forEach((i=>{n[i]=t(e[i])})),n}const ue=e=>e;function pe(e){return e.trim().replace(/^\w/,(e=>e.toUpperCase()))}function ge(e){return e.split(U).map((e=>pe(e))).join(U)}function me(e=r.FIVE_MINUTES,t){const n=(0,r.toMiliseconds)(e||r.FIVE_MINUTES);let i,s,o;return{resolve:e=>{o&&i&&(clearTimeout(o),i(e))},reject:e=>{o&&s&&(clearTimeout(o),s(e))},done:()=>new Promise(((e,r)=>{o=setTimeout((()=>{r(new Error(t))}),n),i=e,s=r}))}}function be(e,t,n){return new Promise((async(i,r)=>{const s=setTimeout((()=>r(new Error(n))),t);try{const t=await e;i(t)}catch(o){r(o)}clearTimeout(s)}))}function we(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function ye(e){return we("topic",e)}function ve(e){return we("id",e)}function _e(e){const[t,n]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)i.topic=n;else{if("id"!==t||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);i.id=Number(n)}return i}function Ae(e,t){return(0,r.fromMiliseconds)((t||Date.now())+(0,r.toMiliseconds)(e))}function Ee(e){return Date.now()>=(0,r.toMiliseconds)(e)}function xe(e,t){return`${e}${t?`:${t}`:""}`}function Me(e=[],t=[]){return[...new Set([...e,...t])]}async function Ie({id:e,topic:t,wcDeepLink:i}){var r;try{if(!i)return;const o="string"==typeof i?JSON.parse(i):i,a=o?.href;if("string"!=typeof a)return;const c=Se(a,e,t),d=Z();if(d===z.browser){if(null==(r=(0,s.getDocument)())||!r.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");c.startsWith("https://")||c.startsWith("http://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,Te()?"_blank":"_self","noreferrer noopener")}else d===z.reactNative&&typeof(null==n.g?void 0:n.g.Linking)<"u"&&await n.g.Linking.openURL(c)}catch(o){console.error(o)}}function Se(e,t,n){const i=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let r=`${e}`;if(e.startsWith("https://t.me")){const t=e.includes("?")?"&startapp=":"?startapp=";r=`${r}${t}${Oe(i,!0)}`}else r=`${r}/wc?${i}`;return r}async function Ce(e,t){let n="";try{if(J()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(i){console.error(i)}return n}function Re(e,t){return e.filter((e=>t.includes(e)))}function Ne(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),i=n.indexOf(t);return n[i+2]}function Pe(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function ke(){return typeof process<"u"&&"true"==={NODE_ENV:"production",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}.IS_VITEST}function Te(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Oe(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function Le(e){return Buffer.from(e,"base64").toString("utf-8")}var De=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{};function qe(e){var t=e.default;if("function"==typeof t){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}var Be={exports:{}};
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",n="finalize already called",i="object"==typeof window,r=i?window:{};r.JS_SHA3_NO_WINDOW&&(i=!1);var s=!i&&"object"==typeof self,o=!r.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;o?r=De:s&&(r=self);var a=!r.JS_SHA3_NO_COMMON_JS&&e.exports,c=!r.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",d="0123456789abcdef".split(""),l=[31,7936,2031616,520093696],h=[4,1024,262144,67108864],f=[1,256,65536,16777216],u=[6,1536,393216,100663296],p=[0,8,16,24],g=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],b=[128,256],w=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};(r.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),c&&(r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var v=function(e,t,n){return function(i){return new B(e,t,e).update(i)[n]()}},_=function(e,t,n){return function(i,r){return new B(e,t,r).update(i)[n]()}},A=function(e,t,n){return function(t,i,r,s){return N["cshake"+e].update(t,i,r,s)[n]()}},E=function(e,t,n){return function(t,i,r,s){return N["kmac"+e].update(t,i,r,s)[n]()}},x=function(e,t,n,i){for(var r=0;r<w.length;++r){var s=w[r];e[s]=t(n,i,s)}return e},M=function(e,t){var n=v(e,t,"hex");return n.create=function(){return new B(e,t,e)},n.update=function(e){return n.create().update(e)},x(n,v,e,t)},I=function(e,t){var n=_(e,t,"hex");return n.create=function(n){return new B(e,t,n)},n.update=function(e,t){return n.create(t).update(e)},x(n,_,e,t)},S=function(e,t){var n=y[e],i=A(e,t,"hex");return i.create=function(i,r,s){return r||s?new B(e,t,i).bytepad([r,s],n):N["shake"+e].create(i)},i.update=function(e,t,n,r){return i.create(t,n,r).update(e)},x(i,A,e,t)},C=function(e,t){var n=y[e],i=E(e,t,"hex");return i.create=function(i,r,s){return new z(e,t,r).bytepad(["KMAC",s],n).bytepad([i],n)},i.update=function(e,t,n,r){return i.create(e,n,r).update(t)},x(i,E,e,t)},R=[{name:"keccak",padding:f,bits:m,createMethod:M},{name:"sha3",padding:u,bits:m,createMethod:M},{name:"shake",padding:l,bits:b,createMethod:I},{name:"cshake",padding:h,bits:b,createMethod:S},{name:"kmac",padding:h,bits:b,createMethod:C}],N={},P=[],k=0;k<R.length;++k)for(var T=R[k],O=T.bits,L=0;L<O.length;++L){var D=T.name+"_"+O[L];if(P.push(D),N[D]=T.createMethod(O[L],T.padding),"sha3"!==T.name){var q=T.name+O[L];P.push(q),N[q]=N[D]}}function B(e,t,n){this.blocks=[],this.s=[],this.padding=t,this.outputBits=n,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var i=0;i<50;++i)this.s[i]=0}function z(e,t,n){B.call(this,e,t,n)}B.prototype.update=function(e){if(this.finalized)throw new Error(n);var i,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(t);if(null===e)throw new Error(t);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!c||!ArrayBuffer.isView(e)))throw new Error(t);i=!0}for(var s,o,a=this.blocks,d=this.byteCount,l=e.length,h=this.blockCount,f=0,u=this.s;f<l;){if(this.reset)for(this.reset=!1,a[0]=this.block,s=1;s<h+1;++s)a[s]=0;if(i)for(s=this.start;f<l&&s<d;++f)a[s>>2]|=e[f]<<p[3&s++];else for(s=this.start;f<l&&s<d;++f)o=e.charCodeAt(f),o<128?a[s>>2]|=o<<p[3&s++]:o<2048?(a[s>>2]|=(192|o>>6)<<p[3&s++],a[s>>2]|=(128|63&o)<<p[3&s++]):o<55296||o>=57344?(a[s>>2]|=(224|o>>12)<<p[3&s++],a[s>>2]|=(128|o>>6&63)<<p[3&s++],a[s>>2]|=(128|63&o)<<p[3&s++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++f)),a[s>>2]|=(240|o>>18)<<p[3&s++],a[s>>2]|=(128|o>>12&63)<<p[3&s++],a[s>>2]|=(128|o>>6&63)<<p[3&s++],a[s>>2]|=(128|63&o)<<p[3&s++]);if(this.lastByteIndex=s,s>=d){for(this.start=s-d,this.block=a[h],s=0;s<h;++s)u[s]^=a[s];U(u),this.reset=!0}else this.start=s}return this},B.prototype.encode=function(e,t){var n=255&e,i=1,r=[n];for(e>>=8,n=255&e;n>0;)r.unshift(n),e>>=8,n=255&e,++i;return t?r.push(i):r.unshift(i),this.update(r),r.length},B.prototype.encodeString=function(e){var n,i=typeof e;if("string"!==i){if("object"!==i)throw new Error(t);if(null===e)throw new Error(t);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!c||!ArrayBuffer.isView(e)))throw new Error(t);n=!0}var r=0,s=e.length;if(n)r=s;else for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);a<128?r+=1:a<2048?r+=2:a<55296||a>=57344?r+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++o)),r+=4)}return r+=this.encode(8*r),this.update(e),r},B.prototype.bytepad=function(e,t){for(var n=this.encode(t),i=0;i<e.length;++i)n+=this.encodeString(e[i]);var r=t-n%t,s=[];return s.length=r,this.update(s),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,n=this.blockCount,i=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[n],t=1;t<n+1;++t)e[t]=0;for(e[n-1]|=2147483648,t=0;t<n;++t)i[t]^=e[t];U(i)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,n=this.s,i=this.outputBlocks,r=this.extraBytes,s=0,o=0,a="";o<i;){for(s=0;s<t&&o<i;++s,++o)e=n[s],a+=d[e>>4&15]+d[15&e]+d[e>>12&15]+d[e>>8&15]+d[e>>20&15]+d[e>>16&15]+d[e>>28&15]+d[e>>24&15];o%t===0&&(U(n),s=0)}return r&&(e=n[s],a+=d[e>>4&15]+d[15&e],r>1&&(a+=d[e>>12&15]+d[e>>8&15]),r>2&&(a+=d[e>>20&15]+d[e>>16&15])),a},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,n=this.s,i=this.outputBlocks,r=this.extraBytes,s=0,o=0,a=this.outputBits>>3;e=r?new ArrayBuffer(i+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);o<i;){for(s=0;s<t&&o<i;++s,++o)c[o]=n[s];o%t===0&&U(n)}return r&&(c[s]=n[s],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,n=this.blockCount,i=this.s,r=this.outputBlocks,s=this.extraBytes,o=0,a=0,c=[];a<r;){for(o=0;o<n&&a<r;++o,++a)e=a<<2,t=i[o],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%n===0&&U(i)}return s&&(e=a<<2,t=i[o],c[e]=255&t,s>1&&(c[e+1]=t>>8&255),s>2&&(c[e+2]=t>>16&255)),c},z.prototype=new B,z.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var U=function(e){var t,n,i,r,s,o,a,c,d,l,h,f,u,p,m,b,w,y,v,_,A,E,x,M,I,S,C,R,N,P,k,T,O,L,D,q,B,z,U,F,j,V,K,H,W,G,J,Z,$,Q,Y,X,ee,te,ne,ie,re,se,oe,ae,ce,de,le;for(i=0;i<48;i+=2)r=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],d=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],f=e[8]^e[18]^e[28]^e[38]^e[48],u=e[9]^e[19]^e[29]^e[39]^e[49],t=f^(o<<1|a>>>31),n=u^(a<<1|o>>>31),e[0]^=t,e[1]^=n,e[10]^=t,e[11]^=n,e[20]^=t,e[21]^=n,e[30]^=t,e[31]^=n,e[40]^=t,e[41]^=n,t=r^(c<<1|d>>>31),n=s^(d<<1|c>>>31),e[2]^=t,e[3]^=n,e[12]^=t,e[13]^=n,e[22]^=t,e[23]^=n,e[32]^=t,e[33]^=n,e[42]^=t,e[43]^=n,t=o^(l<<1|h>>>31),n=a^(h<<1|l>>>31),e[4]^=t,e[5]^=n,e[14]^=t,e[15]^=n,e[24]^=t,e[25]^=n,e[34]^=t,e[35]^=n,e[44]^=t,e[45]^=n,t=c^(f<<1|u>>>31),n=d^(u<<1|f>>>31),e[6]^=t,e[7]^=n,e[16]^=t,e[17]^=n,e[26]^=t,e[27]^=n,e[36]^=t,e[37]^=n,e[46]^=t,e[47]^=n,t=l^(r<<1|s>>>31),n=h^(s<<1|r>>>31),e[8]^=t,e[9]^=n,e[18]^=t,e[19]^=n,e[28]^=t,e[29]^=n,e[38]^=t,e[39]^=n,e[48]^=t,e[49]^=n,p=e[0],m=e[1],G=e[11]<<4|e[10]>>>28,J=e[10]<<4|e[11]>>>28,R=e[20]<<3|e[21]>>>29,N=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,V=e[40]<<18|e[41]>>>14,K=e[41]<<18|e[40]>>>14,L=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,b=e[13]<<12|e[12]>>>20,w=e[12]<<12|e[13]>>>20,Z=e[22]<<10|e[23]>>>22,$=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,k=e[32]<<13|e[33]>>>19,de=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,ne=e[4]<<30|e[5]>>>2,q=e[14]<<6|e[15]>>>26,B=e[15]<<6|e[14]>>>26,y=e[25]<<11|e[24]>>>21,v=e[24]<<11|e[25]>>>21,Q=e[34]<<15|e[35]>>>17,Y=e[35]<<15|e[34]>>>17,T=e[45]<<29|e[44]>>>3,O=e[44]<<29|e[45]>>>3,M=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ie=e[17]<<23|e[16]>>>9,re=e[16]<<23|e[17]>>>9,z=e[26]<<25|e[27]>>>7,U=e[27]<<25|e[26]>>>7,_=e[36]<<21|e[37]>>>11,A=e[37]<<21|e[36]>>>11,X=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,H=e[8]<<27|e[9]>>>5,W=e[9]<<27|e[8]>>>5,S=e[18]<<20|e[19]>>>12,C=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,F=e[38]<<8|e[39]>>>24,j=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,x=e[49]<<14|e[48]>>>18,e[0]=p^~b&y,e[1]=m^~w&v,e[10]=M^~S&R,e[11]=I^~C&N,e[20]=L^~q&z,e[21]=D^~B&U,e[30]=H^~G&Z,e[31]=W^~J&$,e[40]=te^~ie&se,e[41]=ne^~re&oe,e[2]=b^~y&_,e[3]=w^~v&A,e[12]=S^~R&P,e[13]=C^~N&k,e[22]=q^~z&F,e[23]=B^~U&j,e[32]=G^~Z&Q,e[33]=J^~$&Y,e[42]=ie^~se&ae,e[43]=re^~oe&ce,e[4]=y^~_&E,e[5]=v^~A&x,e[14]=R^~P&T,e[15]=N^~k&O,e[24]=z^~F&V,e[25]=U^~j&K,e[34]=Z^~Q&X,e[35]=$^~Y&ee,e[44]=se^~ae&de,e[45]=oe^~ce&le,e[6]=_^~E&p,e[7]=A^~x&m,e[16]=P^~T&M,e[17]=k^~O&I,e[26]=F^~V&L,e[27]=j^~K&D,e[36]=Q^~X&H,e[37]=Y^~ee&W,e[46]=ae^~de&te,e[47]=ce^~le&ne,e[8]=E^~p&b,e[9]=x^~m&w,e[18]=T^~M&S,e[19]=O^~I&C,e[28]=V^~L&q,e[29]=K^~D&B,e[38]=X^~H&G,e[39]=ee^~W&J,e[48]=de^~te&ie,e[49]=le^~ne&re,e[0]^=g[i],e[1]^=g[i+1]};if(a)e.exports=N;else for(k=0;k<P.length;++k)r[P[k]]=N[P[k]]})()})(Be);var ze=Be.exports;const Ue="logger/5.7.0";let Fe=!1,je=!1;const Ve={debug:1,default:2,info:2,warning:3,error:4,off:5};let Ke=Ve.default,He=null;function We(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch{e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}const Ge=We();var Je,Ze;(function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"})(Je||(Je={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Ze||(Ze={}));const $e="0123456789abcdef";class Qe{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();null==Ve[n]&&this.throwArgumentError("invalid log level name","logLevel",e),!(Ke>Ve[n])&&console.log.apply(console,t)}debug(...e){this._log(Qe.levels.DEBUG,e)}info(...e){this._log(Qe.levels.INFO,e)}warn(...e){this._log(Qe.levels.WARNING,e)}makeError(e,t,n){if(je)return this.makeError("censored error",t,{});t||(t=Qe.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach((e=>{const t=n[e];try{if(t instanceof Uint8Array){let n="";for(let e=0;e<t.length;e++)n+=$e[t[e]>>4],n+=$e[15&t[e]];i.push(e+"=Uint8Array(0x"+n+")")}else i.push(e+"="+JSON.stringify(t))}catch{i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push(`code=${t}`),i.push(`version=${this.version}`);const r=e;let s="";switch(t){case Ze.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case Ze.CALL_EXCEPTION:case Ze.INSUFFICIENT_FUNDS:case Ze.MISSING_NEW:case Ze.NONCE_EXPIRED:case Ze.REPLACEMENT_UNDERPRICED:case Ze.TRANSACTION_REPLACED:case Ze.UNPREDICTABLE_GAS_LIMIT:s=t;break}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=r,o.code=t,Object.keys(n).forEach((function(e){o[e]=n[e]})),o}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,Qe.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){Ge&&this.throwError("platform missing String.prototype.normalize",Qe.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ge})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Qe.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Qe.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n=n?": "+n:"",e<t&&this.throwError("missing argument"+n,Qe.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,Qe.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||null==e)&&this.throwError("missing new",Qe.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Qe.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||null==e)&&this.throwError("missing new",Qe.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return He||(He=new Qe(Ue)),He}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Qe.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Fe){if(!e)return;this.globalLogger().throwError("error censorship permanent",Qe.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}je=!!e,Fe=!!t}static setLogLevel(e){const t=Ve[e.toLowerCase()];null!=t?Ke=t:Qe.globalLogger().warn("invalid log level - "+e)}static from(e){return new Qe(e)}}Qe.errors=Ze,Qe.levels=Je;const Ye="bytes/5.7.0",Xe=new Qe(Ye);function et(e){return!!e.toHexString}function tt(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return tt(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function nt(e){return ct(e)&&!(e.length%2)||rt(e)}function it(e){return"number"==typeof e&&e==e&&e%1===0}function rt(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e||!it(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const n=e[t];if(!it(n)||n<0||n>=256)return!1}return!0}function st(e,t){if(t||(t={}),"number"==typeof e){Xe.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),tt(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),et(e)&&(e=e.toHexString()),ct(e)){let n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Xe.throwArgumentError("hex data is odd-length","value",e));const i=[];for(let e=0;e<n.length;e+=2)i.push(parseInt(n.substring(e,e+2),16));return tt(new Uint8Array(i))}return rt(e)?tt(new Uint8Array(e)):Xe.throwArgumentError("invalid arrayify value","value",e)}function ot(e){const t=e.map((e=>st(e))),n=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);return t.reduce(((e,t)=>(i.set(t,e),e+t.length)),0),tt(i)}function at(e,t){e=st(e),e.length>t&&Xe.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(t);return n.set(e,t-e.length),tt(n)}function ct(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const dt="0123456789abcdef";function lt(e,t){if(t||(t={}),"number"==typeof e){Xe.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=dt[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return e=e.toString(16),e.length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),et(e))return e.toHexString();if(ct(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Xe.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(rt(e)){let t="0x";for(let n=0;n<e.length;n++){let i=e[n];t+=dt[(240&i)>>4]+dt[15&i]}return t}return Xe.throwArgumentError("invalid hexlify value","value",e)}function ht(e){if("string"!=typeof e)e=lt(e);else if(!ct(e)||e.length%2)return null;return(e.length-2)/2}function ft(e,t,n){return"string"!=typeof e?e=lt(e):(!ct(e)||e.length%2)&&Xe.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=n?"0x"+e.substring(t,2+2*n):"0x"+e.substring(t)}function ut(e,t){for("string"!=typeof e?e=lt(e):ct(e)||Xe.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Xe.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function pt(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(nt(e)){let n=st(e);64===n.length?(t.v=27+(n[32]>>7),n[32]&=127,t.r=lt(n.slice(0,32)),t.s=lt(n.slice(32,64))):65===n.length?(t.r=lt(n.slice(0,32)),t.s=lt(n.slice(32,64)),t.v=n[64]):Xe.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:Xe.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(n[32]|=128),t._vs=lt(n.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const n=at(st(t._vs),32);t._vs=lt(n);const i=n[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=i:t.recoveryParam!==i&&Xe.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;const r=lt(n);null==t.s?t.s=r:t.s!==r&&Xe.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?Xe.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const n=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==n&&Xe.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&ct(t.r)?t.r=ut(t.r,32):Xe.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&ct(t.s)?t.s=ut(t.s,32):Xe.throwArgumentError("signature missing or invalid s","signature",e);const n=st(t.s);n[0]>=128&&Xe.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(n[0]|=128);const i=lt(n);t._vs&&(ct(t._vs)||Xe.throwArgumentError("signature invalid _vs","signature",e),t._vs=ut(t._vs,32)),null==t._vs?t._vs=i:t._vs!==i&&Xe.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function gt(e){return"0x"+ze.keccak_256(st(e))}var mt={exports:{}},bt={},wt=Object.freeze({__proto__:null,default:bt}),yt=qe(wt);(function(e){(function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function r(e,t,n){if(r.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=r:t.BN=r,r.BN=r,r.wordSize=26;try{s=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:yt.Buffer}catch{}function o(e,t){var i=e.charCodeAt(t);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void n(!1,"Invalid character in "+e)}function a(e,t,n){var i=o(e,n);return n-1>=t&&(i|=o(e,n-1)<<4),i}function c(e,t,i,r){for(var s=0,o=0,a=Math.min(e.length,i),c=t;c<a;c++){var d=e.charCodeAt(c)-48;s*=r,o=d>=49?d-49+10:d>=17?d-17+10:d,n(d>=0&&o<r,"Invalid character"),s+=o}return s}function d(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(r.isBN=function(e){return e instanceof r||null!==e&&"object"==typeof e&&e.constructor.wordSize===r.wordSize&&Array.isArray(e.words)},r.max=function(e,t){return e.cmp(t)>0?e:t},r.min=function(e,t){return e.cmp(t)<0?e:t},r.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var r=0;"-"===e[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,i):(this._parseBase(e,t,r),"le"===i&&this._initArray(this.toArray(),t,i)))},r.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},r.prototype._initArray=function(e,t,i){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,o,a=0;if("be"===i)for(r=e.length-1,s=0;r>=0;r-=3)o=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if("le"===i)for(r=0,s=0;r<e.length;r+=3)o=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()},r.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,s=0,o=0;if("be"===n)for(i=e.length-1;i>=t;i-=2)r=a(e,t,i)<<s,this.words[o]|=67108863&r,s>=18?(s-=18,o+=1,this.words[o]|=r>>>26):s+=8;else{var c=e.length-t;for(i=c%2===0?t+1:t;i<e.length;i+=2)r=a(e,t,i)<<s,this.words[o]|=67108863&r,s>=18?(s-=18,o+=1,this.words[o]|=r>>>26):s+=8}this._strip()},r.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=t)i++;i--,r=r/t|0;for(var s=e.length-n,o=s%i,a=Math.min(s,s-o)+n,d=0,l=n;l<a;l+=i)d=c(e,l,l+i,t),this.imuln(r),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==o){var h=1;for(d=c(e,l,e.length,t),l=0;l<o;l++)h*=t;this.imuln(h),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},r.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},r.prototype._move=function(e){d(e,this)},r.prototype.clone=function(){var e=new r(null);return this.copy(e),e},r.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},typeof Symbol<"u"&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch{r.prototype.inspect=l}else r.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(e,t){var i;if(e=e||10,t=0|t||1,16===e||"hex"===e){i="";for(var r=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<r|s)).toString(16);s=a>>>24-r&16777215,r+=2,r>=26&&(r-=26,o--),i=0!==s||o!==this.length-1?h[6-c.length]+c+i:c+i}for(0!==s&&(i=s.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var d=f[e],l=u[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(l).toString(e);p=p.idivn(l),i=p.isZero()?g+i:h[d-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},r.prototype.toJSON=function(){return this.toString(16,2)},s&&(r.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),r.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};var p=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)};function g(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=e.words[i]>>>r&1}return t}function m(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],s=0|t.words[0],o=r*s,a=67108863&o,c=o/67108864|0;n.words[0]=a;for(var d=1;d<i;d++){for(var l=c>>>26,h=67108863&c,f=Math.min(d,t.length-1),u=Math.max(0,d-e.length+1);u<=f;u++){var p=d-u|0;r=0|e.words[p],s=0|t.words[u],o=r*s+h,l+=o/67108864|0,h=67108863&o}n.words[d]=0|h,c=0|l}return 0!==c?n.words[d]=0|c:n.length--,n._strip()}r.prototype.toArrayLike=function(e,t,i){this._strip();var r=this.byteLength(),s=i||Math.max(1,r);n(r<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=p(e,s),a="le"===t?"LE":"BE";return this["_toArrayLike"+a](o,r),o},r.prototype._toArrayLikeLE=function(e,t){for(var n=0,i=0,r=0,s=0;r<this.length;r++){var o=this.words[r]<<s|i;e[n++]=255&o,n<e.length&&(e[n++]=o>>8&255),n<e.length&&(e[n++]=o>>16&255),6===s?(n<e.length&&(e[n++]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(n<e.length)for(e[n++]=i;n<e.length;)e[n++]=0},r.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,i=0,r=0,s=0;r<this.length;r++){var o=this.words[r]<<s|i;e[n--]=255&o,n>=0&&(e[n--]=o>>8&255),n>=0&&(e[n--]=o>>16&255),6===s?(n>=0&&(e[n--]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(n>=0)for(e[n--]=i;n>=0;)e[n--]=0},Math.clz32?r.prototype._countBits=function(e){return 32-Math.clz32(e)}:r.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},r.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 8191&t||(n+=13,t>>>=13),127&t||(n+=7,t>>>=7),15&t||(n+=4,t>>>=4),3&t||(n+=2,t>>>=2),1&t||n++,n},r.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},r.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},r.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},r.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},r.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},r.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},r.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},r.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},r.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},r.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},r.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},r.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},r.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},r.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this._strip()},r.prototype.notn=function(e){return this.clone().inotn(e)},r.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this._strip()},r.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,s=0;s<i.length;s++)t=(0|n.words[s])+(0|i.words[s])+r,this.words[s]=67108863&t,r=t>>>26;for(;0!==r&&s<n.length;s++)t=(0|n.words[s])+r,this.words[s]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},r.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},r.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(n=this,i=e):(n=e,i=this);for(var s=0,o=0;o<i.length;o++)t=(0|n.words[o])-(0|i.words[o])+s,s=t>>26,this.words[o]=67108863&t;for(;0!==s&&o<n.length;o++)t=(0|n.words[o])+s,s=t>>26,this.words[o]=67108863&t;if(0===s&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(e){return this.clone().isub(e)};var b=function(e,t,n){var i,r,s,o=e.words,a=t.words,c=n.words,d=0,l=0|o[0],h=8191&l,f=l>>>13,u=0|o[1],p=8191&u,g=u>>>13,m=0|o[2],b=8191&m,w=m>>>13,y=0|o[3],v=8191&y,_=y>>>13,A=0|o[4],E=8191&A,x=A>>>13,M=0|o[5],I=8191&M,S=M>>>13,C=0|o[6],R=8191&C,N=C>>>13,P=0|o[7],k=8191&P,T=P>>>13,O=0|o[8],L=8191&O,D=O>>>13,q=0|o[9],B=8191&q,z=q>>>13,U=0|a[0],F=8191&U,j=U>>>13,V=0|a[1],K=8191&V,H=V>>>13,W=0|a[2],G=8191&W,J=W>>>13,Z=0|a[3],$=8191&Z,Q=Z>>>13,Y=0|a[4],X=8191&Y,ee=Y>>>13,te=0|a[5],ne=8191&te,ie=te>>>13,re=0|a[6],se=8191&re,oe=re>>>13,ae=0|a[7],ce=8191&ae,de=ae>>>13,le=0|a[8],he=8191&le,fe=le>>>13,ue=0|a[9],pe=8191&ue,ge=ue>>>13;n.negative=e.negative^t.negative,n.length=19,i=Math.imul(h,F),r=Math.imul(h,j),r=r+Math.imul(f,F)|0,s=Math.imul(f,j);var me=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(p,F),r=Math.imul(p,j),r=r+Math.imul(g,F)|0,s=Math.imul(g,j),i=i+Math.imul(h,K)|0,r=r+Math.imul(h,H)|0,r=r+Math.imul(f,K)|0,s=s+Math.imul(f,H)|0;var be=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(b,F),r=Math.imul(b,j),r=r+Math.imul(w,F)|0,s=Math.imul(w,j),i=i+Math.imul(p,K)|0,r=r+Math.imul(p,H)|0,r=r+Math.imul(g,K)|0,s=s+Math.imul(g,H)|0,i=i+Math.imul(h,G)|0,r=r+Math.imul(h,J)|0,r=r+Math.imul(f,G)|0,s=s+Math.imul(f,J)|0;var we=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(v,F),r=Math.imul(v,j),r=r+Math.imul(_,F)|0,s=Math.imul(_,j),i=i+Math.imul(b,K)|0,r=r+Math.imul(b,H)|0,r=r+Math.imul(w,K)|0,s=s+Math.imul(w,H)|0,i=i+Math.imul(p,G)|0,r=r+Math.imul(p,J)|0,r=r+Math.imul(g,G)|0,s=s+Math.imul(g,J)|0,i=i+Math.imul(h,$)|0,r=r+Math.imul(h,Q)|0,r=r+Math.imul(f,$)|0,s=s+Math.imul(f,Q)|0;var ye=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(E,F),r=Math.imul(E,j),r=r+Math.imul(x,F)|0,s=Math.imul(x,j),i=i+Math.imul(v,K)|0,r=r+Math.imul(v,H)|0,r=r+Math.imul(_,K)|0,s=s+Math.imul(_,H)|0,i=i+Math.imul(b,G)|0,r=r+Math.imul(b,J)|0,r=r+Math.imul(w,G)|0,s=s+Math.imul(w,J)|0,i=i+Math.imul(p,$)|0,r=r+Math.imul(p,Q)|0,r=r+Math.imul(g,$)|0,s=s+Math.imul(g,Q)|0,i=i+Math.imul(h,X)|0,r=r+Math.imul(h,ee)|0,r=r+Math.imul(f,X)|0,s=s+Math.imul(f,ee)|0;var ve=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(I,F),r=Math.imul(I,j),r=r+Math.imul(S,F)|0,s=Math.imul(S,j),i=i+Math.imul(E,K)|0,r=r+Math.imul(E,H)|0,r=r+Math.imul(x,K)|0,s=s+Math.imul(x,H)|0,i=i+Math.imul(v,G)|0,r=r+Math.imul(v,J)|0,r=r+Math.imul(_,G)|0,s=s+Math.imul(_,J)|0,i=i+Math.imul(b,$)|0,r=r+Math.imul(b,Q)|0,r=r+Math.imul(w,$)|0,s=s+Math.imul(w,Q)|0,i=i+Math.imul(p,X)|0,r=r+Math.imul(p,ee)|0,r=r+Math.imul(g,X)|0,s=s+Math.imul(g,ee)|0,i=i+Math.imul(h,ne)|0,r=r+Math.imul(h,ie)|0,r=r+Math.imul(f,ne)|0,s=s+Math.imul(f,ie)|0;var _e=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(R,F),r=Math.imul(R,j),r=r+Math.imul(N,F)|0,s=Math.imul(N,j),i=i+Math.imul(I,K)|0,r=r+Math.imul(I,H)|0,r=r+Math.imul(S,K)|0,s=s+Math.imul(S,H)|0,i=i+Math.imul(E,G)|0,r=r+Math.imul(E,J)|0,r=r+Math.imul(x,G)|0,s=s+Math.imul(x,J)|0,i=i+Math.imul(v,$)|0,r=r+Math.imul(v,Q)|0,r=r+Math.imul(_,$)|0,s=s+Math.imul(_,Q)|0,i=i+Math.imul(b,X)|0,r=r+Math.imul(b,ee)|0,r=r+Math.imul(w,X)|0,s=s+Math.imul(w,ee)|0,i=i+Math.imul(p,ne)|0,r=r+Math.imul(p,ie)|0,r=r+Math.imul(g,ne)|0,s=s+Math.imul(g,ie)|0,i=i+Math.imul(h,se)|0,r=r+Math.imul(h,oe)|0,r=r+Math.imul(f,se)|0,s=s+Math.imul(f,oe)|0;var Ae=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(k,F),r=Math.imul(k,j),r=r+Math.imul(T,F)|0,s=Math.imul(T,j),i=i+Math.imul(R,K)|0,r=r+Math.imul(R,H)|0,r=r+Math.imul(N,K)|0,s=s+Math.imul(N,H)|0,i=i+Math.imul(I,G)|0,r=r+Math.imul(I,J)|0,r=r+Math.imul(S,G)|0,s=s+Math.imul(S,J)|0,i=i+Math.imul(E,$)|0,r=r+Math.imul(E,Q)|0,r=r+Math.imul(x,$)|0,s=s+Math.imul(x,Q)|0,i=i+Math.imul(v,X)|0,r=r+Math.imul(v,ee)|0,r=r+Math.imul(_,X)|0,s=s+Math.imul(_,ee)|0,i=i+Math.imul(b,ne)|0,r=r+Math.imul(b,ie)|0,r=r+Math.imul(w,ne)|0,s=s+Math.imul(w,ie)|0,i=i+Math.imul(p,se)|0,r=r+Math.imul(p,oe)|0,r=r+Math.imul(g,se)|0,s=s+Math.imul(g,oe)|0,i=i+Math.imul(h,ce)|0,r=r+Math.imul(h,de)|0,r=r+Math.imul(f,ce)|0,s=s+Math.imul(f,de)|0;var Ee=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(L,F),r=Math.imul(L,j),r=r+Math.imul(D,F)|0,s=Math.imul(D,j),i=i+Math.imul(k,K)|0,r=r+Math.imul(k,H)|0,r=r+Math.imul(T,K)|0,s=s+Math.imul(T,H)|0,i=i+Math.imul(R,G)|0,r=r+Math.imul(R,J)|0,r=r+Math.imul(N,G)|0,s=s+Math.imul(N,J)|0,i=i+Math.imul(I,$)|0,r=r+Math.imul(I,Q)|0,r=r+Math.imul(S,$)|0,s=s+Math.imul(S,Q)|0,i=i+Math.imul(E,X)|0,r=r+Math.imul(E,ee)|0,r=r+Math.imul(x,X)|0,s=s+Math.imul(x,ee)|0,i=i+Math.imul(v,ne)|0,r=r+Math.imul(v,ie)|0,r=r+Math.imul(_,ne)|0,s=s+Math.imul(_,ie)|0,i=i+Math.imul(b,se)|0,r=r+Math.imul(b,oe)|0,r=r+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,i=i+Math.imul(p,ce)|0,r=r+Math.imul(p,de)|0,r=r+Math.imul(g,ce)|0,s=s+Math.imul(g,de)|0,i=i+Math.imul(h,he)|0,r=r+Math.imul(h,fe)|0,r=r+Math.imul(f,he)|0,s=s+Math.imul(f,fe)|0;var xe=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(B,F),r=Math.imul(B,j),r=r+Math.imul(z,F)|0,s=Math.imul(z,j),i=i+Math.imul(L,K)|0,r=r+Math.imul(L,H)|0,r=r+Math.imul(D,K)|0,s=s+Math.imul(D,H)|0,i=i+Math.imul(k,G)|0,r=r+Math.imul(k,J)|0,r=r+Math.imul(T,G)|0,s=s+Math.imul(T,J)|0,i=i+Math.imul(R,$)|0,r=r+Math.imul(R,Q)|0,r=r+Math.imul(N,$)|0,s=s+Math.imul(N,Q)|0,i=i+Math.imul(I,X)|0,r=r+Math.imul(I,ee)|0,r=r+Math.imul(S,X)|0,s=s+Math.imul(S,ee)|0,i=i+Math.imul(E,ne)|0,r=r+Math.imul(E,ie)|0,r=r+Math.imul(x,ne)|0,s=s+Math.imul(x,ie)|0,i=i+Math.imul(v,se)|0,r=r+Math.imul(v,oe)|0,r=r+Math.imul(_,se)|0,s=s+Math.imul(_,oe)|0,i=i+Math.imul(b,ce)|0,r=r+Math.imul(b,de)|0,r=r+Math.imul(w,ce)|0,s=s+Math.imul(w,de)|0,i=i+Math.imul(p,he)|0,r=r+Math.imul(p,fe)|0,r=r+Math.imul(g,he)|0,s=s+Math.imul(g,fe)|0,i=i+Math.imul(h,pe)|0,r=r+Math.imul(h,ge)|0,r=r+Math.imul(f,pe)|0,s=s+Math.imul(f,ge)|0;var Me=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(B,K),r=Math.imul(B,H),r=r+Math.imul(z,K)|0,s=Math.imul(z,H),i=i+Math.imul(L,G)|0,r=r+Math.imul(L,J)|0,r=r+Math.imul(D,G)|0,s=s+Math.imul(D,J)|0,i=i+Math.imul(k,$)|0,r=r+Math.imul(k,Q)|0,r=r+Math.imul(T,$)|0,s=s+Math.imul(T,Q)|0,i=i+Math.imul(R,X)|0,r=r+Math.imul(R,ee)|0,r=r+Math.imul(N,X)|0,s=s+Math.imul(N,ee)|0,i=i+Math.imul(I,ne)|0,r=r+Math.imul(I,ie)|0,r=r+Math.imul(S,ne)|0,s=s+Math.imul(S,ie)|0,i=i+Math.imul(E,se)|0,r=r+Math.imul(E,oe)|0,r=r+Math.imul(x,se)|0,s=s+Math.imul(x,oe)|0,i=i+Math.imul(v,ce)|0,r=r+Math.imul(v,de)|0,r=r+Math.imul(_,ce)|0,s=s+Math.imul(_,de)|0,i=i+Math.imul(b,he)|0,r=r+Math.imul(b,fe)|0,r=r+Math.imul(w,he)|0,s=s+Math.imul(w,fe)|0,i=i+Math.imul(p,pe)|0,r=r+Math.imul(p,ge)|0,r=r+Math.imul(g,pe)|0,s=s+Math.imul(g,ge)|0;var Ie=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(B,G),r=Math.imul(B,J),r=r+Math.imul(z,G)|0,s=Math.imul(z,J),i=i+Math.imul(L,$)|0,r=r+Math.imul(L,Q)|0,r=r+Math.imul(D,$)|0,s=s+Math.imul(D,Q)|0,i=i+Math.imul(k,X)|0,r=r+Math.imul(k,ee)|0,r=r+Math.imul(T,X)|0,s=s+Math.imul(T,ee)|0,i=i+Math.imul(R,ne)|0,r=r+Math.imul(R,ie)|0,r=r+Math.imul(N,ne)|0,s=s+Math.imul(N,ie)|0,i=i+Math.imul(I,se)|0,r=r+Math.imul(I,oe)|0,r=r+Math.imul(S,se)|0,s=s+Math.imul(S,oe)|0,i=i+Math.imul(E,ce)|0,r=r+Math.imul(E,de)|0,r=r+Math.imul(x,ce)|0,s=s+Math.imul(x,de)|0,i=i+Math.imul(v,he)|0,r=r+Math.imul(v,fe)|0,r=r+Math.imul(_,he)|0,s=s+Math.imul(_,fe)|0,i=i+Math.imul(b,pe)|0,r=r+Math.imul(b,ge)|0,r=r+Math.imul(w,pe)|0,s=s+Math.imul(w,ge)|0;var Se=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(B,$),r=Math.imul(B,Q),r=r+Math.imul(z,$)|0,s=Math.imul(z,Q),i=i+Math.imul(L,X)|0,r=r+Math.imul(L,ee)|0,r=r+Math.imul(D,X)|0,s=s+Math.imul(D,ee)|0,i=i+Math.imul(k,ne)|0,r=r+Math.imul(k,ie)|0,r=r+Math.imul(T,ne)|0,s=s+Math.imul(T,ie)|0,i=i+Math.imul(R,se)|0,r=r+Math.imul(R,oe)|0,r=r+Math.imul(N,se)|0,s=s+Math.imul(N,oe)|0,i=i+Math.imul(I,ce)|0,r=r+Math.imul(I,de)|0,r=r+Math.imul(S,ce)|0,s=s+Math.imul(S,de)|0,i=i+Math.imul(E,he)|0,r=r+Math.imul(E,fe)|0,r=r+Math.imul(x,he)|0,s=s+Math.imul(x,fe)|0,i=i+Math.imul(v,pe)|0,r=r+Math.imul(v,ge)|0,r=r+Math.imul(_,pe)|0,s=s+Math.imul(_,ge)|0;var Ce=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(B,X),r=Math.imul(B,ee),r=r+Math.imul(z,X)|0,s=Math.imul(z,ee),i=i+Math.imul(L,ne)|0,r=r+Math.imul(L,ie)|0,r=r+Math.imul(D,ne)|0,s=s+Math.imul(D,ie)|0,i=i+Math.imul(k,se)|0,r=r+Math.imul(k,oe)|0,r=r+Math.imul(T,se)|0,s=s+Math.imul(T,oe)|0,i=i+Math.imul(R,ce)|0,r=r+Math.imul(R,de)|0,r=r+Math.imul(N,ce)|0,s=s+Math.imul(N,de)|0,i=i+Math.imul(I,he)|0,r=r+Math.imul(I,fe)|0,r=r+Math.imul(S,he)|0,s=s+Math.imul(S,fe)|0,i=i+Math.imul(E,pe)|0,r=r+Math.imul(E,ge)|0,r=r+Math.imul(x,pe)|0,s=s+Math.imul(x,ge)|0;var Re=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(B,ne),r=Math.imul(B,ie),r=r+Math.imul(z,ne)|0,s=Math.imul(z,ie),i=i+Math.imul(L,se)|0,r=r+Math.imul(L,oe)|0,r=r+Math.imul(D,se)|0,s=s+Math.imul(D,oe)|0,i=i+Math.imul(k,ce)|0,r=r+Math.imul(k,de)|0,r=r+Math.imul(T,ce)|0,s=s+Math.imul(T,de)|0,i=i+Math.imul(R,he)|0,r=r+Math.imul(R,fe)|0,r=r+Math.imul(N,he)|0,s=s+Math.imul(N,fe)|0,i=i+Math.imul(I,pe)|0,r=r+Math.imul(I,ge)|0,r=r+Math.imul(S,pe)|0,s=s+Math.imul(S,ge)|0;var Ne=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(B,se),r=Math.imul(B,oe),r=r+Math.imul(z,se)|0,s=Math.imul(z,oe),i=i+Math.imul(L,ce)|0,r=r+Math.imul(L,de)|0,r=r+Math.imul(D,ce)|0,s=s+Math.imul(D,de)|0,i=i+Math.imul(k,he)|0,r=r+Math.imul(k,fe)|0,r=r+Math.imul(T,he)|0,s=s+Math.imul(T,fe)|0,i=i+Math.imul(R,pe)|0,r=r+Math.imul(R,ge)|0,r=r+Math.imul(N,pe)|0,s=s+Math.imul(N,ge)|0;var Pe=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(B,ce),r=Math.imul(B,de),r=r+Math.imul(z,ce)|0,s=Math.imul(z,de),i=i+Math.imul(L,he)|0,r=r+Math.imul(L,fe)|0,r=r+Math.imul(D,he)|0,s=s+Math.imul(D,fe)|0,i=i+Math.imul(k,pe)|0,r=r+Math.imul(k,ge)|0,r=r+Math.imul(T,pe)|0,s=s+Math.imul(T,ge)|0;var ke=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(B,he),r=Math.imul(B,fe),r=r+Math.imul(z,he)|0,s=Math.imul(z,fe),i=i+Math.imul(L,pe)|0,r=r+Math.imul(L,ge)|0,r=r+Math.imul(D,pe)|0,s=s+Math.imul(D,ge)|0;var Te=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(B,pe),r=Math.imul(B,ge),r=r+Math.imul(z,pe)|0,s=Math.imul(z,ge);var Oe=(d+i|0)+((8191&r)<<13)|0;return d=(s+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,c[0]=me,c[1]=be,c[2]=we,c[3]=ye,c[4]=ve,c[5]=_e,c[6]=Ae,c[7]=Ee,c[8]=xe,c[9]=Me,c[10]=Ie,c[11]=Se,c[12]=Ce,c[13]=Re,c[14]=Ne,c[15]=Pe,c[16]=ke,c[17]=Te,c[18]=Oe,0!==d&&(c[19]=d,n.length++),n};function w(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,s=0;s<n.length-1;s++){var o=r;r=0;for(var a=67108863&i,c=Math.min(s,t.length-1),d=Math.max(0,s-e.length+1);d<=c;d++){var l=s-d,h=0|e.words[l],f=0|t.words[d],u=h*f,p=67108863&u;o=o+(u/67108864|0)|0,p=p+a|0,a=67108863&p,o=o+(p>>>26)|0,r+=o>>>26,o&=67108863}n.words[s]=a,i=o,o=r}return 0!==i?n.words[s]=i:n.length--,n._strip()}function y(e,t,n){return w(e,t,n)}Math.imul||(b=m),r.prototype.mulTo=function(e,t){var n,i=this.length+e.length;return n=10===this.length&&10===e.length?b(this,e,t):i<63?m(this,e,t):i<1024?w(this,e,t):y(this,e,t),n},r.prototype.mul=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},r.prototype.mulf=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),y(this,e,t)},r.prototype.imul=function(e){return this.clone().mulTo(e,this)},r.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var i=0,r=0;r<this.length;r++){var s=(0|this.words[r])*e,o=(67108863&s)+(67108863&i);i>>=26,i+=s/67108864|0,i+=o>>>26,this.words[r]=67108863&o}return 0!==i&&(this.words[r]=i,this.length++),t?this.ineg():this},r.prototype.muln=function(e){return this.clone().imuln(e)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(e){var t=g(e);if(0===t.length)return new r(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var s=n.sqr();i<t.length;i++,s=s.sqr())0!==t[i]&&(n=n.mul(s));return n},r.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<i;this.words[t]=c|o,o=a>>>26-i}o&&(this.words[t]=o,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},r.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},r.prototype.iushrn=function(e,t,i){var r;n("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=i;if(r-=o,r=Math.max(0,r),c){for(var d=0;d<o;d++)c.words[d]=this.words[d];c.length=o}if(0!==o)if(this.length>o)for(this.length-=o,d=0;d<this.length;d++)this.words[d]=this.words[d+o];else this.words[0]=0,this.length=1;var l=0;for(d=this.length-1;d>=0&&(0!==l||d>=r);d--){var h=0|this.words[d];this.words[d]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(e,t,i){return n(0===this.negative),this.iushrn(e,t,i)},r.prototype.shln=function(e){return this.clone().ishln(e)},r.prototype.ushln=function(e){return this.clone().iushln(e)},r.prototype.shrn=function(e){return this.clone().ishrn(e)},r.prototype.ushrn=function(e){return this.clone().iushrn(e)},r.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return!1;var s=this.words[i];return!!(s&r)},r.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},r.prototype.maskn=function(e){return this.clone().imaskn(e)},r.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},r.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},r.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},r.prototype.addn=function(e){return this.clone().iaddn(e)},r.prototype.subn=function(e){return this.clone().isubn(e)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(e,t,i){var r,s=e.length+i;this._expand(s);var o,a=0;for(r=0;r<e.length;r++){o=(0|this.words[r+i])+a;var c=(0|e.words[r])*t;o-=67108863&c,a=(o>>26)-(c/67108864|0),this.words[r+i]=67108863&o}for(;r<this.length-i;r++)o=(0|this.words[r+i])+a,a=o>>26,this.words[r+i]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,r=0;r<this.length;r++)o=-(0|this.words[r])+a,a=o>>26,this.words[r]=67108863&o;return this.negative=1,this._strip()},r.prototype._wordDiv=function(e,t){var n=this.length-e.length,i=this.clone(),s=e,o=0|s.words[s.length-1],a=this._countBits(o);n=26-a,0!==n&&(s=s.ushln(n),i.iushln(n),o=0|s.words[s.length-1]);var c,d=i.length-s.length;if("mod"!==t){c=new r(null),c.length=d+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var h=i.clone()._ishlnsubmul(s,1,d);0===h.negative&&(i=h,c&&(c.words[d]=1));for(var f=d-1;f>=0;f--){var u=67108864*(0|i.words[s.length+f])+(0|i.words[s.length+f-1]);for(u=Math.min(u/o|0,67108863),i._ishlnsubmul(s,u,f);0!==i.negative;)u--,i.negative=0,i._ishlnsubmul(s,1,f),i.isZero()||(i.negative^=1);c&&(c.words[f]=u)}return c&&c._strip(),i._strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:c||null,mod:i}},r.prototype.divmod=function(e,t,i){return n(!e.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(s=a.div.neg()),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(e)),{div:s,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(s=a.div.neg()),{div:s,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new r(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new r(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new r(this.modrn(e.words[0]))}:this._wordDiv(e,t);var s,o,a},r.prototype.div=function(e){return this.divmod(e,"div",!1).div},r.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},r.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},r.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),s=n.cmp(i);return s<0||1===r&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},r.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var i=(1<<26)%e,r=0,s=this.length-1;s>=0;s--)r=(i*r+(0|this.words[s]))%e;return t?-r:r},r.prototype.modn=function(e){return this.modrn(e)},r.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var i=0,r=this.length-1;r>=0;r--){var s=(0|this.words[r])+67108864*i;this.words[r]=s/e|0,i=s%e}return this._strip(),t?this.ineg():this},r.prototype.divn=function(e){return this.clone().idivn(e)},r.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new r(1),o=new r(0),a=new r(0),c=new r(1),d=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++d;for(var l=i.clone(),h=t.clone();!t.isZero();){for(var f=0,u=1;!(t.words[0]&u)&&f<26;++f,u<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(l),o.isub(h)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;!(i.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(a),o.isub(c)):(i.isub(t),a.isub(s),c.isub(o))}return{a:a,b:c,gcd:i.iushln(d)}},r.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t,i=this,s=e.clone();i=0!==i.negative?i.umod(e):i.clone();for(var o=new r(1),a=new r(0),c=s.clone();i.cmpn(1)>0&&s.cmpn(1)>0;){for(var d=0,l=1;!(i.words[0]&l)&&d<26;++d,l<<=1);if(d>0)for(i.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var h=0,f=1;!(s.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(s.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);i.cmp(s)>=0?(i.isub(s),o.isub(a)):(s.isub(i),a.isub(o))}return t=0===i.cmpn(1)?o:a,t.cmpn(0)<0&&t.iadd(e),t},r.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);do{for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=t.cmp(n);if(r<0){var s=t;t=n,n=s}else if(0===r||0===n.cmpn(1))break;t.isub(n)}while(1);return n.iushln(i)},r.prototype.invm=function(e){return this.egcd(e).a.umod(e)},r.prototype.isEven=function(){return 0===(1&this.words[0])},r.prototype.isOdd=function(){return 1===(1&this.words[0])},r.prototype.andln=function(e){return this.words[0]&e},r.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var s=r,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),n(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},r.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},r.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){i<r?t=-1:i>r&&(t=1);break}}return t},r.prototype.gtn=function(e){return 1===this.cmpn(e)},r.prototype.gt=function(e){return 1===this.cmp(e)},r.prototype.gten=function(e){return this.cmpn(e)>=0},r.prototype.gte=function(e){return this.cmp(e)>=0},r.prototype.ltn=function(e){return-1===this.cmpn(e)},r.prototype.lt=function(e){return-1===this.cmp(e)},r.prototype.lten=function(e){return this.cmpn(e)<=0},r.prototype.lte=function(e){return this.cmp(e)<=0},r.prototype.eqn=function(e){return 0===this.cmpn(e)},r.prototype.eq=function(e){return 0===this.cmp(e)},r.red=function(e){return new I(e)},r.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},r.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(e){return this.red=e,this},r.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},r.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},r.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},r.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},r.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},r.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},r.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},r.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},r.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new r(t,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=r._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new r(null);return e.words=new Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),t=n.bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},i(A,_),A.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),r=0;r<i;r++)t.words[r]=e.words[r];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&n,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(o&n)<<4|s>>>22,s=o}s>>>=22,e.words[r-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},A.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(E,_),i(x,_),i(M,_),M.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},r._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new A;else if("p224"===e)t=new E;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new M}return v[e]=t,t},I.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(d(e,e.umod(this.m)._forceRed(this)),e)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},I.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var i=this.m.add(new r(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),o=0;!s.isZero()&&0===s.andln(1);)o++,s.iushrn(1);n(!s.isZero());var a=new r(1).toRed(this),c=a.redNeg(),d=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new r(2*l*l).toRed(this);0!==this.pow(l,d).cmp(c);)l.redIAdd(c);for(var h=this.pow(l,s),f=this.pow(e,s.addn(1).iushrn(1)),u=this.pow(e,s),p=o;0!==u.cmp(a);){for(var g=u,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var b=this.pow(h,new r(1).iushln(p-m-1));f=f.redMul(b),h=b.redSqr(),u=u.redMul(h),p=m}return f},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new r(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=4,i=new Array(1<<n);i[0]=new r(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var o=i[0],a=0,c=0,d=t.bitLength()%26;for(0===d&&(d=26),s=t.length-1;s>=0;s--){for(var l=t.words[s],h=d-1;h>=0;h--){var f=l>>h&1;(o!==i[0]&&(o=this.sqr(o)),0!==f||0!==a)?(a<<=1,a|=f,c++,(c===n||0===s&&0===h)&&(o=this.mul(o,i[a]),c=0,a=0)):c=0}d=26}return o},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},r.mont=function(e){return new S(e)},i(S,I),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new r(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=n.isub(i).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}})(e,De)})(mt);var vt=mt.exports;const _t="bignumber/5.7.0";var At=vt.BN;const Et=new Qe(_t),xt={},Mt=9007199254740991;function It(e){return null!=e&&(Ct.isBigNumber(e)||"number"==typeof e&&e%1===0||"string"==typeof e&&!!e.match(/^-?[0-9]+$/)||ct(e)||"bigint"==typeof e||rt(e))}let St=!1;class Ct{constructor(e,t){e!==xt&&Et.throwError("cannot call constructor directly; use BigNumber.from",Qe.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Nt(Pt(this).fromTwos(e))}toTwos(e){return Nt(Pt(this).toTwos(e))}abs(){return"-"===this._hex[0]?Ct.from(this._hex.substring(1)):this}add(e){return Nt(Pt(this).add(Pt(e)))}sub(e){return Nt(Pt(this).sub(Pt(e)))}div(e){return Ct.from(e).isZero()&&kt("division-by-zero","div"),Nt(Pt(this).div(Pt(e)))}mul(e){return Nt(Pt(this).mul(Pt(e)))}mod(e){const t=Pt(e);return t.isNeg()&&kt("division-by-zero","mod"),Nt(Pt(this).umod(t))}pow(e){const t=Pt(e);return t.isNeg()&&kt("negative-power","pow"),Nt(Pt(this).pow(t))}and(e){const t=Pt(e);return(this.isNegative()||t.isNeg())&&kt("unbound-bitwise-result","and"),Nt(Pt(this).and(t))}or(e){const t=Pt(e);return(this.isNegative()||t.isNeg())&&kt("unbound-bitwise-result","or"),Nt(Pt(this).or(t))}xor(e){const t=Pt(e);return(this.isNegative()||t.isNeg())&&kt("unbound-bitwise-result","xor"),Nt(Pt(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&kt("negative-width","mask"),Nt(Pt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&kt("negative-width","shl"),Nt(Pt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&kt("negative-width","shr"),Nt(Pt(this).shrn(e))}eq(e){return Pt(this).eq(Pt(e))}lt(e){return Pt(this).lt(Pt(e))}lte(e){return Pt(this).lte(Pt(e))}gt(e){return Pt(this).gt(Pt(e))}gte(e){return Pt(this).gte(Pt(e))}isNegative(){return"-"===this._hex[0]}isZero(){return Pt(this).isZero()}toNumber(){try{return Pt(this).toNumber()}catch{kt("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Et.throwError("this platform does not support BigInt",Qe.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?St||(St=!0,Et.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Et.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Qe.errors.UNEXPECTED_ARGUMENT,{}):Et.throwError("BigNumber.toString does not accept parameters",Qe.errors.UNEXPECTED_ARGUMENT,{})),Pt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ct)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new Ct(xt,Rt(e)):e.match(/^-?[0-9]+$/)?new Ct(xt,Rt(new At(e))):Et.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&kt("underflow","BigNumber.from",e),(e>=Mt||e<=-Mt)&&kt("overflow","BigNumber.from",e),Ct.from(String(e));const t=e;if("bigint"==typeof t)return Ct.from(t.toString());if(rt(t))return Ct.from(lt(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return Ct.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(ct(e)||"-"===e[0]&&ct(e.substring(1))))return Ct.from(e)}return Et.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function Rt(e){if("string"!=typeof e)return Rt(e.toString(16));if("-"===e[0])return e=e.substring(1),"-"===e[0]&&Et.throwArgumentError("invalid hex","value",e),e=Rt(e),"0x00"===e?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Nt(e){return Ct.from(Rt(e))}function Pt(e){const t=Ct.from(e).toHexString();return"-"===t[0]?new At("-"+t.substring(3),16):new At(t.substring(2),16)}function kt(e,t,n){const i={fault:e,operation:t};return null!=n&&(i.value=n),Et.throwError(e,Qe.errors.NUMERIC_FAULT,i)}function Tt(e){return new At(e,36).toString(16)}const Ot=new Qe(_t),Lt={},Dt=Ct.from(0),qt=Ct.from(-1);function Bt(e,t,n,i){const r={fault:t,operation:n};return void 0!==i&&(r.value=i),Ot.throwError(e,Qe.errors.NUMERIC_FAULT,r)}let zt="0";for(;zt.length<256;)zt+=zt;function Ut(e){if("number"!=typeof e)try{e=Ct.from(e).toNumber()}catch{}return"number"==typeof e&&e>=0&&e<=256&&!(e%1)?"1"+zt.substring(0,e):Ot.throwArgumentError("invalid decimal size","decimals",e)}function Ft(e,t){null==t&&(t=0);const n=Ut(t);e=Ct.from(e);const i=e.lt(Dt);i&&(e=e.mul(qt));let r=e.mod(n).toString();for(;r.length<n.length-1;)r="0"+r;r=r.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=e.div(n).toString();return e=1===n.length?s:s+"."+r,i&&(e="-"+e),e}function jt(e,t){null==t&&(t=0);const n=Ut(t);("string"!=typeof e||!e.match(/^-?[0-9.]+$/))&&Ot.throwArgumentError("invalid decimal value","value",e);const i="-"===e.substring(0,1);i&&(e=e.substring(1)),"."===e&&Ot.throwArgumentError("missing value","value",e);const r=e.split(".");r.length>2&&Ot.throwArgumentError("too many decimal points","value",e);let s=r[0],o=r[1];for(s||(s="0"),o||(o="0");"0"===o[o.length-1];)o=o.substring(0,o.length-1);for(o.length>n.length-1&&Bt("fractional component exceeds decimals","underflow","parseFixed"),""===o&&(o="0");o.length<n.length-1;)o+="0";const a=Ct.from(s),c=Ct.from(o);let d=a.mul(n).add(c);return i&&(d=d.mul(qt)),d}class Vt{constructor(e,t,n,i){e!==Lt&&Ot.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Qe.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=n,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=Ut(i),Object.freeze(this)}static from(e){if(e instanceof Vt)return e;"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,n=128,i=18;if("string"==typeof e){if("fixed"!==e)if("ufixed"===e)t=!1;else{const r=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);r||Ot.throwArgumentError("invalid fixed format","format",e),t="u"!==r[1],n=parseInt(r[2]),i=parseInt(r[3])}}else if(e){const r=(t,n,i)=>null==e[t]?i:(typeof e[t]!==n&&Ot.throwArgumentError("invalid fixed format ("+t+" not "+n+")","format."+t,e[t]),e[t]);t=r("signed","boolean",t),n=r("width","number",n),i=r("decimals","number",i)}return n%8&&Ot.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Ot.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new Vt(Lt,t,n,i)}}class Kt{constructor(e,t,n,i){e!==Lt&&Ot.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Qe.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Ot.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=jt(this._value,this.format.decimals),n=jt(e._value,e.format.decimals);return Kt.fromValue(t.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=jt(this._value,this.format.decimals),n=jt(e._value,e.format.decimals);return Kt.fromValue(t.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=jt(this._value,this.format.decimals),n=jt(e._value,e.format.decimals);return Kt.fromValue(t.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=jt(this._value,this.format.decimals),n=jt(e._value,e.format.decimals);return Kt.fromValue(t.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=Kt.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(t=t.subUnsafe(Ht.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=Kt.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(t=t.addUnsafe(Ht.toFormat(t.format))),t}round(e){null==e&&(e=0);const t=this.toString().split(".");if(1===t.length&&t.push("0"),(e<0||e>80||e%1)&&Ot.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const n=Kt.from("1"+zt.substring(0,e),this.format),i=Wt.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(e){if(null==e)return this._hex;e%8&&Ot.throwArgumentError("invalid byte width","width",e);const t=Ct.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return ut(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Kt.fromString(this._value,e)}static fromValue(e,t,n){return null==n&&null!=t&&!It(t)&&(n=t,t=null),null==t&&(t=0),null==n&&(n="fixed"),Kt.fromString(Ft(e,t),Vt.from(n))}static fromString(e,t){null==t&&(t="fixed");const n=Vt.from(t),i=jt(e,n.decimals);!n.signed&&i.lt(Dt)&&Bt("unsigned value cannot be negative","overflow","value",e);let r=null;n.signed?r=i.toTwos(n.width).toHexString():(r=i.toHexString(),r=ut(r,n.width/8));const s=Ft(i,n.decimals);return new Kt(Lt,r,s,n)}static fromBytes(e,t){null==t&&(t="fixed");const n=Vt.from(t);if(st(e).length>n.width/8)throw new Error("overflow");let i=Ct.from(e);n.signed&&(i=i.fromTwos(n.width));const r=i.toTwos((n.signed?0:1)+n.width).toHexString(),s=Ft(i,n.decimals);return new Kt(Lt,r,s,n)}static from(e,t){if("string"==typeof e)return Kt.fromString(e,t);if(rt(e))return Kt.fromBytes(e,t);try{return Kt.fromValue(e,0,t)}catch(n){if(n.code!==Qe.errors.INVALID_ARGUMENT)throw n}return Ot.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}const Ht=Kt.from(1),Wt=Kt.from("0.5"),Gt="strings/5.7.0",Jt=new Qe(Gt);var Zt,$t;function Qt(e,t,n,i,r){return Jt.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",n)}function Yt(e,t,n,i,r){if(e===$t.BAD_PREFIX||e===$t.UNEXPECTED_CONTINUE){let e=0;for(let i=t+1;i<n.length&&n[i]>>6===2;i++)e++;return e}return e===$t.OVERRUN?n.length-t-1:0}function Xt(e,t,n,i,r){return e===$t.OVERLONG?(i.push(r),0):(i.push(65533),Yt(e,t,n))}function en(e,t=Zt.current){t!=Zt.current&&(Jt.checkNormalize(),e=e.normalize(t));let n=[];for(let i=0;i<e.length;i++){const t=e.charCodeAt(i);if(t<128)n.push(t);else if(t<2048)n.push(t>>6|192),n.push(63&t|128);else if(55296==(64512&t)){i++;const r=e.charCodeAt(i);if(i>=e.length||56320!==(64512&r))throw new Error("invalid utf-8 string");const s=65536+((1023&t)<<10)+(1023&r);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(63&s|128)}else n.push(t>>12|224),n.push(t>>6&63|128),n.push(63&t|128)}return st(n)}function tn(e){if(e.length%4!==0)throw new Error("bad data");let t=[];for(let n=0;n<e.length;n+=4)t.push(parseInt(e.substring(n,n+4),16));return t}function nn(e,t){t||(t=function(e){return[parseInt(e,16)]});let n=0,i={};return e.split(",").forEach((e=>{let r=e.split(":");n+=parseInt(r[0],16),i[n]=t(r[1])})),i}function rn(e){let t=0;return e.split(",").map((e=>{let n=e.split("-");1===n.length?n[1]="0":""===n[1]&&(n[1]="1");let i=t+parseInt(n[0],16);return t=parseInt(n[1],16),{l:i,h:t}}))}(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(Zt||(Zt={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}($t||($t={})),Object.freeze({error:Qt,ignore:Yt,replace:Xt}),rn("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((e=>parseInt(e,16))),nn("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),nn("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),nn("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",tn),rn("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");const sn="hash/5.7.0";function on(e){e=atob(e);const t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n));return st(t)}function an(e,t){null==t&&(t=1);const n=[],i=n.forEach,r=function(e,t){i.call(e,(function(e){t>0&&Array.isArray(e)?r(e,t-1):n.push(e)}))};return r(e,t),n}function cn(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];t[i[0]]=i[1]}return t}function dn(e){let t=0;function n(){return e[t++]<<8|e[t++]}let i=n(),r=1,s=[0,1];for(let _=1;_<i;_++)s.push(r+=n());let o=n(),a=t;t+=o;let c=0,d=0;function l(){return 0==c&&(d=d<<8|e[t++],c=8),d>>--c&1}const h=31,f=Math.pow(2,h),u=f>>>1,p=u>>1,g=f-1;let m=0;for(let _=0;_<h;_++)m=m<<1|l();let b=[],w=0,y=f;for(;;){let e=Math.floor(((m-w+1)*r-1)/y),t=0,n=i;for(;n-t>1;){let i=t+n>>>1;e<s[i]?n=i:t=i}if(0==t)break;b.push(t);let o=w+Math.floor(y*s[t]/r),a=w+Math.floor(y*s[t+1]/r)-1;for(;!((o^a)&u);)m=m<<1&g|l(),o=o<<1&g,a=a<<1&g|1;for(;o&~a&p;)m=m&u|m<<1&g>>>1|l(),o=o<<1^u,a=(a^u)<<1|u|1;w=o,y=1+a-o}let v=i-4;return b.map((t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}}))}function ln(e){let t=0;return()=>e[t++]}function hn(e){return ln(dn(e))}function fn(e){return 1&e?~e>>1:e>>1}function un(e,t){let n=Array(e);for(let i=0;i<e;i++)n[i]=1+t();return n}function pn(e,t){let n=Array(e);for(let i=0,r=-1;i<e;i++)n[i]=r+=1+t();return n}function gn(e,t){let n=Array(e);for(let i=0,r=0;i<e;i++)n[i]=r+=fn(t());return n}function mn(e,t){let n=pn(e(),e),i=e(),r=pn(i,e),s=un(i,e);for(let o=0;o<i;o++)for(let e=0;e<s[o];e++)n.push(r[o]+e);return t?n.map((e=>t[e])):n}function bn(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(vn(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(_n(n,e))}return cn(an(t))}function wn(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(n)}return t}function yn(e,t,n){let i=Array(e).fill(void 0).map((()=>[]));for(let r=0;r<t;r++)gn(e,n).forEach(((e,t)=>i[t].push(e)));return i}function vn(e,t){let n=1+t(),i=t(),r=wn(t),s=yn(r.length,1+e,t);return an(s.map(((e,t)=>{const s=e[0],o=e.slice(1);return Array(r[t]).fill(void 0).map(((e,t)=>{let r=t*i;return[s+t*n,o.map((e=>e+r))]}))})))}function _n(e,t){let n=1+t();return yn(n,1+e,t).map((e=>[e[0],e.slice(1)]))}function An(e){let t=mn(e).sort(((e,t)=>e-t));return n();function n(){let i=[];for(;;){let r=mn(e,t);if(0==r.length)break;i.push({set:new Set(r),node:n()})}i.sort(((e,t)=>t.set.size-e.set.size));let r=e(),s=r%3;r=r/3|0;let o=!!(1&r);r>>=1;let a=1==r,c=2==r;return{branches:i,valid:s,fe0f:o,save:a,check:c}}}function En(){return hn(on("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const xn=En();new Set(mn(xn)),new Set(mn(xn)),bn(xn),An(xn),new Qe(sn);const Mn=new Uint8Array(32);Mn.fill(0);const In="Ethereum Signed Message:\n";function Sn(e){return"string"==typeof e&&(e=en(e)),gt(ot([en(In),en(String(e.length)),e]))}const Cn="rlp/5.7.0";new Qe(Cn);const Rn="address/5.7.0",Nn=new Qe(Rn);function Pn(e){ct(e,20)||Nn.throwArgumentError("invalid address","address",e),e=e.toLowerCase();const t=e.substring(2).split(""),n=new Uint8Array(40);for(let r=0;r<40;r++)n[r]=t[r].charCodeAt(0);const i=st(gt(n));for(let r=0;r<40;r+=2)i[r>>1]>>4>=8&&(t[r]=t[r].toUpperCase()),(15&i[r>>1])>=8&&(t[r+1]=t[r+1].toUpperCase());return"0x"+t.join("")}const kn=9007199254740991;function Tn(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}const On={};for(let md=0;md<10;md++)On[String(md)]=String(md);for(let md=0;md<26;md++)On[String.fromCharCode(65+md)]=String(10+md);const Ln=Math.floor(Tn(kn));function Dn(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map((e=>On[e])).join("");for(;t.length>=Ln;){let e=t.substring(0,Ln);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}function qn(e){let t=null;if("string"!=typeof e&&Nn.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Pn(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Nn.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Dn(e)&&Nn.throwArgumentError("bad icap checksum","address",e),t=Tt(e.substring(4));t.length<40;)t="0"+t;t=Pn("0x"+t)}else Nn.throwArgumentError("invalid address","address",e);return t}const Bn="properties/5.7.0";function zn(e,t,n){Object.defineProperty(e,t,{enumerable:!0,value:n,writable:!1})}new Qe(Bn),new Qe(sn);const Un=new Uint8Array(32);Un.fill(0),Ct.from(-1);const Fn=Ct.from(0),jn=Ct.from(1);Ct.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ut(jn.toHexString(),32),ut(Fn.toHexString(),32);var Vn={},Kn={},Hn=Wn;function Wn(e,t){if(!e)throw new Error(t||"Assertion failed")}Wn.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var Gn={exports:{}};"function"==typeof Object.create?Gn.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Gn.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var Jn=Hn,Zn=Gn.exports;function $n(e,t){return!(55296!==(64512&e.charCodeAt(t))||t<0||t+1>=e.length)&&56320===(64512&e.charCodeAt(t+1))}function Qn(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for(e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e),r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(var i=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s<128?n[i++]=s:s<2048?(n[i++]=s>>6|192,n[i++]=63&s|128):$n(e,r)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),n[i++]=s>>18|240,n[i++]=s>>12&63|128,n[i++]=s>>6&63|128,n[i++]=63&s|128):(n[i++]=s>>12|224,n[i++]=s>>6&63|128,n[i++]=63&s|128)}else for(r=0;r<e.length;r++)n[r]=0|e[r];return n}function Yn(e){for(var t="",n=0;n<e.length;n++)t+=ti(e[n].toString(16));return t}function Xn(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24;return t>>>0}function ei(e,t){for(var n="",i=0;i<e.length;i++){var r=e[i];"little"===t&&(r=Xn(r)),n+=ni(r.toString(16))}return n}function ti(e){return 1===e.length?"0"+e:e}function ni(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function ii(e,t,n,i){var r=n-t;Jn(r%4===0);for(var s=new Array(r/4),o=0,a=t;o<s.length;o++,a+=4){var c;c="big"===i?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],s[o]=c>>>0}return s}function ri(e,t){for(var n=new Array(4*e.length),i=0,r=0;i<e.length;i++,r+=4){var s=e[i];"big"===t?(n[r]=s>>>24,n[r+1]=s>>>16&255,n[r+2]=s>>>8&255,n[r+3]=255&s):(n[r+3]=s>>>24,n[r+2]=s>>>16&255,n[r+1]=s>>>8&255,n[r]=255&s)}return n}function si(e,t){return e>>>t|e<<32-t}function oi(e,t){return e<<t|e>>>32-t}function ai(e,t){return e+t>>>0}function ci(e,t,n){return e+t+n>>>0}function di(e,t,n,i){return e+t+n+i>>>0}function li(e,t,n,i,r){return e+t+n+i+r>>>0}function hi(e,t,n,i){var r=e[t],s=e[t+1],o=i+s>>>0,a=(o<i?1:0)+n+r;e[t]=a>>>0,e[t+1]=o}function fi(e,t,n,i){var r=t+i>>>0,s=(r<t?1:0)+e+n;return s>>>0}function ui(e,t,n,i){var r=t+i;return r>>>0}function pi(e,t,n,i,r,s,o,a){var c=0,d=t;d=d+i>>>0,c+=d<t?1:0,d=d+s>>>0,c+=d<s?1:0,d=d+a>>>0,c+=d<a?1:0;var l=e+n+r+o+c;return l>>>0}function gi(e,t,n,i,r,s,o,a){var c=t+i+s+a;return c>>>0}function mi(e,t,n,i,r,s,o,a,c,d){var l=0,h=t;h=h+i>>>0,l+=h<t?1:0,h=h+s>>>0,l+=h<s?1:0,h=h+a>>>0,l+=h<a?1:0,h=h+d>>>0,l+=h<d?1:0;var f=e+n+r+o+c+l;return f>>>0}function bi(e,t,n,i,r,s,o,a,c,d){var l=t+i+s+a+d;return l>>>0}function wi(e,t,n){var i=t<<32-n|e>>>n;return i>>>0}function yi(e,t,n){var i=e<<32-n|t>>>n;return i>>>0}function vi(e,t,n){return e>>>n}function _i(e,t,n){var i=e<<32-n|t>>>n;return i>>>0}Kn.inherits=Zn,Kn.toArray=Qn,Kn.toHex=Yn,Kn.htonl=Xn,Kn.toHex32=ei,Kn.zero2=ti,Kn.zero8=ni,Kn.join32=ii,Kn.split32=ri,Kn.rotr32=si,Kn.rotl32=oi,Kn.sum32=ai,Kn.sum32_3=ci,Kn.sum32_4=di,Kn.sum32_5=li,Kn.sum64=hi,Kn.sum64_hi=fi,Kn.sum64_lo=ui,Kn.sum64_4_hi=pi,Kn.sum64_4_lo=gi,Kn.sum64_5_hi=mi,Kn.sum64_5_lo=bi,Kn.rotr64_hi=wi,Kn.rotr64_lo=yi,Kn.shr64_hi=vi,Kn.shr64_lo=_i;var Ai={},Ei=Kn,xi=Hn;function Mi(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ai.BlockHash=Mi,Mi.prototype.update=function(e,t){if(e=Ei.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=Ei.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},Mi.prototype.digest=function(e){return this.update(this._pad()),xi(null===this.pending),this._digest(e)},Mi.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var r=1;r<n;r++)i[r]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)i[r++]=0;i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=e>>>24&255,i[r++]=e>>>16&255,i[r++]=e>>>8&255,i[r++]=255&e}else for(i[r++]=255&e,i[r++]=e>>>8&255,i[r++]=e>>>16&255,i[r++]=e>>>24&255,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,s=8;s<this.padLength;s++)i[r++]=0;return i};var Ii={},Si={},Ci=Kn,Ri=Ci.rotr32;function Ni(e,t,n,i){return 0===e?Pi(t,n,i):1===e||3===e?Ti(t,n,i):2===e?ki(t,n,i):void 0}function Pi(e,t,n){return e&t^~e&n}function ki(e,t,n){return e&t^e&n^t&n}function Ti(e,t,n){return e^t^n}function Oi(e){return Ri(e,2)^Ri(e,13)^Ri(e,22)}function Li(e){return Ri(e,6)^Ri(e,11)^Ri(e,25)}function Di(e){return Ri(e,7)^Ri(e,18)^e>>>3}function qi(e){return Ri(e,17)^Ri(e,19)^e>>>10}Si.ft_1=Ni,Si.ch32=Pi,Si.maj32=ki,Si.p32=Ti,Si.s0_256=Oi,Si.s1_256=Li,Si.g0_256=Di,Si.g1_256=qi;var Bi=Kn,zi=Ai,Ui=Si,Fi=Bi.rotl32,ji=Bi.sum32,Vi=Bi.sum32_5,Ki=Ui.ft_1,Hi=zi.BlockHash,Wi=[1518500249,1859775393,2400959708,3395469782];function Gi(){if(!(this instanceof Gi))return new Gi;Hi.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Bi.inherits(Gi,Hi);var Ji=Gi;Gi.blockSize=512,Gi.outSize=160,Gi.hmacStrength=80,Gi.padLength=64,Gi.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Fi(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var r=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4];for(i=0;i<n.length;i++){var d=~~(i/20),l=Vi(Fi(r,5),Ki(d,s,o,a),c,n[i],Wi[d]);c=a,a=o,o=Fi(s,30),s=r,r=l}this.h[0]=ji(this.h[0],r),this.h[1]=ji(this.h[1],s),this.h[2]=ji(this.h[2],o),this.h[3]=ji(this.h[3],a),this.h[4]=ji(this.h[4],c)},Gi.prototype._digest=function(e){return"hex"===e?Bi.toHex32(this.h,"big"):Bi.split32(this.h,"big")};var Zi=Kn,$i=Ai,Qi=Si,Yi=Hn,Xi=Zi.sum32,er=Zi.sum32_4,tr=Zi.sum32_5,nr=Qi.ch32,ir=Qi.maj32,rr=Qi.s0_256,sr=Qi.s1_256,or=Qi.g0_256,ar=Qi.g1_256,cr=$i.BlockHash,dr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function lr(){if(!(this instanceof lr))return new lr;cr.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=dr,this.W=new Array(64)}Zi.inherits(lr,cr);var hr=lr;lr.blockSize=512,lr.outSize=256,lr.hmacStrength=192,lr.padLength=64,lr.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=er(ar(n[i-2]),n[i-7],or(n[i-15]),n[i-16]);var r=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],d=this.h[5],l=this.h[6],h=this.h[7];for(Yi(this.k.length===n.length),i=0;i<n.length;i++){var f=tr(h,sr(c),nr(c,d,l),this.k[i],n[i]),u=Xi(rr(r),ir(r,s,o));h=l,l=d,d=c,c=Xi(a,f),a=o,o=s,s=r,r=Xi(f,u)}this.h[0]=Xi(this.h[0],r),this.h[1]=Xi(this.h[1],s),this.h[2]=Xi(this.h[2],o),this.h[3]=Xi(this.h[3],a),this.h[4]=Xi(this.h[4],c),this.h[5]=Xi(this.h[5],d),this.h[6]=Xi(this.h[6],l),this.h[7]=Xi(this.h[7],h)},lr.prototype._digest=function(e){return"hex"===e?Zi.toHex32(this.h,"big"):Zi.split32(this.h,"big")};var fr=Kn,ur=hr;function pr(){if(!(this instanceof pr))return new pr;ur.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}fr.inherits(pr,ur);var gr=pr;pr.blockSize=512,pr.outSize=224,pr.hmacStrength=192,pr.padLength=64,pr.prototype._digest=function(e){return"hex"===e?fr.toHex32(this.h.slice(0,7),"big"):fr.split32(this.h.slice(0,7),"big")};var mr=Kn,br=Ai,wr=Hn,yr=mr.rotr64_hi,vr=mr.rotr64_lo,_r=mr.shr64_hi,Ar=mr.shr64_lo,Er=mr.sum64,xr=mr.sum64_hi,Mr=mr.sum64_lo,Ir=mr.sum64_4_hi,Sr=mr.sum64_4_lo,Cr=mr.sum64_5_hi,Rr=mr.sum64_5_lo,Nr=br.BlockHash,Pr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function kr(){if(!(this instanceof kr))return new kr;Nr.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Pr,this.W=new Array(160)}mr.inherits(kr,Nr);var Tr=kr;function Or(e,t,n,i,r){var s=e&n^~e&r;return s<0&&(s+=4294967296),s}function Lr(e,t,n,i,r,s){var o=t&i^~t&s;return o<0&&(o+=4294967296),o}function Dr(e,t,n,i,r){var s=e&n^e&r^n&r;return s<0&&(s+=4294967296),s}function qr(e,t,n,i,r,s){var o=t&i^t&s^i&s;return o<0&&(o+=4294967296),o}function Br(e,t){var n=yr(e,t,28),i=yr(t,e,2),r=yr(t,e,7),s=n^i^r;return s<0&&(s+=4294967296),s}function zr(e,t){var n=vr(e,t,28),i=vr(t,e,2),r=vr(t,e,7),s=n^i^r;return s<0&&(s+=4294967296),s}function Ur(e,t){var n=yr(e,t,14),i=yr(e,t,18),r=yr(t,e,9),s=n^i^r;return s<0&&(s+=4294967296),s}function Fr(e,t){var n=vr(e,t,14),i=vr(e,t,18),r=vr(t,e,9),s=n^i^r;return s<0&&(s+=4294967296),s}function jr(e,t){var n=yr(e,t,1),i=yr(e,t,8),r=_r(e,t,7),s=n^i^r;return s<0&&(s+=4294967296),s}function Vr(e,t){var n=vr(e,t,1),i=vr(e,t,8),r=Ar(e,t,7),s=n^i^r;return s<0&&(s+=4294967296),s}function Kr(e,t){var n=yr(e,t,19),i=yr(t,e,29),r=_r(e,t,6),s=n^i^r;return s<0&&(s+=4294967296),s}function Hr(e,t){var n=vr(e,t,19),i=vr(t,e,29),r=Ar(e,t,6),s=n^i^r;return s<0&&(s+=4294967296),s}kr.blockSize=1024,kr.outSize=512,kr.hmacStrength=192,kr.padLength=128,kr.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var r=Kr(n[i-4],n[i-3]),s=Hr(n[i-4],n[i-3]),o=n[i-14],a=n[i-13],c=jr(n[i-30],n[i-29]),d=Vr(n[i-30],n[i-29]),l=n[i-32],h=n[i-31];n[i]=Ir(r,s,o,a,c,d,l,h),n[i+1]=Sr(r,s,o,a,c,d,l,h)}},kr.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],r=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=this.h[5],d=this.h[6],l=this.h[7],h=this.h[8],f=this.h[9],u=this.h[10],p=this.h[11],g=this.h[12],m=this.h[13],b=this.h[14],w=this.h[15];wr(this.k.length===n.length);for(var y=0;y<n.length;y+=2){var v=b,_=w,A=Ur(h,f),E=Fr(h,f),x=Or(h,f,u,p,g),M=Lr(h,f,u,p,g,m),I=this.k[y],S=this.k[y+1],C=n[y],R=n[y+1],N=Cr(v,_,A,E,x,M,I,S,C,R),P=Rr(v,_,A,E,x,M,I,S,C,R);v=Br(i,r),_=zr(i,r),A=Dr(i,r,s,o,a),E=qr(i,r,s,o,a,c);var k=xr(v,_,A,E),T=Mr(v,_,A,E);b=g,w=m,g=u,m=p,u=h,p=f,h=xr(d,l,N,P),f=Mr(l,l,N,P),d=a,l=c,a=s,c=o,s=i,o=r,i=xr(N,P,k,T),r=Mr(N,P,k,T)}Er(this.h,0,i,r),Er(this.h,2,s,o),Er(this.h,4,a,c),Er(this.h,6,d,l),Er(this.h,8,h,f),Er(this.h,10,u,p),Er(this.h,12,g,m),Er(this.h,14,b,w)},kr.prototype._digest=function(e){return"hex"===e?mr.toHex32(this.h,"big"):mr.split32(this.h,"big")};var Wr=Kn,Gr=Tr;function Jr(){if(!(this instanceof Jr))return new Jr;Gr.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Wr.inherits(Jr,Gr);var Zr=Jr;Jr.blockSize=1024,Jr.outSize=384,Jr.hmacStrength=192,Jr.padLength=128,Jr.prototype._digest=function(e){return"hex"===e?Wr.toHex32(this.h.slice(0,12),"big"):Wr.split32(this.h.slice(0,12),"big")},Ii.sha1=Ji,Ii.sha224=gr,Ii.sha256=hr,Ii.sha384=Zr,Ii.sha512=Tr;var $r={},Qr=Kn,Yr=Ai,Xr=Qr.rotl32,es=Qr.sum32,ts=Qr.sum32_3,ns=Qr.sum32_4,is=Yr.BlockHash;function rs(){if(!(this instanceof rs))return new rs;is.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function ss(e,t,n,i){return e<=15?t^n^i:e<=31?t&n|~t&i:e<=47?(t|~n)^i:e<=63?t&i|n&~i:t^(n|~i)}function os(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function as(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}Qr.inherits(rs,is),$r.ripemd160=rs,rs.blockSize=512,rs.outSize=160,rs.hmacStrength=192,rs.padLength=64,rs.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],r=this.h[2],s=this.h[3],o=this.h[4],a=n,c=i,d=r,l=s,h=o,f=0;f<80;f++){var u=es(Xr(ns(n,ss(f,i,r,s),e[cs[f]+t],os(f)),ls[f]),o);n=o,o=s,s=Xr(r,10),r=i,i=u,u=es(Xr(ns(a,ss(79-f,c,d,l),e[ds[f]+t],as(f)),hs[f]),h),a=h,h=l,l=Xr(d,10),d=c,c=u}u=ts(this.h[1],r,l),this.h[1]=ts(this.h[2],s,h),this.h[2]=ts(this.h[3],o,a),this.h[3]=ts(this.h[4],n,c),this.h[4]=ts(this.h[0],i,d),this.h[0]=u},rs.prototype._digest=function(e){return"hex"===e?Qr.toHex32(this.h,"little"):Qr.split32(this.h,"little")};var cs=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ds=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ls=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],hs=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],fs=Kn,us=Hn;function ps(e,t,n){if(!(this instanceof ps))return new ps(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(fs.toArray(t,n))}var gs=ps;function ms(e,t,n){return n={path:t,exports:{},require:function(e,t){return bs(e,t??n.path)}},e(n,n.exports),n.exports}function bs(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}ps.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),us(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},ps.prototype.update=function(e,t){return this.inner.update(e,t),this},ps.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=Kn,t.common=Ai,t.sha=Ii,t.ripemd=$r,t.hmac=gs,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Vn);var ws=ys;function ys(e,t){if(!e)throw new Error(t||"Assertion failed")}ys.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var vs=ms((function(e,t){var n=t;function i(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)n[i]=0|e[i];return n}if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e);for(i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(i=0;i<e.length;i++){var r=e.charCodeAt(i),s=r>>8,o=255&r;s?n.push(s,o):n.push(o)}return n}function r(e){return 1===e.length?"0"+e:e}function s(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}n.toArray=i,n.zero2=r,n.toHex=s,n.encode=function(e,t){return"hex"===t?s(e):e}})),_s=ms((function(e,t){var n=t;function i(e,t,n){var i=new Array(Math.max(e.bitLength(),n)+1);i.fill(0);for(var r=1<<t+1,s=e.clone(),o=0;o<i.length;o++){var a,c=s.andln(r-1);s.isOdd()?(a=c>(r>>1)-1?(r>>1)-c:c,s.isubn(a)):a=0,i[o]=a,s.iushrn(1)}return i}function r(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var i,r=0,s=0;e.cmpn(-r)>0||t.cmpn(-s)>0;){var o,a,c=e.andln(3)+r&3,d=t.andln(3)+s&3;3===c&&(c=-1),3===d&&(d=-1),1&c?(i=e.andln(7)+r&7,o=3!==i&&5!==i||2!==d?c:-c):o=0,n[0].push(o),1&d?(i=t.andln(7)+s&7,a=3!==i&&5!==i||2!==c?d:-d):a=0,n[1].push(a),2*r===o+1&&(r=1-r),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return n}function s(e,t,n){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=n.call(this)}}function o(e){return"string"==typeof e?n.toArray(e,"hex"):e}function a(e){return new vt(e,"hex","le")}n.assert=ws,n.toArray=vs.toArray,n.zero2=vs.zero2,n.toHex=vs.toHex,n.encode=vs.encode,n.getNAF=i,n.getJSF=r,n.cachedProperty=s,n.parseBytes=o,n.intFromLE=a})),As=_s.getNAF,Es=_s.getJSF,xs=_s.assert;function Ms(e,t){this.type=e,this.p=new vt(t.p,16),this.red=t.prime?vt.red(t.prime):vt.mont(this.p),this.zero=new vt(0).toRed(this.red),this.one=new vt(1).toRed(this.red),this.two=new vt(2).toRed(this.red),this.n=t.n&&new vt(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Is=Ms;function Ss(e,t){this.curve=e,this.type=t,this.precomputed=null}Ms.prototype.point=function(){throw new Error("Not implemented")},Ms.prototype.validate=function(){throw new Error("Not implemented")},Ms.prototype._fixedNafMul=function(e,t){xs(e.precomputed);var n=e._getDoubles(),i=As(t,1,this._bitLength),r=(1<<n.step+1)-(n.step%2===0?2:1);r/=3;var s,o,a=[];for(s=0;s<i.length;s+=n.step){o=0;for(var c=s+n.step-1;c>=s;c--)o=(o<<1)+i[c];a.push(o)}for(var d=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=r;h>0;h--){for(s=0;s<a.length;s++)o=a[s],o===h?l=l.mixedAdd(n.points[s]):o===-h&&(l=l.mixedAdd(n.points[s].neg()));d=d.add(l)}return d.toP()},Ms.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var r=i.points,s=As(t,n,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var c=0;a>=0&&0===s[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var d=s[a];xs(0!==d),o="affine"===e.type?d>0?o.mixedAdd(r[d-1>>1]):o.mixedAdd(r[-d-1>>1].neg()):d>0?o.add(r[d-1>>1]):o.add(r[-d-1>>1].neg())}return"affine"===e.type?o.toP():o},Ms.prototype._wnafMulAdd=function(e,t,n,i,r){var s,o,a,c=this._wnafT1,d=this._wnafT2,l=this._wnafT3,h=0;for(s=0;s<i;s++){a=t[s];var f=a._getNAFPoints(e);c[s]=f.wnd,d[s]=f.points}for(s=i-1;s>=1;s-=2){var u=s-1,p=s;if(1===c[u]&&1===c[p]){var g=[t[u],null,null,t[p]];0===t[u].y.cmp(t[p].y)?(g[1]=t[u].add(t[p]),g[2]=t[u].toJ().mixedAdd(t[p].neg())):0===t[u].y.cmp(t[p].y.redNeg())?(g[1]=t[u].toJ().mixedAdd(t[p]),g[2]=t[u].add(t[p].neg())):(g[1]=t[u].toJ().mixedAdd(t[p]),g[2]=t[u].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],b=Es(n[u],n[p]);for(h=Math.max(b[0].length,h),l[u]=new Array(h),l[p]=new Array(h),o=0;o<h;o++){var w=0|b[0][o],y=0|b[1][o];l[u][o]=m[3*(w+1)+(y+1)],l[p][o]=0,d[u]=g}}else l[u]=As(n[u],c[u],this._bitLength),l[p]=As(n[p],c[p],this._bitLength),h=Math.max(l[u].length,h),h=Math.max(l[p].length,h)}var v=this.jpoint(null,null,null),_=this._wnafT4;for(s=h;s>=0;s--){for(var A=0;s>=0;){var E=!0;for(o=0;o<i;o++)_[o]=0|l[o][s],0!==_[o]&&(E=!1);if(!E)break;A++,s--}if(s>=0&&A++,v=v.dblp(A),s<0)break;for(o=0;o<i;o++){var x=_[o];0!==x&&(x>0?a=d[o][x-1>>1]:x<0&&(a=d[o][-x-1>>1].neg()),v="affine"===a.type?v.mixedAdd(a):v.add(a))}}for(s=0;s<i;s++)d[s]=null;return r?v:v.toP()},Ms.BasePoint=Ss,Ss.prototype.eq=function(){throw new Error("Not implemented")},Ss.prototype.validate=function(){return this.curve.validate(this)},Ms.prototype.decodePoint=function(e,t){e=_s.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*n){6===e[0]?xs(e[e.length-1]%2===0):7===e[0]&&xs(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},Ss.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Ss.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},Ss.prototype.encode=function(e,t){return _s.encode(this._encode(t),e)},Ss.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Ss.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Ss.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,r=0;r<t;r+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}},Ss.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=1===n?null:this.dbl(),r=1;r<n;r++)t[r]=t[r-1].add(i);return{wnd:e,points:t}},Ss.prototype._getBeta=function(){return null},Ss.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var Cs=ms((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}})),Rs=_s.assert;function Ns(e){Is.call(this,"short",e),this.a=new vt(e.a,16).toRed(this.red),this.b=new vt(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Cs(Ns,Is);var Ps=Ns;function ks(e,t,n,i){Is.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(t,16),this.y=new vt(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Ts(e,t,n,i){Is.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(t,16),this.y=new vt(n,16),this.z=new vt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ns.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n,i;if(e.beta)t=new vt(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=r[0].cmp(r[1])<0?r[0]:r[1],t=t.toRed(this.red)}if(e.lambda)n=new vt(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?n=s[0]:(n=s[1],Rs(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return i=e.basis?e.basis.map((function(e){return{a:new vt(e.a,16),b:new vt(e.b,16)}})):this._getEndoBasis(n),{beta:t,lambda:n,basis:i}}},Ns.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:vt.mont(e),n=new vt(2).toRed(t).redInvm(),i=n.redNeg(),r=new vt(3).toRed(t).redNeg().redSqrt().redMul(n),s=i.redAdd(r).fromRed(),o=i.redSub(r).fromRed();return[s,o]},Ns.prototype._getEndoBasis=function(e){for(var t,n,i,r,s,o,a,c,d,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),u=new vt(1),p=new vt(0),g=new vt(0),m=new vt(1),b=0;0!==h.cmpn(0);){var w=f.div(h);c=f.sub(w.mul(h)),d=g.sub(w.mul(u));var y=m.sub(w.mul(p));if(!i&&c.cmp(l)<0)t=a.neg(),n=u,i=c.neg(),r=d;else if(i&&2===++b)break;a=c,f=h,h=c,g=u,u=d,m=p,p=y}s=c.neg(),o=d;var v=i.sqr().add(r.sqr()),_=s.sqr().add(o.sqr());return _.cmp(v)>=0&&(s=t,o=n),i.negative&&(i=i.neg(),r=r.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:i,b:r},{a:s,b:o}]},Ns.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],r=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),o=r.mul(n.a),a=s.mul(i.a),c=r.mul(n.b),d=s.mul(i.b),l=e.sub(o).sub(a),h=c.add(d).neg();return{k1:l,k2:h}},Ns.prototype.pointFromX=function(e,t){e=new vt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var r=i.fromRed().isOdd();return(t&&!r||!t&&r)&&(i=i.redNeg()),this.point(e,i)},Ns.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===n.redSqr().redISub(r).cmpn(0)},Ns.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,r=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),i[2*s]=a,i[2*s+1]=c,r[2*s]=o.k1,r[2*s+1]=o.k2}for(var d=this._wnafMulAdd(1,i,r,2*s,n),l=0;l<2*s;l++)i[l]=null,r[l]=null;return d},Cs(ks,Is.BasePoint),Ns.prototype.point=function(e,t,n){return new ks(this,e,t,n)},Ns.prototype.pointFromJSON=function(e,t){return ks.fromJSON(this,e,t)},ks.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},ks.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},ks.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function r(t){return e.point(t[0],t[1],n)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(r))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(r))}},i},ks.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},ks.prototype.isInfinity=function(){return this.inf},ks.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},ks.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),r=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),s=r.redSqr().redISub(this.x.redAdd(this.x)),o=r.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},ks.prototype.getX=function(){return this.x.fromRed()},ks.prototype.getY=function(){return this.y.fromRed()},ks.prototype.mul=function(e){return e=new vt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},ks.prototype.mulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r):this.curve._wnafMulAdd(1,i,r,2)},ks.prototype.jmulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r,!0):this.curve._wnafMulAdd(1,i,r,2,!0)},ks.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},ks.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t},ks.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e},Cs(Ts,Is.BasePoint),Ns.prototype.jpoint=function(e,t,n){return new Ts(this,e,t,n)},Ts.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)},Ts.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Ts.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),r=e.x.redMul(n),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),a=i.redSub(r),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),l=d.redMul(a),h=i.redMul(d),f=c.redSqr().redIAdd(l).redISub(h).redISub(h),u=c.redMul(h.redISub(f)).redISub(s.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,u,p)},Ts.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),r=this.y,s=e.y.redMul(t).redMul(this.z),o=n.redSub(i),a=r.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),d=c.redMul(o),l=n.redMul(c),h=a.redSqr().redIAdd(d).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(r.redMul(d)),u=this.z.redMul(o);return this.curve.jpoint(h,f,u)},Ts.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,r=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),d=o.redAdd(o);for(t=0;t<e;t++){var l=s.redSqr(),h=d.redSqr(),f=h.redSqr(),u=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(c)),p=s.redMul(h),g=u.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),b=u.redMul(m);b=b.redIAdd(b).redISub(f);var w=d.redMul(a);t+1<e&&(c=c.redMul(f)),s=g,a=w,d=b}return this.curve.jpoint(s,d.redMul(r),a)},Ts.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Ts.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),s=r.redSqr(),o=this.x.redAdd(r).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),c=a.redSqr().redISub(o).redISub(o),d=s.redIAdd(s);d=d.redIAdd(d),d=d.redIAdd(d),e=c,t=a.redMul(o.redISub(c)).redISub(d),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),u=this.x.redAdd(h).redSqr().redISub(l).redISub(f);u=u.redIAdd(u);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=m.redIAdd(m),m=m.redIAdd(m),e=g.redISub(u).redISub(u),t=p.redMul(u.redISub(e)).redISub(m),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)},Ts.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),s=r.redSqr(),o=this.x.redAdd(r).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var d=s.redIAdd(s);d=d.redIAdd(d),d=d.redIAdd(d),t=a.redMul(o.redISub(c)).redISub(d),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),u=this.x.redSub(l).redMul(this.x.redAdd(l));u=u.redAdd(u).redIAdd(u);var p=f.redIAdd(f);p=p.redIAdd(p);var g=p.redAdd(p);e=u.redSqr().redISub(g),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m),t=u.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,n)},Ts.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,r=i.redSqr().redSqr(),s=t.redSqr(),o=n.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(r)),c=t.redAdd(t);c=c.redIAdd(c);var d=c.redMul(o),l=a.redSqr().redISub(d.redAdd(d)),h=d.redISub(l),f=o.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var u=a.redMul(h).redISub(f),p=n.redAdd(n).redMul(i);return this.curve.jpoint(l,u,p)},Ts.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),r=e.redAdd(e).redIAdd(e),s=r.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(s);var a=o.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var d=r.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),l=t.redMul(d);l=l.redIAdd(l),l=l.redIAdd(l);var h=this.x.redMul(a).redISub(l);h=h.redIAdd(h),h=h.redIAdd(h);var f=this.y.redMul(d.redMul(c.redISub(d)).redISub(o.redMul(a)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var u=this.z.redAdd(o).redSqr().redISub(n).redISub(a);return this.curve.jpoint(h,f,u)},Ts.prototype.mul=function(e,t){return e=new vt(e,t),this.curve._wnafMul(this,e)},Ts.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),r=n.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(i)).cmpn(0)},Ts.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var i=e.clone(),r=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(r),0===this.x.cmp(n))return!0}},Ts.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Ts.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Os=ms((function(e,t){var n=t;n.base=Is,n.short=Ps,n.mont=null,n.edwards=null})),Ls=ms((function(e,t){var n,i=t,r=_s.assert;function s(e){"short"===e.type?this.curve=new Os.short(e):"edwards"===e.type?this.curve=new Os.edwards(e):this.curve=new Os.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var n=new s(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Vn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Vn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Vn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Vn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Vn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Vn.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Vn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=null.crash()}catch{n=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Vn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})}));function Ds(e){if(!(this instanceof Ds))return new Ds(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=vs.toArray(e.entropy,e.entropyEnc||"hex"),n=vs.toArray(e.nonce,e.nonceEnc||"hex"),i=vs.toArray(e.pers,e.persEnc||"hex");ws(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,i)}var qs=Ds;Ds.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},Ds.prototype._hmac=function(){return new Vn.hmac(this.hash,this.K)},Ds.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Ds.prototype.reseed=function(e,t,n,i){"string"!=typeof t&&(i=n,n=t,t=null),e=vs.toArray(e,t),n=vs.toArray(n,i),ws(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},Ds.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=n,n=t,t=null),n&&(n=vs.toArray(n,i||"hex"),this._update(n));for(var r=[];r.length<e;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var s=r.slice(0,e);return this._update(n),this._reseed++,vs.encode(s,t)};var Bs=_s.assert;function zs(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Us=zs;zs.fromPublic=function(e,t,n){return t instanceof zs?t:new zs(e,{pub:t,pubEnc:n})},zs.fromPrivate=function(e,t,n){return t instanceof zs?t:new zs(e,{priv:t,privEnc:n})},zs.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},zs.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},zs.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},zs.prototype._importPrivate=function(e,t){this.priv=new vt(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},zs.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Bs(e.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&Bs(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},zs.prototype.derive=function(e){return e.validate()||Bs(e.validate(),"public point not validated"),e.mul(this.priv).getX()},zs.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},zs.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},zs.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Fs=_s.assert;function js(e,t){if(e instanceof js)return e;this._importDER(e,t)||(Fs(e.r&&e.s,"Signature without r or s"),this.r=new vt(e.r,16),this.s=new vt(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Vs=js;function Ks(){this.place=0}function Hs(e,t){var n=e[t.place++];if(!(128&n))return n;var i=15&n;if(0===i||i>4)return!1;for(var r=0,s=0,o=t.place;s<i;s++,o++)r<<=8,r|=e[o],r>>>=0;return!(r<=127)&&(t.place=o,r)}function Ws(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function Gs(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}js.prototype._importDER=function(e,t){e=_s.toArray(e,t);var n=new Ks;if(48!==e[n.place++])return!1;var i=Hs(e,n);if(!1===i||i+n.place!==e.length||2!==e[n.place++])return!1;var r=Hs(e,n);if(!1===r)return!1;var s=e.slice(n.place,r+n.place);if(n.place+=r,2!==e[n.place++])return!1;var o=Hs(e,n);if(!1===o||e.length!==o+n.place)return!1;var a=e.slice(n.place,o+n.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new vt(s),this.s=new vt(a),this.recoveryParam=null,!0},js.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=Ws(t),n=Ws(n);!n[0]&&!(128&n[1]);)n=n.slice(1);var i=[2];Gs(i,t.length),i=i.concat(t),i.push(2),Gs(i,n.length);var r=i.concat(n),s=[48];return Gs(s,r.length),s=s.concat(r),_s.encode(s,e)};var Js=function(){throw new Error("unsupported")},Zs=_s.assert;function $s(e){if(!(this instanceof $s))return new $s(e);"string"==typeof e&&(Zs(Object.prototype.hasOwnProperty.call(Ls,e),"Unknown curve "+e),e=Ls[e]),e instanceof Ls.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Qs=$s;$s.prototype.keyPair=function(e){return new Us(this,e)},$s.prototype.keyFromPrivate=function(e,t){return Us.fromPrivate(this,e,t)},$s.prototype.keyFromPublic=function(e,t){return Us.fromPublic(this,e,t)},$s.prototype.genKeyPair=function(e){e||(e={});for(var t=new qs({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Js(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new vt(2));;){var r=new vt(t.generate(n));if(!(r.cmp(i)>0))return r.iaddn(1),this.keyFromPrivate(r)}},$s.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},$s.prototype.sign=function(e,t,n,i){"object"==typeof n&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new vt(e,16));for(var r=this.n.byteLength(),s=t.getPrivate().toArray("be",r),o=e.toArray("be",r),a=new qs({hash:this.hash,entropy:s,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"}),c=this.n.sub(new vt(1)),d=0;;d++){var l=i.k?i.k(d):new vt(a.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(c)>=0)){var h=this.g.mul(l);if(!h.isInfinity()){var f=h.getX(),u=f.umod(this.n);if(0!==u.cmpn(0)){var p=l.invm(this.n).mul(u.mul(t.getPrivate()).iadd(e));if(p=p.umod(this.n),0!==p.cmpn(0)){var g=(h.getY().isOdd()?1:0)|(0!==f.cmp(u)?2:0);return i.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),g^=1),new Vs({r:u,s:p,recoveryParam:g})}}}}}},$s.prototype.verify=function(e,t,n,i){e=this._truncateToN(new vt(e,16)),n=this.keyFromPublic(n,i),t=new Vs(t,"hex");var r=t.r,s=t.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,a=s.invm(this.n),c=a.mul(e).umod(this.n),d=a.mul(r).umod(this.n);return this.curve._maxwellTrick?(o=this.g.jmulAdd(c,n.getPublic(),d),!o.isInfinity()&&o.eqXToP(r)):(o=this.g.mulAdd(c,n.getPublic(),d),!o.isInfinity()&&0===o.getX().umod(this.n).cmp(r))},$s.prototype.recoverPubKey=function(e,t,n,i){Zs((3&n)===n,"The recovery param is more than two bits"),t=new Vs(t,i);var r=this.n,s=new vt(e),o=t.r,a=t.s,c=1&n,d=n>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");o=d?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var l=t.r.invm(r),h=r.sub(s).mul(l).umod(r),f=a.mul(l).umod(r);return this.g.mulAdd(h,o,f)},$s.prototype.getKeyRecoveryParam=function(e,t,n,i){if(t=new Vs(t,i),null!==t.recoveryParam)return t.recoveryParam;for(var r=0;r<4;r++){var s;try{s=this.recoverPubKey(e,t,r)}catch{continue}if(s.eq(n))return r}throw new Error("Unable to find valid recovery factor")};var Ys=ms((function(e,t){var n=t;n.version="6.5.4",n.utils=_s,n.rand=function(){throw new Error("unsupported")},n.curve=Os,n.curves=Ls,n.ec=Qs,n.eddsa=null})),Xs=Ys.ec;const eo="signing-key/5.7.0",to=new Qe(eo);let no=null;function io(){return no||(no=new Xs("secp256k1")),no}class ro{constructor(e){zn(this,"curve","secp256k1"),zn(this,"privateKey",lt(e)),32!==ht(this.privateKey)&&to.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=io().keyFromPrivate(st(this.privateKey));zn(this,"publicKey","0x"+t.getPublic(!1,"hex")),zn(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),zn(this,"_isSigningKey",!0)}_addPoint(e){const t=io().keyFromPublic(st(this.publicKey)),n=io().keyFromPublic(st(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const t=io().keyFromPrivate(st(this.privateKey)),n=st(e);32!==n.length&&to.throwArgumentError("bad digest length","digest",e);const i=t.sign(n,{canonical:!0});return pt({recoveryParam:i.recoveryParam,r:ut("0x"+i.r.toString(16),32),s:ut("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=io().keyFromPrivate(st(this.privateKey)),n=io().keyFromPublic(st(oo(e)));return ut("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function so(e,t){const n=pt(t),i={r:st(n.r),s:st(n.s)};return"0x"+io().recoverPubKey(st(e),i,n.recoveryParam).encode("hex",!1)}function oo(e,t){const n=st(e);if(32===n.length){const e=new ro(n);return t?"0x"+io().keyFromPrivate(n).getPublic(!0,"hex"):e.publicKey}return 33===n.length?t?lt(n):"0x"+io().keyFromPublic(n).getPublic(!1,"hex"):65===n.length?t?"0x"+io().keyFromPublic(n).getPublic(!0,"hex"):lt(n):to.throwArgumentError("invalid public or private key","key","[REDACTED]")}const ao="transactions/5.7.0";var co;function lo(e){const t=oo(e);return qn(ft(gt(ft(t,1)),12))}function ho(e,t){return lo(so(st(e),t))}new Qe(ao),function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(co||(co={}));const fo="https://rpc.walletconnect.org/v1";async function uo(e,t,n,i,r,s){switch(n.t){case"eip191":return po(e,t,n.s);case"eip1271":return await go(e,t,n.s,i,r,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function po(e,t,n){return ho(Sn(t),n).toLowerCase()===e.toLowerCase()}async function go(e,t,n,i,r,s){try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",d=n.substring(2),l=Sn(t).substring(2),h=o+l+a+c+d,f=await fetch(`${s||fo}/?chainId=${i}&projectId=${r}`,{method:"POST",body:JSON.stringify({id:mo(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:h},"latest"]})}),{result:u}=await f.json();return!!u&&u.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(o){return console.error("isValidEip1271Signature: ",o),!1}}function mo(){return Date.now()+Math.floor(1e3*Math.random())}var bo=Object.defineProperty,wo=Object.defineProperties,yo=Object.getOwnPropertyDescriptors,vo=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,Ao=Object.prototype.propertyIsEnumerable,Eo=(e,t,n)=>t in e?bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xo=(e,t)=>{for(var n in t||(t={}))_o.call(t,n)&&Eo(e,n,t[n]);if(vo)for(var n of vo(t))Ao.call(t,n)&&Eo(e,n,t[n]);return e},Mo=(e,t)=>wo(e,yo(t));const Io="did:pkh:",So=e=>e?.split(":"),Co=e=>{const t=e&&So(e);if(t)return e.includes(Io)?t[3]:t[1]},Ro=e=>{const t=e&&So(e);if(t)return t[2]+":"+t[3]},No=e=>{const t=e&&So(e);if(t)return t.pop()};async function Po(e){const{cacao:t,projectId:n}=e,{s:i,p:r}=t,s=ko(r,r.iss),o=No(r.iss);return await uo(o,s,i,Co(r.iss),n)}const ko=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,i=No(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let r=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${Co(t)}`,c=`Nonce: ${e.nonce}`,d=`Issued At: ${e.iat}`,l=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,f=e.requestId?`Request ID: ${e.requestId}`:void 0,u=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,p=na(e.resources);if(p){const e=Go(p);r=Yo(r,e)}return[n,i,"",r,"",s,o,a,c,d,l,h,f,u].filter((e=>null!=e)).join("\n")};function To(e,t,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:e.domain,aud:e.aud,version:e.version,nonce:e.nonce,iat:e.iat,statement:e.statement,requestId:e.requestId,resources:e.resources,nbf:e.nbf,exp:e.exp},s:t}}function Oo(e){var t;const{authPayload:n,chains:i,methods:r}=e,s=n.statement||"";if(null==i||!i.length)return n;const o=n.chains,a=Re(o,i);if(null==a||!a.length)throw new Error("No supported chains");const c=Lo(n.resources);if(!c)return n;jo(c);const d=qo(c,"eip155");let l=n?.resources||[];if(null!=d&&d.length){const e=zo(d),i=Re(e,r);if(null==i||!i.length)throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(e)}, supported: ${JSON.stringify(r)}`);const s=Ho("request",i,{chains:a}),o=Ko(c,"eip155",s);l=(null==(t=n?.resources)?void 0:t.slice(0,-1))||[],l.push(Wo(o))}return Mo(xo({},n),{statement:ta(s,na(l)),chains:a,resources:null!=n&&n.resources||l.length>0?l:void 0})}function Lo(e){const t=na(e);if(t&&Zo(t))return Go(t)}function Do(e,t){var n;return null==(n=e?.att)?void 0:n.hasOwnProperty(t)}function qo(e,t){var n,i;return null!=(n=e?.att)&&n[t]?Object.keys(null==(i=e?.att)?void 0:i[t]):[]}function Bo(e){return e?.map((e=>Object.keys(e)))||[]}function zo(e){return e?.map((e=>{var t;return null==(t=e.split("/"))?void 0:t[1]}))||[]}function Uo(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function Fo(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function jo(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const n=e.att[t];if(Array.isArray(n))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof n)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(n).forEach((e=>{const t=n[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function Vo(e,t,n,i={}){return n?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:Ho(t,n,i)}}}function Ko(e,t,n){var i;return e.att[t]=xo({},n),(null==(i=Object.keys(e.att))?void 0:i.sort(((e,t)=>e.localeCompare(t)))).reduce(((t,n)=>(t.att[n]=e.att[n],t)),{att:{}})}function Ho(e,t,n={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const i=t.map((t=>({[`${e}/${t}`]:[n]})));return Object.assign({},...i)}function Wo(e){return jo(e),`urn:recap:${Uo(e).replace(/=/g,"")}`}function Go(e){const t=Fo(e.replace("urn:recap:",""));return jo(t),t}function Jo(e,t,n){const i=Vo(e,t,n);return Wo(i)}function Zo(e){return e&&e.includes("urn:recap:")}function $o(e,t){const n=Go(e),i=Go(t),r=Qo(n,i);return Wo(r)}function Qo(e,t){jo(e),jo(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),i={att:{}};return n.forEach((n=>{var r,s;Object.keys((null==(r=e.att)?void 0:r[n])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[n])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((r=>{var s,o;i.att[n]=Mo(xo({},i.att[n]),{[r]:(null==(s=e.att[n])?void 0:s[r])||(null==(o=t.att[n])?void 0:o[r])})}))})),i}function Yo(e="",t){jo(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const i=[];let r=0;Object.keys(t.att).forEach((e=>{const n=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));n.sort(((e,t)=>e.action.localeCompare(t.action)));const s={};n.forEach((e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)}));const o=Object.keys(s).map((t=>(r++,`(${r}) '${t}': '${s[t].join("', '")}' for '${e}'.`)));i.push(o.join(", ").replace(".,","."))}));const s=i.join(" "),o=`${n}${s}`;return`${e?e+" ":""}${o}`}function Xo(e){var t;const n=Go(e);jo(n);const i=null==(t=n.att)?void 0:t.eip155;return i?Object.keys(i).map((e=>e.split("/")[1])):[]}function ea(e){const t=Go(e);jo(t);const n=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&n.push(e[0].chains)}))})),[...new Set(n.flat())]}function ta(e,t){if(!t)return e;const n=Go(t);return jo(n),Yo(e,n)}function na(e){if(!e)return;const t=e?.[e.length-1];return Zo(t)?t:void 0}const ia="base10",ra="base16",sa="base64pad",oa="base64url",aa="utf8",ca=0,da=1,la=2,ha=0,fa=1,ua=12,pa=32;function ga(){const e=f.TZ();return{privateKey:(0,u.dI)(e.secretKey,ra),publicKey:(0,u.dI)(e.publicKey,ra)}}function ma(){const e=(0,l.randomBytes)(pa);return(0,u.dI)(e,ra)}function ba(e,t){const n=f.Tc((0,u.sH)(e,ra),(0,u.sH)(t,ra),!0),i=new d.i(h.aD,n).expand(pa);return(0,u.dI)(i,ra)}function wa(e){const t=(0,h.tW)((0,u.sH)(e,ra));return(0,u.dI)(t,ra)}function ya(e){const t=(0,h.tW)((0,u.sH)(e,aa));return(0,u.dI)(t,ra)}function va(e){return(0,u.sH)(`${e}`,ia)}function _a(e){return Number((0,u.dI)(e,ia))}function Aa(e){const t=va(typeof e.type<"u"?e.type:ca);if(_a(t)===da&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?(0,u.sH)(e.senderPublicKey,ra):void 0,i=typeof e.iv<"u"?(0,u.sH)(e.iv,ra):(0,l.randomBytes)(ua),r=new c.g6((0,u.sH)(e.symKey,ra)).seal(i,(0,u.sH)(e.message,aa));return Ia({type:t,sealed:r,iv:i,senderPublicKey:n,encoding:e.encoding})}function Ea(e,t){const n=va(la),i=(0,l.randomBytes)(ua),r=(0,u.sH)(e,aa);return Ia({type:n,sealed:r,iv:i,encoding:t})}function xa(e){const t=new c.g6((0,u.sH)(e.symKey,ra)),{sealed:n,iv:i}=Sa({encoded:e.encoded,encoding:e?.encoding}),r=t.open(i,n);if(null===r)throw new Error("Failed to decrypt");return(0,u.dI)(r,aa)}function Ma(e,t){const{sealed:n}=Sa({encoded:e,encoding:t});return(0,u.dI)(n,aa)}function Ia(e){const{encoding:t=sa}=e;if(_a(e.type)===la)return(0,u.dI)((0,u.xW)([e.type,e.sealed]),t);if(_a(e.type)===da){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,u.dI)((0,u.xW)([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return(0,u.dI)((0,u.xW)([e.type,e.iv,e.sealed]),t)}function Sa(e){const{encoded:t,encoding:n=sa}=e,i=(0,u.sH)(t,n),r=i.slice(ha,fa),s=fa;if(_a(r)===da){const e=s+pa,t=e+ua,n=i.slice(s,e),o=i.slice(e,t),a=i.slice(t);return{type:r,sealed:a,iv:o,senderPublicKey:n}}if(_a(r)===la){const e=i.slice(s),t=(0,l.randomBytes)(ua);return{type:r,sealed:e,iv:t}}const o=s+ua,a=i.slice(s,o),c=i.slice(o);return{type:r,sealed:c,iv:a}}function Ca(e,t){const n=Sa({encoded:e,encoding:t?.encoding});return Ra({type:_a(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,u.dI)(n.senderPublicKey,ra):void 0,receiverPublicKey:t?.receiverPublicKey})}function Ra(e){const t=e?.type||ca;if(t===da){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Na(e){return e.type===da&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function Pa(e){return e.type===la}function ka(e){return new p.ec("p256").keyFromPublic({x:Buffer.from(e.x,"base64").toString("hex"),y:Buffer.from(e.y,"base64").toString("hex")},"hex")}function Ta(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const n=t.length%4;return n>0&&(t+="=".repeat(4-n)),t}function Oa(e){return Buffer.from(Ta(e),"base64")}function La(e,t){const[n,i,r]=e.split("."),s=Oa(r);if(64!==s.length)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${n}.${i}`,d=(new h.aD).update(Buffer.from(c)).digest(),l=ka(t),f=Buffer.from(d).toString("hex");if(!l.verify(f,{r:o,s:a}))throw new Error("Invalid signature");return(0,g.decodeJWT)(e).payload}const Da="irn";function qa(e){return e?.relay||{protocol:Da}}function Ba(e){const t=m.CG[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var za=Object.defineProperty,Ua=Object.defineProperties,Fa=Object.getOwnPropertyDescriptors,ja=Object.getOwnPropertySymbols,Va=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,Ha=(e,t,n)=>t in e?za(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wa=(e,t)=>{for(var n in t||(t={}))Va.call(t,n)&&Ha(e,n,t[n]);if(ja)for(var n of ja(t))Ka.call(t,n)&&Ha(e,n,t[n]);return e},Ga=(e,t)=>Ua(e,Fa(t));function Ja(e,t="-"){const n={},i="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(i)){const r=t.replace(i,""),s=e[t];n[r]=s}})),n}function Za(e){if(!e.includes("wc:")){const t=Le(e);null!=t&&t.includes("wc:")&&(e=t)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,i=e.substring(0,t),r=e.substring(t+1,n).split("@"),s=typeof n<"u"?e.substring(n):"",o=a.parse(s),c="string"==typeof o.methods?o.methods.split(","):void 0;return{protocol:i,topic:$a(r[0]),version:parseInt(r[1],10),symKey:o.symKey,relay:Ja(o),methods:c,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function $a(e){return e.startsWith("//")?e.substring(2):e}function Qa(e,t="-"){const n="relay",i={};return Object.keys(e).forEach((r=>{const s=n+t+r;e[r]&&(i[s]=e[r])})),i}function Ya(e){return`${e.protocol}:${e.topic}@${e.version}?`+a.stringify(Wa(Ga(Wa({symKey:e.symKey},Qa(e.relay)),{expiryTimestamp:e.expiryTimestamp}),e.methods?{methods:e.methods.join(",")}:{}))}function Xa(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var ec=Object.defineProperty,tc=Object.defineProperties,nc=Object.getOwnPropertyDescriptors,ic=Object.getOwnPropertySymbols,rc=Object.prototype.hasOwnProperty,sc=Object.prototype.propertyIsEnumerable,oc=(e,t,n)=>t in e?ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ac=(e,t)=>{for(var n in t||(t={}))rc.call(t,n)&&oc(e,n,t[n]);if(ic)for(var n of ic(t))sc.call(t,n)&&oc(e,n,t[n]);return e},cc=(e,t)=>tc(e,nc(t));function dc(e){const t=[];return e.forEach((e=>{const[n,i]=e.split(":");t.push(`${n}:${i}`)})),t}function lc(e){const t=[];return Object.values(e).forEach((e=>{t.push(...dc(e.accounts))})),t}function hc(e,t){const n=[];return Object.values(e).forEach((e=>{dc(e.accounts).includes(t)&&n.push(...e.methods)})),n}function fc(e,t){const n=[];return Object.values(e).forEach((e=>{dc(e.accounts).includes(t)&&n.push(...e.events)})),n}function uc(e,t){const n=Kc(e,t);if(n)throw new Error(n.message);const i={};for(const[r,s]of Object.entries(e))i[r]={methods:s.methods,events:s.events,chains:s.accounts.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))};return i}function pc(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:n={}},supportedNamespaces:i}=e,r=bc(t),s=bc(n),o={};Object.keys(i).forEach((e=>{const t=i[e].chains,n=i[e].methods,r=i[e].events,s=i[e].accounts;t.forEach((t=>{if(!s.some((e=>e.includes(t))))throw new Error(`No accounts provided for chain ${t} in namespace ${e}`)})),o[e]={chains:t,methods:n,events:r,accounts:s}}));const a=nd(t,o,"approve()");if(a)throw new Error(a.message);const c={};return Object.keys(t).length||Object.keys(n).length?(Object.keys(r).forEach((e=>{const t=i[e].chains.filter((t=>{var n,i;return null==(i=null==(n=r[e])?void 0:n.chains)?void 0:i.includes(t)})),n=i[e].methods.filter((t=>{var n,i;return null==(i=null==(n=r[e])?void 0:n.methods)?void 0:i.includes(t)})),s=i[e].events.filter((t=>{var n,i;return null==(i=null==(n=r[e])?void 0:n.events)?void 0:i.includes(t)})),o=t.map((t=>i[e].accounts.filter((e=>e.includes(`${t}:`))))).flat();c[e]={chains:t,methods:n,events:s,accounts:o}})),Object.keys(s).forEach((e=>{var t,n,r,o,a,d;if(!i[e])return;const l=null==(n=null==(t=s[e])?void 0:t.chains)?void 0:n.filter((t=>i[e].chains.includes(t))),h=i[e].methods.filter((t=>{var n,i;return null==(i=null==(n=s[e])?void 0:n.methods)?void 0:i.includes(t)})),f=i[e].events.filter((t=>{var n,i;return null==(i=null==(n=s[e])?void 0:n.events)?void 0:i.includes(t)})),u=l?.map((t=>i[e].accounts.filter((e=>e.includes(`${t}:`))))).flat();c[e]={chains:Me(null==(r=c[e])?void 0:r.chains,l),methods:Me(null==(o=c[e])?void 0:o.methods,h),events:Me(null==(a=c[e])?void 0:a.events,f),accounts:Me(null==(d=c[e])?void 0:d.accounts,u)}})),c):o}function gc(e){return e.includes(":")}function mc(e){return gc(e)?e.split(":")[0]:e}function bc(e){var t,n,i;const r={};if(!Mc(e))return r;for(const[s,o]of Object.entries(e)){const e=gc(s)?[s]:o.chains,a=o.methods||[],c=o.events||[],d=mc(s);r[d]=cc(ac({},r[d]),{chains:Me(e,null==(t=r[d])?void 0:t.chains),methods:Me(a,null==(n=r[d])?void 0:n.methods),events:Me(c,null==(i=r[d])?void 0:i.events)})}return r}function wc(e){const t={};return e?.forEach((e=>{const[n,i]=e.split(":");t[n]||(t[n]={accounts:[],chains:[],events:[]}),t[n].accounts.push(e),t[n].chains.push(`${n}:${i}`)})),t}function yc(e,t){t=t.map((e=>e.replace("did:pkh:","")));const n=wc(t);for(const[i,r]of Object.entries(n))r.methods?r.methods=Me(r.methods,e):r.methods=e,r.events=["chainChanged","accountsChanged"];return n}const vc={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},_c={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ac(e,t){const{message:n,code:i}=_c[e];return{message:t?`${n} ${t}`:n,code:i}}function Ec(e,t){const{message:n,code:i}=vc[e];return{message:t?`${n} ${t}`:n,code:i}}function xc(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function Mc(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ic(e){return typeof e>"u"}function Sc(e,t){return!(!t||!Ic(e))||"string"==typeof e&&!!e.trim().length}function Cc(e,t){return!(!t||!Ic(e))||"number"==typeof e&&!isNaN(e)}function Rc(e,t){const{requiredNamespaces:n}=t,i=Object.keys(e.namespaces),r=Object.keys(n);let s=!0;return!!ce(r,i)&&(i.forEach((t=>{const{accounts:i,methods:r,events:o}=e.namespaces[t],a=dc(i),c=n[t];(!ce(P(t,c),a)||!ce(c.methods,r)||!ce(c.events,o))&&(s=!1)})),s)}function Nc(e){return!(!Sc(e,!1)||!e.includes(":"))&&2===e.split(":").length}function Pc(e){if(Sc(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&Nc(e)}}return!1}function kc(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(Sc(e,!1)){if(t(e))return!0;const n=Le(e);return t(n)}}catch{}return!1}function Tc(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}function Oc(e){return e?.topic}function Lc(e,t){let n=null;return Sc(e?.publicKey,!1)||(n=Ac("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function Dc(e){let t=!0;return xc(e)?e.length&&(t=e.every((e=>Sc(e,!1)))):t=!1,t}function qc(e,t,n){let i=null;return xc(t)&&t.length?t.forEach((e=>{i||Nc(e)||(i=Ec("UNSUPPORTED_CHAINS",`${n}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):Nc(e)||(i=Ec("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function Bc(e,t,n){let i=null;return Object.entries(e).forEach((([e,r])=>{if(i)return;const s=qc(e,P(e,r),`${t} ${n}`);s&&(i=s)})),i}function zc(e,t){let n=null;return xc(e)?e.forEach((e=>{n||Pc(e)||(n=Ec("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):n=Ec("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Uc(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const i=zc(e?.accounts,`${t} namespace`);i&&(n=i)})),n}function Fc(e,t){let n=null;return Dc(e?.methods)?Dc(e?.events)||(n=Ec("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=Ec("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function jc(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const i=Fc(e,`${t}, namespace`);i&&(n=i)})),n}function Vc(e,t,n){let i=null;if(e&&Mc(e)){const r=jc(e,t);r&&(i=r);const s=Bc(e,t,n);s&&(i=s)}else i=Ac("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return i}function Kc(e,t){let n=null;if(e&&Mc(e)){const i=jc(e,t);i&&(n=i);const r=Uc(e,t);r&&(n=r)}else n=Ac("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function Hc(e){return Sc(e.protocol,!0)}function Wc(e,t){let n=!1;return t&&!e?n=!0:e&&xc(e)&&e.length&&e.forEach((e=>{n=Hc(e)})),n}function Gc(e){return"number"==typeof e}function Jc(e){return typeof e<"u"&&null!==typeof e}function Zc(e){return!(!e||"object"!=typeof e||!e.code||!Cc(e.code,!1)||!e.message||!Sc(e.message,!1))}function $c(e){return!(Ic(e)||!Sc(e.method,!1))}function Qc(e){return!(Ic(e)||Ic(e.result)&&Ic(e.error)||!Cc(e.id,!1)||!Sc(e.jsonrpc,!1))}function Yc(e){return!(Ic(e)||!Sc(e.name,!1))}function Xc(e,t){return!(!Nc(t)||!lc(e).includes(t))}function ed(e,t,n){return!!Sc(n,!1)&&hc(e,t).includes(n)}function td(e,t,n){return!!Sc(n,!1)&&fc(e,t).includes(n)}function nd(e,t,n){let i=null;const r=id(e),s=sd(t),o=Object.keys(r),a=Object.keys(s),c=rd(Object.keys(e)),d=rd(Object.keys(t)),l=c.filter((e=>!d.includes(e)));return l.length&&(i=Ac("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${l.toString()}\n      Received: ${Object.keys(t).toString()}`)),ce(o,a)||(i=Ac("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||i)return;const r=dc(t[e].accounts);r.includes(e)||(i=Ac("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${r.toString()}`))})),o.forEach((e=>{i||(ce(r[e].methods,s[e].methods)?ce(r[e].events,s[e].events)||(i=Ac("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):i=Ac("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))})),i}function id(e){const t={};return Object.keys(e).forEach((n=>{var i;n.includes(":")?t[n]=e[n]:null==(i=e[n].chains)||i.forEach((i=>{t[i]={methods:e[n].methods,events:e[n].events}}))})),t}function rd(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function sd(e){const t={};return Object.keys(e).forEach((n=>{if(n.includes(":"))t[n]=e[n];else{const i=dc(e[n].accounts);i?.forEach((i=>{t[i]={accounts:e[n].accounts.filter((e=>e.includes(`${i}:`))),methods:e[n].methods,events:e[n].events}}))}})),t}function od(e,t){return Cc(e,!1)&&e<=t.max&&e>=t.min}function ad(){const e=Z();return new Promise((t=>{switch(e){case z.browser:t(cd());break;case z.reactNative:t(dd());break;case z.node:t(ld());break;default:t(!0)}}))}function cd(){return J()&&navigator?.onLine}async function dd(){if(G()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo){const e=await(null==n.g?void 0:n.g.NetInfo.fetch());return e?.isConnected}return!0}function ld(){return!0}function hd(e){switch(Z()){case z.browser:fd(e);break;case z.reactNative:ud(e);break;case z.node:break}}function fd(e){!G()&&J()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}function ud(e){G()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}const pd={};class gd{static get(e){return pd[e]}static set(e,t){pd[e]=t}static delete(e){delete pd[e]}}},86729:function(e,t,n){"use strict";var i=t;i.version=n(1636).rE,i.utils=n(47011),i.rand=n(15037),i.curve=n(894),i.curves=n(60480),i.ec=n(57447),i.eddsa=n(8650)},36677:function(e,t,n){"use strict";var i=n(28490),r=n(47011),s=r.getNAF,o=r.getJSF,a=r.assert;function c(e,t){this.type=e,this.p=new i(t.p,16),this.red=t.prime?i.red(t.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=t.n&&new i(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function d(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var n=e._getDoubles(),i=s(t,1,this._bitLength),r=(1<<n.step+1)-(n.step%2===0?2:1);r/=3;var o,c,d=[];for(o=0;o<i.length;o+=n.step){c=0;for(var l=o+n.step-1;l>=o;l--)c=(c<<1)+i[l];d.push(c)}for(var h=this.jpoint(null,null,null),f=this.jpoint(null,null,null),u=r;u>0;u--){for(o=0;o<d.length;o++)c=d[o],c===u?f=f.mixedAdd(n.points[o]):c===-u&&(f=f.mixedAdd(n.points[o].neg()));h=h.add(f)}return h.toP()},c.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var r=i.points,o=s(t,n,this._bitLength),c=this.jpoint(null,null,null),d=o.length-1;d>=0;d--){for(var l=0;d>=0&&0===o[d];d--)l++;if(d>=0&&l++,c=c.dblp(l),d<0)break;var h=o[d];a(0!==h),c="affine"===e.type?h>0?c.mixedAdd(r[h-1>>1]):c.mixedAdd(r[-h-1>>1].neg()):h>0?c.add(r[h-1>>1]):c.add(r[-h-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,n,i,r){var a,c,d,l=this._wnafT1,h=this._wnafT2,f=this._wnafT3,u=0;for(a=0;a<i;a++){d=t[a];var p=d._getNAFPoints(e);l[a]=p.wnd,h[a]=p.points}for(a=i-1;a>=1;a-=2){var g=a-1,m=a;if(1===l[g]&&1===l[m]){var b=[t[g],null,null,t[m]];0===t[g].y.cmp(t[m].y)?(b[1]=t[g].add(t[m]),b[2]=t[g].toJ().mixedAdd(t[m].neg())):0===t[g].y.cmp(t[m].y.redNeg())?(b[1]=t[g].toJ().mixedAdd(t[m]),b[2]=t[g].add(t[m].neg())):(b[1]=t[g].toJ().mixedAdd(t[m]),b[2]=t[g].toJ().mixedAdd(t[m].neg()));var w=[-3,-1,-5,-7,0,7,5,1,3],y=o(n[g],n[m]);for(u=Math.max(y[0].length,u),f[g]=new Array(u),f[m]=new Array(u),c=0;c<u;c++){var v=0|y[0][c],_=0|y[1][c];f[g][c]=w[3*(v+1)+(_+1)],f[m][c]=0,h[g]=b}}else f[g]=s(n[g],l[g],this._bitLength),f[m]=s(n[m],l[m],this._bitLength),u=Math.max(f[g].length,u),u=Math.max(f[m].length,u)}var A=this.jpoint(null,null,null),E=this._wnafT4;for(a=u;a>=0;a--){var x=0;while(a>=0){var M=!0;for(c=0;c<i;c++)E[c]=0|f[c][a],0!==E[c]&&(M=!1);if(!M)break;x++,a--}if(a>=0&&x++,A=A.dblp(x),a<0)break;for(c=0;c<i;c++){var I=E[c];0!==I&&(I>0?d=h[c][I-1>>1]:I<0&&(d=h[c][-I-1>>1].neg()),A="affine"===d.type?A.mixedAdd(d):A.add(d))}}for(a=0;a<i;a++)h[a]=null;return r?A:A.toP()},c.BasePoint=d,d.prototype.eq=function(){throw new Error("Not implemented")},d.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=r.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*n){6===e[0]?a(e[e.length-1]%2===0):7===e[0]&&a(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},d.prototype.encodeCompressed=function(e){return this.encode(e,!0)},d.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},d.prototype.encode=function(e,t){return r.encode(this._encode(t),e)},d.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},d.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},d.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,r=0;r<t;r+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}},d.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=1===n?null:this.dbl(),r=1;r<n;r++)t[r]=t[r-1].add(i);return{wnd:e,points:t}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},31298:function(e,t,n){"use strict";var i=n(47011),r=n(28490),s=n(56698),o=n(36677),a=i.assert;function c(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new r(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function d(e,t,n,i,s){o.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(t,16),this.y=new r(n,16),this.z=i?new r(i,16):this.curve.one,this.t=s&&new r(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)},c.prototype.pointFromX=function(e,t){e=new r(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){e=new r(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),r=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===i.cmp(r)},s(d,o.BasePoint),c.prototype.pointFromJSON=function(e){return d.fromJSON(this,e)},c.prototype.point=function(e,t,n,i){return new d(this,e,t,n,i)},d.fromJSON=function(e,t){return new d(e,t[0],t[1],t[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},d.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),r=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=i.redAdd(t),o=s.redSub(n),a=i.redSub(t),c=r.redMul(o),d=s.redMul(a),l=r.redMul(a),h=o.redMul(s);return this.curve.point(c,d,h,l)},d.prototype._projDbl=function(){var e,t,n,i,r,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){i=this.curve._mulA(a);var d=i.redAdd(c);this.zOne?(e=o.redSub(a).redSub(c).redMul(d.redSub(this.curve.two)),t=d.redMul(i.redSub(c)),n=d.redSqr().redSub(d).redSub(d)):(r=this.z.redSqr(),s=d.redSub(r).redISub(r),e=o.redSub(a).redISub(c).redMul(s),t=d.redMul(i.redSub(c)),n=d.redMul(s))}else i=a.redAdd(c),r=this.curve._mulC(this.z).redSqr(),s=i.redSub(r).redSub(r),e=this.curve._mulC(o.redISub(i)).redMul(s),t=this.curve._mulC(i).redMul(a.redISub(c)),n=i.redMul(s);return this.curve.point(e,t,n)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),r=this.z.redMul(e.z.redAdd(e.z)),s=n.redSub(t),o=r.redSub(i),a=r.redAdd(i),c=n.redAdd(t),d=s.redMul(o),l=a.redMul(c),h=s.redMul(c),f=o.redMul(a);return this.curve.point(d,l,f,h)},d.prototype._projAdd=function(e){var t,n,i=this.z.redMul(e.z),r=i.redSqr(),s=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(s).redMul(o),c=r.redSub(a),d=r.redAdd(a),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(o),h=i.redMul(c).redMul(l);return this.curve.twisted?(t=i.redMul(d).redMul(o.redSub(this.curve._mulA(s))),n=c.redMul(d)):(t=i.redMul(d).redMul(o.redSub(s)),n=this.curve._mulC(c).redMul(d)),this.curve.point(h,t,n)},d.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},d.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},d.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},d.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},894:function(e,t,n){"use strict";var i=t;i.base=n(36677),i.short=n(39188),i.mont=n(30370),i.edwards=n(31298)},30370:function(e,t,n){"use strict";var i=n(28490),r=n(56698),s=n(36677),o=n(47011);function a(e){s.call(this,"mont",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,n){s.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(t,16),this.z=new i(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(a,s),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),r=i.redSqrt();return 0===r.redSqr().cmp(i)},r(c,s.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),r=t.redSub(i),s=t.redMul(i),o=r.redMul(i.redAdd(this.curve.a24.redMul(r)));return this.curve.point(s,o)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),r=e.x.redAdd(e.z),s=e.x.redSub(e.z),o=s.redMul(n),a=r.redMul(i),c=t.z.redMul(o.redAdd(a).redSqr()),d=t.x.redMul(o.redISub(a).redSqr());return this.curve.point(c,d)},c.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),r=this,s=[];0!==t.cmpn(0);t.iushrn(1))s.push(t.andln(1));for(var o=s.length-1;o>=0;o--)0===s[o]?(n=n.diffAdd(i,r),i=i.dbl()):(i=n.diffAdd(i,r),n=n.dbl());return i},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},39188:function(e,t,n){"use strict";var i=n(47011),r=n(28490),s=n(56698),o=n(36677),a=i.assert;function c(e){o.call(this,"short",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(e,t,n,i){o.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(t,16),this.y=new r(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,n,i){o.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(t,16),this.y=new r(n,16),this.z=new r(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n,i;if(e.beta)t=new r(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=s[0].cmp(s[1])<0?s[0]:s[1],t=t.toRed(this.red)}if(e.lambda)n=new r(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?n=o[0]:(n=o[1],a(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return i=e.basis?e.basis.map((function(e){return{a:new r(e.a,16),b:new r(e.b,16)}})):this._getEndoBasis(n),{beta:t,lambda:n,basis:i}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:r.mont(e),n=new r(2).toRed(t).redInvm(),i=n.redNeg(),s=new r(3).toRed(t).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]},c.prototype._getEndoBasis=function(e){var t,n,i,s,o,a,c,d,l,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=e,u=this.n.clone(),p=new r(1),g=new r(0),m=new r(0),b=new r(1),w=0;while(0!==f.cmpn(0)){var y=u.div(f);d=u.sub(y.mul(f)),l=m.sub(y.mul(p));var v=b.sub(y.mul(g));if(!i&&d.cmp(h)<0)t=c.neg(),n=p,i=d.neg(),s=l;else if(i&&2===++w)break;c=d,u=f,f=d,m=p,p=l,b=g,g=v}o=d.neg(),a=l;var _=i.sqr().add(s.sqr()),A=o.sqr().add(a.sqr());return A.cmp(_)>=0&&(o=t,a=n),i.negative&&(i=i.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:i,b:s},{a:o,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],r=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),o=r.mul(n.a),a=s.mul(i.a),c=r.mul(n.b),d=s.mul(i.b),l=e.sub(o).sub(a),h=c.add(d).neg();return{k1:l,k2:h}},c.prototype.pointFromX=function(e,t){e=new r(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===n.redSqr().redISub(r).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,r=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),i[2*s]=a,i[2*s+1]=c,r[2*s]=o.k1,r[2*s+1]=o.k2}for(var d=this._wnafMulAdd(1,i,r,2*s,n),l=0;l<2*s;l++)i[l]=null,r[l]=null;return d},s(d,o.BasePoint),c.prototype.point=function(e,t,n){return new d(this,e,t,n)},c.prototype.pointFromJSON=function(e,t){return d.fromJSON(this,e,t)},d.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(e,t,n){"string"===typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function r(t){return e.point(t[0],t[1],n)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(r))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(r))}},i},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},d.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),r=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),s=r.redSqr().redISub(this.x.redAdd(this.x)),o=r.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(e){return e=new r(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r):this.curve._wnafMulAdd(1,i,r,2)},d.prototype.jmulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r,!0):this.curve._wnafMulAdd(1,i,r,2,!0)},d.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},d.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t},d.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e},s(l,o.BasePoint),c.prototype.jpoint=function(e,t,n){return new l(this,e,t,n)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),r=e.x.redMul(n),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),a=i.redSub(r),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),l=d.redMul(a),h=i.redMul(d),f=c.redSqr().redIAdd(l).redISub(h).redISub(h),u=c.redMul(h.redISub(f)).redISub(s.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,u,p)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),r=this.y,s=e.y.redMul(t).redMul(this.z),o=n.redSub(i),a=r.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),d=c.redMul(o),l=n.redMul(c),h=a.redSqr().redIAdd(d).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(r.redMul(d)),u=this.z.redMul(o);return this.curve.jpoint(h,f,u)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,r=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),d=o.redAdd(o);for(t=0;t<e;t++){var l=s.redSqr(),h=d.redSqr(),f=h.redSqr(),u=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(c)),p=s.redMul(h),g=u.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),b=u.redMul(m);b=b.redIAdd(b).redISub(f);var w=d.redMul(a);t+1<e&&(c=c.redMul(f)),s=g,a=w,d=b}return this.curve.jpoint(s,d.redMul(r),a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),s=r.redSqr(),o=this.x.redAdd(r).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),c=a.redSqr().redISub(o).redISub(o),d=s.redIAdd(s);d=d.redIAdd(d),d=d.redIAdd(d),e=c,t=a.redMul(o.redISub(c)).redISub(d),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),u=this.x.redAdd(h).redSqr().redISub(l).redISub(f);u=u.redIAdd(u);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=m.redIAdd(m),m=m.redIAdd(m),e=g.redISub(u).redISub(u),t=p.redMul(u.redISub(e)).redISub(m),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)},l.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),s=r.redSqr(),o=this.x.redAdd(r).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var d=s.redIAdd(s);d=d.redIAdd(d),d=d.redIAdd(d),t=a.redMul(o.redISub(c)).redISub(d),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),u=this.x.redSub(l).redMul(this.x.redAdd(l));u=u.redAdd(u).redIAdd(u);var p=f.redIAdd(f);p=p.redIAdd(p);var g=p.redAdd(p);e=u.redSqr().redISub(g),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m),t=u.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,n)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,r=i.redSqr().redSqr(),s=t.redSqr(),o=n.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(r)),c=t.redAdd(t);c=c.redIAdd(c);var d=c.redMul(o),l=a.redSqr().redISub(d.redAdd(d)),h=d.redISub(l),f=o.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var u=a.redMul(h).redISub(f),p=n.redAdd(n).redMul(i);return this.curve.jpoint(l,u,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),r=e.redAdd(e).redIAdd(e),s=r.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(s);var a=o.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var d=r.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),l=t.redMul(d);l=l.redIAdd(l),l=l.redIAdd(l);var h=this.x.redMul(a).redISub(l);h=h.redIAdd(h),h=h.redIAdd(h);var f=this.y.redMul(d.redMul(c.redISub(d)).redISub(o.redMul(a)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var u=this.z.redAdd(o).redSqr().redISub(n).redISub(a);return this.curve.jpoint(h,f,u)},l.prototype.mul=function(e,t){return e=new r(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),r=n.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(i)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var i=e.clone(),r=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(r),0===this.x.cmp(n))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},60480:function(e,t,n){"use strict";var i,r=t,s=n(77952),o=n(894),a=n(47011),c=a.assert;function d(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,c(this.g.validate(),"Invalid curve"),c(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var n=new d(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=d,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=n(74011)}catch(h){i=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},57447:function(e,t,n){"use strict";var i=n(28490),r=n(32723),s=n(47011),o=n(60480),a=n(15037),c=s.assert,d=n(61200),l=n(28545);function h(e){if(!(this instanceof h))return new h(e);"string"===typeof e&&(c(Object.prototype.hasOwnProperty.call(o,e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=h,h.prototype.keyPair=function(e){return new d(this,e)},h.prototype.keyFromPrivate=function(e,t){return d.fromPrivate(this,e,t)},h.prototype.keyFromPublic=function(e,t){return d.fromPublic(this,e,t)},h.prototype.genKeyPair=function(e){e||(e={});for(var t=new r({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),s=this.n.sub(new i(2));;){var o=new i(t.generate(n));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},h.prototype._truncateToN=function(e,t,n){var r;if(i.isBN(e)||"number"===typeof e)e=new i(e,16),r=e.byteLength();else if("object"===typeof e)r=e.length,e=new i(e,16);else{var s=e.toString();r=s.length+1>>>1,e=new i(s,16)}"number"!==typeof n&&(n=8*r);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},h.prototype.sign=function(e,t,n,s){if("object"===typeof n&&(s=n,n=null),s||(s={}),"string"!==typeof e&&"number"!==typeof e&&!i.isBN(e)){c("object"===typeof e&&e&&"number"===typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),c(e.length>>>0===e.length);for(var o=0;o<e.length;o++)c((255&e[o])===e[o])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,s.msgBitLength),c(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),d=t.getPrivate().toArray("be",a),h=e.toArray("be",a);c(new i(h).eq(e),"Can not sign message");for(var f=new r({hash:this.hash,entropy:d,nonce:h,pers:s.pers,persEnc:s.persEnc||"utf8"}),u=this.n.sub(new i(1)),p=0;;p++){var g=s.k?s.k(p):new i(f.generate(this.n.byteLength()));if(g=this._truncateToN(g,!0),!(g.cmpn(1)<=0||g.cmp(u)>=0)){var m=this.g.mul(g);if(!m.isInfinity()){var b=m.getX(),w=b.umod(this.n);if(0!==w.cmpn(0)){var y=g.invm(this.n).mul(w.mul(t.getPrivate()).iadd(e));if(y=y.umod(this.n),0!==y.cmpn(0)){var v=(m.getY().isOdd()?1:0)|(0!==b.cmp(w)?2:0);return s.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),v^=1),new l({r:w,s:y,recoveryParam:v})}}}}}},h.prototype.verify=function(e,t,n,i,r){r||(r={}),e=this._truncateToN(e,!1,r.msgBitLength),n=this.keyFromPublic(n,i),t=new l(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),d=c.mul(e).umod(this.n),h=c.mul(s).umod(this.n);return this.curve._maxwellTrick?(a=this.g.jmulAdd(d,n.getPublic(),h),!a.isInfinity()&&a.eqXToP(s)):(a=this.g.mulAdd(d,n.getPublic(),h),!a.isInfinity()&&0===a.getX().umod(this.n).cmp(s))},h.prototype.recoverPubKey=function(e,t,n,r){c((3&n)===n,"The recovery param is more than two bits"),t=new l(t,r);var s=this.n,o=new i(e),a=t.r,d=t.s,h=1&n,f=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),h):this.curve.pointFromX(a,h);var u=t.r.invm(s),p=s.sub(o).mul(u).umod(s),g=d.mul(u).umod(s);return this.g.mulAdd(p,a,g)},h.prototype.getKeyRecoveryParam=function(e,t,n,i){if(t=new l(t,i),null!==t.recoveryParam)return t.recoveryParam;for(var r=0;r<4;r++){var s;try{s=this.recoverPubKey(e,t,r)}catch(e){continue}if(s.eq(n))return r}throw new Error("Unable to find valid recovery factor")}},61200:function(e,t,n){"use strict";var i=n(28490),r=n(47011),s=r.assert;function o(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=o,o.fromPublic=function(e,t,n){return t instanceof o?t:new o(e,{pub:t,pubEnc:n})},o.fromPrivate=function(e,t,n){return t instanceof o?t:new o(e,{priv:t,privEnc:n})},o.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},o.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?s(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||s(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},o.prototype.derive=function(e){return e.validate()||s(e.validate(),"public point not validated"),e.mul(this.priv).getX()},o.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},o.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},28545:function(e,t,n){"use strict";var i=n(28490),r=n(47011),s=r.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(s(e.r&&e.s,"Signature without r or s"),this.r=new i(e.r,16),this.s=new i(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var n=e[t.place++];if(!(128&n))return n;var i=15&n;if(0===i||i>4)return!1;if(0===e[t.place])return!1;for(var r=0,s=0,o=t.place;s<i;s++,o++)r<<=8,r|=e[o],r>>>=0;return!(r<=127)&&(t.place=o,r)}function d(e){var t=0,n=e.length-1;while(!e[t]&&!(128&e[t+1])&&t<n)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);e.push(128|n);while(--n)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=o,o.prototype._importDER=function(e,t){e=r.toArray(e,t);var n=new a;if(48!==e[n.place++])return!1;var s=c(e,n);if(!1===s)return!1;if(s+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var o=c(e,n);if(!1===o)return!1;if(0!==(128&e[n.place]))return!1;var d=e.slice(n.place,o+n.place);if(n.place+=o,2!==e[n.place++])return!1;var l=c(e,n);if(!1===l)return!1;if(e.length!==l+n.place)return!1;if(0!==(128&e[n.place]))return!1;var h=e.slice(n.place,l+n.place);if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new i(d),this.s=new i(h),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=d(t),n=d(n);while(!n[0]&&!(128&n[1]))n=n.slice(1);var i=[2];l(i,t.length),i=i.concat(t),i.push(2),l(i,n.length);var s=i.concat(n),o=[48];return l(o,s.length),o=o.concat(s),r.encode(o,e)}},8650:function(e,t,n){"use strict";var i=n(77952),r=n(60480),s=n(47011),o=s.assert,a=s.parseBytes,c=n(46661),d=n(90220);function l(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);e=r[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=i.sha512}e.exports=l,l.prototype.sign=function(e,t){e=a(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),r=this.g.mul(i),s=this.encodePoint(r),o=this.hashInt(s,n.pubBytes(),e).mul(n.priv()),c=i.add(o).umod(this.curve.n);return this.makeSignature({R:r,S:c,Rencoded:s})},l.prototype.verify=function(e,t,n){if(e=a(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var i=this.keyFromPublic(n),r=this.hashInt(t.Rencoded(),i.pubBytes(),e),s=this.g.mul(t.S()),o=t.R().add(i.pub().mul(r));return o.eq(s)},l.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return s.intFromLE(e.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof d?e:new d(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){e=s.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(-129&e[t]),i=0!==(128&e[t]),r=s.intFromLE(n);return this.curve.pointFromY(r,i)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return s.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}},46661:function(e,t,n){"use strict";var i=n(47011),r=i.assert,s=i.parseBytes,o=i.cachedProperty;function a(e,t){this.eddsa=e,this._secret=s(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=s(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),o(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i})),o(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),o(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),o(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return r(this._secret,"KeyPair is public only"),i.encode(this.secret(),e)},a.prototype.getPublic=function(e){return i.encode(this.pubBytes(),e)},e.exports=a},90220:function(e,t,n){"use strict";var i=n(28490),r=n(47011),s=r.assert,o=r.cachedProperty,a=r.parseBytes;function c(e,t){this.eddsa=e,"object"!==typeof t&&(t=a(t)),Array.isArray(t)&&(s(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),s(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),o(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),o(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),o(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},74011:function(e){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},47011:function(e,t,n){"use strict";var i=t,r=n(28490),s=n(43349),o=n(64367);function a(e,t,n){var i,r=new Array(Math.max(e.bitLength(),n)+1);for(i=0;i<r.length;i+=1)r[i]=0;var s=1<<t+1,o=e.clone();for(i=0;i<r.length;i++){var a,c=o.andln(s-1);o.isOdd()?(a=c>(s>>1)-1?(s>>1)-c:c,o.isubn(a)):a=0,r[i]=a,o.iushrn(1)}return r}function c(e,t){var n=[[],[]];e=e.clone(),t=t.clone();var i,r=0,s=0;while(e.cmpn(-r)>0||t.cmpn(-s)>0){var o,a,c=e.andln(3)+r&3,d=t.andln(3)+s&3;3===c&&(c=-1),3===d&&(d=-1),0===(1&c)?o=0:(i=e.andln(7)+r&7,o=3!==i&&5!==i||2!==d?c:-c),n[0].push(o),0===(1&d)?a=0:(i=t.andln(7)+s&7,a=3!==i&&5!==i||2!==c?d:-d),n[1].push(a),2*r===o+1&&(r=1-r),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return n}function d(e,t,n){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=n.call(this)}}function l(e){return"string"===typeof e?i.toArray(e,"hex"):e}function h(e){return new r(e,"hex","le")}i.assert=s,i.toArray=o.toArray,i.zero2=o.zero2,i.toHex=o.toHex,i.encode=o.encode,i.getNAF=a,i.getJSF=c,i.cachedProperty=d,i.parseBytes=l,i.intFromLE=h},28490:function(e,t,n){e=n.nmd(e),function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function s(e,t,n){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"===typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:n(79368).Buffer}catch(S){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function c(e,t,n){var i=a(e,n);return n-1>=t&&(i|=a(e,n-1)<<4),i}function d(e,t,n,i){for(var r=0,s=Math.min(e.length,n),o=t;o<s;o++){var a=e.charCodeAt(o)-48;r*=i,r+=a>=49?a-49+10:a>=17?a-17+10:a}return r}s.isBN=function(e){return e instanceof s||null!==e&&"object"===typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,n){if("number"===typeof e)return this._initNumber(e,t,n);if("object"===typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var r=0;"-"===e[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,n):(this._parseBase(e,t,r),"le"===n&&this._initArray(this.toArray(),t,n)))},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(i("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,o,a=0;if("be"===n)for(r=e.length-1,s=0;r>=0;r-=3)o=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if("le"===n)for(r=0,s=0;r<e.length;r+=3)o=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,s=0,o=0;if("be"===n)for(i=e.length-1;i>=t;i-=2)r=c(e,t,i)<<s,this.words[o]|=67108863&r,s>=18?(s-=18,o+=1,this.words[o]|=r>>>26):s+=8;else{var a=e.length-t;for(i=a%2===0?t+1:t;i<e.length;i+=2)r=c(e,t,i)<<s,this.words[o]|=67108863&r,s>=18?(s-=18,o+=1,this.words[o]|=r>>>26):s+=8}this.strip()},s.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=t)i++;i--,r=r/t|0;for(var s=e.length-n,o=s%i,a=Math.min(s,s-o)+n,c=0,l=n;l<a;l+=i)c=d(e,l,l+i,t),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=d(e,l,e.length,t),l=0;l<o;l++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){while(this.length<e)this.words[this.length++]=0;return this},s.prototype.strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function u(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=(e.words[i]&1<<r)>>>r}return t}function p(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],s=0|t.words[0],o=r*s,a=67108863&o,c=o/67108864|0;n.words[0]=a;for(var d=1;d<i;d++){for(var l=c>>>26,h=67108863&c,f=Math.min(d,t.length-1),u=Math.max(0,d-e.length+1);u<=f;u++){var p=d-u|0;r=0|e.words[p],s=0|t.words[u],o=r*s+h,l+=o/67108864|0,h=67108863&o}n.words[d]=0|h,c=0|l}return 0!==c?n.words[d]=0|c:n.length--,n.strip()}s.prototype.toString=function(e,t){var n;if(e=e||10,t=0|t||1,16===e||"hex"===e){n="";for(var r=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<r|s)).toString(16);s=a>>>24-r&16777215,r+=2,r>=26&&(r-=26,o--),n=0!==s||o!==this.length-1?l[6-c.length]+c+n:c+n}0!==s&&(n=s.toString(16)+n);while(n.length%t!==0)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var d=h[e],u=f[e];n="";var p=this.clone();p.negative=0;while(!p.isZero()){var g=p.modn(u).toString(e);p=p.idivn(u),n=p.isZero()?g+n:l[d-g.length]+g+n}this.isZero()&&(n="0"+n);while(n.length%t!==0)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return i("undefined"!==typeof o),this.toArrayLike(o,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,n){var r=this.byteLength(),s=n||Math.max(1,r);i(r<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var o,a,c="le"===t,d=new e(s),l=this.clone();if(c){for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),d[a]=o;for(;a<s;a++)d[a]=0}else{for(a=0;a<s-r;a++)d[a]=0;for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),d[s-a-1]=o}return d},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0===(8191&t)&&(n+=13,t>>>=13),0===(127&t)&&(n+=7,t>>>=7),0===(15&t)&&(n+=4,t>>>=4),0===(3&t)&&(n+=2,t>>>=2),0===(1&t)&&n++,n},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){while(this.length<e.length)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return i(0===(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return i(0===(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return i(0===(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"===typeof e&&e>=0);var n=e/26|0,r=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<r:this.words[n]&~(1<<r),this.strip()},s.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,s=0;s<i.length;s++)t=(0|n.words[s])+(0|i.words[s])+r,this.words[s]=67108863&t,r=t>>>26;for(;0!==r&&s<n.length;s++)t=(0|n.words[s])+r,this.words[s]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(n=this,i=e):(n=e,i=this);for(var s=0,o=0;o<i.length;o++)t=(0|n.words[o])-(0|i.words[o])+s,s=t>>26,this.words[o]=67108863&t;for(;0!==s&&o<n.length;o++)t=(0|n.words[o])+s,s=t>>26,this.words[o]=67108863&t;if(0===s&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,n){var i,r,s,o=e.words,a=t.words,c=n.words,d=0,l=0|o[0],h=8191&l,f=l>>>13,u=0|o[1],p=8191&u,g=u>>>13,m=0|o[2],b=8191&m,w=m>>>13,y=0|o[3],v=8191&y,_=y>>>13,A=0|o[4],E=8191&A,x=A>>>13,M=0|o[5],I=8191&M,S=M>>>13,C=0|o[6],R=8191&C,N=C>>>13,P=0|o[7],k=8191&P,T=P>>>13,O=0|o[8],L=8191&O,D=O>>>13,q=0|o[9],B=8191&q,z=q>>>13,U=0|a[0],F=8191&U,j=U>>>13,V=0|a[1],K=8191&V,H=V>>>13,W=0|a[2],G=8191&W,J=W>>>13,Z=0|a[3],$=8191&Z,Q=Z>>>13,Y=0|a[4],X=8191&Y,ee=Y>>>13,te=0|a[5],ne=8191&te,ie=te>>>13,re=0|a[6],se=8191&re,oe=re>>>13,ae=0|a[7],ce=8191&ae,de=ae>>>13,le=0|a[8],he=8191&le,fe=le>>>13,ue=0|a[9],pe=8191&ue,ge=ue>>>13;n.negative=e.negative^t.negative,n.length=19,i=Math.imul(h,F),r=Math.imul(h,j),r=r+Math.imul(f,F)|0,s=Math.imul(f,j);var me=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(p,F),r=Math.imul(p,j),r=r+Math.imul(g,F)|0,s=Math.imul(g,j),i=i+Math.imul(h,K)|0,r=r+Math.imul(h,H)|0,r=r+Math.imul(f,K)|0,s=s+Math.imul(f,H)|0;var be=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(b,F),r=Math.imul(b,j),r=r+Math.imul(w,F)|0,s=Math.imul(w,j),i=i+Math.imul(p,K)|0,r=r+Math.imul(p,H)|0,r=r+Math.imul(g,K)|0,s=s+Math.imul(g,H)|0,i=i+Math.imul(h,G)|0,r=r+Math.imul(h,J)|0,r=r+Math.imul(f,G)|0,s=s+Math.imul(f,J)|0;var we=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(v,F),r=Math.imul(v,j),r=r+Math.imul(_,F)|0,s=Math.imul(_,j),i=i+Math.imul(b,K)|0,r=r+Math.imul(b,H)|0,r=r+Math.imul(w,K)|0,s=s+Math.imul(w,H)|0,i=i+Math.imul(p,G)|0,r=r+Math.imul(p,J)|0,r=r+Math.imul(g,G)|0,s=s+Math.imul(g,J)|0,i=i+Math.imul(h,$)|0,r=r+Math.imul(h,Q)|0,r=r+Math.imul(f,$)|0,s=s+Math.imul(f,Q)|0;var ye=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(E,F),r=Math.imul(E,j),r=r+Math.imul(x,F)|0,s=Math.imul(x,j),i=i+Math.imul(v,K)|0,r=r+Math.imul(v,H)|0,r=r+Math.imul(_,K)|0,s=s+Math.imul(_,H)|0,i=i+Math.imul(b,G)|0,r=r+Math.imul(b,J)|0,r=r+Math.imul(w,G)|0,s=s+Math.imul(w,J)|0,i=i+Math.imul(p,$)|0,r=r+Math.imul(p,Q)|0,r=r+Math.imul(g,$)|0,s=s+Math.imul(g,Q)|0,i=i+Math.imul(h,X)|0,r=r+Math.imul(h,ee)|0,r=r+Math.imul(f,X)|0,s=s+Math.imul(f,ee)|0;var ve=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(I,F),r=Math.imul(I,j),r=r+Math.imul(S,F)|0,s=Math.imul(S,j),i=i+Math.imul(E,K)|0,r=r+Math.imul(E,H)|0,r=r+Math.imul(x,K)|0,s=s+Math.imul(x,H)|0,i=i+Math.imul(v,G)|0,r=r+Math.imul(v,J)|0,r=r+Math.imul(_,G)|0,s=s+Math.imul(_,J)|0,i=i+Math.imul(b,$)|0,r=r+Math.imul(b,Q)|0,r=r+Math.imul(w,$)|0,s=s+Math.imul(w,Q)|0,i=i+Math.imul(p,X)|0,r=r+Math.imul(p,ee)|0,r=r+Math.imul(g,X)|0,s=s+Math.imul(g,ee)|0,i=i+Math.imul(h,ne)|0,r=r+Math.imul(h,ie)|0,r=r+Math.imul(f,ne)|0,s=s+Math.imul(f,ie)|0;var _e=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(R,F),r=Math.imul(R,j),r=r+Math.imul(N,F)|0,s=Math.imul(N,j),i=i+Math.imul(I,K)|0,r=r+Math.imul(I,H)|0,r=r+Math.imul(S,K)|0,s=s+Math.imul(S,H)|0,i=i+Math.imul(E,G)|0,r=r+Math.imul(E,J)|0,r=r+Math.imul(x,G)|0,s=s+Math.imul(x,J)|0,i=i+Math.imul(v,$)|0,r=r+Math.imul(v,Q)|0,r=r+Math.imul(_,$)|0,s=s+Math.imul(_,Q)|0,i=i+Math.imul(b,X)|0,r=r+Math.imul(b,ee)|0,r=r+Math.imul(w,X)|0,s=s+Math.imul(w,ee)|0,i=i+Math.imul(p,ne)|0,r=r+Math.imul(p,ie)|0,r=r+Math.imul(g,ne)|0,s=s+Math.imul(g,ie)|0,i=i+Math.imul(h,se)|0,r=r+Math.imul(h,oe)|0,r=r+Math.imul(f,se)|0,s=s+Math.imul(f,oe)|0;var Ae=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(k,F),r=Math.imul(k,j),r=r+Math.imul(T,F)|0,s=Math.imul(T,j),i=i+Math.imul(R,K)|0,r=r+Math.imul(R,H)|0,r=r+Math.imul(N,K)|0,s=s+Math.imul(N,H)|0,i=i+Math.imul(I,G)|0,r=r+Math.imul(I,J)|0,r=r+Math.imul(S,G)|0,s=s+Math.imul(S,J)|0,i=i+Math.imul(E,$)|0,r=r+Math.imul(E,Q)|0,r=r+Math.imul(x,$)|0,s=s+Math.imul(x,Q)|0,i=i+Math.imul(v,X)|0,r=r+Math.imul(v,ee)|0,r=r+Math.imul(_,X)|0,s=s+Math.imul(_,ee)|0,i=i+Math.imul(b,ne)|0,r=r+Math.imul(b,ie)|0,r=r+Math.imul(w,ne)|0,s=s+Math.imul(w,ie)|0,i=i+Math.imul(p,se)|0,r=r+Math.imul(p,oe)|0,r=r+Math.imul(g,se)|0,s=s+Math.imul(g,oe)|0,i=i+Math.imul(h,ce)|0,r=r+Math.imul(h,de)|0,r=r+Math.imul(f,ce)|0,s=s+Math.imul(f,de)|0;var Ee=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(L,F),r=Math.imul(L,j),r=r+Math.imul(D,F)|0,s=Math.imul(D,j),i=i+Math.imul(k,K)|0,r=r+Math.imul(k,H)|0,r=r+Math.imul(T,K)|0,s=s+Math.imul(T,H)|0,i=i+Math.imul(R,G)|0,r=r+Math.imul(R,J)|0,r=r+Math.imul(N,G)|0,s=s+Math.imul(N,J)|0,i=i+Math.imul(I,$)|0,r=r+Math.imul(I,Q)|0,r=r+Math.imul(S,$)|0,s=s+Math.imul(S,Q)|0,i=i+Math.imul(E,X)|0,r=r+Math.imul(E,ee)|0,r=r+Math.imul(x,X)|0,s=s+Math.imul(x,ee)|0,i=i+Math.imul(v,ne)|0,r=r+Math.imul(v,ie)|0,r=r+Math.imul(_,ne)|0,s=s+Math.imul(_,ie)|0,i=i+Math.imul(b,se)|0,r=r+Math.imul(b,oe)|0,r=r+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,i=i+Math.imul(p,ce)|0,r=r+Math.imul(p,de)|0,r=r+Math.imul(g,ce)|0,s=s+Math.imul(g,de)|0,i=i+Math.imul(h,he)|0,r=r+Math.imul(h,fe)|0,r=r+Math.imul(f,he)|0,s=s+Math.imul(f,fe)|0;var xe=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(B,F),r=Math.imul(B,j),r=r+Math.imul(z,F)|0,s=Math.imul(z,j),i=i+Math.imul(L,K)|0,r=r+Math.imul(L,H)|0,r=r+Math.imul(D,K)|0,s=s+Math.imul(D,H)|0,i=i+Math.imul(k,G)|0,r=r+Math.imul(k,J)|0,r=r+Math.imul(T,G)|0,s=s+Math.imul(T,J)|0,i=i+Math.imul(R,$)|0,r=r+Math.imul(R,Q)|0,r=r+Math.imul(N,$)|0,s=s+Math.imul(N,Q)|0,i=i+Math.imul(I,X)|0,r=r+Math.imul(I,ee)|0,r=r+Math.imul(S,X)|0,s=s+Math.imul(S,ee)|0,i=i+Math.imul(E,ne)|0,r=r+Math.imul(E,ie)|0,r=r+Math.imul(x,ne)|0,s=s+Math.imul(x,ie)|0,i=i+Math.imul(v,se)|0,r=r+Math.imul(v,oe)|0,r=r+Math.imul(_,se)|0,s=s+Math.imul(_,oe)|0,i=i+Math.imul(b,ce)|0,r=r+Math.imul(b,de)|0,r=r+Math.imul(w,ce)|0,s=s+Math.imul(w,de)|0,i=i+Math.imul(p,he)|0,r=r+Math.imul(p,fe)|0,r=r+Math.imul(g,he)|0,s=s+Math.imul(g,fe)|0,i=i+Math.imul(h,pe)|0,r=r+Math.imul(h,ge)|0,r=r+Math.imul(f,pe)|0,s=s+Math.imul(f,ge)|0;var Me=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(B,K),r=Math.imul(B,H),r=r+Math.imul(z,K)|0,s=Math.imul(z,H),i=i+Math.imul(L,G)|0,r=r+Math.imul(L,J)|0,r=r+Math.imul(D,G)|0,s=s+Math.imul(D,J)|0,i=i+Math.imul(k,$)|0,r=r+Math.imul(k,Q)|0,r=r+Math.imul(T,$)|0,s=s+Math.imul(T,Q)|0,i=i+Math.imul(R,X)|0,r=r+Math.imul(R,ee)|0,r=r+Math.imul(N,X)|0,s=s+Math.imul(N,ee)|0,i=i+Math.imul(I,ne)|0,r=r+Math.imul(I,ie)|0,r=r+Math.imul(S,ne)|0,s=s+Math.imul(S,ie)|0,i=i+Math.imul(E,se)|0,r=r+Math.imul(E,oe)|0,r=r+Math.imul(x,se)|0,s=s+Math.imul(x,oe)|0,i=i+Math.imul(v,ce)|0,r=r+Math.imul(v,de)|0,r=r+Math.imul(_,ce)|0,s=s+Math.imul(_,de)|0,i=i+Math.imul(b,he)|0,r=r+Math.imul(b,fe)|0,r=r+Math.imul(w,he)|0,s=s+Math.imul(w,fe)|0,i=i+Math.imul(p,pe)|0,r=r+Math.imul(p,ge)|0,r=r+Math.imul(g,pe)|0,s=s+Math.imul(g,ge)|0;var Ie=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(B,G),r=Math.imul(B,J),r=r+Math.imul(z,G)|0,s=Math.imul(z,J),i=i+Math.imul(L,$)|0,r=r+Math.imul(L,Q)|0,r=r+Math.imul(D,$)|0,s=s+Math.imul(D,Q)|0,i=i+Math.imul(k,X)|0,r=r+Math.imul(k,ee)|0,r=r+Math.imul(T,X)|0,s=s+Math.imul(T,ee)|0,i=i+Math.imul(R,ne)|0,r=r+Math.imul(R,ie)|0,r=r+Math.imul(N,ne)|0,s=s+Math.imul(N,ie)|0,i=i+Math.imul(I,se)|0,r=r+Math.imul(I,oe)|0,r=r+Math.imul(S,se)|0,s=s+Math.imul(S,oe)|0,i=i+Math.imul(E,ce)|0,r=r+Math.imul(E,de)|0,r=r+Math.imul(x,ce)|0,s=s+Math.imul(x,de)|0,i=i+Math.imul(v,he)|0,r=r+Math.imul(v,fe)|0,r=r+Math.imul(_,he)|0,s=s+Math.imul(_,fe)|0,i=i+Math.imul(b,pe)|0,r=r+Math.imul(b,ge)|0,r=r+Math.imul(w,pe)|0,s=s+Math.imul(w,ge)|0;var Se=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(B,$),r=Math.imul(B,Q),r=r+Math.imul(z,$)|0,s=Math.imul(z,Q),i=i+Math.imul(L,X)|0,r=r+Math.imul(L,ee)|0,r=r+Math.imul(D,X)|0,s=s+Math.imul(D,ee)|0,i=i+Math.imul(k,ne)|0,r=r+Math.imul(k,ie)|0,r=r+Math.imul(T,ne)|0,s=s+Math.imul(T,ie)|0,i=i+Math.imul(R,se)|0,r=r+Math.imul(R,oe)|0,r=r+Math.imul(N,se)|0,s=s+Math.imul(N,oe)|0,i=i+Math.imul(I,ce)|0,r=r+Math.imul(I,de)|0,r=r+Math.imul(S,ce)|0,s=s+Math.imul(S,de)|0,i=i+Math.imul(E,he)|0,r=r+Math.imul(E,fe)|0,r=r+Math.imul(x,he)|0,s=s+Math.imul(x,fe)|0,i=i+Math.imul(v,pe)|0,r=r+Math.imul(v,ge)|0,r=r+Math.imul(_,pe)|0,s=s+Math.imul(_,ge)|0;var Ce=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(B,X),r=Math.imul(B,ee),r=r+Math.imul(z,X)|0,s=Math.imul(z,ee),i=i+Math.imul(L,ne)|0,r=r+Math.imul(L,ie)|0,r=r+Math.imul(D,ne)|0,s=s+Math.imul(D,ie)|0,i=i+Math.imul(k,se)|0,r=r+Math.imul(k,oe)|0,r=r+Math.imul(T,se)|0,s=s+Math.imul(T,oe)|0,i=i+Math.imul(R,ce)|0,r=r+Math.imul(R,de)|0,r=r+Math.imul(N,ce)|0,s=s+Math.imul(N,de)|0,i=i+Math.imul(I,he)|0,r=r+Math.imul(I,fe)|0,r=r+Math.imul(S,he)|0,s=s+Math.imul(S,fe)|0,i=i+Math.imul(E,pe)|0,r=r+Math.imul(E,ge)|0,r=r+Math.imul(x,pe)|0,s=s+Math.imul(x,ge)|0;var Re=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(B,ne),r=Math.imul(B,ie),r=r+Math.imul(z,ne)|0,s=Math.imul(z,ie),i=i+Math.imul(L,se)|0,r=r+Math.imul(L,oe)|0,r=r+Math.imul(D,se)|0,s=s+Math.imul(D,oe)|0,i=i+Math.imul(k,ce)|0,r=r+Math.imul(k,de)|0,r=r+Math.imul(T,ce)|0,s=s+Math.imul(T,de)|0,i=i+Math.imul(R,he)|0,r=r+Math.imul(R,fe)|0,r=r+Math.imul(N,he)|0,s=s+Math.imul(N,fe)|0,i=i+Math.imul(I,pe)|0,r=r+Math.imul(I,ge)|0,r=r+Math.imul(S,pe)|0,s=s+Math.imul(S,ge)|0;var Ne=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(B,se),r=Math.imul(B,oe),r=r+Math.imul(z,se)|0,s=Math.imul(z,oe),i=i+Math.imul(L,ce)|0,r=r+Math.imul(L,de)|0,r=r+Math.imul(D,ce)|0,s=s+Math.imul(D,de)|0,i=i+Math.imul(k,he)|0,r=r+Math.imul(k,fe)|0,r=r+Math.imul(T,he)|0,s=s+Math.imul(T,fe)|0,i=i+Math.imul(R,pe)|0,r=r+Math.imul(R,ge)|0,r=r+Math.imul(N,pe)|0,s=s+Math.imul(N,ge)|0;var Pe=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(B,ce),r=Math.imul(B,de),r=r+Math.imul(z,ce)|0,s=Math.imul(z,de),i=i+Math.imul(L,he)|0,r=r+Math.imul(L,fe)|0,r=r+Math.imul(D,he)|0,s=s+Math.imul(D,fe)|0,i=i+Math.imul(k,pe)|0,r=r+Math.imul(k,ge)|0,r=r+Math.imul(T,pe)|0,s=s+Math.imul(T,ge)|0;var ke=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(B,he),r=Math.imul(B,fe),r=r+Math.imul(z,he)|0,s=Math.imul(z,fe),i=i+Math.imul(L,pe)|0,r=r+Math.imul(L,ge)|0,r=r+Math.imul(D,pe)|0,s=s+Math.imul(D,ge)|0;var Te=(d+i|0)+((8191&r)<<13)|0;d=(s+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(B,pe),r=Math.imul(B,ge),r=r+Math.imul(z,pe)|0,s=Math.imul(z,ge);var Oe=(d+i|0)+((8191&r)<<13)|0;return d=(s+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,c[0]=me,c[1]=be,c[2]=we,c[3]=ye,c[4]=ve,c[5]=_e,c[6]=Ae,c[7]=Ee,c[8]=xe,c[9]=Me,c[10]=Ie,c[11]=Se,c[12]=Ce,c[13]=Re,c[14]=Ne,c[15]=Pe,c[16]=ke,c[17]=Te,c[18]=Oe,0!==d&&(c[19]=d,n.length++),n};function m(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,s=0;s<n.length-1;s++){var o=r;r=0;for(var a=67108863&i,c=Math.min(s,t.length-1),d=Math.max(0,s-e.length+1);d<=c;d++){var l=s-d,h=0|e.words[l],f=0|t.words[d],u=h*f,p=67108863&u;o=o+(u/67108864|0)|0,p=p+a|0,a=67108863&p,o=o+(p>>>26)|0,r+=o>>>26,o&=67108863}n.words[s]=a,i=o,o=r}return 0!==i?n.words[s]=i:n.length--,n.strip()}function b(e,t,n){var i=new w;return i.mulp(e,t,n)}function w(e,t){this.x=e,this.y=t}Math.imul||(g=p),s.prototype.mulTo=function(e,t){var n,i=this.length+e.length;return n=10===this.length&&10===e.length?g(this,e,t):i<63?p(this,e,t):i<1024?m(this,e,t):b(this,e,t),n},w.prototype.makeRBT=function(e){for(var t=new Array(e),n=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},w.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,r=0;r<t;r++)i|=(1&e)<<t-r-1,e>>=1;return i},w.prototype.permute=function(e,t,n,i,r,s){for(var o=0;o<s;o++)i[o]=t[e[o]],r[o]=n[e[o]]},w.prototype.transform=function(e,t,n,i,r,s){this.permute(s,e,t,n,i,r);for(var o=1;o<r;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),d=Math.sin(2*Math.PI/a),l=0;l<r;l+=a)for(var h=c,f=d,u=0;u<o;u++){var p=n[l+u],g=i[l+u],m=n[l+u+o],b=i[l+u+o],w=h*m-f*b;b=h*b+f*m,m=w,n[l+u]=p+m,i[l+u]=g+b,n[l+u+o]=p-m,i[l+u+o]=g-b,u!==a&&(w=c*h-d*f,f=c*f+d*h,h=w)}},w.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},w.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=e[i];e[i]=e[n-i-1],e[n-i-1]=r,r=t[i],t[i]=-t[n-i-1],t[n-i-1]=-r}},w.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var r=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&r,n=r<67108864?0:r/67108864|0}return e},w.prototype.convert13b=function(e,t,n,r){for(var s=0,o=0;o<t;o++)s+=0|e[o],n[2*o]=8191&s,s>>>=13,n[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<r;++o)n[o]=0;i(0===s),i(0===(-8192&s))},w.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},w.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(i),s=this.stub(i),o=new Array(i),a=new Array(i),c=new Array(i),d=new Array(i),l=new Array(i),h=new Array(i),f=n.words;f.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,d,i),this.transform(o,s,a,c,i,r),this.transform(d,s,l,h,i,r);for(var u=0;u<i;u++){var p=a[u]*l[u]-c[u]*h[u];c[u]=a[u]*h[u]+c[u]*l[u],a[u]=p}return this.conjugate(a,c,i),this.transform(a,c,f,s,i,r),this.conjugate(f,s,i),this.normalize13b(f,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),b(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){i("number"===typeof e),i(e<67108864);for(var t=0,n=0;n<this.length;n++){var r=(0|this.words[n])*e,s=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=s>>>26,this.words[n]=67108863&s}return 0!==t&&(this.words[n]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=u(e);if(0===t.length)return new s(1);for(var n=this,i=0;i<t.length;i++,n=n.sqr())if(0!==t[i])break;if(++i<t.length)for(var r=n.sqr();i<t.length;i++,r=r.sqr())0!==t[i]&&(n=n.mul(r));return n},s.prototype.iushln=function(e){i("number"===typeof e&&e>=0);var t,n=e%26,r=(e-n)/26,s=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<n;this.words[t]=c|o,o=a>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){var r;i("number"===typeof e&&e>=0),r=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=n;if(r-=o,r=Math.max(0,r),c){for(var d=0;d<o;d++)c.words[d]=this.words[d];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,d=0;d<this.length;d++)this.words[d]=this.words[d+o];else this.words[0]=0,this.length=1;var l=0;for(d=this.length-1;d>=0&&(0!==l||d>=r);d--){var h=0|this.words[d];this.words[d]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"===typeof e&&e>=0);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return!1;var s=this.words[n];return!!(s&r)},s.prototype.imaskn=function(e){i("number"===typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return i("number"===typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"===typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var r,s,o=e.length+n;this._expand(o);var a=0;for(r=0;r<e.length;r++){s=(0|this.words[r+n])+a;var c=(0|e.words[r])*t;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[r+n]=67108863&s}for(;r<this.length-n;r++)s=(0|this.words[r+n])+a,a=s>>26,this.words[r+n]=67108863&s;if(0===a)return this.strip();for(i(-1===a),a=0,r=0;r<this.length;r++)s=-(0|this.words[r])+a,a=s>>26,this.words[r]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var n=this.length-e.length,i=this.clone(),r=e,o=0|r.words[r.length-1],a=this._countBits(o);n=26-a,0!==n&&(r=r.ushln(n),i.iushln(n),o=0|r.words[r.length-1]);var c,d=i.length-r.length;if("mod"!==t){c=new s(null),c.length=d+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var h=i.clone()._ishlnsubmul(r,1,d);0===h.negative&&(i=h,c&&(c.words[d]=1));for(var f=d-1;f>=0;f--){var u=67108864*(0|i.words[r.length+f])+(0|i.words[r.length+f-1]);u=Math.min(u/o|0,67108863),i._ishlnsubmul(r,u,f);while(0!==i.negative)u--,i.negative=0,i._ishlnsubmul(r,1,f),i.isZero()||(i.negative^=1);c&&(c.words[f]=u)}return c&&c.strip(),i.strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:c||null,mod:i}},s.prototype.divmod=function(e,t,n){return i(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(r=a.div.neg()),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:r,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(r=a.div.neg()),{div:r,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),s=n.cmp(i);return s<0||1===r&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){i(e<=67108863);for(var t=(1<<26)%e,n=0,r=this.length-1;r>=0;r--)n=(t*n+(0|this.words[r]))%e;return n},s.prototype.idivn=function(e){i(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var r=(0|this.words[n])+67108864*t;this.words[n]=r/e|0,t=r%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();var r=new s(1),o=new s(0),a=new s(0),c=new s(1),d=0;while(t.isEven()&&n.isEven())t.iushrn(1),n.iushrn(1),++d;var l=n.clone(),h=t.clone();while(!t.isZero()){for(var f=0,u=1;0===(t.words[0]&u)&&f<26;++f,u<<=1);if(f>0){t.iushrn(f);while(f-- >0)(r.isOdd()||o.isOdd())&&(r.iadd(l),o.isub(h)),r.iushrn(1),o.iushrn(1)}for(var p=0,g=1;0===(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0){n.iushrn(p);while(p-- >0)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1)}t.cmp(n)>=0?(t.isub(n),r.isub(a),o.isub(c)):(n.isub(t),a.isub(r),c.isub(o))}return{a:a,b:c,gcd:n.iushln(d)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();var r,o=new s(1),a=new s(0),c=n.clone();while(t.cmpn(1)>0&&n.cmpn(1)>0){for(var d=0,l=1;0===(t.words[0]&l)&&d<26;++d,l<<=1);if(d>0){t.iushrn(d);while(d-- >0)o.isOdd()&&o.iadd(c),o.iushrn(1)}for(var h=0,f=1;0===(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0){n.iushrn(h);while(h-- >0)a.isOdd()&&a.iadd(c),a.iushrn(1)}t.cmp(n)>=0?(t.isub(n),o.isub(a)):(n.isub(t),a.isub(o))}return r=0===t.cmpn(1)?o:a,r.cmpn(0)<0&&r.iadd(e),r},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);do{while(t.isEven())t.iushrn(1);while(n.isEven())n.iushrn(1);var r=t.cmp(n);if(r<0){var s=t;t=n,n=s}else if(0===r||0===n.cmpn(1))break;t.isub(n)}while(1);return n.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"===typeof e);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var s=r,o=n;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),i(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){i<r?t=-1:i>r&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new M(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(e){if("string"===typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){M.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),t=n.bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},r(_,v),_.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),r=0;r<i;r++)t.words[r]=e.words[r];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&n,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(o&n)<<4|s>>>22,s=o}s>>>=22,e.words[r-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(A,v),r(E,v),r(x,v),x.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new A;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new x}return y[e]=t,t},M.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},M.prototype._verify2=function(e,t){i(0===(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},M.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},M.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},M.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},M.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},M.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},M.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},M.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},M.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},M.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},M.prototype.isqr=function(e){return this.imul(e,e.clone())},M.prototype.sqr=function(e){return this.mul(e,e)},M.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2===1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}var r=this.m.subn(1),o=0;while(!r.isZero()&&0===r.andln(1))o++,r.iushrn(1);i(!r.isZero());var a=new s(1).toRed(this),c=a.redNeg(),d=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new s(2*l*l).toRed(this);while(0!==this.pow(l,d).cmp(c))l.redIAdd(c);var h=this.pow(l,r),f=this.pow(e,r.addn(1).iushrn(1)),u=this.pow(e,r),p=o;while(0!==u.cmp(a)){for(var g=u,m=0;0!==g.cmp(a);m++)g=g.redSqr();i(m<p);var b=this.pow(h,new s(1).iushln(p-m-1));f=f.redMul(b),h=b.redSqr(),u=u.redMul(h),p=m}return f},M.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},M.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=4,i=new Array(1<<n);i[0]=new s(1).toRed(this),i[1]=e;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],e);var o=i[0],a=0,c=0,d=t.bitLength()%26;for(0===d&&(d=26),r=t.length-1;r>=0;r--){for(var l=t.words[r],h=d-1;h>=0;h--){var f=l>>h&1;o!==i[0]&&(o=this.sqr(o)),0!==f||0!==a?(a<<=1,a|=f,c++,(c===n||0===r&&0===h)&&(o=this.mul(o,i[a]),c=0,a=0)):c=0}d=26}return o},M.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},M.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new I(e)},r(I,M),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},I.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}}(e,this)},79368:function(){},1636:function(e){"use strict";e.exports={rE:"6.6.1"}}}]);
//# sourceMappingURL=995.3bf3b436.js.map